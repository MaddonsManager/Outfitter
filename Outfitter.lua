LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0gT3V0Zml0dGVyIENvcHlyaWdodCAyMDA5LCAyMDEwIEpvaG4gU3RlcGhlbiwgd29iYmxld29ya3MuY29tDQotLSBBbGwgcmlnaHRzIHJlc2VydmVkLCB1bmF1dGhvcml6ZWQgcmVkaXN0cmlidXRpb24gaXMgcHJvaGliaXRlZA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpPdXRmaXR0ZXIuRGVidWcgPQ0Kew0KCUludmVudG9yeUNhY2hlID0gZmFsc2UsDQoJRXF1aXBtZW50Q2hhbmdlcyA9IGZhbHNlLA0KCUVxdWlwbWVudE1hbmFnZXIgPSBmYWxzZSwNCglOZXdJdGVtcyA9IGZhbHNlLA0KCVRlbXBvcmFyeUl0ZW1zID0gZmFsc2UsDQoJT3B0aW1pemUgPSBmYWxzZSwNCn0NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KT3V0Zml0dGVyLkNyZWRpdFBsYXllcnNCeVJlYWxtID0NCi0tDQotLSAwIEZyaWVuZA0KLS0gMSBUZXN0ZXIgb3IgZGV2ZWxvcGVyIChidWdmaXhlcywgZW5oYW5jZW1lbnRzLCBldGMuKQ0KLS0gMiBMb2NhbGl6ZXINCi0tIDMgRG9ub3INCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCnsNCglbT3V0Zml0dGVyLmNHZXJtYW5Mb2NhbGl6YXRpb25dID0NCgl7DQoJCVsiQW5pIl0gPSAyLA0KCQlbIlpva3J5bSJdID0gMiwNCgkJWyJEZXNzYSJdID0gMiwNCgl9LA0KCVtPdXRmaXR0ZXIuY0NoaW5lc2VMb2NhbGl6YXRpb25dID0NCgl7DQoJCVsiQW5keUFza2EiXSA9IDIsDQoJCVsieGluZ2R2ZCJdID0gMiwNCgl9LA0KCVtPdXRmaXR0ZXIuY0ZyZW5jaExvY2FsaXphdGlvbl0gPQ0KCXsNCgkJWyJKdWxseWUiXSA9IDIsDQoJCVsiUXVldHphY28iXSA9IDIsDQoJCVsiRWtodXJyIl0gPSAyLA0KCQlbIk5lZ3dlIl0gPSAyLA0KCX0sDQoJW091dGZpdHRlci5jU3BhbmlzaExvY2FsaXphdGlvbl0gPQ0KCXsNCgkJWyJNYXJ1dGFrIl0gPSAyLA0KCQlbIk1hcm9zdGgiXSA9IDIsDQoJfSwNCglbT3V0Zml0dGVyLmNSdXNzaWFuTG9jYWxpemF0aW9uXSA9DQoJew0KCQlbIkRlbGlrYSJdID0gMiwNCgl9LA0KCVtPdXRmaXR0ZXIuY0tvcmVhbkxvY2FsaXphdGlvbl0gPQ0KCXsNCgkJWyJVbmtub3duIl0gPSAyLA0KCX0sDQoJW091dGZpdHRlci5jQ29udHJpYnV0aW5nRGV2ZWxvcGVyXSA9DQoJew0KCQlbIkRyaWR6dCJdID0gMSwNCgkJWyJCcnVjZSBRdWludG9uIl0gPSAxLA0KCQlbIkthbF9aYWthdGgxMyJdID0gMSwNCgkJWyJTbXVyZnkiXSA9IDEsDQoJCVsiWE1pbmlvblgiXSA9IDEsDQoJCVsiRHVzc2FuZGVyIl0gPSAxLA0KCQlbIkVjaG9icmF2byJdID0gMSwNCgkJWyJNYWNHcmVnb3IiXSA9IDEsDQoJCVsiTGFvVHNldSJdID0gMSwNCgl9LA0KCVsiVGVzdGVyIl0gPQ0KCXsNCgkJWyJXaGlzaGFubiJdID0gMSwNCgkJWyJIdW50ZXJaIl0gPSAxLA0KCQlbImRvY3RoaXMiXSA9IDEsDQoJCVsiSXJkeCJdID0gMSwNCgkJWyJUaWdhRklOIl0gPSAxLA0KCQlbImljZWVhZ2xlIl0gPSAxLA0KCQlbIkRlbnJheCJdID0gMSwNCgkJWyJyYXNtb2UiXSA9IDEsDQoJCVsiS2F0bGVmaXlhIl0gPSAxLA0KCQlbImd0bXNlY2UiXSA9IDEsDQoJCVsiTWlsaXRpcyJdID0gMSwNCgkJWyJDYXNhcmQiXSA9IDEsDQoJCVsic2FsdG9yaW8iXSA9IDEsDQoJCVsiZWx1c2lmIl0gPSAxLA0KCQlbIkRhbm9QRFgiXSA9IDEsDQoJfSwNCglbIkFsdGVyYWMgTW91bnRhaW5zIl0gPQ0KCXsNCgkJWyJBc2dlaXJyXG48VGhlIFN0b25lIENvdW5jaWw+Il0gPSAzLA0KCX0sDQoJWyJBbWFuJ1RodWwiXSA9DQoJew0KCQlbIkJsZXNzbWllXG48Q2hhaXJtYW4gb2YgdGhlIEhvcmRlPiJdID0gMywNCgkJWyJaYW5vcm95XG48VGhlIE1pZ2h0eSBGZXc+Il0gPSAzLA0KCX0sDQoJWyJBbnRvbmlkYXMiXSA9DQoJew0KCQlbIkNvbGluYVxuPERydW5rZW4gTW9ua2V5IEJyaWdhZGU+Il0gPSAzLA0KCX0sDQoJWyJBbnZpbG1hciJdID0NCgl7DQoJCVsiRHJvb2R3cm15Y2FyIl0gPSAzLA0KCX0sDQoJWyJBemdhbG9yZSJdID0NCgl7DQoJCVsiRGFua3Jpc1xuPENhbGlndWxhJ3MgUGxlYXN1cmVzPiJdID0gMywNCgl9LA0KCVsiQmxhY2t3YXRlciBSYWlkZXJzIl0gPQ0KCXsNCgkJWyJNYXVtYXVcbjxObyBRdWFydGVyPiJdID0gMywNCgl9LA0KCVsiQnJvbnplYmVhcmQiXSA9DQoJew0KCQlbIkppbWluaW1vbmthXG48R28gUmluIE5vIFNobz4iXSA9IDMsDQoJfSwNCglbIkRhbGFyYW4iXSA9DQoJew0KCQlbIlkgQ1xuPEJsdXJyZWQgUmVhbGl0eT4iXSA9IDMsDQoJfSwNCglbIkRyYWVub3IiXSA9DQoJew0KCQlbIkVtbWVyYWxkXG48QWRlcHQ+Il0gPSAzLA0KCX0sIA0KCVsiRHJha2EiXSA9DQoJew0KCQlbIk5hZ2VtXG48TG9jaCBNb2RhbiBZYWNodCBDbHViIl0gPSAzLA0KCX0sDQoJWyJEdXJvdGFyIl0gPQ0KCXsNCgkJWyJIYWd1ZW4iXSA9IDMsDQoJfSwNCglHaG9zdGxhbmRzID0NCgl7DQoJCU5vdW5jaG9rID0gMywNCgl9LA0KCVsiR25vbWVyZWdhbiJdID0NCgl7DQoJCVsiQ2FsaW5kXG48U3dvcmRzIG9mIHRoZSBBbGxpYW5jZT4iXSA9IDMsDQoJfSwNCglbIkp1YmVpJ1Rob3MiXSA9DQoJew0KCQlbIlRob3Jlc2VuXG48VmVyYj4iXSA9IDMsDQoJCVsiVGhvcmdpbHMiXSA9IDMsDQoJfSwNCglbIkthcmdhdGgiXSA9DQoJew0KCQlbIkxlYXJhIl0gPSAzLA0KCQlbIkJ1cm5hcm9uXG5MaWdhIG9mIEZhbGl2aWVucyJdID0gMywNCgl9LA0KCVsiS2hheiBNb2RhbiJdID0NCgl7DQoJCVsiRmFpemFsIl0gPSAzLA0KCX0sDQoJWyJLaGF6J2dvcm90aCJdID0NCgl7DQoJCVsiWGVudHJpY1xuPEN1bHQgb2YgdGhlIE51enpsZWQgTmFyaz4iXSA9IDMsDQoJfSwNCglbIkt1bCdUaXJhcyJdID0NCgl7DQoJCVsiVGhhcmNhIl0gPSAzLA0KCX0sDQoJWyJMaWdodGJyaW5nZXIiXSA9DQoJew0KCQlbIlRlbGRyYVxuPFRoZSBUcnVzdD4iXSA9IDMsDQoJfSwNCglbIkxsYW5lIl0gPQ0KCXsNCgkJWyJDaGlyaWx5Il0gPSAzLA0KCX0sDQoJWyJNYWxmdXJpb24iXSA9DQoJew0KCQlbIlpldGFjXG48SG9sZCBGYXN0PiJdID0gMywNCgl9LA0KCVsiTW9vbmdsYWRlIl0gPQ0KCXsNCgkJWyJDaWV2Il0gPSAzLA0KCX0sDQoJWyJSZXh4YXIiXSA9DQoJew0KCQlbIkJsaXR6aVxuPEFic29sdXRpb24+Il0gPSAzLA0KCX0sDQoJWyJTY2lsbGEiXSA9DQoJew0KCQlbIkJsYW1cbjxTeW5kaWNhdGU+Il0gPSAzLA0KCX0sDQoJWyJTZW50aW5lbHMiXSA9DQoJew0KCQlbIkRoYWt0YXIiXSA9IDMsDQoJfSwNCglbIlNreXdhbGwiXSA9DQoJew0KCQlbIlZhbGVyeWEiXSA9IDMsDQoJfSwNCglbIlN1cmFtYXIiXSA9DQoJew0KCQlbIlplbmRleCJdID0gMywNCgkJWyJLbGF4b25cbjxGb3JiaWRkZW4gUGxhbmV0Il0gPSAzLA0KCX0sDQoJWyJUZXJyb2trYXIiXSA9DQoJew0KCQlbIkV4dHJvcGlhbnVzXG48VGhlIEZpcnN0IEltbW9ydGFscz4iXSA9IDMsDQoJfSwNCglbIlRob3JpdW0gQnJvdGhlcmhvb2QiXSA9DQoJew0KCQlbIlBpdGNoaWZ1c1xuPEJsb29kZm9yZ2VkPiJdID0gMCwNCgkJVGlhZSA9IDAsDQoJCUFpcm1pZCA9IDAsDQoJCVBpc3RhY2hpbyA9IDAsDQoJCUZpenpsZWJhbmcgPSAwLA0KCQlbT3V0Zml0dGVyLmNHdWlsZENyZWRpdEZvcm1hdDpmb3JtYXQoIkJsb29kZm9yZ2VkIildID0gMSwNCgl9LA0KCVsiWXNvbmRyZSJdID0NCgl7DQoJCVsiU3RlaWtmcml0Il0gPSAzLA0KCX0sDQoJWyJaYW5nYXJtYXJzaCJdID0NCgl7DQoJCVsiRmVsaWFueSJdID0gMywNCgl9LA0KfQ0KDQotLSBUaGUgZm9sbG93aW5nIHBsYXllcnMgYXJlIGd1aWx0eSBvZiBkb3VjaGViYWdnZXJ5IGFuZA0KLS0gSSByZWZ1c2UgdG8gc3VwcG9ydCB0aGVpciBnYW1lcGxheSBpbiBteSBhZGRvbnMuICBUaGV5DQotLSBoYXZlIGVpdGhlciBkZW1vbnN0cmF0ZWQgYSBjb21wbGV0ZSBkaXNyZWdhcmQgZm9yIG90aGVyDQotLSBwbGF5ZXJzLCBlbmdhZ2VkIGluIHJhY2lzdCBvciBoYXRlZnVsIHB1YmxpYyBzcGVlY2gsDQotLSBvciBoYXZlIHB1YmxpY2x5IHN0YXRlZCBob3cgbGl0dGxlIHRoZXkgdmFsdWUgdGhlIGZyZWUNCi0tIGFuZCBnZW5lcm91cyB3b3JrIG9mIGFkZG9uIGF1dGhvcnMuICBJbiBhbnkgY2FzZSwgdGhleQ0KLS0gY2FuIGRvIHdpdGhvdXQgbXkgYWRkb25zDQoNCk91dGZpdHRlci5Eb3VjaGViYWdzID0NCnsNCglbIlRob3JpdW0gQnJvdGhlcmhvb2QiXSA9DQoJew0KCQlWaXUgPSB0cnVlLA0KCQlDcmlza2EgPSB0cnVlLA0KCQlEb2xuaXMgPSB0cnVlLA0KCQlLYXJhbiA9IHRydWUsDQoJCUFyZ29zID0gdHJ1ZSwNCgkJUHVsZGlmcmluID0gdHJ1ZSwNCgkJQ2FyZWJlYXJzbG9sID0gdHJ1ZSwNCgkJWyJO+mtlIl0gPSB0cnVlLA0KCQlUaXp6b2tlID0gdHJ1ZSwgLS0gImlmIGkgaGVhciBmcm9tIGEgR00gZGlyZWN0bHkgdGhhdCB3aGF0IGkgYW0gZG9pbmcgaXMgYWdhaW5zdCB0aGUgcnVsZXMsIHRoZW4gaSB3b3VsZCBzdG9wIg0KCQlBemFycmEgPSB0cnVlLCAtLSBqdXN0IGFuIGFzc2hvbGUNCgkJUmFpbmJvd2JsdXNoID0gdHJ1ZSwgLS0gd2Fsa2luZyBvdmVyIG90aGVyIHBsYXllcidzIGJvYmJlcnMgdG8gaGVscCBhIGZyaWVuZCB3aW4gdGhlIGZpc2hpbmcgdG91cm5hbWVudD8gc2VyaW91c2x5PyBkb3VjaGViYWcuDQoJCU1hdmVzdGUgPSB0cnVlLA0KCQlBdG1vc3BoZWFyID0gdHJ1ZSwgLS0gIkZ1Y2sgdGhlIHByZXNpZGVudC4gU29tZW9uZSBuZWVkcyB0byBzaG9vdCB0aGF0IGZ1Y2sgaW4gdGhlIGZhY2UiIG9ybHk/IERvdWNoZS4gIEhvcGUgdGhlIFNlY3JldCBTZXJ2aWNlIG9yIEZCSSBmaW5kcyB5b3UuDQoJfSwNCglbIlRlcmVuYXMiXSA9DQoJew0KCQlNdWxhdXQgPSB0cnVlLA0KCX0sDQoJWyJJbGxpZGFuIl0gPQ0KCXsNCgkJTW9vZiA9IHRydWUsIC0tICJJJ20gc3VyZSB5b3UgY2FuIGdldCBhIHNpbWlsYXIgYWRkb24gZm9yIGZyZWUuIFlvdSByZWFsbHkgbXVzdCBiZSBhIHRvb2wgdG8gYnV5IGFuIGFkZG9uLiINCgl9LA0KCVsiRWxkcmUnVGhhbGFzIl0gPQ0KCXsNCgkJUHJpbnRlciA9IHRydWUsIC0tIFBlcnNvbmFsIGFuZCB1bndhcnJhbnRlZCBhdHRhY2sgb24gYSBjb21tdW5pdHkgbWVtYmVyIEkgYWRtaXJlDQoJfSwNCglbIkhha2thciJdID0NCgl7DQoJCUZvcmNvcmUgPSB0cnVlLCAtLSBpZGlvdA0KCX0sDQp9DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KZ091dGZpdHRlcl9TZXR0aW5ncyA9IG5pbA0KZ091dGZpdHRlcl9HbG9iYWxTZXR0aW5ncyA9IG5pbA0KDQpPdXRmaXR0ZXIuSW5pdGlhbGl6ZWQgPSBmYWxzZQ0KT3V0Zml0dGVyLlN1c3BlbmRlZCA9IGZhbHNlDQoJDQotLSBPdXRmaXQgc3RhdGUNCgkNCk91dGZpdHRlci5PdXRmaXRTdGFjayA9IHt9DQpPdXRmaXR0ZXIuT3V0Zml0U3RhY2suT3V0Zml0cyA9IHt9DQoNCk91dGZpdHRlci5DdXJyZW50T3V0Zml0ID0gbmlsDQpPdXRmaXR0ZXIuRXhwZWN0ZWRPdXRmaXQgPSBuaWwNCk91dGZpdHRlci5DdXJyZW50SW52ZW50b3J5T3V0Zml0ID0gbmlsDQoNCk91dGZpdHRlci5FcXVpcHBlZE5lZWRzVXBkYXRlID0gZmFsc2UNCk91dGZpdHRlci5MYXN0RXF1aXBtZW50VXBkYXRlVGltZSA9IDANCg0KT3V0Zml0dGVyLlNwZWNpYWxTdGF0ZSA9IHt9IC0tIFRoZSBjdXJyZW50IHN0YXRlIGFzIGRldGVybWluZWQgYnkgdGhlIGVuZ2luZSwgbm90IG5lY2Vzc2FyaWx5IHRoZSBzdGF0ZSBvZiB0aGUgb3V0Zml0IGl0c2VsZg0KDQotLSBQbGF5ZXIgc3RhdGUNCg0KT3V0Zml0dGVyLkN1cnJlbnRab25lID0gIiINCk91dGZpdHRlci5DdXJyZW50Wm9uZUlEcyA9IHt9DQoNCk91dGZpdHRlci5JbkNvbWJhdCA9IGZhbHNlDQpPdXRmaXR0ZXIuTWF5YmVJbkNvbWJhdCA9IGZhbHNlDQoNCk91dGZpdHRlci5Jc0RlYWQgPSBmYWxzZQ0KT3V0Zml0dGVyLklzRmVpZ25pbmcgPSBmYWxzZQ0KDQpPdXRmaXR0ZXIuQmFua0ZyYW1lSXNPcGVuID0gZmFsc2UNCg0KT3V0Zml0dGVyLkhhc0hXRXZlbnQgPSBmYWxzZQ0KDQpPdXRmaXR0ZXIuU2V0dGluZ1R5cGVJbmZvID0NCnsNCglzdHJpbmcgICAgICA9IHtEZWZhdWx0ID0gIiIsICAgIEZyYW1lVHlwZSA9ICJFZGl0Qm94IiAgICAgICAgICB9LA0KCW51bWJlciAgICAgID0ge0RlZmF1bHQgPSAwLCAgICAgRnJhbWVUeXBlID0gIkVkaXRCb3giICAgICAgICAgIH0sDQoJc3RyaW5ndGFibGUgPSB7RGVmYXVsdCA9IHt9LCAgICBGcmFtZVR5cGUgPSAiU2Nyb2xsYWJsZUVkaXRCb3gifSwNCgl6b25lbGlzdCAgICA9IHtEZWZhdWx0ID0ge30sICAgIEZyYW1lVHlwZSA9ICJab25lTGlzdEVkaXRCb3giICB9LA0KCWJvb2xlYW4gICAgID0ge0RlZmF1bHQgPSBmYWxzZSwgRnJhbWVUeXBlID0gIkNoZWNrYm94IiAgICAgICAgIH0sDQp9DQoNCk91dGZpdHRlci5TdHlsZSA9IHt9DQoNCk91dGZpdHRlci5TdHlsZS5CdXR0b25CYXIgPQ0Kew0KCUJ1dHRvbkhlaWdodCA9IDM3LA0KCUJ1dHRvbldpZHRoID0gMzcsDQoJDQoJQmFja2dyb3VuZFRleHR1cmVIZWlnaHQgPSAxMjgsDQoJQmFja2dyb3VuZFRleHR1cmVXaWR0aCA9IDEyOCwNCgkNCglCYWNrZ3JvdW5kV2lkdGggPSA0MiwNCglCYWNrZ3JvdW5kV2lkdGgwID0gMjYsDQoJQmFja2dyb3VuZFdpZHRoTiA9IDI3LA0KCQ0KCUJhY2tncm91bmRIZWlnaHQgPSA0MSwNCglCYWNrZ3JvdW5kSGVpZ2h0MCA9IDI4LA0KCUJhY2tncm91bmRIZWlnaHROID0gMjUsDQp9DQoNCi0tIFVJDQoNCk91dGZpdHRlci5DdXJyZW50UGFuZWwgPSAwDQpPdXRmaXR0ZXIuQ29sbGFwc2VkID0ge30NCk91dGZpdHRlci5TZWxlY3RlZE91dGZpdCA9IG5pbA0KT3V0Zml0dGVyLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZQ0KT3V0Zml0dGVyLk91dGZpdEluZm9DYWNoZSA9IHt9DQoNCk91dGZpdHRlci5NYXhTaW1wbGVUaXRsZXMgPSAxMA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6Rm9ybWF0SXRlbUxpc3QocExpc3QpDQoJbG9jYWwgdk51bUl0ZW1zID0gI3BMaXN0DQoJDQoJaWYgdk51bUl0ZW1zID09IDAgdGhlbg0KCQlyZXR1cm4gIiINCgllbHNlaWYgdk51bUl0ZW1zID09IDEgdGhlbg0KCQlyZXR1cm4gc3RyaW5nLmZvcm1hdChzZWxmLmNTaW5nbGVJdGVtRm9ybWF0LCBwTGlzdFsxXSkNCgllbHNlaWYgdk51bUl0ZW1zID09IDIgdGhlbg0KCQlyZXR1cm4gc3RyaW5nLmZvcm1hdChzZWxmLmNUd29JdGVtRm9ybWF0LCBwTGlzdFsxXSwgcExpc3RbMl0pDQoJZWxzZQ0KCQlsb2NhbCB2U3RhcnRJbmRleCwgdkVuZEluZGV4LCB2UHJlZml4LCB2UmVwZWF0LCB2U3VmZml4ID0gc3RyaW5nLmZpbmQoc2VsZi5jTXVsdGlJdGVtRm9ybWF0LCAiKC4qKXt7KC4qKX19KC4qKSIpDQoJCWxvY2FsIHZSZXN1bHQNCgkJbG9jYWwgdlBhcmFtSW5kZXggPSAxDQoJCQ0KCQlpZiB2UHJlZml4IGFuZCBzdHJpbmcuZmluZCh2UHJlZml4LCAiJSUiKSB0aGVuDQoJCQl2UmVzdWx0ID0gc3RyaW5nLmZvcm1hdCh2UHJlZml4LCBwTGlzdFsxXSkNCgkJCXZQYXJhbUluZGV4ID0gMg0KCQllbHNlDQoJCQl2UmVzdWx0ID0gdlByZWZpeCBvciAiIg0KCQllbmQNCgkJDQoJCWlmIHZSZXBlYXQgdGhlbg0KCQkJZm9yIHZJbmRleCA9IHZQYXJhbUluZGV4LCB2TnVtSXRlbXMgLSAxIGRvDQoJCQkJdlJlc3VsdCA9IHZSZXN1bHQuLnN0cmluZy5mb3JtYXQodlJlcGVhdCwgcExpc3RbdkluZGV4XSkNCgkJCWVuZA0KCQllbmQNCgkJCQ0KCQlpZiB2U3VmZml4IHRoZW4NCgkJCXZSZXN1bHQgPSB2UmVzdWx0Li5zdHJpbmcuZm9ybWF0KHZTdWZmaXgsIHBMaXN0W3ZOdW1JdGVtc10pDQoJCWVuZA0KCQkNCgkJcmV0dXJuIHZSZXN1bHQNCgllbmQNCmVuZA0KDQotLSBEZWZpbmUgZ2xvYmFsIHZhcmlhYmxlcyB0byBiZSB1c2VkIGRpcmVjdGx5IGluIHRoZSBYTUwNCi0tIGZpbGUgc2luY2UgdGhvc2UgcmVmZXJlbmNlcyBjYW4ndCBiZSBvYmplY3QgcGF0aHMNCg0KT3V0Zml0dGVyX2NUaXRsZSA9IE91dGZpdHRlci5jVGl0bGUNCk91dGZpdHRlcl9jVGl0bGVWZXJzaW9uID0gT3V0Zml0dGVyLmNUaXRsZVZlcnNpb24NCg0KT3V0Zml0dGVyX2NDcmVhdGVVc2luZ1RpdGxlID0gT3V0Zml0dGVyLmNDcmVhdGVVc2luZ1RpdGxlDQpPdXRmaXR0ZXJfY0F1dG9tYXRpb25MYWJlbCA9IE91dGZpdHRlci5jQXV0b21hdGlvbkxhYmVsDQpPdXRmaXR0ZXJfY091dGZpdHRlclRhYlRpdGxlID0gT3V0Zml0dGVyLmNPdXRmaXR0ZXJUYWJUaXRsZQ0KT3V0Zml0dGVyX2NPcHRpb25zVGFiVGl0bGUgPSBPdXRmaXR0ZXIuY09wdGlvbnNUYWJUaXRsZQ0KT3V0Zml0dGVyX2NBYm91dFRhYlRpdGxlID0gT3V0Zml0dGVyLmNBYm91dFRhYlRpdGxlDQoNCk91dGZpdHRlcl9jTmV3T3V0Zml0ID0gT3V0Zml0dGVyLmNOZXdPdXRmaXQNCk91dGZpdHRlcl9jTmFtZUFscmVhZHlVc2VkRXJyb3IgPSBPdXRmaXR0ZXIuY05hbWVBbHJlYWR5VXNlZEVycm9yDQpPdXRmaXR0ZXJfY0VuYWJsZUFsbCA9IE91dGZpdHRlci5jRW5hYmxlQWxsDQpPdXRmaXR0ZXJfY0VuYWJsZU5vbmUgPSBPdXRmaXR0ZXIuY0VuYWJsZU5vbmUNCk91dGZpdHRlcl9jT3B0aW9uc1RpdGxlID0gT3V0Zml0dGVyLmNPcHRpb25zVGl0bGUNCg0KT3V0Zml0dGVyX2NFZGl0U2NyaXB0VGl0bGUgPSBPdXRmaXR0ZXIuY0VkaXRTY3JpcHRUaXRsZQ0KT3V0Zml0dGVyX2NFZGl0U2NyaXB0RWxsaWRlID0gT3V0Zml0dGVyLmNFZGl0U2NyaXB0RWxsaWRlDQpPdXRmaXR0ZXJfY1ByZXNldFNjcmlwdCA9IE91dGZpdHRlci5jUHJlc2V0U2NyaXB0DQpPdXRmaXR0ZXJfY1NldHRpbmdzID0gT3V0Zml0dGVyLmNTZXR0aW5ncw0KT3V0Zml0dGVyX2NTb3VyY2UgPSBPdXRmaXR0ZXIuY1NvdXJjZQ0KDQpPdXRmaXR0ZXJfY0ljb25GaWx0ZXJMYWJlbCA9IE91dGZpdHRlci5jSWNvbkZpbHRlckxhYmVsDQpPdXRmaXR0ZXJfY0ljb25TZXRMYWJlbCA9IE91dGZpdHRlci5jSWNvblNldExhYmVsDQoNCi0tIFRoZXNlIGRlZmluaXRpb25zIGFyZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIHRoaXJkLXBhcnR5IGFkZG9ucw0KLS0gd2hpY2ggY2FsbCBpbnRvIE91dGZpdHRlciBkaXJlY3RseSAoT3V0Zml0dGVyRnUsIEZpc2hpbmdCdWRkeSwgQXJrSW52ZW50b3J5KQ0KLS0gSG9wZWZ1bGx5IHRoZSBhdXRob3JzIG9mIHRob3NlIGFkZG9ucyB3aWxsIGV2ZW50dWFsbHkgbWlncmF0ZSB0aGVpciBjb2RlIHRvDQotLSB1c2UgdGhlIG5ldyBmdW5jdGlvbnMgaW5zdGVhZCBzbyB0aGF0IHRoZXNlIGNhbiBldmVudHVhbGx5IGJlIGVsaW1pbmF0ZWQuDQoNCk91dGZpdHRlcl9jRmlzaGluZ1N0YXROYW1lID0gT3V0Zml0dGVyLkxpYlN0YXRMb2dpYzpHZXRTdGF0TmFtZUZyb21JRCgiRklTSElORyIpDQoNCk91dGZpdHRlcl9jQ29tcGxldGVPdXRmaXRzID0gT3V0Zml0dGVyLmNDb21wbGV0ZU91dGZpdHMNCk91dGZpdHRlcl9jQWNjZXNzb3J5T3V0Zml0cyA9IE91dGZpdHRlci5jQWNjZXNzb3J5T3V0Zml0cw0KT3V0Zml0dGVyX2NPZGRzTkVuZHNPdXRmaXRzID0gT3V0Zml0dGVyLmNPZGRzTkVuZHNPdXRmaXRzDQoNCmZ1bmN0aW9uIE91dGZpdHRlcl9PbkxvYWQoLi4uKSByZXR1cm4gT3V0Zml0dGVyOk9uTG9hZCguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX0lzSW5pdGlhbGl6ZWQoLi4uKSByZXR1cm4gT3V0Zml0dGVyOklzSW5pdGlhbGl6ZWQoLi4uKSBlbmQNCmZ1bmN0aW9uIE91dGZpdHRlcl9VcGRhdGUoLi4uKSByZXR1cm4gT3V0Zml0dGVyOlVwZGF0ZSguLi4pIGVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXJfRmluZE91dGZpdEJ5U3RhdElEKC4uLikgcmV0dXJuIE91dGZpdHRlcjpGaW5kT3V0Zml0QnlTdGF0SUQoLi4uKSBlbmQNCmZ1bmN0aW9uIE91dGZpdHRlcl9GaW5kT3V0Zml0QnlOYW1lKC4uLikgcmV0dXJuIE91dGZpdHRlcjpGaW5kT3V0Zml0QnlOYW1lKC4uLikgZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcl9HZXRDYXRlZ29yeU9yZGVyKC4uLikgcmV0dXJuIE91dGZpdHRlcjpHZXRDYXRlZ29yeU9yZGVyKC4uLikgZW5kDQpmdW5jdGlvbiBPdXRmaXR0ZXJfR2V0T3V0Zml0c0J5Q2F0ZWdvcnlJRCguLi4pIHJldHVybiBPdXRmaXR0ZXI6R2V0T3V0Zml0c0J5Q2F0ZWdvcnlJRCguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX0hhc1Zpc2libGVPdXRmaXRzKC4uLikgcmV0dXJuIE91dGZpdHRlcjpIYXNWaXNpYmxlT3V0Zml0cyguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX091dGZpdElzVmlzaWJsZSguLi4pIHJldHVybiBPdXRmaXR0ZXI6T3V0Zml0SXNWaXNpYmxlKC4uLikgZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcl9HZW5lcmF0ZVNtYXJ0T3V0Zml0KHBOYW1lLCBwU3RhdCwgcEludmVudG9yeUNhY2hlLCBwQWxsb3dFbXB0eU91dGZpdCkgcmV0dXJuIE91dGZpdHRlcjpHZW5lcmF0ZVNtYXJ0T3V0Zml0KHBOYW1lLCBwU3RhdCwgcEludmVudG9yeUNhY2hlLCBwQWxsb3dFbXB0eU91dGZpdCkgZW5kDQpmdW5jdGlvbiBPdXRmaXR0ZXJfQWRkT3V0Zml0KC4uLikgcmV0dXJuIE91dGZpdHRlcjpBZGRPdXRmaXQoLi4uKSBlbmQNCmZ1bmN0aW9uIE91dGZpdHRlcl9EZWxldGVPdXRmaXQoLi4uKSByZXR1cm4gT3V0Zml0dGVyOkRlbGV0ZU91dGZpdCguLi4pIGVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXJfV2Vhck91dGZpdChwT3V0Zml0LCBwQ2F0ZWdvcnlJRCwgcFdlYXJCZWxvd091dGZpdCkgcmV0dXJuIE91dGZpdHRlcjpXZWFyT3V0Zml0KHBPdXRmaXQpIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX1JlbW92ZU91dGZpdCguLi4pIHJldHVybiBPdXRmaXR0ZXI6UmVtb3ZlT3V0Zml0KC4uLikgZW5kDQpmdW5jdGlvbiBPdXRmaXR0ZXJfV2VhcmluZ091dGZpdCguLi4pIHJldHVybiBPdXRmaXR0ZXI6V2VhcmluZ091dGZpdCguLi4pIGVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXJfUmVnaXN0ZXJPdXRmaXRFdmVudCguLi4pIHJldHVybiBPdXRmaXR0ZXI6UmVnaXN0ZXJPdXRmaXRFdmVudCguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX1VucmVnaXN0ZXJPdXRmaXRFdmVudCguLi4pIHJldHVybiBPdXRmaXR0ZXI6VW5yZWdpc3Rlck91dGZpdEV2ZW50KC4uLikgZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcl9HZXRPdXRmaXRGcm9tTGlzdEl0ZW0oLi4uKSByZXR1cm4gT3V0Zml0dGVyOkdldE91dGZpdEZyb21MaXN0SXRlbSguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX0dldEN1cnJlbnRPdXRmaXRJbmZvKC4uLikgcmV0dXJuIE91dGZpdHRlcjpHZXRDdXJyZW50T3V0Zml0SW5mbyguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX1NldFNob3dNaW5pbWFwQnV0dG9uKC4uLikgcmV0dXJuIE91dGZpdHRlcjpTZXRTaG93TWluaW1hcEJ1dHRvbiguLi4pIGVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXJfR2V0SXRlbUluZm9Gcm9tTGluayguLi4pIHJldHVybiBPdXRmaXR0ZXI6R2V0SXRlbUluZm9Gcm9tTGluayguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyX0dldE91dGZpdHNVc2luZ0l0ZW0oLi4uKSByZXR1cm4gT3V0Zml0dGVyOkdldE91dGZpdHNVc2luZ0l0ZW0oLi4uKSBlbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVySXRlbUxpc3RfR2V0RXF1aXBwYWJsZUl0ZW1zKC4uLikgcmV0dXJuIE91dGZpdHRlcjpHZXRJbnZlbnRvcnlDYWNoZSguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVySXRlbUxpc3RfR2V0TWlzc2luZ0l0ZW1zKHBJdGVtTGlzdCwgLi4uKSByZXR1cm4gcEl0ZW1MaXN0OkdldE1pc3NpbmdJdGVtcyguLi4pIGVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuSXRlbUxpc3RfR2V0RXF1aXBwYWJsZUl0ZW1zKC4uLikgcmV0dXJuIE91dGZpdHRlcjpHZXRJbnZlbnRvcnlDYWNoZSguLi4pIGVuZA0KZnVuY3Rpb24gT3V0Zml0dGVyLkl0ZW1MaXN0X0dldE1pc3NpbmdJdGVtcyhwSXRlbUxpc3QsIC4uLikgcmV0dXJuIHBJdGVtTGlzdDpHZXRNaXNzaW5nSXRlbXMoLi4uKSBlbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyTWluaW1hcEJ1dHRvbl9JdGVtU2VsZWN0ZWQoLi4uKSByZXR1cm4gT3V0Zml0dGVyLk1pbmltYXBCdXR0b25fSXRlbVNlbGVjdGVkKC4uLikgZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpPdXRmaXRVc2VzSXRlbShwT3V0Zml0LCBwSXRlbUluZm8pIHJldHVybiBwT3V0Zml0Ok91dGZpdFVzZXNJdGVtKHBJdGVtSW5mbykgZW5kDQoNCi0tDQoNCk91dGZpdHRlci5PcmlnR2FtZVRvb2x0aXBPblNob3cgPSBuaWwNCk91dGZpdHRlci5PcmlnR2FtZVRvb2x0aXBPbkhpZGUgPSBuaWwNCg0KT3V0Zml0dGVyLmNNaW5FcXVpcG1lbnRVcGRhdGVJbnRlcnZhbCA9IDEuNQ0KDQpPdXRmaXR0ZXIuY0luaXRpYWxpemF0aW9uRXZlbnRzID0NCnsNCglbIlBMQVlFUl9FTlRFUklOR19XT1JMRCJdID0gdHJ1ZSwNCglbIkJBR19VUERBVEUiXSA9IHRydWUsDQoJWyJVTklUX0lOVkVOVE9SWV9DSEFOR0VEIl0gPSB0cnVlLA0KCVsiWk9ORV9DSEFOR0VEX05FV19BUkVBIl0gPSB0cnVlLA0KCVsiWk9ORV9DSEFOR0VEIl0gPSB0cnVlLA0KCVsiWk9ORV9DSEFOR0VEX0lORE9PUlMiXSA9IHRydWUsDQoJWyJQTEFZRVJfQUxJVkUiXSA9IHRydWUsDQp9DQoNCk91dGZpdHRlci5CQU5LRURfRk9OVF9DT0xPUiA9IHtyID0gMC4yNSwgZyA9IDAuMiwgYiA9IDEuMH0NCk91dGZpdHRlci5CQU5LRURfRk9OVF9DT0xPUl9DT0RFID0gInxjZmY0MDMzZmYiDQpPdXRmaXR0ZXIuT1VURklUX01FU1NBR0VfQ09MT1IgPSB7ciA9IDAuMiwgZyA9IDAuNzUsIGIgPSAwLjN9DQoNCk91dGZpdHRlci5jSXRlbUxpbmtGb3JtYXQgPSAifEhpdGVtOigtPyVkKyk6KC0/JWQrKTooLT8lZCspOigtPyVkKyk6KC0/JWQrKTooLT8lZCspOigtPyVkKyk6KC0/JWQrKTooLT8lZCspfGglWyhbXiVdXSopJV18aCINCg0KT3V0Zml0dGVyLmNVbmlxdWVHZW1FbmNoYW50SURzID0NCnsNCglbMjg1MF0gPSAyODUwLCAtLSBCbG9vZCBvZiBBbWJlciwgSXRlbUNvZGUgMzMxNDAsICsxMyBTcGVsbCBDcml0aWNhbCBTdHJpa2UgUmF0aW5nDQoJWzI3NDldID0gMjc0OSwgLS0gQnJpbGxpYW50IEJsYWRlc3RvbmUsIEl0ZW1Db2RlIDMzMTM5LCArMTIgSW50ZWxsZWN0DQoJWzEwNjhdID0gMTA2OCwgLS0gQ2hhcm1lZCBBbWFuaSBKZXdlbCwgSXRlbUNvZGUgMzQyNTYsICsxNSBTdGFtaW5hDQoJWzE1OTNdID0gMTU5MywgLS0gQ3JpbXNvbiBTdW4sIEl0ZW1Db2RlIDMzMTMxLCArMjQgQXR0YWNrIFBvd2VyDQoJWzM2OF0gPSAzNjgsIC0tIERlbGljYXRlIEZpcmUgUnVieSwgSXRlbUNvZGUgMzMxMzIsICsxMiBBZ2lsaXR5DQoJWzMyMTBdID0gMzIxMCwgLS0gRG9uIEp1bGlvJ3MgSGVhcnQsIEl0ZW1Db2RlIDMzMTMzDQoJWzE5NTddID0gMTk1NywgLS0gRmFjZXQgb2YgRXRlcm5pdHksIEl0ZW1Db2RlIDMzMTQ0LCArMTIgRGVmZW5zZSBSYXRpbmcNCglbMTA3MV0gPSAxMDcxLCAtLSBGYWxsaW5nIFN0YXIsIEl0ZW1Db2RlIDMzMTM1LCArMTggU3RhbWluYQ0KCQ0KCVszMjE4XSA9IDMyMTgsIC0tIEdyZWF0IEJsYWRlc3RvbmUsIEl0ZW1Db2RlIDMzMTQxLCArMTIgU3BlbGwgSGl0IFJhdGluZw0KCVszMjExXSA9IDMyMTEsIC0tIEthaWxlZSdzIFJvc2UsIEl0ZW1Db2RlIDMzMTM0LCArMjYgSGVhbGluZyBhbmQgKzkgU3BlbGwgRGFtYWdlDQoJWzMyMTVdID0gMzIxNSwgLS0gTXlzdGljIEJsYWRlc3RvbmUsIEl0ZW1Db2RlIDMzMTM4LCArMTIgUmVzaWxpZW5jZSBSYXRpbmcNCglbMTU5MV0gPSAxNTkxLCAtLSBSYWRpYW50IFNwZW5jZXJpdGUsIEl0ZW1Db2RlIDMyNzM1LCArMjAgQXR0YWNrIFBvd2VyDQoJWzI3ODRdID0gMjc4NCwgLS0gUmlnaWQgQmxhZGVzdG9uZSwgSXRlbUNvZGUgMzMxNDIsICsxMiBIaXQgUmF0aW5nDQoJWzM3MF0gPSAzNzAsIC0tIFNwYXJrbGluZyBGYWxsaW5nIFN0YXIsIEl0ZW1Db2RlIDMzMTM3LCArMTIgU3Bpcml0DQoJDQoJWzMyMjBdID0gMzIyMCwgLS0gU3RvbmUgb2YgQmxhZGVzLCBJdGVtQ29kZSAzMzE0MywgKzEyIENyaXRpY2FsIFN0cmlrZSBSYXRpbmcNCglbMjg5MV0gPSAyODkxLCAtLSBTdWJsaW1lIE15c3RpYyBEYXduc3RvbmUsIEl0ZW1Db2RlIDI3Njc5LCArMTAgUmVzaWxpZW5jZSBSYXRpbmcNCglbMjg5OV0gPSAyODk5LCAtLSBCYXJiZWQgRGVlcCBQZXJpZG90LCBJdGVtQ29kZSAyNzc4NiAmIDI3ODA5LCArMyBTdGFtaW5hLCArNCBDcml0aWNhbCBTdHJpa2UgUmF0aW5nDQoJWzMxMDNdID0gMzEwMywgLS0gRG9uIEFtYW5jaW8ncyBIZWFydCwgSXRlbUNvZGUgMzA1OTgsICs4IFN0cmVuZ3RoIChudW1lcm91cyBlbmNoYW50cyBvZiArOCBzdHIpDQoJWzMwNjVdID0gMzA2NSwgLS0gRG9uIFJvZHJpZ28ncyBIZWFydCwgSXRlbUNvZGUgMzA1NzEsICs4IFN0cmVuZ3RoDQoJWzMyNjhdID0gMzI2OCwgLS0gRXllIG9mIHRoZSBTZWEsIEl0ZW1Db2RlIDM0ODMxLCArMTUgU3RhbWluYQ0KCVsyOTQzXSA9IDI5NDMsIC0tIE1pZ2h0eSBCbG9vZCBHYXJuZXQsIEl0ZW1Db2RlIDI4MzYwLCArMTQgQXR0YWNrIFBvd2VyDQoJWzI5NDRdID0gMjk0NCwgLS0gTWlnaHR5IEJsb29kIEdhcm5ldCwgSXRlbUNvZGUgMjgzNjEsICsxNCBBdHRhY2sgUG93ZXINCglbMjg5OF0gPSAyODk4LCAtLSBOb3RjaGVkIERlZXAgUGVyaWRvdCwgSXRlbUNvZGUgMjc3ODUsICszIFN0YW1pbmEsICs0IFNwZWxsIENyaXRpY2FsIFN0cmlrZSBSYXRpbmcNCglbMjkyM10gPSAyOTIzLCAtLSBOb3RjaGVkIERlZXAgUGVyaWRvdCwgSXRlbUNvZGUgMjc4MjAsICszIFN0YW1pbmEsICs0IFNwZWxsIENyaXRpY2FsIFN0cmlrZSBSYXRpbmcNCglbMjg5Nl0gPSAyODk2LCAtLSBTdGFyayBCbG9vZCBHYXJuZXQsIEl0ZW1Db2RlIDI3Nzc3LCArOCBTcGVsbCBEYW1hZ2UNCglbMjkyNF0gPSAyOTI0LCAtLSBTdGFyayBCbG9vZCBHYXJuZXQsIEl0ZW1Db2RlIDI3ODEyLCArOCBTcGVsbCBEYW1hZ2UNCglbMjk3MF0gPSAyOTcwLCAtLSBTd2lmdCBTdGFyZmlyZSBEaWFtb25kLCBJdGVtQ29kZSAyODU1NywgKzEyIFNwZWxsIERhbWFnZSBhbmQgTWlub3IgUnVuIFNwZWVkIEluY3JlYXNlDQoJWzI5NjldID0gMjk2OSwgLS0gU3dpZnQgV2luZGZpcmUgRGlhbW9uZCwgSXRlbUNvZGUgMjg1NTYsICsyMCBBdHRhY2sgUG93ZXIgYW5kIE1pbm9yIFJ1biBTcGVlZCBJbmNyZWFzZQ0KDQoJWzMxNTZdID0gMzE1NiwgLS0gVW5zdGFibGUgQW1ldGh5c3QsIEl0ZW1Db2RlIDMyNjM0LCArOCBBdHRhY2sgUG93ZXIgYW5kICs2IFN0YW1pbmENCglbMzE1OV0gPSAzMTU5LCAtLSBVbnN0YWJsZSBDaXRyaW5lLCBJdGVtQ29kZSAzMjYzNywgKzggQXR0YWNrIFBvd2VyDQoJWzMxNTddID0gMzE1NywgLS0gVW5zdGFibGUgUGVyaWRvdCwgSXRlbUNvZGUgMzI2MzUsDQoJWzMxNThdID0gMzE1OCwgLS0gVW5zdGFibGUgU2FwcGhpcmUsIEl0ZW1Db2RlIDMyNjM2DQoJWzMxNjFdID0gMzE2MSwgLS0gVW5zdGFibGUgVGFsYXNpdGUsIEl0ZW1Db2RlIDMyNjM5DQoJWzMxNjBdID0gMzE2MCwgLS0gVW5zdGFibGUgVG9wYXosIEl0ZW1Db2RlIDMyNjM4DQoJDQoJLS0gV290TEsgdW5pcXVlLWVxdWlwcGVkDQoJDQoJWzM3NDldID0gMzc0OSwgLS0gRW5jaGFudGVkIFBlYXJsLCArNCBhbGwgc3RhdHMsIEl0ZW1Db2RlIDQyNzAxDQoJWzM3NTBdID0gMzc1MCwgLS0gRW5jaGFudGVkIFRlYXIsICs2IGFsbCBzdGF0cywgSXRlbUNvZGUgNDI3MDINCglbMzc5Ml0gPSAzNzkyLCAtLSBLaGFybWFhJ3MgR3JhY2UsICsyMCByZXNpbGllbmNlLCBJdGVtQ29kZSA0NDA2Ng0KCQ0KCS0tIFdvdExLIEpDIFByaXNtYXRpY3MgKHVuaXF1ZS1lcXVpcHBlZCB4IDMpDQoJDQoJWzM3MzJdID0gIlBSSVNNMyIsIC0tIEJvbGQgRHJhZ29uJ3MgRXllLCAyN3N0ciwgSXRlbUNvZGUgNDIxNDINCglbMzI5Ml0gPSAiUFJJU00zIiwgLS0gQnJpZ2h0IERyYWdvbidzIEV5ZSwgNTRhdHQsIEl0ZW1Db2RlIDM2NzY2DQoJWzM3MzddID0gIlBSSVNNMyIsIC0tIEJyaWxsaWFudCBEcmFnb24ncyBFeWUsIDI3aW50LCBJdGVtQ29kZSA0MjE0OA0KCVszNzMzXSA9ICJQUklTTTMiLCAtLSBEZWxpY2F0ZSBEcmFnb24ncyBFeWUsIDI3YWdpLCBJdGVtQ29kZSA0MjE0Mw0KCVszNzQxXSA9ICJQUklTTTMiLCAtLSBGbGFzaGluZyBEcmFnb24ncyBFeWUsIDI3cGFycnksIEl0ZW1Db2RlIDQyMTUyDQoJWzM3NDVdID0gIlBSSVNNMyIsIC0tIEZyYWN0dXJlZCBEcmFnb24ncyBFeWUsIDI3YXJtb3JwZW4sIEl0ZW1Db2RlIDQyMTUzDQoJWzM3MzZdID0gIlBSSVNNMyIsIC0tIEx1c3Ryb3VzIERyYWdvbidzIEV5ZSwgMTFtcDUsIEl0ZW1Db2RlIDQyMTQ2DQoJWzM3NDRdID0gIlBSSVNNMyIsIC0tIE15c3RpYyBEcmFnb24ncyBFeWUsIDI3cmVzaWwsIEl0ZW1Db2RlIDQyMTU4DQoJWzM3NDZdID0gIlBSSVNNMyIsIC0tIFByZWNpc2UgRHJhZ29uJ3MgRXllLCAyN2V4cCwgSXRlbUNvZGUgNDIxNTQNCglbMzczOV0gPSAiUFJJU00zIiwgLS0gUXVpY2sgRHJhZ29uJ3MgRXllLCAyN2hhc3RlLCBJdGVtQ29kZSA0MjE1MA0KCVszNzQyXSA9ICJQUklTTTMiLCAtLSBSaWdpZCBEcmFnb24ncyBFeWUsIDI3aGl0LCBJdGVtQ29kZSA0MjE1Ng0KCVszNzM0XSA9ICJQUklTTTMiLCAtLSBSdW5lZCBEcmFnb24ncyBFeWUsIDMyc3BlbGwsIEl0ZW1Db2RlIDQyMTQ0DQoJWzM3MzhdID0gIlBSSVNNMyIsIC0tIFNtb290aCBEcmFnb24ncyBFeWUsIDI3Y3JpdCwgSXRlbUNvZGUgNDIxNDkNCglbMzI5M10gPSAiUFJJU00zIiwgLS0gU29saWQgRHJhZ29uJ3MgRXllLCA0MXN0YW0sIEl0ZW1Db2RlIDM2NzY3DQoJWzM3MzVdID0gIlBSSVNNMyIsIC0tIFNwYXJrbGluZyBEcmFnb24ncyBFeWUsIDI3c3BpLCBJdGVtQ29kZSA0MjE0NQ0KCVszNzQ3XSA9ICJQUklTTTMiLCAtLSBTdG9ybXkgRHJhZ29uJ3MgRXllLCAzMnNwZWxscGVuLCBJdGVtQ29kZSA0MjE1NQ0KCVszNzQwXSA9ICJQUklTTTMiLCAtLSBTdWJ0bGUgRHJhZ29uJ3MgRXllLCAyN2RvZGdlLCBJdGVtQ29kZSA0MjE1MQ0KCVszNzQzXSA9ICJQUklTTTMiLCAtLSBUaGljayBEcmFnb24ncyBFeWUsIDI3ZGVmLCBJdGVtQ29kZSA0MjE1Nw0KfQ0KDQpPdXRmaXR0ZXIuY1VuaXF1ZUdlbUl0ZW1JRHMgPQ0Kew0KCVszMzE0MF0gPSAzMzE0MCwgLS0gQmxvb2Qgb2YgQW1iZXIsIEl0ZW1Db2RlIDMzMTQwLCArMTMgU3BlbGwgQ3JpdGljYWwgU3RyaWtlIFJhdGluZw0KCVszMzEzOV0gPSAzMzEzOSwgLS0gQnJpbGxpYW50IEJsYWRlc3RvbmUsIEl0ZW1Db2RlIDMzMTM5LCArMTIgSW50ZWxsZWN0DQoJWzM0MjU2XSA9IDM0MjU2LCAtLSBDaGFybWVkIEFtYW5pIEpld2VsLCBJdGVtQ29kZSAzNDI1NiwgKzE1IFN0YW1pbmENCglbMzMxMzFdID0gMzMxMzEsIC0tIENyaW1zb24gU3VuLCBJdGVtQ29kZSAzMzEzMSwgKzI0IEF0dGFjayBQb3dlcg0KCVszMzEzMl0gPSAzMzEzMiwgLS0gRGVsaWNhdGUgRmlyZSBSdWJ5LCBJdGVtQ29kZSAzMzEzMiwgKzEyIEFnaWxpdHkNCglbMzMxMzNdID0gMzMxMzMsIC0tIERvbiBKdWxpbydzIEhlYXJ0LCBJdGVtQ29kZSAzMzEzMw0KCVszMzE0NF0gPSAzMzE0NCwgLS0gRmFjZXQgb2YgRXRlcm5pdHksIEl0ZW1Db2RlIDMzMTQ0LCArMTIgRGVmZW5zZSBSYXRpbmcNCglbMzMxMzVdID0gMzMxMzUsIC0tIEZhbGxpbmcgU3RhciwgSXRlbUNvZGUgMzMxMzUsICsxOCBTdGFtaW5hDQoJDQoJWzMzMTQxXSA9IDMzMTQxLCAtLSBHcmVhdCBCbGFkZXN0b25lLCBJdGVtQ29kZSAzMzE0MSwgKzEyIFNwZWxsIEhpdCBSYXRpbmcNCglbMzMxMzRdID0gMzMxMzQsIC0tIEthaWxlZSdzIFJvc2UsIEl0ZW1Db2RlIDMzMTM0LCArMjYgSGVhbGluZyBhbmQgKzkgU3BlbGwgRGFtYWdlDQoJWzMzMTM4XSA9IDMzMTM4LCAtLSBNeXN0aWMgQmxhZGVzdG9uZSwgSXRlbUNvZGUgMzMxMzgsICsxMiBSZXNpbGllbmNlIFJhdGluZw0KCVszMjczNV0gPSAzMjczNSwgLS0gUmFkaWFudCBTcGVuY2VyaXRlLCBJdGVtQ29kZSAzMjczNSwgKzIwIEF0dGFjayBQb3dlcg0KCVszMzE0Ml0gPSAzMzE0MiwgLS0gUmlnaWQgQmxhZGVzdG9uZSwgSXRlbUNvZGUgMzMxNDIsICsxMiBIaXQgUmF0aW5nDQoJWzMzMTM3XSA9IDMzMTM3LCAtLSBTcGFya2xpbmcgRmFsbGluZyBTdGFyLCBJdGVtQ29kZSAzMzEzNywgKzEyIFNwaXJpdA0KCQ0KCVszMzE0M10gPSAzMjIwLCAtLSBTdG9uZSBvZiBCbGFkZXMsIEl0ZW1Db2RlIDMzMTQzLCArMTIgQ3JpdGljYWwgU3RyaWtlIFJhdGluZw0KCVsyNzY3OV0gPSAyODkxLCAtLSBTdWJsaW1lIE15c3RpYyBEYXduc3RvbmUsIEl0ZW1Db2RlIDI3Njc5LCArMTAgUmVzaWxpZW5jZSBSYXRpbmcNCglbMjc3ODZdID0gMjg5OSwgLS0gQmFyYmVkIERlZXAgUGVyaWRvdCwgSXRlbUNvZGUgMjc3ODYgJiAyNzgwOSwgKzMgU3RhbWluYSwgKzQgQ3JpdGljYWwgU3RyaWtlIFJhdGluZw0KCVsyNzgwOV0gPSAyODk5LCAtLSBCYXJiZWQgRGVlcCBQZXJpZG90LCBJdGVtQ29kZSAyNzc4NiAmIDI3ODA5LCArMyBTdGFtaW5hLCArNCBDcml0aWNhbCBTdHJpa2UgUmF0aW5nDQoJWzMwNTk4XSA9IDMxMDMsIC0tIERvbiBBbWFuY2lvJ3MgSGVhcnQsIEl0ZW1Db2RlIDMwNTk4LCArOCBTdHJlbmd0aCAobnVtZXJvdXMgZW5jaGFudHMgb2YgKzggc3RyKQ0KCVszMDU3MV0gPSAzMDY1LCAtLSBEb24gUm9kcmlnbydzIEhlYXJ0LCBJdGVtQ29kZSAzMDU3MSwgKzggU3RyZW5ndGgNCglbMzQ4MzFdID0gMzI2OCwgLS0gRXllIG9mIHRoZSBTZWEsIEl0ZW1Db2RlIDM0ODMxLCArMTUgU3RhbWluYQ0KCVsyODM2MF0gPSAyOTQzLCAtLSBNaWdodHkgQmxvb2QgR2FybmV0LCBJdGVtQ29kZSAyODM2MCwgKzE0IEF0dGFjayBQb3dlcg0KCVsyODM2MV0gPSAyOTQ0LCAtLSBNaWdodHkgQmxvb2QgR2FybmV0LCBJdGVtQ29kZSAyODM2MSwgKzE0IEF0dGFjayBQb3dlcg0KCVsyNzc4NV0gPSAyODk4LCAtLSBOb3RjaGVkIERlZXAgUGVyaWRvdCwgSXRlbUNvZGUgMjc3ODUsICszIFN0YW1pbmEsICs0IFNwZWxsIENyaXRpY2FsIFN0cmlrZSBSYXRpbmcNCglbMjc4MjBdID0gMjkyMywgLS0gTm90Y2hlZCBEZWVwIFBlcmlkb3QsIEl0ZW1Db2RlIDI3ODIwLCArMyBTdGFtaW5hLCArNCBTcGVsbCBDcml0aWNhbCBTdHJpa2UgUmF0aW5nDQoJWzI3Nzc3XSA9IDI4OTYsIC0tIFN0YXJrIEJsb29kIEdhcm5ldCwgSXRlbUNvZGUgMjc3NzcsICs4IFNwZWxsIERhbWFnZQ0KCVsyNzgxMl0gPSAyOTI0LCAtLSBTdGFyayBCbG9vZCBHYXJuZXQsIEl0ZW1Db2RlIDI3ODEyLCArOCBTcGVsbCBEYW1hZ2UNCglbMjg1NTddID0gMjk3MCwgLS0gU3dpZnQgU3RhcmZpcmUgRGlhbW9uZCwgSXRlbUNvZGUgMjg1NTcsICsxMiBTcGVsbCBEYW1hZ2UgYW5kIE1pbm9yIFJ1biBTcGVlZCBJbmNyZWFzZQ0KCVsyODU1Nl0gPSAyOTY5LCAtLSBTd2lmdCBXaW5kZmlyZSBEaWFtb25kLCBJdGVtQ29kZSAyODU1NiwgKzIwIEF0dGFjayBQb3dlciBhbmQgTWlub3IgUnVuIFNwZWVkIEluY3JlYXNlDQoNCglbMzI2MzRdID0gMzE1NiwgLS0gVW5zdGFibGUgQW1ldGh5c3QsIEl0ZW1Db2RlIDMyNjM0LCArOCBBdHRhY2sgUG93ZXIgYW5kICs2IFN0YW1pbmENCglbMzI2MzVdID0gMzE1NywgLS0gVW5zdGFibGUgUGVyaWRvdCwgSXRlbUNvZGUgMzI2MzUsDQoJWzMyNjM2XSA9IDMxNTgsIC0tIFVuc3RhYmxlIFNhcHBoaXJlLCBJdGVtQ29kZSAzMjYzNg0KCVszMjYzN10gPSAzMTU5LCAtLSBVbnN0YWJsZSBDaXRyaW5lLCBJdGVtQ29kZSAzMjYzNywgKzggQXR0YWNrIFBvd2VyDQoJWzMyNjM4XSA9IDMxNjAsIC0tIFVuc3RhYmxlIFRvcGF6LCBJdGVtQ29kZSAzMjYzOA0KCVszMjYzOV0gPSAzMTYxLCAtLSBVbnN0YWJsZSBUYWxhc2l0ZSwgSXRlbUNvZGUgMzI2MzkNCgkNCgktLSBXb3RMSyB1bmlxdWUtZXF1aXBwZWQNCgkNCglbNDI3MDFdID0gMzc0OSwgLS0gRW5jaGFudGVkIFBlYXJsLCArNCBhbGwgc3RhdHMsIEl0ZW1Db2RlIDQyNzAxDQoJWzQyNzAyXSA9IDM3NTAsIC0tIEVuY2hhbnRlZCBUZWFyLCArNiBhbGwgc3RhdHMsIEl0ZW1Db2RlIDQyNzAyDQoJWzQ0MDY2XSA9IDM3OTIsIC0tIEtoYXJtYWEncyBHcmFjZSwgKzIwIHJlc2lsaWVuY2UsIEl0ZW1Db2RlIDQ0MDY2DQoJDQoJLS0gV290TEsgSkMgUHJpc21hdGljcyAodW5pcXVlLWVxdWlwcGVkIHggMykNCgkNCglbMzY3NjZdID0gIlBSSVNNMyIsIC0tIEJyaWdodCBEcmFnb24ncyBFeWUsIDU0YXR0LCBJdGVtQ29kZSAzNjc2Ng0KCVszNjc2N10gPSAiUFJJU00zIiwgLS0gU29saWQgRHJhZ29uJ3MgRXllLCA0MXN0YW0sIEl0ZW1Db2RlIDM2NzY3DQoJWzQyMTQyXSA9ICJQUklTTTMiLCAtLSBCb2xkIERyYWdvbidzIEV5ZSwgMjdzdHIsIEl0ZW1Db2RlIDQyMTQyDQoJWzQyMTQzXSA9ICJQUklTTTMiLCAtLSBEZWxpY2F0ZSBEcmFnb24ncyBFeWUsIDI3YWdpLCBJdGVtQ29kZSA0MjE0Mw0KCVs0MjE0NF0gPSAiUFJJU00zIiwgLS0gUnVuZWQgRHJhZ29uJ3MgRXllLCAzMnNwZWxsLCBJdGVtQ29kZSA0MjE0NA0KCVs0MjE0NV0gPSAiUFJJU00zIiwgLS0gU3BhcmtsaW5nIERyYWdvbidzIEV5ZSwgMjdzcGksIEl0ZW1Db2RlIDQyMTQ1DQoJWzQyMTQ2XSA9ICJQUklTTTMiLCAtLSBMdXN0cm91cyBEcmFnb24ncyBFeWUsIDExbXA1LCBJdGVtQ29kZSA0MjE0Ng0KCVs0MjE0OF0gPSAiUFJJU00zIiwgLS0gQnJpbGxpYW50IERyYWdvbidzIEV5ZSwgMjdpbnQsIEl0ZW1Db2RlIDQyMTQ4DQoJWzQyMTQ5XSA9ICJQUklTTTMiLCAtLSBTbW9vdGggRHJhZ29uJ3MgRXllLCAyN2NyaXQsIEl0ZW1Db2RlIDQyMTQ5DQoJWzQyMTUwXSA9ICJQUklTTTMiLCAtLSBRdWljayBEcmFnb24ncyBFeWUsIDI3aGFzdGUsIEl0ZW1Db2RlIDQyMTUwDQoJWzQyMTUxXSA9ICJQUklTTTMiLCAtLSBTdWJ0bGUgRHJhZ29uJ3MgRXllLCAyN2RvZGdlLCBJdGVtQ29kZSA0MjE1MQ0KCVs0MjE1Ml0gPSAiUFJJU00zIiwgLS0gRmxhc2hpbmcgRHJhZ29uJ3MgRXllLCAyN3BhcnJ5LCBJdGVtQ29kZSA0MjE1Mg0KCVs0MjE1M10gPSAiUFJJU00zIiwgLS0gRnJhY3R1cmVkIERyYWdvbidzIEV5ZSwgMjdhcm1vcnBlbiwgSXRlbUNvZGUgNDIxNTMNCglbNDIxNTRdID0gIlBSSVNNMyIsIC0tIFByZWNpc2UgRHJhZ29uJ3MgRXllLCAyN2V4cCwgSXRlbUNvZGUgNDIxNTQNCglbNDIxNTVdID0gIlBSSVNNMyIsIC0tIFN0b3JteSBEcmFnb24ncyBFeWUsIDMyc3BlbGxwZW4sIEl0ZW1Db2RlIDQyMTU1DQoJWzQyMTU2XSA9ICJQUklTTTMiLCAtLSBSaWdpZCBEcmFnb24ncyBFeWUsIDI3aGl0LCBJdGVtQ29kZSA0MjE1Ng0KCVs0MjE1N10gPSAiUFJJU00zIiwgLS0gVGhpY2sgRHJhZ29uJ3MgRXllLCAyN2RlZiwgSXRlbUNvZGUgNDIxNTcNCglbNDIxNThdID0gIlBSSVNNMyIsIC0tIE15c3RpYyBEcmFnb24ncyBFeWUsIDI3cmVzaWwsIEl0ZW1Db2RlIDQyMTU4DQoJDQoJLS0gUGF0Y2ggMy4yDQoJDQoJWzQ5MTEwXSA9IDQ5MTEwLCAtLSBOaWdodG1hcmUgVGVhcg0KfQ0KDQpTdGF0aWNQb3B1cERpYWxvZ3MuT1VURklUVEVSX0NBTlRfUkVMT0FEVUkgPQ0Kew0KCXRleHQgPSBPdXRmaXR0ZXIuY0NhbnRSZWxvYWRVSSwNCglidXR0b24xID0gT0tBWSwNCglPbkFjY2VwdCA9IGZ1bmN0aW9uKCkgZW5kLA0KCU9uQ2FuY2VsID0gZnVuY3Rpb24oKSBlbmQsDQoJdGltZW91dCA9IDAsDQoJd2hpbGVEZWFkID0gMSwNCgloaWRlT25Fc2NhcGUgPSAxLA0KCXNob3dBbGVydCA9IDEsDQp9DQoNClN0YXRpY1BvcHVwRGlhbG9ncy5PVVRGSVRURVJfU0VSVkVSX0ZVTEwgPQ0Kew0KCXRleHQgPSBPdXRmaXR0ZXIuY1Rvb01hbnlTZXJ2ZXJPdXRmaXRzLA0KCWJ1dHRvbjEgPSBPS0FZLA0KCU9uQWNjZXB0ID0gZnVuY3Rpb24oKSBlbmQsDQoJT25DYW5jZWwgPSBmdW5jdGlvbigpIGVuZCwNCgl0aW1lb3V0ID0gMCwNCgl3aGlsZURlYWQgPSAxLA0KCWhpZGVPbkVzY2FwZSA9IDEsDQoJc2hvd0FsZXJ0ID0gMSwNCn0NCg0KU3RhdGljUG9wdXBEaWFsb2dzLk9VVEZJVFRFUl9DQU5UX1NFVF9JQ09OID0NCnsNCgl0ZXh0ID0gT3V0Zml0dGVyLmNDYW50U2V0SWNvbiwNCglidXR0b24xID0gT3V0Zml0dGVyLmNDaGFuZ2VJY29uLA0KCWJ1dHRvbjIgPSBDQU5DRUwsDQoJT25BY2NlcHQgPSBmdW5jdGlvbigpIGVuZCwNCglPbkNhbmNlbCA9IGZ1bmN0aW9uKCkgZW5kLA0KCXRpbWVvdXQgPSAwLA0KCXdoaWxlRGVhZCA9IDEsDQoJaGlkZU9uRXNjYXBlID0gMSwNCglzaG93QWxlcnQgPSAxLA0KfQ0KDQpTdGF0aWNQb3B1cERpYWxvZ3MuT1VURklUVEVSX0NPTkZJUk1fREVMRVRFID0NCnsNCgl0ZXh0ID0gVEVYVChPdXRmaXR0ZXIuY0NvbmZpcm1EZWxldGVNc2cpLA0KCWJ1dHRvbjEgPSBURVhUKERFTEVURSksDQoJYnV0dG9uMiA9IFRFWFQoQ0FOQ0VMKSwNCglPbkFjY2VwdCA9IGZ1bmN0aW9uKCkgT3V0Zml0dGVyOkRlbGV0ZVNlbGVjdGVkT3V0Zml0KCkgZW5kLA0KCXRpbWVvdXQgPSAwLA0KCXdoaWxlRGVhZCA9IDEsDQoJaGlkZU9uRXNjYXBlID0gMQ0KfQ0KDQpTdGF0aWNQb3B1cERpYWxvZ3MuT1VURklUVEVSX0NPTkZJUk1fUkVCVUlMRCA9DQp7DQoJdGV4dCA9IFRFWFQoT3V0Zml0dGVyLmNDb25maXJtUmVidWlsZE1zZyksDQoJYnV0dG9uMSA9IFRFWFQoT3V0Zml0dGVyLmNSZWJ1aWxkKSwNCglidXR0b24yID0gVEVYVChDQU5DRUwpLA0KCU9uQWNjZXB0ID0gZnVuY3Rpb24oKSBPdXRmaXR0ZXI6UmVidWlsZE91dGZpdChPdXRmaXR0ZXIuT3V0Zml0VG9SZWJ1aWxkKSBPdXRmaXR0ZXIuT3V0Zml0VG9SZWJ1aWxkID0gbmlsIGVuZCwNCgl0aW1lb3V0ID0gMCwNCgl3aGlsZURlYWQgPSAxLA0KCWhpZGVPbkVzY2FwZSA9IDEsDQp9DQoNClN0YXRpY1BvcHVwRGlhbG9ncy5PVVRGSVRURVJfQ09ORklSTV9TRVRfQ1VSUkVOVCA9DQp7DQoJdGV4dCA9IFRFWFQoT3V0Zml0dGVyLmNDb25maXJtU2V0Q3VycmVudE1zZyksDQoJYnV0dG9uMSA9IFRFWFQoT3V0Zml0dGVyLmNTZXRDdXJyZW50KSwNCglidXR0b24yID0gVEVYVChDQU5DRUwpLA0KCU9uQWNjZXB0ID0gZnVuY3Rpb24oKSBPdXRmaXR0ZXI6U2V0T3V0Zml0VG9DdXJyZW50KE91dGZpdHRlci5PdXRmaXRUb1JlYnVpbGQpOyBPdXRmaXR0ZXIuT3V0Zml0VG9SZWJ1aWxkID0gbmlsIGVuZCwNCgl0aW1lb3V0ID0gMCwNCgl3aGlsZURlYWQgPSAxLA0KCWhpZGVPbkVzY2FwZSA9IDEsDQp9DQoNCk91dGZpdHRlci5jQ2F0ZWdvcnlEZXNjcmlwdGlvbnMgPQ0Kew0KCUNvbXBsZXRlID0gT3V0Zml0dGVyLmNDb21wbGV0ZUNhdGVnb3J5RGVzY3JpcHRpb24sDQoJQWNjZXNzb3J5ID0gT3V0Zml0dGVyLmNBY2Nlc3NvcnlDYXRlZ29yeURlc2NyaXB0aW9uLA0KCU9kZHNORW5kcyA9IE91dGZpdHRlci5jT2Rkc05FbmRzQ2F0ZWdvcnlEZXNjcmlwdGlvbiwNCn0NCg0KT3V0Zml0dGVyLmNTbG90TmFtZXMgPQ0Kew0KCS0tIEZpcnN0IHByaW9yaXR5IGdvZXMgdG8gYXJtb3INCgkNCgkiSGVhZFNsb3QiLA0KCSJTaG91bGRlclNsb3QiLA0KCSJDaGVzdFNsb3QiLA0KCSJXcmlzdFNsb3QiLA0KCSJIYW5kc1Nsb3QiLA0KCSJXYWlzdFNsb3QiLA0KCSJMZWdzU2xvdCIsDQoJIkZlZXRTbG90IiwNCgkNCgktLSBTZWNvbmQgcHJpb3JpdHkgZ29lcyB0byB3ZWFwb25zDQoJDQoJIk1haW5IYW5kU2xvdCIsDQoJIlNlY29uZGFyeUhhbmRTbG90IiwNCgkiUmFuZ2VkU2xvdCIsDQoJIkFtbW9TbG90IiwNCgkNCgktLSBMYXN0IHByaW9yaXR5IGdvZXMgdG8gaXRlbXMgd2l0aCBubyBkdXJhYmlsaXR5DQoJDQoJIkJhY2tTbG90IiwNCgkiTmVja1Nsb3QiLA0KCSJTaGlydFNsb3QiLA0KCSJUYWJhcmRTbG90IiwNCgkiRmluZ2VyMFNsb3QiLA0KCSJGaW5nZXIxU2xvdCIsDQoJIlRyaW5rZXQwU2xvdCIsDQoJIlRyaW5rZXQxU2xvdCIsDQp9DQoNCk91dGZpdHRlci5jU2xvdE9yZGVyID0ge30NCg0KZm9yIHZJbmRleCwgdlNsb3ROYW1lIGluIGlwYWlycyhPdXRmaXR0ZXIuY1Nsb3ROYW1lcykgZG8NCglPdXRmaXR0ZXIuY1Nsb3RPcmRlclt2U2xvdE5hbWVdID0gdkluZGV4DQplbmQNCg0KT3V0Zml0dGVyLmNTbG90RGlzcGxheU5hbWVzID0NCnsNCglIZWFkU2xvdCA9IEhFQURTTE9ULA0KCU5lY2tTbG90ID0gTkVDS1NMT1QsDQoJU2hvdWxkZXJTbG90ID0gU0hPVUxERVJTTE9ULA0KCUJhY2tTbG90ID0gQkFDS1NMT1QsDQoJQ2hlc3RTbG90ID0gQ0hFU1RTTE9ULA0KCVNoaXJ0U2xvdCA9IFNISVJUU0xPVCwNCglUYWJhcmRTbG90ID0gVEFCQVJEU0xPVCwNCglXcmlzdFNsb3QgPSBXUklTVFNMT1QsDQoJSGFuZHNTbG90ID0gSEFORFNTTE9ULA0KCVdhaXN0U2xvdCA9IFdBSVNUU0xPVCwNCglMZWdzU2xvdCA9IExFR1NTTE9ULA0KCUZlZXRTbG90ID0gRkVFVFNMT1QsDQoJRmluZ2VyMFNsb3QgPSBPdXRmaXR0ZXIuY0ZpbmdlcjBTbG90TmFtZSwNCglGaW5nZXIxU2xvdCA9IE91dGZpdHRlci5jRmluZ2VyMVNsb3ROYW1lLA0KCVRyaW5rZXQwU2xvdCA9IE91dGZpdHRlci5jVHJpbmtldDBTbG90TmFtZSwNCglUcmlua2V0MVNsb3QgPSBPdXRmaXR0ZXIuY1RyaW5rZXQxU2xvdE5hbWUsDQoJTWFpbkhhbmRTbG90ID0gTUFJTkhBTkRTTE9ULA0KCVNlY29uZGFyeUhhbmRTbG90ID0gU0VDT05EQVJZSEFORFNMT1QsDQoJUmFuZ2VkU2xvdCA9IFJBTkdFRFNMT1QsDQoJQW1tb1Nsb3QgPSBBTU1PU0xPVCwNCn0NCg0KT3V0Zml0dGVyLmNJbnZUeXBlVG9TbG90TmFtZSA9DQp7DQoJSU5WVFlQRV8ySFdFQVBPTiA9IHtTbG90TmFtZSA9ICJNYWluSGFuZFNsb3QiLCBNZXRhU2xvdE5hbWUgPSAiVHdvSGFuZFNsb3QifSwNCglJTlZUWVBFX0JPRFkgPSB7U2xvdE5hbWUgPSAiU2hpcnRTbG90In0sDQoJSU5WVFlQRV9DSEVTVCA9IHtTbG90TmFtZSA9ICJDaGVzdFNsb3QifSwNCglJTlZUWVBFX0NMT0FLID0ge1Nsb3ROYW1lID0gIkJhY2tTbG90In0sDQoJSU5WVFlQRV9GRUVUID0ge1Nsb3ROYW1lID0gIkZlZXRTbG90In0sDQoJSU5WVFlQRV9GSU5HRVIgPSB7U2xvdE5hbWUgPSAiRmluZ2VyMFNsb3QifSwNCglJTlZUWVBFX0hBTkQgPSB7U2xvdE5hbWUgPSAiSGFuZHNTbG90In0sDQoJSU5WVFlQRV9IRUFEID0ge1Nsb3ROYW1lID0gIkhlYWRTbG90In0sDQoJSU5WVFlQRV9IT0xEQUJMRSA9IHtTbG90TmFtZSA9ICJTZWNvbmRhcnlIYW5kU2xvdCJ9LA0KCUlOVlRZUEVfTEVHUyA9IHtTbG90TmFtZSA9ICJMZWdzU2xvdCJ9LA0KCUlOVlRZUEVfTkVDSyA9IHtTbG90TmFtZSA9ICJOZWNrU2xvdCJ9LA0KCUlOVlRZUEVfUkFOR0VEID0ge1Nsb3ROYW1lID0gIlJhbmdlZFNsb3QifSwNCglJTlZUWVBFX1JPQkUgPSB7U2xvdE5hbWUgPSAiQ2hlc3RTbG90In0sDQoJSU5WVFlQRV9TSElFTEQgPSB7U2xvdE5hbWUgPSAiU2Vjb25kYXJ5SGFuZFNsb3QifSwNCglJTlZUWVBFX1NIT1VMREVSID0ge1Nsb3ROYW1lID0gIlNob3VsZGVyU2xvdCJ9LA0KCUlOVlRZUEVfVEFCQVJEID0ge1Nsb3ROYW1lID0gIlRhYmFyZFNsb3QifSwNCglJTlZUWVBFX1RSSU5LRVQgPSB7U2xvdE5hbWUgPSAiVHJpbmtldDBTbG90In0sDQoJSU5WVFlQRV9XQUlTVCA9IHtTbG90TmFtZSA9ICJXYWlzdFNsb3QifSwNCglJTlZUWVBFX1dFQVBPTiA9IHtTbG90TmFtZSA9ICJNYWluSGFuZFNsb3QiLCBNZXRhU2xvdE5hbWUgPSAiV2VhcG9uMFNsb3QifSwNCglJTlZUWVBFX1dFQVBPTk1BSU5IQU5EID0ge1Nsb3ROYW1lID0gIk1haW5IYW5kU2xvdCJ9LA0KCUlOVlRZUEVfV0VBUE9OT0ZGSEFORCA9IHtTbG90TmFtZSA9ICJTZWNvbmRhcnlIYW5kU2xvdCJ9LA0KCUlOVlRZUEVfV1JJU1QgPSB7U2xvdE5hbWUgPSAiV3Jpc3RTbG90In0sDQoJSU5WVFlQRV9SQU5HRURSSUdIVCA9IHtTbG90TmFtZSA9ICJSYW5nZWRTbG90In0sDQoJSU5WVFlQRV9BTU1PID0ge1Nsb3ROYW1lID0gIkFtbW9TbG90In0sDQoJSU5WVFlQRV9USFJPV04gPSB7U2xvdE5hbWUgPSAiUmFuZ2VkU2xvdCJ9LA0KCUlOVlRZUEVfUkVMSUMgPSB7U2xvdE5hbWUgPSAiUmFuZ2VkU2xvdCJ9LA0KfQ0KDQpPdXRmaXR0ZXIuY0hhbGZBbHRlcm5hdGVTdGF0U2xvdCA9DQp7DQoJVHJpbmtldDBTbG90ID0gIlRyaW5rZXQxU2xvdCIsDQoJRmluZ2VyMFNsb3QgPSAiRmluZ2VyMVNsb3QiLA0KCVdlYXBvbjBTbG90ID0gIldlYXBvbjFTbG90IiwNCn0NCg0KT3V0Zml0dGVyLmNGdWxsQWx0ZXJuYXRlU3RhdFNsb3QgPQ0Kew0KCVRyaW5rZXQwU2xvdCA9ICJUcmlua2V0MVNsb3QiLA0KCVRyaW5rZXQxU2xvdCA9ICJUcmlua2V0MFNsb3QiLA0KCUZpbmdlcjBTbG90ID0gIkZpbmdlcjFTbG90IiwNCglGaW5nZXIxU2xvdCA9ICJGaW5nZXIwU2xvdCIsDQoJV2VhcG9uMFNsb3QgPSAiV2VhcG9uMVNsb3QiLA0KCVdlYXBvbjFTbG90ID0gIldlYXBvbjBTbG90IiwNCn0NCg0KT3V0Zml0dGVyLmNDYXRlZ29yeU9yZGVyID0NCnsNCgkiQ29tcGxldGUiLA0KCSJBY2Nlc3NvcnkiDQp9DQoNCk91dGZpdHRlci5jSXRlbUFsaWFzZXMgPQ0Kew0KCVsxODYwOF0gPSAxODYwOSwJLS0gQmVuZWRpY3Rpb24gLT4gQW5hdGhlbWENCglbMTg2MDldID0gMTg2MDgsCS0tIEFuYXRoZW1hIC0+IEJlbmVkaWN0aW9uDQoJWzE3MjIzXSA9IDE3MDc0LAktLSBUaHVuZGVyc3RyaWtlIC0+IFNoYWRvd3N0cmlrZQ0KCVsxNzA3NF0gPSAxNzIyMywJLS0gU2hhZG93c3RyaWtlIC0+IFRodW5kZXJzdHJpa2UNCgkNCglbNDYwNjldID0gNDYxMDYsCS0tIEFsbGlhbmNlIExhbmNlIC0+IEFyZ2VudCBMYW5jZQ0KCVs0NjA3MF0gPSA0NjEwNiwJLS0gSG9yZGUgTGFuY2UgLT4gQXJnZW50IExhbmNlDQoJWzQ2MTA2XSA9IDQ2MDY5LAktLSBBcmdlbnQgTGFuY2UgLT4gQWxsaWFuY2UgTGFuY2UgKHdpbGwgYmUgcmVwbGFjZWQgYnkgSG9yZGUgTGFuY2UgYXQgcnVudGltZSkNCn0NCg0KT3V0Zml0dGVyLmNJZ25vcmVkVW51c2VkSXRlbXMgPSANCnsNCglbMjkwMV0gPSAiTWluaW5nIFBpY2siLA0KCVs1OTU2XSA9ICJCbGFja3NtaXRoIGhhbW1lciIsDQoJWzYyMTldID0gIkFyY2xpZ2h0IFNwYW5uZXIiLA0KCVs3MDA1XSA9ICJTa2lubmluZyBLbmlmZSIsDQoJWzcyOTddID0gIk1vcmJlbnQncyBCYW5lIiwNCglbMTA2OTZdID0gIkVuY2hhbnRlZCBBenNoYXJpdGUgRmVsYmFuZSBTd29yZCIsDQoJWzEwNjk3XSA9ICJFbmNoYW50ZWQgQXpzaGFyaXRlIEZlbGJhbmUgRGFnZ2VyIiwNCglbMTA2OThdID0gIkVuY2hhbnRlZCBBenNoYXJpdGUgRmVsYmFuZSBTdGFmZiIsDQoJWzIwNDA2XSA9ICJUd2lsaWdodCBDdWx0aXN0IE1hbnRsZSIsDQoJWzIwNDA3XSA9ICJUd2lsaWdodCBDdWx0aXN0IFJvYmUiLA0KCVsyMDQwOF0gPSAiVHdpbGlnaHQgQ3VsdGlzdCBDb3dsIiwNCn0NCg0KT3V0Zml0dGVyLmNTbWFydE91dGZpdHMgPQ0Kew0KCXtOYW1lID0gT3V0Zml0dGVyLmNGaXNoaW5nT3V0Zml0LCBTdGF0SUQgPSAiRklTSElORyIsIFNjcmlwdElEID0gIkZpc2hpbmcifSwNCgl7TmFtZSA9IE91dGZpdHRlci5jSGVyYmFsaXNtT3V0Zml0LCBTdGF0SUQgPSAiSEVSQkFMSVNNIiwgU2NyaXB0SUQgPSAiSGVyYmFsaXNtIn0sDQoJe05hbWUgPSBPdXRmaXR0ZXIuY01pbmluZ091dGZpdCwgU3RhdElEID0gIk1JTklORyIsIFNjcmlwdElEID0gIk1pbmluZyJ9LA0KCXtOYW1lID0gT3V0Zml0dGVyLmNTa2lubmluZ091dGZpdCwgU3RhdElEID0gIlNLSU5OSU5HIiwgU2NyaXB0SUQgPSAiU2tpbm5pbmcifSwNCgl7TmFtZSA9IE91dGZpdHRlci5jRmlyZVJlc2lzdE91dGZpdCwgU3RhdElEID0gIkZJUkVfUkVTIn0sDQoJe05hbWUgPSBPdXRmaXR0ZXIuY05hdHVyZVJlc2lzdE91dGZpdCwgU3RhdElEID0gIk5BVFVSRV9SRVMifSwNCgl7TmFtZSA9IE91dGZpdHRlci5jU2hhZG93UmVzaXN0T3V0Zml0LCBTdGF0SUQgPSAiU0hBRE9XX1JFUyJ9LA0KCXtOYW1lID0gT3V0Zml0dGVyLmNBcmNhbmVSZXNpc3RPdXRmaXQsIFN0YXRJRCA9ICJBUkNBTkVfUkVTIn0sDQoJe05hbWUgPSBPdXRmaXR0ZXIuY0Zyb3N0UmVzaXN0T3V0Zml0LCBTdGF0SUQgPSAiRlJPU1RfUkVTIn0sDQp9DQoNCk91dGZpdHRlci5jU3BlY2lhbElERXZlbnRzID0NCnsNCglCYXR0bGUgPSB7RXF1aXAgPSAiQkFUVExFX1NUQU5DRSIsIFVuZXF1aXAgPSAiTk9UX0JBVFRMRV9TVEFOQ0UifSwNCglEZWZlbnNpdmUgPSB7RXF1aXAgPSAiREVGRU5TSVZFX1NUQU5DRSIsIFVuZXF1aXAgPSAiTk9UX0RFRkVOU0lWRV9TVEFOQ0UifSwNCglCZXJzZXJrZXIgPSB7RXF1aXAgPSAiQkVSU0VSS0VSX1NUQU5DRSIsIFVuZXF1aXAgPSAiTk9UX0JFUlNFUktFUl9TVEFOQ0UifSwNCgkNCglCZWFyID0ge0VxdWlwID0gIkJFQVJfRk9STSIsIFVuZXF1aXAgPSAiTk9UX0JFQVJfRk9STSJ9LA0KCUNhdCA9IHtFcXVpcCA9ICJDQVRfRk9STSIsIFVuZXF1aXAgPSAiTk9UX0NBVF9GT1JNIn0sDQoJQXF1YXRpYyA9IHtFcXVpcCA9ICJBUVVBVElDX0ZPUk0iLCBVbmVxdWlwID0gIk5PVF9BUVVBVElDX0ZPUk0ifSwNCglUcmF2ZWwgPSB7RXF1aXAgPSAiVFJBVkVMX0ZPUk0iLCBVbmVxdWlwID0gIk5PVF9UUkFWRUxfRk9STSJ9LA0KCU1vb25raW4gPSB7RXF1aXAgPSAiTU9PTktJTl9GT1JNIiwgVW5lcXVpcCA9ICJOT1RfTU9PTktJTl9GT1JNIn0sDQoJVHJlZSA9IHtFcXVpcCA9ICJUUkVFX0ZPUk0iLCBVbmVxdWlwID0gIk5PVF9UUkVFX0ZPUk0ifSwNCglQcm93bCA9IHtFcXVpcCA9ICJTVEVBTFRIIiwgVW5lcXVpcCA9ICJOT1RfU1RFQUxUSCJ9LA0KCUZsaWdodCA9IHtFcXVpcCA9ICJGTElHSFRfRk9STSIsIFVuZXF1aXAgPSAiTk9UX0ZMSUdIVF9GT1JNIn0sDQoJQ2FzdGVyID0ge0VxdWlwID0gIkNBU1RFUl9GT1JNIiwgVW5lcXVpcCA9ICJOT1RfQ0FTVEVSX0ZPUk0ifSwNCgkNCglTaGFkb3dmb3JtID0ge0VxdWlwID0gIlNIQURPV0ZPUk0iLCBVbmVxdWlwID0gIk5PVF9TSEFET1dGT1JNIn0sDQoNCglTdGVhbHRoID0ge0VxdWlwID0gIlNURUFMVEgiLCBVbmVxdWlwID0gIk5PVF9TVEVBTFRIIn0sDQoNCglHaG9zdFdvbGYgPSB7RXF1aXAgPSAiR0hPU1RfV09MRiIsIFVuZXF1aXAgPSAiTk9UX0dIT1NUX1dPTEYifSwNCg0KCU1vbmtleSA9IHtFcXVpcCA9ICJNT05LRVlfQVNQRUNUIiwgVW5lcXVpcCA9ICJOT1RfTU9OS0VZX0FTUEVDVCJ9LA0KCUhhd2sgPSB7RXF1aXAgPSAiSEFXS19BU1BFQ1QiLCBVbmVxdWlwID0gIk5PVF9IQVdLX0FTUEVDVCJ9LA0KCUNoZWV0YWggPSB7RXF1aXAgPSAiQ0hFRVRBSF9BU1BFQ1QiLCBVbmVxdWlwID0gIk5PVF9DSEVFVEFIX0FTUEVDVCJ9LA0KCVBhY2sgPSB7RXF1aXAgPSAiUEFDS19BU1BFQ1QiLCBVbmVxdWlwID0gIk5PVF9QQUNLX0FTUEVDVCJ9LA0KCUJlYXN0ID0ge0VxdWlwID0gIkJFQVNUX0FTUEVDVCIsIFVuZXF1aXAgPSAiTk9UX0JFQVNUX0FTUEVDVCJ9LA0KCVdpbGQgPSB7RXF1aXAgPSAiV0lMRF9BU1BFQ1QiLCBVbmVxdWlwID0gIk5PVF9XSUxEX0FTUEVDVCJ9LA0KCVZpcGVyID0ge0VxdWlwID0gIlZJUEVSX0FTUEVDVCIsIFVuZXF1aXAgPSAiTk9UX1ZJUEVSX0FTUEVDVCJ9LA0KCURyYWdvbmhhd2sgPSB7RXF1aXAgPSAiRFJBR09OSEFXS19BU1BFQ1QiLCBVbmVxdWlwID0gIk5PVF9EUkFHT05IQVdLX0FTUEVDVCJ9LA0KCUZlaWduaW5nID0ge0VxdWlwID0gIkZFSUdOX0RFQVRIIiwgVW5lcXVpcCA9ICJOT1RfRkVJR05fREVBVEgifSwNCgkNCglFdm9jYXRlID0ge0VxdWlwID0gIkVWT0NBVEUiLCBVbmVxdWlwID0gIk5PVF9FVk9DQVRFIn0sDQoJDQoJQmxvb2QgPSB7RXF1aXAgPSAiQkxPT0QiLCBVbmVxdWlwID0gIk5PVF9CTE9PRCJ9LA0KCUZyb3N0ID0ge0VxdWlwID0gIkZST1NUIiwgVW5lcXVpcCA9ICJOT1RfRlJPU1QifSwNCglVbmhvbHkgPSB7RXF1aXAgPSAiVU5IT0xZIiwgVW5lcXVpcCA9ICJOT1RfVU5IT0xZIn0sDQoNCglEaW5pbmcgPSB7RXF1aXAgPSAiRElOSU5HIiwgVW5lcXVpcCA9ICJOT1RfRElOSU5HIn0sDQoJQ2l0eSA9IHtFcXVpcCA9ICJDSVRZIiwgVW5lcXVpcCA9ICJOT1RfQ0lUWSJ9LA0KCVJpZGluZyA9IHtFcXVpcCA9ICJNT1VOVEVEIiwgVW5lcXVpcCA9ICJOT1RfTU9VTlRFRCJ9LA0KCVN3aW1taW5nID0ge0VxdWlwID0gIlNXSU1NSU5HIiwgVW5lcXVpcCA9ICJOT1RfU1dJTU1JTkcifSwNCglTcGlyaXQgPSB7RXF1aXAgPSAiU1BJUklUX1JFR0VOIiwgVW5lcXVpcCA9ICJOT1RfU1BJUklUX1JFR0VOIn0sDQoJQXJnZW50RGF3biA9IHtFcXVpcCA9ICJBUkdFTlRfREFXTiIsIFVuZXF1aXAgPSAiTk9UX0FSR0VOVF9EQVdOIn0sDQoNCglCYXR0bGVncm91bmQgPSB7RXF1aXAgPSAiQkFUVExFR1JPVU5EIiwgVW5lcXVpcCA9ICJOT1RfQkFUVExFR1JPVU5EIn0sDQoJQUIgPSB7RXF1aXAgPSAiQkFUVExFR1JPVU5EX0FCIiwgVW5lcXVpcCA9ICJOT1RfQkFUVExFR1JPVU5EX0FCIn0sDQoJQVYgPSB7RXF1aXAgPSAiQkFUVExFR1JPVU5EX0FWIiwgVW5lcXVpcCA9ICJOT1RfQkFUVExFR1JPVU5EX0FWIn0sDQoJV1NHID0ge0VxdWlwID0gIkJBVFRMRUdST1VORF9XU0ciLCBVbmVxdWlwID0gIk5PVF9CQVRUTEVHUk9VTkRfV1NHIn0sDQoJRW90UyA9IHtFcXVpcCA9ICJCQVRUTEVHUk9VTkRfRU9UUyIsIFVuZXF1aXAgPSAiTk9UX0JBVFRMRUdST1VORF9FT1RTIn0sDQoJU290QSA9IHtFcXVpcCA9ICJCQVRUTEVHUk9VTkRfU09UQSIsIFVuZXF1aXAgPSAiTk9UX0JBVFRMRUdST1VORF9TT1RBIn0sDQoJSW9DID0ge0VxdWlwID0gIkJBVFRMRUdST1VORF9JT0MiLCBVbmVxdWlwID0gIk5PVF9CQVRUTEVHUk9VTkRfSU9DIn0sDQoJV2ludGVyZ3Jhc3AgPSB7RXF1aXAgPSAiQkFUVExFR1JPVU5EX1dHIiwgVW5lcXVpcCA9ICJOT1RfQkFUVExFR1JPVU5EX1dHIn0sDQoJU2V3ZXJzID0ge0VxdWlwID0gIkJBVFRMRUdST1VORF9TRVdFUlMiLCBVbmVxdWlwID0gIk5PVF9CQVRUTEVHUk9VTkRfU0VXRVJTIn0sDQoJUmluZ09mVmFsb3IgPSB7RXF1aXAgPSAiQkFUVExFR1JPVU5EX1JPViIsIFVuZXF1aXAgPSAiTk9UX0JBVFRMRUdST1VORF9ST1YifSwNCglBcmVuYSA9IHtFcXVpcCA9ICJCQVRUTEVHUk9VTkRfQVJFTkEiLCBVbmVxdWlwID0gIk5PVF9CQVRUTEVHUk9VTkRfQVJFTkEifSwNCglCbGFkZXNFZGdlQXJlbmEgPSB7RXF1aXAgPSAiQkFUVExFR1JPVU5EX0JMQURFU0VER0UiLCBVbmVxdWlwID0gIk5PVF9CQVRUTEVHUk9VTkRfQkxBREVTRURHRSJ9LA0KCU5hZ3JhbmRBcmVuYSA9IHtFcXVpcCA9ICJCQVRUTEVHUk9VTkRfTkFHUkFORCIsIFVuZXF1aXAgPSAiTk9UX0JBVFRMRUdST1VORF9OQUdSQU5EIn0sDQoJTG9yZGFlcm9uQXJlbmEgPSB7RXF1aXAgPSAiQkFUVExFR1JPVU5EX0xPUkRBRVJPTiIsIFVuZXF1aXAgPSAiTk9UX0JBVFRMRUdST1VORF9MT1JEQUVST04ifSwNCn0NCg0KT3V0Zml0dGVyLmNDbGFzc1NwZWNpYWxPdXRmaXRzID0NCnsNCglXQVJSSU9SID0NCgl7DQoJCXtOYW1lID0gT3V0Zml0dGVyLmNXYXJyaW9yQmF0dGxlU3RhbmNlLCBTY3JpcHRJRCA9ICJCYXR0bGUifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY1dhcnJpb3JEZWZlbnNpdmVTdGFuY2UsIFNjcmlwdElEID0gIkRlZmVuc2l2ZSJ9LA0KCQl7TmFtZSA9IE91dGZpdHRlci5jV2FycmlvckJlcnNlcmtlclN0YW5jZSwgU2NyaXB0SUQgPSAiQmVyc2Vya2VyIn0sDQoJfSwNCgkNCglEUlVJRCA9DQoJew0KCQl7TmFtZSA9IE91dGZpdHRlci5jRHJ1aWRDYXN0ZXJGb3JtLCBTY3JpcHRJRCA9ICJDYXN0ZXIifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0RydWlkQmVhckZvcm0sIFNjcmlwdElEID0gIkJlYXIifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0RydWlkQ2F0Rm9ybSwgU2NyaXB0SUQgPSAiQ2F0In0sDQoJCXtOYW1lID0gT3V0Zml0dGVyLmNEcnVpZEFxdWF0aWNGb3JtLCBTY3JpcHRJRCA9ICJBcXVhdGljIn0sDQoJCXtOYW1lID0gT3V0Zml0dGVyLmNEcnVpZFRyYXZlbEZvcm0sIFNjcmlwdElEID0gIlRyYXZlbCJ9LA0KCQl7TmFtZSA9IE91dGZpdHRlci5jRHJ1aWRNb29ua2luRm9ybSwgU2NyaXB0SUQgPSAiTW9vbmtpbiJ9LA0KCQl7TmFtZSA9IE91dGZpdHRlci5jRHJ1aWRUcmVlT2ZMaWZlRm9ybSwgU2NyaXB0SUQgPSAiVHJlZSJ9LA0KCQl7TmFtZSA9IE91dGZpdHRlci5jRHJ1aWRQcm93bCwgU2NyaXB0SUQgPSAiUHJvd2wifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0RydWlkRmxpZ2h0Rm9ybSwgU2NyaXB0SUQgPSAiRmxpZ2h0In0sDQoJfSwNCgkNCglQUklFU1QgPQ0KCXsNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY1ByaWVzdFNoYWRvd2Zvcm0sIFNjcmlwdElEID0gIlNoYWRvd2Zvcm0ifSwNCgl9LA0KCQ0KCVJPR1VFID0NCgl7DQoJCXtOYW1lID0gT3V0Zml0dGVyLmNSb2d1ZVN0ZWFsdGgsIFNjcmlwdElEID0gIlN0ZWFsdGgifSwNCgl9LA0KCQ0KCVNIQU1BTiA9DQoJew0KCQl7TmFtZSA9IE91dGZpdHRlci5jU2hhbWFuR2hvc3RXb2xmLCBTY3JpcHRJRCA9ICJHaG9zdFdvbGYifSwNCgl9LA0KCQ0KCUhVTlRFUiA9DQoJew0KCQl7TmFtZSA9IE91dGZpdHRlci5jSHVudGVyTW9ua2V5LCBTY3JpcHRJRCA9ICJNb25rZXkifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0h1bnRlckhhd2ssIFNjcmlwdElEID0gIkhhd2sifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0h1bnRlckNoZWV0YWgsIFNjcmlwdElEID0gIkNoZWV0YWgifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0h1bnRlclBhY2ssIFNjcmlwdElEID0gIlBhY2sifSwNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0h1bnRlckJlYXN0LCBTY3JpcHRJRCA9ICJCZWFzdCJ9LA0KCQl7TmFtZSA9IE91dGZpdHRlci5jSHVudGVyV2lsZCwgU2NyaXB0SUQgPSAiV2lsZCJ9LA0KCQl7TmFtZSA9IE91dGZpdHRlci5jSHVudGVyVmlwZXIsIFNjcmlwdElEID0gIlZpcGVyIn0sDQoJCXtOYW1lID0gT3V0Zml0dGVyLmNIdW50ZXJEcmFnb25oYXdrLCBTY3JpcHRJRCA9ICJEcmFnb25oYXdrIn0sDQoJfSwNCgkNCglNQUdFID0NCgl7DQoJCXtOYW1lID0gT3V0Zml0dGVyLmNNYWdlRXZvY2F0ZSwgU2NyaXB0SUQgPSAiRXZvY2F0ZSJ9LA0KCX0sDQoJDQoJREVBVEhLTklHSFQgPQ0KCXsNCgkJe05hbWUgPSBPdXRmaXR0ZXIuY0RlYXRoa25pZ2h0Qmxvb2QsIFNjcmlwdElEID0gIkJsb29kIn0sDQoJCXtOYW1lID0gT3V0Zml0dGVyLmNEZWF0aGtuaWdodEZyb3N0LCBTY3JpcHRJRCA9ICJGcm9zdCJ9LA0KCQl7TmFtZSA9IE91dGZpdHRlci5jRGVhdGhrbmlnaHRVbmhvbHksIFNjcmlwdElEID0gIlVuaG9seSJ9LA0KCX0sDQp9DQoNCk91dGZpdHRlci5jU3BlbGxJRFRvU3BlY2lhbElEID0NCnsNCglbNTExOF0gPSAiQ2hlZXRhaCIsDQoJWzEzMTU5XSA9ICJQYWNrIiwNCglbMTMxNjFdID0gIkJlYXN0IiwNCglbMTMxNjNdID0gIk1vbmtleSIsDQoJWzIwMDQzXSA9ICJXaWxkIiwNCglbMjAxOTBdID0gIldpbGQiLA0KCVsyNzA0NV0gPSAiV2lsZCIsDQoJWzQ5MDcxXSA9ICJXaWxkIiwNCglbMzQwNzRdID0gIlZpcGVyIiwNCgkNCglbMTMxNjVdID0gIkhhd2siLA0KCVsxNDMxOF0gPSAiSGF3ayIsDQoJWzE0MzE5XSA9ICJIYXdrIiwNCglbMTQzMjBdID0gIkhhd2siLA0KCVsxNDMyMV0gPSAiSGF3ayIsDQoJWzE0MzIyXSA9ICJIYXdrIiwNCglbMjUyOTZdID0gIkhhd2siLA0KCVsyNzA0NF0gPSAiSGF3ayIsDQoJDQoJWzYxODQ2XSA9ICJIYXdrIiwNCglbNjE4NDddID0gIkhhd2siLA0KCQ0KCVsxMjA1MV0gPSAiRXZvY2F0ZSIsDQoJWzE1NDczXSA9ICJTaGFkb3dmb3JtIiwNCglbMjY0NV0gPSAiR2hvc3RXb2xmIiwNCglbNTM4NF0gPSAiRmVpZ25pbmciLA0KCVs1MjE1XSA9ICJQcm93bCIsDQp9DQoNCk91dGZpdHRlci5jQXVyYUljb25TcGVjaWFsSUQgPQ0Kew0KCVsiSU5WX01pc2NfRm9yayZLbmlmZSJdID0gIkRpbmluZyIsDQp9DQoNCi0tIE5vdGUgdGhhdCB6b25lIHNwZWNpYWwgb3V0Zml0cyB3aWxsIGJlIHdvcm4gaW4gdGhlIG9yZGVyDQotLSB0aGUgYXJlIGxpc3RlZCBoZXJlLCB3aXRoIGxhdGVyIG91dGZpdHMgYmVpbmcgd29ybiBvdmVyDQotLSBlYXJsaWVyIG91dGZpdHMgKHdoZW4gdGhleSdyZSBiZWluZyBhcHBsaWVkIGF0IHRoZSBzYW1lIHRpbWUpDQotLSBUaGlzIGFsbG93cyBCRy1zcGVjaWZpYyBvdXRmaXRzIHRvIHRha2UgcHJpb3JpdHkgb3ZlciB0aGUgZ2VuZXJpYw0KLS0gQkcgb3V0Zml0DQoNCk91dGZpdHRlci5jWm9uZVNwZWNpYWxJRHMgPQ0Kew0KCSJBcmdlbnREYXduIiwNCgkNCgkiQ2l0eSIsDQoJIkJhdHRsZWdyb3VuZCIsDQoJIkFyZW5hIiwNCgkNCgkiQVYiLA0KCSJBQiIsDQoJIldTRyIsDQoJIkVvdFMiLA0KCSJTb3RBIiwNCgkiSW9DIiwNCgkNCgkiQmxhZGVzRWRnZUFyZW5hIiwNCgkiTmFncmFuZEFyZW5hIiwNCgkiTG9yZGFlcm9uQXJlbmEiLA0KfQ0KDQpPdXRmaXR0ZXIuY1pvbmVTcGVjaWFsSURNYXAgPQ0Kew0KCVtPdXRmaXR0ZXIuTFpbIldlc3Rlcm4gUGxhZ3VlbGFuZHMiXV0gPSB7IkFyZ2VudERhd24ifSwNCglbT3V0Zml0dGVyLkxaWyJFYXN0ZXJuIFBsYWd1ZWxhbmRzIl1dID0geyJBcmdlbnREYXduIn0sDQoJW091dGZpdHRlci5MWlsiU3RyYXRob2xtZSJdXSA9IHsiQXJnZW50RGF3biJ9LA0KCVtPdXRmaXR0ZXIuTFpbIlNjaG9sb21hbmNlIl1dID0geyJBcmdlbnREYXduIn0sDQoJW091dGZpdHRlci5MWlsiTmF4eHJhbWFzIl1dID0geyJOYXh4In0sDQoJW091dGZpdHRlci5MWlsiQWx0ZXJhYyBWYWxsZXkiXV0gPSB7IkJhdHRsZWdyb3VuZCIsICJBViJ9LA0KCVtPdXRmaXR0ZXIuTFpbIkFyYXRoaSBCYXNpbiJdXSA9IHsiQmF0dGxlZ3JvdW5kIiwgIkFCIn0sDQoJW091dGZpdHRlci5MWlsiV2Fyc29uZyBHdWxjaCJdXSA9IHsiQmF0dGxlZ3JvdW5kIiwgIldTRyJ9LA0KCVtPdXRmaXR0ZXIuY1NpbHZlcndpbmdIb2xkXSA9IHsiQmF0dGxlZ3JvdW5kIiwgIldTRyJ9LA0KCVtPdXRmaXR0ZXIuY1dhcnNvbmdMdW1iZXJNaWxsXSA9IHsiQmF0dGxlZ3JvdW5kIiwgIldTRyJ9LA0KCVtPdXRmaXR0ZXIuTFpbIkV5ZSBvZiB0aGUgU3Rvcm0iXV0gPSB7IkJhdHRsZWdyb3VuZCIsICJFb3RTIn0sDQoJW091dGZpdHRlci5MWlsiU3RyYW5kIG9mIHRoZSBBbmNpZW50cyJdXSA9IHsiQmF0dGxlZ3JvdW5kIiwgIlNvdEEifSwNCglbT3V0Zml0dGVyLkxaWyJJc2xlIG9mIENvbnF1ZXN0Il1dID0geyJCYXR0bGVncm91bmQiLCAiSW9DIn0sDQoJW091dGZpdHRlci5MWlsiV2ludGVyZ3Jhc3AiXV0gPSB7IkJhdHRsZWdyb3VuZCIsICJXaW50ZXJncmFzcCJ9LA0KCVtPdXRmaXR0ZXIuTFpbIkRhbGFyYW4gU2V3ZXJzIl1dID0geyJCYXR0bGVncm91bmQiLCAiQXJlbmEiLCAiU2V3ZXJzIn0sDQoJW091dGZpdHRlci5MWlsiVGhlIFJpbmcgb2YgVmFsb3IiXV0gPSB7IkJhdHRsZWdyb3VuZCIsICJBcmVuYSIsICJSaW5nT2ZWYWxvciJ9LA0KCQ0KCVtPdXRmaXR0ZXIuTFpbIkJsYWRlJ3MgRWRnZSBBcmVuYSJdXSA9IHsiQmF0dGxlZ3JvdW5kIiwgIkJsYWRlc0VkZ2VBcmVuYSIsICJBcmVuYSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIk5hZ3JhbmQgQXJlbmEiXV0gPSB7IkJhdHRsZWdyb3VuZCIsICJOYWdyYW5kQXJlbmEiLCAiQXJlbmEifSwNCglbT3V0Zml0dGVyLkxaWyJSdWlucyBvZiBMb3JkYWVyb24iXV0gPSB7IkJhdHRsZWdyb3VuZCIsICJMb3JkYWVyb25BcmVuYSIsICJBcmVuYSJ9LA0KCQ0KCVtPdXRmaXR0ZXIuTFpbIklyb25mb3JnZSJdXSA9IHsiQ2l0eSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIkRhcm5hc3N1cyJdXSA9IHsiQ2l0eSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIlN0b3Jtd2luZCJdXSA9IHsiQ2l0eSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIlN0b3Jtd2luZCBDaXR5Il1dID0geyJDaXR5In0sDQoJW091dGZpdHRlci5MWlsiT3JncmltbWFyIl1dID0geyJDaXR5In0sDQoJW091dGZpdHRlci5MWlsiVGh1bmRlciBCbHVmZiJdXSA9IHsiQ2l0eSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIlVuZGVyY2l0eSJdXSA9IHsiQ2l0eSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIlNpbHZlcm1vb24gQ2l0eSJdXSA9IHsiQ2l0eSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIlRoZSBFeG9kYXIiXV0gPSB7IkNpdHkifSwNCglbT3V0Zml0dGVyLkxaWyJTaGF0dHJhdGggQ2l0eSJdXSA9IHsiQ2l0eSJ9LA0KCVtPdXRmaXR0ZXIuTFpbIkRhbGFyYW4iXV0gPSB7IkNpdHkifSwNCn0NCg0KLS0gQXMgb2YgcGF0Y2ggMy4zIGF1dG9tYXRlZCBjb21iYXQgc3dhcHMgYXJlbid0IGFsbG93ZWQuICBJJ20NCi0tIGxlYXZpbmcgdGhlIGNvZGUgaW4gYnV0IGVtcHR5aW5nIHRoZSBzbG90IGxpc3QgaW4NCi0tIGNhc2UgYW4gYWNjZXB0YWJsZSB3b3JrYXJvdW5kIGlzIGRpc2NvdmVyZWQgd2hpY2ggd291bGQNCi0tIG1ha2UgaXQgdXNlZnVsIGFnYWluLg0KDQpPdXRmaXR0ZXIuY0NvbWJhdEVxdWlwbWVudFNsb3RzID0NCnsNCi0tW1sNCglNYWluSGFuZFNsb3QgPSB0cnVlLA0KCVNlY29uZGFyeUhhbmRTbG90ID0gdHJ1ZSwNCglSYW5nZWRTbG90ID0gdHJ1ZSwNCglBbW1vU2xvdCA9IHRydWUsDQpdXQ0KfQ0KDQpPdXRmaXR0ZXIuSW52ZW50b3J5Q2FjaGUgPSBuaWwNCg0KT3V0Zml0dGVyLmNNYXhEaXNwbGF5ZWRJdGVtcyA9IDE0DQoNCk91dGZpdHRlci5jUGFuZWxGcmFtZXMgPQ0Kew0KCSJPdXRmaXR0ZXJNYWluRnJhbWUiLA0KCSJPdXRmaXR0ZXJPcHRpb25zRnJhbWUiLA0KCSJPdXRmaXR0ZXJBYm91dEZyYW1lIiwNCn0NCg0KT3V0Zml0dGVyLmNTaGFwZXNoaWZ0VGV4dHVyZUluZm8gPQ0Kew0KCS0tIFdhcnJpb3JzDQoJDQoJQWJpbGl0eV9XYXJyaW9yX09mZmVuc2l2ZVN0YW5jZSA9IHtJRCA9ICJCYXR0bGUifSwNCglBYmlsaXR5X1dhcnJpb3JfRGVmZW5zaXZlU3RhbmNlID0ge0lEID0gIkRlZmVuc2l2ZSJ9LA0KCUFiaWxpdHlfUmFjaWFsX0F2YXRhciA9IHtJRCA9ICJCZXJzZXJrZXIifSwNCgkNCgktLSBEcnVpZHMNCgkNCglBYmlsaXR5X1JhY2lhbF9CZWFyRm9ybSA9IHtJRCA9ICJCZWFyIiwgTWF5YmVJbkNvbWJhdCA9IHRydWV9LA0KCUFiaWxpdHlfRHJ1aWRfQ2F0Rm9ybSA9IHtJRCA9ICJDYXQifSwNCglBYmlsaXR5X0RydWlkX0FxdWF0aWNGb3JtID0ge0lEID0gIkFxdWF0aWMifSwNCglBYmlsaXR5X0RydWlkX1RyYXZlbEZvcm0gPSB7SUQgPSAiVHJhdmVsIn0sDQoJU3BlbGxfTmF0dXJlX0ZvcmNlT2ZOYXR1cmUgPSB7SUQgPSAiTW9vbmtpbiJ9LA0KCUFiaWxpdHlfRHJ1aWRfVHJlZW9mTGlmZSA9IHtJRCA9ICJUcmVlIn0sDQoJQWJpbGl0eV9EcnVpZF9GbGlnaHRGb3JtID0ge0lEID0gIkZsaWdodCJ9LA0KCUNhc3RlckZvcm0gPSB7SUQgPSAiQ2FzdGVyIn0sIC0tIHRoaXMgaXMgYSBwc3VlZG8tZm9ybSB3aGljaCBpcyBhY3RpdmUgd2hlbiBubyBvdGhlciBkcnVpZCBmb3JtIGlzDQoJDQoJLS0gUm9ndWVzDQoJDQoJQWJpbGl0eV9TdGVhbHRoID0ge0lEID0gIlN0ZWFsdGgifSwNCglTcGVsbF9OYXR1cmVfSW52aXNpYmlsaXR5ID0ge0lEID0gIlN0ZWFsdGgifSwNCgkNCgktLSBEZWF0aGtuaWdodA0KCQ0KCVNwZWxsX0RlYXRoa25pZ2h0X0Jsb29kUHJlc2VuY2UgPSB7SUQgPSAiQmxvb2QifSwNCglTcGVsbF9EZWF0aGtuaWdodF9Gcm9zdFByZXNlbmNlID0ge0lEID0gIkZyb3N0In0sDQoJU3BlbGxfRGVhdGhrbmlnaHRfVW5ob2x5UHJlc2VuY2UgPSB7SUQgPSAiVW5ob2x5In0sDQp9DQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpUb2dnbGVPdXRmaXR0ZXJGcmFtZSgpDQoJaWYgc2VsZjpJc09wZW4oKSB0aGVuDQoJCU91dGZpdHRlckZyYW1lOkhpZGUoKQ0KCWVsc2UNCgkJT3V0Zml0dGVyRnJhbWU6U2hvdygpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOklzT3BlbigpDQoJcmV0dXJuIE91dGZpdHRlckZyYW1lOklzVmlzaWJsZSgpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOk9uTG9hZCgpDQoJZm9yIHZFdmVudElELCBfIGluIHBhaXJzKHNlbGYuY0luaXRpYWxpemF0aW9uRXZlbnRzKSBkbw0KCQlzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQodkV2ZW50SUQsIHNlbGYuSW5pdGlhbGl6YXRpb25DaGVjaywgc2VsZikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6T25TaG93KCkNCglzZWxmLlNldEZyYW1lTGV2ZWwoT3V0Zml0dGVyRnJhbWUsIFBhcGVyRG9sbEZyYW1lOkdldEZyYW1lTGV2ZWwoKSAtIDEpDQoJDQoJc2VsZjpTaG93UGFuZWwoMSkgLS0gQWx3YXlzIHN3aXRjaCB0byB0aGUgbWFpbiB2aWV3IHdoZW4gc2hvd2luZyB0aGUgd2luZG93DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOk9uSGlkZSgpDQoJc2VsZjpDbGVhclNlbGVjdGlvbigpDQoJDQoJaWYgc2VsZi5RdWlja1Nsb3RzIHRoZW4NCgkJc2VsZi5RdWlja1Nsb3RzOkNsb3NlKCkNCgllbmQNCgkNCglpZiBzZWxmLk5hbWVPdXRmaXREaWFsb2c6SXNTaG93bigpIHRoZW4NCgkJc2VsZi5OYW1lT3V0Zml0RGlhbG9nOkNhbmNlbCgpDQoJZW5kDQoJDQoJaWYgc2VsZi5SZWJ1aWxkT3V0Zml0RGlhbG9nOklzU2hvd24oKSB0aGVuDQoJCXNlbGYuUmVidWlsZE91dGZpdERpYWxvZzpDYW5jZWwoKQ0KCWVuZA0KCQ0KCU91dGZpdHRlckZyYW1lOkhpZGUoKSAgLS0gVGhpcyBzZWVtcyByZWR1bmRhbnQsIGJ1dCB0aGUgT25IaWRlIGhhbmRsZXIgZ2V0cyBjYWxsZWQNCgkgICAgICAgICAgICAgICAgICAgICAgIC0tIGluIHJlc3BvbnNlIHRvIHRoZSBwYXJlbnQgYmVpbmcgaGlkZGVuICh0aGUgY2hhcmFjdGVyIHdpbmRvdykNCgkgICAgICAgICAgICAgICAgICAgICAgIC0tIHNvIGNhbGxpbmcgSGlkZSgpIG9uIHRoZSBmcmFtZSBoZXJlIGVuc3VyZXMgdGhhdCB3aGVuIHRoZQ0KCSAgICAgICAgICAgICAgICAgICAgICAgLS0gY2hhcmFjdGVyIHdpbmRvdyBpcyBoaWRkZW4gdGhlbiBPdXRmaXR0ZXIgd29uJ3QgYmUgZGlzcGxheWVkDQoJICAgICAgICAgICAgICAgICAgICAgICAtLSBuZXh0IHRpbWUgaXQncyBvcGVuZWQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2NoZWR1bGVQbGF5ZXJFbnRlcmluZ1dvcmxkKCkNCglzZWxmLlNjaGVkdWxlckxpYjpSZXNjaGVkdWxlVGFzaygwLjA1LCBzZWxmLlBsYXllckVudGVyaW5nV29ybGQsIHNlbGYpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlBsYXllckVudGVyaW5nV29ybGQoKQ0KCXNlbGYuSXNDYXN0aW5nID0gZmFsc2UNCglzZWxmLklzQ2hhbm5lbGluZyA9IGZhbHNlDQoJDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJDQoJc2VsZjpGbHVzaEludmVudG9yeUNhY2hlKCkNCgkNCglzZWxmOlJlZ2VuRW5hYmxlZCgpDQoJc2VsZjpVcGRhdGVBdXJhU3RhdGVzKCkNCgkNCglzZWxmOlNjaGVkdWxlVXBkYXRlWm9uZSgpDQoJDQoJc2VsZjpSZXN1bWVMb2FkU2NyZWVuRXZlbnRzKCkNCglzZWxmOlNjaGVkdWxlU3luY2goKSAtLSBBbHdheXMgc3luYyBvbiBlbnRlcmluZyB3b3JsZA0KCQ0KCXNlbGY6U3luY2hyb25pemVFTSgpDQoNCglzZWxmOkVuZEVxdWlwbWVudFVwZGF0ZSgpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlBsYXllckxlYXZpbmdXb3JsZCgpDQoJLS0gVG8gaW1wcm92ZSBsb2FkIHNjcmVlbiBwZXJmb3JtYW5jZSwgc3VzcGVuZCBldmVudHMgd2hpY2ggYXJlDQoJLS0gZmlyZWQgcmVwZWF0ZWRseSBhbmQgcmFwaWRseSBkdXJpbmcgem9uaW5nDQoJDQoJc2VsZi5TdXNwZW5kZWQgPSB0cnVlDQoJDQoJc2VsZi5FdmVudExpYjpVbnJlZ2lzdGVyRXZlbnQoIkJBR19VUERBVEUiLCBzZWxmLkJhZ1VwZGF0ZSwgc2VsZikNCglzZWxmLkV2ZW50TGliOlVucmVnaXN0ZXJFdmVudCgiVU5JVF9JTlZFTlRPUllfQ0hBTkdFRCIsIHNlbGYuVW5pdEludmVudG9yeUNoYW5nZWQsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpVbnJlZ2lzdGVyRXZlbnQoIlVOSVRfQVVSQSIsIHNlbGYuVW5pdEF1cmFDaGFuZ2VkLCBzZWxmKQ0KCXNlbGYuRXZlbnRMaWI6VW5yZWdpc3RlckV2ZW50KCJQTEFZRVJCQU5LU0xPVFNfQ0hBTkdFRCIsIHNlbGYuQmFua1Nsb3RzQ2hhbmdlZCwgc2VsZikNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6UmVzdW1lTG9hZFNjcmVlbkV2ZW50cygpDQoJaWYgc2VsZi5TdXNwZW5kZWQgdGhlbg0KCQktLSBUbyBpbXByb3ZlIGxvYWQgc2NyZWVuIHBlcmZvcm1hbmNlLCBzdXNwZW5kIGV2ZW50cyB3aGljaCBhcmUNCgkJLS0gZmlyZWQgcmVwZWF0ZWRseSBhbmQgcmFwaWRseSBkdXJpbmcgem9uaW5nDQoJCQ0KCQlzZWxmLlN1c3BlbmRlZCA9IGZhbHNlDQoNCgkJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJCQUdfVVBEQVRFIiwgc2VsZi5CYWdVcGRhdGUsIHNlbGYpDQoJCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiVU5JVF9JTlZFTlRPUllfQ0hBTkdFRCIsIHNlbGYuVW5pdEludmVudG9yeUNoYW5nZWQsIHNlbGYsIHRydWUpIC0tIFJlZ2lzdGVyIGFzIGEgYmxpbmQgZXZlbnQgaGFuZGxlciAobm8gZXZlbnQgaWQgcGFyYW0pDQoJCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiVU5JVF9BVVJBIiwgc2VsZi5Vbml0QXVyYUNoYW5nZWQsIHNlbGYpDQoJCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiUExBWUVSQkFOS1NMT1RTX0NIQU5HRUQiLCBzZWxmLkJhbmtTbG90c0NoYW5nZWQsIHNlbGYpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlZhcmlhYmxlc0xvYWRlZCgpDQoJc2VsZi5TZXR0aW5ncyA9IGdPdXRmaXR0ZXJfU2V0dGluZ3MNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6QmFua1Nsb3RzQ2hhbmdlZCgpDQoJc2VsZjpTY2hlZHVsZVN5bmNoKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6QmFnVXBkYXRlKCkNCglzZWxmOlNjaGVkdWxlU3luY2goKQ0KZW5kDQoNCk91dGZpdHRlci5PdXRmaXRFdmVudHMgPSB7fQ0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6UmVnaXN0ZXJPdXRmaXRFdmVudChwRXZlbnQsIHBGdW5jdGlvbikNCglsb2NhbCB2SGFuZGxlcnMgPSBzZWxmLk91dGZpdEV2ZW50c1twRXZlbnRdDQoJDQoJaWYgbm90IHZIYW5kbGVycyB0aGVuDQoJCXZIYW5kbGVycyA9IHt9DQoJCXNlbGYuT3V0Zml0RXZlbnRzW3BFdmVudF0gPSB2SGFuZGxlcnMNCgllbmQNCgkNCgl0YWJsZS5pbnNlcnQodkhhbmRsZXJzLCBwRnVuY3Rpb24pDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlVucmVnaXN0ZXJPdXRmaXRFdmVudChwRXZlbnQsIHBGdW5jdGlvbikNCglsb2NhbCB2SGFuZGxlcnMgPSBzZWxmLk91dGZpdEV2ZW50c1twRXZlbnRdDQoJDQoJaWYgbm90IHZIYW5kbGVycyB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCWZvciB2SW5kZXgsIHZGdW5jdGlvbiBpbiBpcGFpcnModkhhbmRsZXJzKSBkbw0KCQlpZiB2RnVuY3Rpb24gPT0gcEZ1bmN0aW9uIHRoZW4NCgkJCXRhYmxlLnJlbW92ZSh2SGFuZGxlcnMsIHZJbmRleCkNCgkJCXJldHVybg0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6RGlzcGF0Y2hPdXRmaXRFdmVudChwRXZlbnQsIHBQYXJhbWV0ZXIxLCBwUGFyYW1ldGVyMikNCgktLSBEb24ndCBzZW5kIG91dCBldmVudHMgdW50aWwgd2UncmUgaW5pdGlhbGl6ZWQNCgkNCglpZiBub3Qgc2VsZi5Jbml0aWFsaXplZCB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCS0tIFBvc3QgYSBtZXNzYWdlDQoJDQoJbG9jYWwgdkhhbmRsZXJzID0gc2VsZi5PdXRmaXRFdmVudHNbcEV2ZW50XQ0KCQ0KCWlmIHZIYW5kbGVycyB0aGVuDQoJCWZvciBfLCB2RnVuY3Rpb24gaW4gaXBhaXJzKHZIYW5kbGVycykgZG8NCgkJCS0tIENhbGwgaW4gcHJvdGVjdGVkIG1vZGUgc28gdGhhdCBpZiB0aGV5IGZhaWwgaXQgZG9lc24ndA0KCQkJLS0gc2NyZXcgdXAgT3V0Zml0dGVyIG9yIG90aGVyIGFkZG9ucyB3aXNoaW5nIHRvIGJlIG5vdGlmaWVkDQoJCQkNCgkJCWxvY2FsIHZTdWNjZWVkZWQsIHZNZXNzYWdlID0gcGNhbGwodkZ1bmN0aW9uLCBwRXZlbnQsIHBQYXJhbWV0ZXIxLCBwUGFyYW1ldGVyMikNCgkJCQ0KCQkJaWYgdk1lc3NhZ2UgdGhlbg0KCQkJCXNlbGY6RXJyb3JNZXNzYWdlKCJFcnJvciBkaXNwYXRjaGluZyBldmVudCAiLi5wRXZlbnQpDQoJCQkJc2VsZjpFcnJvck1lc3NhZ2Uodk1lc3NhZ2UpDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJbG9jYWwgdkV2ZW50SUQNCgkNCglpZiBwRXZlbnQgPT0gIldFQVJfT1VURklUIiB0aGVuDQoJCXZFdmVudElEID0gIk9VVEZJVF9FUVVJUFBFRCINCgllbHNlaWYgcEV2ZW50ID09ICJVTldFQVJfT1VURklUIiB0aGVuDQoJCXZFdmVudElEID0gIk9VVEZJVF9VTkVRVUlQUEVEIg0KCWVuZA0KCQ0KCWxvY2FsIHZPdXRmaXRzID0gc2VsZi5PdXRmaXRTY3JpcHRFdmVudHNbdkV2ZW50SURdDQoJDQoJaWYgdk91dGZpdHMgdGhlbg0KCQlsb2NhbCB2U2NyaXB0Q29udGV4dCA9IHZPdXRmaXRzW3BQYXJhbWV0ZXIyXQ0KCQkNCgkJaWYgdlNjcmlwdENvbnRleHQgdGhlbg0KCQkJbG9jYWwgdlN1Y2NlZWRlZCwgdk1lc3NhZ2UgPSBwY2FsbCh2U2NyaXB0Q29udGV4dC5GdW5jdGlvbiwgdlNjcmlwdENvbnRleHQsIHZFdmVudElEKQ0KCQkJDQoJCQlpZiB2TWVzc2FnZSB0aGVuDQoJCQkJc2VsZjpFcnJvck1lc3NhZ2UoIkVycm9yIGRpc3BhdGNoaW5nIG91dGZpdCBldmVudCAlcyIsIHBFdmVudCBvciAibmlsIikNCgkJCQlzZWxmOkVycm9yTWVzc2FnZSh2TWVzc2FnZSkNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCS0tIFRyYW5zbGF0ZSB0byB0aGUgZXZlbnQgaWRzIGZvciBkaXNwYXRjaCB0aHJvdWdoIHRoZSBldmVudCBzeXN0ZW0NCgkNCglpZiBwRXZlbnQgPT0gIldFQVJfT1VURklUIiB0aGVuDQoJCXNlbGYuRXZlbnRMaWI6RGlzcGF0Y2hFdmVudCgiV0VBUk9VVEZJVCIpDQoJZWxzZWlmIHBFdmVudCA9PSAiVU5XRUFSX09VVEZJVCIgdGhlbg0KCQlzZWxmLkV2ZW50TGliOkRpc3BhdGNoRXZlbnQoIlVOV0VBUk9VVEZJVCIpDQoJZW5kDQoNCgktLSBTZXQgdGhlIGNvcnJlY3QgSGVsbSBhbmQgQ2xvYWsgc2V0dGluZ3MuDQoJDQoJc2VsZi5PdXRmaXRTdGFjazpVcGRhdGVPdXRmaXREaXNwbGF5KCkNCgkNCgktLXNlbGYuU2NoZWR1bGVyTGliOlNjaGVkdWxlVW5pcXVlVGFzaygwLjUsIHNlbGYuT3V0Zml0U3RhY2suVXBkYXRlT3V0Zml0RGlzcGxheSwgc2VsZi5PdXRmaXRTdGFjaykNCglzZWxmLlNjaGVkdWxlckxpYjpTY2hlZHVsZVVuaXF1ZVRhc2soMC4xLCBzZWxmLlVwZGF0ZUN1cnJlbnRPdXRmaXRJY29uLCBzZWxmKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGVDdXJyZW50T3V0Zml0SWNvbigpDQoJbG9jYWwgXywgdk91dGZpdCA9IHNlbGY6R2V0Q3VycmVudE91dGZpdEluZm8oKQ0KCQ0KCWxvY2FsIHZUZXh0dXJlID0gc2VsZi5PdXRmaXRCYXI6R2V0T3V0Zml0VGV4dHVyZSh2T3V0Zml0KQ0KCQ0KCVNldFBvcnRyYWl0VG9UZXh0dXJlKE91dGZpdHRlck1pbmltYXBCdXR0b24uQ3VycmVudE91dGZpdFRleHR1cmUsIHZUZXh0dXJlKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpCYW5rRnJhbWVPcGVuZWQoKQ0KCXNlbGYuQmFua0ZyYW1lSXNPcGVuID0gdHJ1ZQ0KCXNlbGY6QmFua1Nsb3RzQ2hhbmdlZCgpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkJhbmtGcmFtZUNsb3NlZCgpDQoJc2VsZi5CYW5rRnJhbWVJc09wZW4gPSBmYWxzZQ0KCXNlbGY6QmFua1Nsb3RzQ2hhbmdlZCgpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJlZ2VuRGlzYWJsZWQocEV2ZW50KQ0KCXNlbGYuSW5Db21iYXQgPSB0cnVlDQoJDQoJaWYgc2VsZi5PdXRmaXRCYXIgdGhlbg0KCQlzZWxmLk91dGZpdEJhcjpBZGp1c3RBbHBoYSgpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJlZ2VuRW5hYmxlZChwRXZlbnQpDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJc2VsZi5JbkNvbWJhdCA9IGZhbHNlDQoJc2VsZjpFbmRFcXVpcG1lbnRVcGRhdGUoKQ0KCQ0KCWlmIHNlbGYuT3V0Zml0QmFyIHRoZW4NCgkJc2VsZi5PdXRmaXRCYXI6QWRqdXN0QWxwaGEoKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpQbGF5ZXJEZWFkKHBFdmVudCkNCglzZWxmLklzRGVhZCA9IHRydWUNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6UGxheWVyQWxpdmUocEV2ZW50KQ0KCXNlbGY6QmVnaW5FcXVpcG1lbnRVcGRhdGUoKQ0KCXNlbGYuSXNEZWFkID0gZmFsc2UNCglzZWxmOlVwZGF0ZUF1cmFTdGF0ZXMoKQ0KCXNlbGY6RW5kRXF1aXBtZW50VXBkYXRlKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VW5pdEhlYWx0aE9yTWFuYUNoYW5nZWQocFVuaXRJRCkNCglpZiBwVW5pdElEIH49ICJwbGF5ZXIiIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJDQoJLS0gQ2hlY2sgdG8gc2VlIGlmIHRoZSBwbGF5ZXIgaXMgZnVsbCB3aGlsZSBkaW5pbmcNCgkNCglpZiBzZWxmLlNwZWNpYWxTdGF0ZS5EaW5pbmcNCglhbmQgc2VsZjpQbGF5ZXJJc0Z1bGwoKSB0aGVuDQoJCXNlbGY6U2V0U3BlY2lhbE91dGZpdEVuYWJsZWQoIkRpbmluZyIsIGZhbHNlKQ0KCWVuZA0KCQ0KCS0tIElmIHRoZSBtYW5hIGRyb3BzLCBzZWUgaWYgdGhlcmUgd2FzIGEgcmVjZW50IHNwZWxsY2FzdA0KCQ0KCWxvY2FsIHZQbGF5ZXJNYW5hID0gVW5pdFBvd2VyKCJwbGF5ZXIiKQ0KCQ0KCWlmIHZQbGF5ZXJNYW5hIGFuZCAobm90IHNlbGYuUHJldmlvdXNNYW5hTGV2ZWwgb3IgdlBsYXllck1hbmEgPCBzZWxmLlByZXZpb3VzTWFuYUxldmVsKSB0aGVuDQoJCWxvY2FsIHZUaW1lID0gR2V0VGltZSgpDQoJCQ0KCQlpZiBzZWxmLlNwZWxsY2FzdFNlbnRUaW1lIGFuZCB2VGltZSA8IHNlbGYuU3BlbGxjYXN0U2VudFRpbWUgKyAxMCB0aGVuDQoJCQlzZWxmLlNwZWxsY2FzdFNlbnRUaW1lID0gbmlsDQoJCQkNCgkJCS0tIEZpdmUgc2Vjb25kIHJ1bGUgaGFzIGJlZ3VuDQoJCQkNCgkJCWlmIHNlbGYuU3Bpcml0UmVnZW5FbmFibGVkIHRoZW4NCgkJCQlzZWxmLlNwaXJpdFJlZ2VuRW5hYmxlZCA9IGZhbHNlDQoJCQkJc2VsZjpTZXRTcGVjaWFsT3V0Zml0RW5hYmxlZCgiU3Bpcml0IiwgZmFsc2UpDQoJCQllbmQNCgkJCQ0KCQkJc2VsZi5TY2hlZHVsZXJMaWI6UmVzY2hlZHVsZVRhc2soNS4wLCBzZWxmLlNwaXJpdFJlZ2VuVGltZXIsIHNlbGYpDQoJCWVuZA0KCWVuZA0KCQ0KCXNlbGYuUHJldmlvdXNNYW5hTGV2ZWwgPSB2UGxheWVyTWFuYQ0KCQ0KCS0tDQoJDQoJaWYgc2VsZi5TcGVsbGNhc3RTZW50TWFuYSB0aGVuDQoJCXNlbGYuU2NoZWR1bGVyTGliOlJlc2NoZWR1bGVUYXNrKDAuMDEsIHNlbGYuQ2hlY2tTcGVsbGNhc3RNYW5hRHJvcCwgc2VsZikNCgllbmQNCgkNCgktLQ0KCQ0KCXNlbGY6RW5kRXF1aXBtZW50VXBkYXRlKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VW5pdFNwZWxsY2FzdERlYnVnKHBFdmVudElELCBwVW5pdElELCBwU3BlbGxOYW1lKQ0KCWlmIHBVbml0SUQgfj0gInBsYXllciIgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglzZWxmOkRlYnVnTWVzc2FnZSgiVW5pdFNwZWxsY2FzdERlYnVnOiAlcyAlcyAlcyIsIHBFdmVudElELCBwVW5pdElELCBwU3BlbGxOYW1lKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVbml0U3BlbGxjYXN0U2VudChwRXZlbnRJRCwgcFVuaXRJRCwgcFNwZWxsTmFtZSkNCglpZiBwVW5pdElEIH49ICJwbGF5ZXIiIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJc2VsZi5TcGVsbGNhc3RTZW50VGltZSA9IEdldFRpbWUoKQ0KCQ0KCWlmIG5vdCBzZWxmLklzQ2FzdGluZyB0aGVuDQoJCXNlbGYuSXNDYXN0aW5nID0gdHJ1ZQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVbml0U3BlbGxjYXN0Q2hhbm5lbFN0YXJ0KHBFdmVudElELCBwVW5pdElELCBwU3BlbGxOYW1lKQ0KCWlmIHBVbml0SUQgfj0gInBsYXllciIgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglzZWxmLklzQ2hhbm5lbGluZyA9IHRydWUNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VW5pdFNwZWxsY2FzdENoYW5uZWxTdG9wKHBFdmVudElELCBwVW5pdElELCBwU3BlbGxOYW1lKQ0KCWlmIHBVbml0SUQgfj0gInBsYXllciIgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglpZiBub3Qgc2VsZi5Jc0NoYW5uZWxpbmcgdGhlbg0KCQlyZXR1cm4NCgllbmQNCg0KCXNlbGY6QmVnaW5FcXVpcG1lbnRVcGRhdGUoKQ0KCXNlbGYuSXNDaGFubmVsaW5nID0gZmFsc2UNCglzZWxmLklzQ2FzdGluZyA9IGZhbHNlDQoJc2VsZjpTZXRVcGRhdGVEZWxheShHZXRUaW1lKCksIDAuNSkgLS0gTmVlZCBhIHNob3J0IGRlbGF5IGJlY2F1c2UgdGhlICdpbiBjb21iYXQnIG1lc3NhZ2UgZG9lc24ndCBjb21lIHVudGlsIGFmdGVyIHRoZSBzcGVsbGNhc3QgaXMgZG9uZQ0KCXNlbGY6RW5kRXF1aXBtZW50VXBkYXRlKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VW5pdFNwZWxsY2FzdFN0b3AocEV2ZW50SUQsIHBVbml0SUQsIHBTcGVsbE5hbWUpDQoJaWYgcFVuaXRJRCB+PSAicGxheWVyIiB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCWlmIG5vdCBzZWxmLklzQ2FzdGluZyB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCXNlbGY6QmVnaW5FcXVpcG1lbnRVcGRhdGUoKQ0KCXNlbGYuSXNDYXN0aW5nID0gZmFsc2UNCglzZWxmOlNldFVwZGF0ZURlbGF5KEdldFRpbWUoKSwgMC41KSAtLSBOZWVkIGEgc2hvcnQgZGVsYXkgYmVjYXVzZSB0aGUgJ2luIGNvbWJhdCcgbWVzc2FnZSBkb2Vzbid0IGNvbWUgdW50aWwgYWZ0ZXIgdGhlIHNwZWxsY2FzdCBpcyBkb25lDQoJc2VsZjpFbmRFcXVpcG1lbnRVcGRhdGUoKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTcGlyaXRSZWdlblRpbWVyKCkNCglzZWxmLlNwaXJpdFJlZ2VuRW5hYmxlZCA9IHRydWUNCglzZWxmOlNldFNwZWNpYWxPdXRmaXRFbmFibGVkKCJTcGlyaXQiLCB0cnVlKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpQbGF5ZXJJc0Z1bGwoKQ0KCWlmIFVuaXRIZWFsdGgoInBsYXllciIpIDwgKFVuaXRIZWFsdGhNYXgoInBsYXllciIpICogMC44NSkgdGhlbg0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCg0KCWlmIFVuaXRQb3dlclR5cGUoInBsYXllciIpIH49IDAgdGhlbg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KCQ0KCXJldHVybiBVbml0UG93ZXIoInBsYXllciIpID4gKFVuaXRQb3dlck1heCgicGxheWVyIikgKiAwLjg1KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVbml0SW52ZW50b3J5Q2hhbmdlZChwVW5pdElEKQ0KCWlmIHBVbml0SUQgPT0gInBsYXllciIgdGhlbg0KCQlzZWxmOlNjaGVkdWxlU3luY2goKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpJbnZlbnRvcnlDaGFuZ2VkKCkNCglzZWxmLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZSAtLSBVcGRhdGUgdGhlIGxpc3Qgc28gdGhlIGNoZWNrYm94ZXMgcmVmbGVjdCB0aGUgY3VycmVudCBzdGF0ZQ0KCQ0KCWxvY2FsIHZOZXdJdGVtc091dGZpdCwgdkN1cnJlbnRPdXRmaXQgPSBzZWxmOkdldE5ld0l0ZW1zT3V0Zml0KHNlbGYuQ3VycmVudE91dGZpdCkNCgkNCglpZiB2TmV3SXRlbXNPdXRmaXQgdGhlbg0KCQktLSBTYXZlIHRoZSBuZXcgb3V0Zml0DQoJCQ0KCQlzZWxmLkN1cnJlbnRPdXRmaXQgPSB2Q3VycmVudE91dGZpdA0KCQkNCgkJLS0gVXBkYXRlIHRoZSBzZWxlY3RlZCBvdXRmaXQgb3IgdGVtcG9yYXJ5IG91dGZpdA0KCQkNCgkJc2VsZjpTdWJ0cmFjdE91dGZpdCh2TmV3SXRlbXNPdXRmaXQsIHNlbGYuRXhwZWN0ZWRPdXRmaXQpDQoJCQ0KCQlpZiBuZXh0KHZOZXdJdGVtc091dGZpdC5JdGVtcykgdGhlbg0KCQkJaWYgc2VsZi5TZWxlY3RlZE91dGZpdCB0aGVuDQoJCQkJc2VsZjpVcGRhdGVPdXRmaXRGcm9tSW52ZW50b3J5KHNlbGYuU2VsZWN0ZWRPdXRmaXQsIHZOZXdJdGVtc091dGZpdCkNCgkJCWVsc2UNCgkJCQlzZWxmOlVwZGF0ZVRlbXBvcmFyeU91dGZpdCh2TmV3SXRlbXNPdXRmaXQpDQoJCQllbmQNCgkJZW5kDQoJCQ0KCQlpZiBzZWxmLlF1aWNrU2xvdHMgdGhlbg0KCQkJc2VsZi5RdWlja1Nsb3RzOkludmVudG9yeUNoYW5nZWQodk5ld0l0ZW1zT3V0Zml0OklzQW1tb09ubHkoKSkNCgkJZW5kDQoJZW5kDQoJDQoJLS0gRmlyZSBvZmYgYW4gZXZlbnQgaWYgdGhlIGN1cnJlbnQgb3V0Zml0IG1hdGNoZXMgdGhlIGV4cGVjdGVkIG91dGZpdA0KCQ0KCWlmIG5vdCBzZWxmLkVxdWlwcGVkTmVlZHNVcGRhdGUNCglhbmQgc2VsZjpPdXRmaXRJdGVtc0FyZVNhbWUoc2VsZi5DdXJyZW50T3V0Zml0LCBzZWxmLkV4cGVjdGVkT3V0Zml0LCBuaWwsIHRydWUpIHRoZW4NCgkJaWYgc2VsZi5EZWJ1Zy5UZW1wb3JhcnlJdGVtcyB0aGVuDQoJCQlzZWxmOkRlYnVnTWVzc2FnZSgiU3dhcCBjb21wbGV0ZSIpDQoJCWVuZA0KCQkNCgkJc2VsZi5FdmVudExpYjpEaXNwYXRjaEV2ZW50KCJPVVRGSVRURVJfU1dBUF9DT01QTEVURSIpDQoJZWxzZWlmIHNlbGYuRGVidWcuVGVtcG9yYXJ5SXRlbXMgdGhlbg0KCQlzZWxmOkRlYnVnTWVzc2FnZSgiU3dhcCBub3QgY29tcGxldGUiKQ0KCQlzZWxmOkRlYnVnVGFibGUoc2VsZi5DdXJyZW50T3V0Zml0LCAiQ3VycmVudE91dGZpdCIsIDIpDQoJCXNlbGY6RGVidWdUYWJsZShzZWxmLkV4cGVjdGVkT3V0Zml0LCAiRXhwZWN0ZWRPdXRmaXQiLCAyKQ0KCWVuZA0KCQ0KCS0tDQoJDQoJc2VsZjpVcGRhdGUodHJ1ZSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6RXhlY3V0ZUNvbW1hbmQocENvbW1hbmQpDQoJbG9jYWwgdkNvbW1hbmRzID0NCgl7DQoJCXdlYXIgPSB7dXNlT3V0Zml0ID0gdHJ1ZSwgZnVuYyA9IHNlbGYuV2Vhck91dGZpdE5vd30sDQoJCXVud2VhciA9IHt1c2VPdXRmaXQgPSB0cnVlLCBmdW5jID0gc2VsZi5SZW1vdmVPdXRmaXROb3d9LA0KCQl0b2dnbGUgPSB7dXNlT3V0Zml0ID0gdHJ1ZSwgZnVuYyA9IHNlbGYuVG9nZ2xlT3V0Zml0Tm93fSwNCgkJcmVzZXQgPSB7ZnVuYyA9IHNlbGYuQXNrUmVzZXR9LA0KCQkNCgkJZGVwb3NpdCA9IHt1c2VPdXRmaXQgPSB0cnVlLCBmdW5jID0gc2VsZi5EZXBvc2l0T3V0Zml0fSwNCgkJZGVwb3NpdHVuaXF1ZSA9IHt1c2VPdXRmaXQgPSB0cnVlLCBmdW5jID0gc2VsZi5EZXBvc2l0T3V0Zml0VW5pcXVlfSwNCgkJZGVwb3NpdG90aGVycyA9IHt1c2VPdXRmaXQgPSB0cnVlLCBmdW5jID0gc2VsZi5EZXBvc2l0T3RoZXJPdXRmaXRzfSwNCgkJd2l0aGRyYXcgPSB7dXNlT3V0Zml0ID0gdHJ1ZSwgZnVuYyA9IHNlbGYuV2l0aGRyYXdPdXRmaXR9LA0KCQl3aXRoZHJhd290aGVycyA9IHt1c2VPdXRmaXQgPSB0cnVlLCBmdW5jID0gc2VsZi5XaXRoZHJhd090aGVyT3V0Zml0c30sDQoJCQ0KCQl1cGRhdGUgPSB7dXNlT3V0Zml0ID0gdHJ1ZSwgZnVuYyA9IHNlbGYuU2V0T3V0Zml0VG9DdXJyZW50fSwNCgkJdXBkYXRldGl0bGUgPSB7ZnVuYyA9IGZ1bmN0aW9uICgpIE91dGZpdHRlci5PdXRmaXRTdGFjazpVcGRhdGVPdXRmaXREaXNwbGF5KCkgZW5kfSwNCgkJDQoJCXN1bW1hcnkgPSB7ZnVuYyA9IHNlbGYuT3V0Zml0U3VtbWFyeX0sDQoJCXJhdGluZyA9IHtmdW5jID0gc2VsZi5SYXRpbmdTdW1tYXJ5fSwNCgkJc29ydGJhZ3MgPSB7ZnVuYyA9IHNlbGYuU29ydEJhZ3N9LA0KCQlpdGVtaW5mbyA9IHtmdW5jID0gc2VsZi5TaG93TGlua0luZm99LA0KCQlpdGVtc3RhdHMgPSB7ZnVuYyA9IHNlbGYuU2hvd0xpbmtTdGF0c30sDQoJCQ0KCQltaXNzaW5nID0ge2Z1bmMgPSBzZWxmLlNob3dNaXNzaW5nSXRlbXN9LA0KCQkNCgkJc291bmQgPSB7ZnVuYyA9IHNlbGYuU2V0U291bmRPcHRpb259LA0KCQloZWxwID0ge2Z1bmMgPSBzZWxmLlNob3dDb21tYW5kSGVscH0sDQoJCQ0KCQlkaXNhYmxlID0ge2Z1bmMgPSBzZWxmLkRpc2FibGVBdXRvQ2hhbmdlc30sDQoJCWVuYWJsZSA9IHtmdW5jID0gc2VsZi5FbmFibGVBdXRvQ2hhbmdlc30sDQoJCQ0KCQllcnJvcnMgPSB7ZnVuYyA9IHNlbGYuU2V0RXJyb3JzT3B0aW9ufSwNCgkJZGF4ZGF4ID0ge2Z1bmMgPSBzZWxmLlNldEVycm9yc09wdGlvbn0sDQoJfQ0KCQ0KCS0tIEV2YWx1YXRlIG9wdGlvbnMgaWYgdGhlIGNvbW1hbmQgdXNlcyB0aGVtDQoJDQoJbG9jYWwgdkNvbW1hbmQNCgkNCglpZiBzdHJpbmcuZmluZChwQ29tbWFuZCwgInxoIikgdGhlbiAtLSBDb21tYW5kcyB3aGljaCB1c2UgaXRlbSBsaW5rcyBkb24ndCBhcHBlYXIgdG8gcGFyc2UgY29ycmVjdGx5DQoJCXZDb21tYW5kID0gcENvbW1hbmQNCgllbHNlDQoJCXZDb21tYW5kID0gU2VjdXJlQ21kT3B0aW9uUGFyc2UocENvbW1hbmQpDQoJZW5kDQoJDQoJaWYgbm90IHZDb21tYW5kIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0NCgkNCglsb2NhbCB2U3RhcnRJbmRleCwgdkVuZEluZGV4LCB2Q29tbWFuZCwgdlBhcmFtZXRlciA9IHN0cmluZy5maW5kKHZDb21tYW5kLCAiKCV3KykgPyguKikiKQ0KCQ0KCWlmIG5vdCB2Q29tbWFuZCB0aGVuDQoJCXNlbGY6U2hvd0NvbW1hbmRIZWxwKCkNCgkJcmV0dXJuDQoJZW5kDQoJDQoJdkNvbW1hbmQgPSBzdHJsb3dlcih2Q29tbWFuZCkNCgkNCglsb2NhbCB2Q29tbWFuZEluZm8gPSB2Q29tbWFuZHNbdkNvbW1hbmRdDQoJDQoJaWYgbm90IHZDb21tYW5kSW5mbyB0aGVuDQoJCXNlbGY6U2hvd0NvbW1hbmRIZWxwKCkNCgkJc2VsZjpFcnJvck1lc3NhZ2UoIlVua25vd24gY29tbWFuZCAlcyIsIHZDb21tYW5kKQ0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCB2T3V0Zml0ID0gbmlsDQoJbG9jYWwgdkNhdGVnb3J5SUQgPSBuaWwNCgkNCglpZiB2Q29tbWFuZEluZm8udXNlT3V0Zml0IHRoZW4NCgkJaWYgbm90IHZQYXJhbWV0ZXIgdGhlbg0KCQkJc2VsZjpFcnJvck1lc3NhZ2UoIkV4cGVjdGVkIG91dGZpdCBuYW1lIGZvciAiLi52Q29tbWFuZC4uIiBjb21tYW5kIikNCgkJCXJldHVybg0KCQllbmQNCgkJDQoJCXZPdXRmaXQsIHZDYXRlZ29yeUlEID0gc2VsZjpGaW5kT3V0Zml0QnlOYW1lKHZQYXJhbWV0ZXIpDQoJCQ0KCQlpZiBub3Qgdk91dGZpdCB0aGVuDQoJCQlzZWxmOkVycm9yTWVzc2FnZSgiQ291bGRuJ3QgZmluZCBvdXRmaXQgbmFtZWQgIi4udlBhcmFtZXRlcikNCgkJCXJldHVybg0KCQllbmQNCgkJDQoJCU91dGZpdHRlci5IYXNIV0V2ZW50ID0gdHJ1ZQ0KCQl2Q29tbWFuZEluZm8uZnVuYyhzZWxmLCB2T3V0Zml0KQ0KCQlPdXRmaXR0ZXIuSGFzSFdFdmVudCA9IGZhbHNlDQoJZWxzZQ0KCQl2Q29tbWFuZEluZm8uZnVuYyhzZWxmLCB2UGFyYW1ldGVyKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpEaXNhYmxlQXV0b0NoYW5nZXMoKQ0KCXNlbGY6U2V0QXV0b1N3aXRjaChmYWxzZSkNCglzZWxmOk5vdGVNZXNzYWdlKHNlbGYuY0F1dG9DaGFuZ2VzRGlzYWJsZWQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkVuYWJsZUF1dG9DaGFuZ2VzKCkNCglzZWxmOlNldEF1dG9Td2l0Y2godHJ1ZSkNCglzZWxmOk5vdGVNZXNzYWdlKHNlbGYuY0F1dG9DaGFuZ2VzRW5hYmxlZCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2hvd0NvbW1hbmRIZWxwKCkNCglzZWxmOk5vdGVNZXNzYWdlKEhJR0hMSUdIVF9GT05UX0NPTE9SX0NPREUuLiIvb3V0Zml0dGVyIHdlYXIgb3V0Zml0TmFtZSIuLk5PUk1BTF9GT05UX0NPTE9SX0NPREUuLiI6IFdlYXIgYW4gb3V0Zml0IikNCglzZWxmOk5vdGVNZXNzYWdlKEhJR0hMSUdIVF9GT05UX0NPTE9SX0NPREUuLiIvb3V0Zml0dGVyIHVud2VhciBvdXRmaXROYW1lIi4uTk9STUFMX0ZPTlRfQ09MT1JfQ09ERS4uIjogUmVtb3ZlIGFuIG91dGZpdCIpDQoJc2VsZjpOb3RlTWVzc2FnZShISUdITElHSFRfRk9OVF9DT0xPUl9DT0RFLi4iL291dGZpdHRlciB0b2dnbGUgb3V0Zml0TmFtZSIuLk5PUk1BTF9GT05UX0NPTE9SX0NPREUuLiI6IFdlYXJzIG9yIHJlbW92ZXMgYW4gb3V0Zml0IikNCglzZWxmOk5vdGVNZXNzYWdlKEhJR0hMSUdIVF9GT05UX0NPTE9SX0NPREUuLiIvb3V0Zml0dGVyIHJlc2V0Ii4uTk9STUFMX0ZPTlRfQ09MT1JfQ09ERS4uIjogUmVzZXRzIE91dGZpdHRlciwgcmVzdG9yaW5nIGRlZmF1bHQgc2V0dGluZ3MgYW5kIG91dGZpdHMiKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIiIpDQoJc2VsZjpOb3RlTWVzc2FnZShISUdITElHSFRfRk9OVF9DT0xPUl9DT0RFLi4iL291dGZpdHRlciBkZXBvc2l0IG91dGZpdE5hbWUiLi5OT1JNQUxfRk9OVF9DT0xPUl9DT0RFLi4iOiBEZXBvc2l0cyBhbiBvdXRmaXQgdG8gdGhlIGJhbmsiKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoSElHSExJR0hUX0ZPTlRfQ09MT1JfQ09ERS4uIi9vdXRmaXR0ZXIgZGVwb3NpdHVuaXF1ZSBvdXRmaXROYW1lIi4uTk9STUFMX0ZPTlRfQ09MT1JfQ09ERS4uIjogRGVwb3NpdHMgYW4gb3V0Zml0IHRvIHRoZSBiYW5rLCBleGNlcHQgZm9yIGl0ZW1zIHVzZWQgYnkgb3RoZXIgb3V0Zml0cyIpDQoJc2VsZjpOb3RlTWVzc2FnZShISUdITElHSFRfRk9OVF9DT0xPUl9DT0RFLi4iL291dGZpdHRlciBkZXBvc2l0b3RoZXJzIG91dGZpdE5hbWUiLi5OT1JNQUxfRk9OVF9DT0xPUl9DT0RFLi4iOiBEZXBvc2l0cyBhbGwgb3V0Zml0cyBleGNlcHQgb25lIHRvIHRoZSBiYW5rIikNCglzZWxmOk5vdGVNZXNzYWdlKEhJR0hMSUdIVF9GT05UX0NPTE9SX0NPREUuLiIvb3V0Zml0dGVyIHdpdGhkcmF3IG91dGZpdE5hbWUiLi5OT1JNQUxfRk9OVF9DT0xPUl9DT0RFLi4iOiBXaXRoZHJhd3MgYW4gb3V0Zml0IGZyb20gdGhlIGJhbmsiKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoSElHSExJR0hUX0ZPTlRfQ09MT1JfQ09ERS4uIi9vdXRmaXR0ZXIgd2l0aGRyYXdvdGhlcnMgb3V0Zml0TmFtZSIuLk5PUk1BTF9GT05UX0NPTE9SX0NPREUuLiI6IFdpdGhkcmF3cyBhbGwgb3V0Zml0cyBleGNlcHQgb25lIGZyb20gdGhlIGJhbmsiKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIiIpDQoJc2VsZjpOb3RlTWVzc2FnZShISUdITElHSFRfRk9OVF9DT0xPUl9DT0RFLi4iL291dGZpdHRlciB1cGRhdGUgb3V0Zml0TmFtZSIuLk5PUk1BTF9GT05UX0NPTE9SX0NPREUuLiI6IFVwZGF0ZXMgdGhlIG91dGZpdCB3aXRoIGN1cnJlbnRseSBlcXVpcHBlZCBpdGVtcyIpDQoJc2VsZjpOb3RlTWVzc2FnZShISUdITElHSFRfRk9OVF9DT0xPUl9DT0RFLi4iL291dGZpdHRlciB1cGRhdGV0aXRsZSIuLk5PUk1BTF9GT05UX0NPTE9SX0NPREUuLiI6IFJlZnJlc2hlcyB0aGUgY3VycmVudCBwbGF5ZXIgdGl0bGUgYmFzZWQgb24gZXF1aXBwZWQgaXRlbXMiKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIiIpDQoJc2VsZjpOb3RlTWVzc2FnZShISUdITElHSFRfRk9OVF9DT0xPUl9DT0RFLi4iL291dGZpdHRlciBzb3VuZCBbb258b2ZmXSIuLk5PUk1BTF9GT05UX0NPTE9SX0NPREUuLiI6IFR1cm5zIGVxdWlwbWVudCBzb3VuZCBlZmZlY3RzIG9mZiBkdXJpbmcgT3V0Zml0dGVyJ3MgZ2VhciBjaGFuZ2VzIikNCglzZWxmOk5vdGVNZXNzYWdlKEhJR0hMSUdIVF9GT05UX0NPTE9SX0NPREUuLiIvb3V0Zml0dGVyIGRpc2FibGUiLi5OT1JNQUxfRk9OVF9DT0xPUl9DT0RFLi4iOiBQcmV2ZW50cyBhbGwgc2NyaXB0cyBmcm9tIHJ1bm5pbmciKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoSElHSExJR0hUX0ZPTlRfQ09MT1JfQ09ERS4uIi9vdXRmaXR0ZXIgZW5hYmxlIi4uTk9STUFMX0ZPTlRfQ09MT1JfQ09ERS4uIjogQWxsb3dzIGVuYWJsZWQgc2NyaXB0cyB0byBydW4iKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoSElHSExJR0hUX0ZPTlRfQ09MT1JfQ09ERS4uIi9vdXRmaXR0ZXIgbWlzc2luZyIuLk5PUk1BTF9GT05UX0NPTE9SX0NPREUuLiI6IEdlbmVyYXRlcyBhIGxpc3Qgb2YgaXRlbXMgd2hpY2ggYXJlIGluIHlvdXIgb3V0Zml0cyBidXQgY2FuJ3QgYmUgZm91bmQiKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoSElHSExJR0hUX0ZPTlRfQ09MT1JfQ09ERS4uIi9vdXRmaXR0ZXIgZXJyb3JzIFtvbnxvZmZdIi4uTk9STUFMX0ZPTlRfQ09MT1JfQ09ERS4uIjogRW5hYmxlcy9kaXNhYmxlcyBtaXNzaW5nIGl0ZW0gbWVzc2FnZXMgZHVyaW5nIGdlYXIgY2hhbmdlcyIpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlVuZXF1aXBJdGVtQnlOYW1lKHBJdGVtTmFtZSkNCglsb2NhbCB2SW52ZW50b3J5SUQgPSB0b251bWJlcihwSXRlbU5hbWUpDQoJDQoJaWYgcEl0ZW1OYW1lIH49IHRvc3RyaW5nKHZJbnZlbnRvcnlJRCkgdGhlbg0KCQlsb2NhbCB2TG93ZXJJdGVtTmFtZSA9IHBJdGVtTmFtZTpsb3dlcigpDQoJCQ0KCQktLSBTZWFyY2ggdGhlIGludmVudG9yeSBmb3IgYSBtYXRjaGluZyBpdGVtIG5hbWUNCgkJDQoJCXZJbnZlbnRvcnlJRCA9IG5pbA0KCQkNCgkJZm9yIF8sIHZTbG90SUQgaW4gaXBhaXJzKHNlbGYuY1Nsb3RJRHMpIGRvDQoJCQlsb2NhbCB2SXRlbUNvZGUsDQoJCQkJICB2SXRlbUVuY2hhbnRDb2RlLA0KCQkJCSAgdkl0ZW1KZXdlbENvZGUxLA0KCQkJCSAgdkl0ZW1KZXdlbENvZGUyLA0KCQkJCSAgdkl0ZW1KZXdlbENvZGUzLA0KCQkJCSAgdkl0ZW1KZXdlbENvZGU0LA0KCQkJCSAgdkl0ZW1TdWJDb2RlLA0KCQkJCSAgdkl0ZW1VbmlxdWVJRCwNCgkJCQkgIHZJdGVtVW5rbm93bkNvZGUxLA0KCQkJCSAgdkl0ZW1OYW1lID0gc2VsZjpHZXRTbG90SURMaW5rSW5mbyh2U2xvdElEKQ0KCQkJDQoJCQlpZiB2SXRlbU5hbWUgYW5kIHZJdGVtTmFtZTpsb3dlcigpID09IHZMb3dlckl0ZW1OYW1lIHRoZW4NCgkJCQl2SW52ZW50b3J5SUQgPSB2U2xvdElEDQoJCQllbmQNCgkJZW5kDQoJCQ0KCQlpZiBub3QgdkludmVudG9yeUlEIHRoZW4NCgkJCXNlbGY6RXJyb3JNZXNzYWdlKCJDb3VsZG4ndCBmaW5kIGFuIGl0ZW0gbmFtZWQgIi4ucEl0ZW1OYW1lKQ0KCQllbmQNCgllbmQNCgkNCglsb2NhbCB2RW1wdHlCYWdTbG90ID0gc2VsZjpHZXRFbXB0eUJhZ1Nsb3QoTlVNX0JBR19TTE9UUywgMSkNCgkNCglpZiBub3QgdkVtcHR5QmFnU2xvdCB0aGVuDQoJCXNlbGY6RXJyb3JNZXNzYWdlKCJDb3VsZG4ndCB1bmVxdWlwICIuLnBJdGVtTmFtZS4uIiBiZWNhdXNlIGFsbCBiYWdzIGFyZSBmdWxsIikNCgkJcmV0dXJuDQoJZW5kDQoJDQoJUGlja3VwSW52ZW50b3J5SXRlbSh2SW52ZW50b3J5SUQpDQoJUGlja3VwQ29udGFpbmVySXRlbSh2RW1wdHlCYWdTbG90LkJhZ0luZGV4LCB2RW1wdHlCYWdTbG90LkJhZ1Nsb3RJbmRleCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6QXNrUmVidWlsZE91dGZpdChwT3V0Zml0KQ0KCXNlbGYuT3V0Zml0VG9SZWJ1aWxkID0gcE91dGZpdA0KCQ0KCVN0YXRpY1BvcHVwX1Nob3coIk9VVEZJVFRFUl9DT05GSVJNX1JFQlVJTEQiLCBzZWxmLk91dGZpdFRvUmVidWlsZC5OYW1lKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpBc2tTZXRDdXJyZW50KHBPdXRmaXQpDQoJc2VsZi5PdXRmaXRUb1JlYnVpbGQgPSBwT3V0Zml0DQoJDQoJU3RhdGljUG9wdXBfU2hvdygiT1VURklUVEVSX0NPTkZJUk1fU0VUX0NVUlJFTlQiLCBzZWxmLk91dGZpdFRvUmVidWlsZC5OYW1lKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpSZWJ1aWxkT3V0Zml0KHBPdXRmaXQpDQoJaWYgbm90IHBPdXRmaXQgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCB2U3RhdENvbmZpZyA9IHBPdXRmaXQuU3RhdENvbmZpZw0KCQ0KCWlmIG5vdCB2U3RhdENvbmZpZyBhbmQgcE91dGZpdC5TdGF0SUQgdGhlbg0KCQl2U3RhdENvbmZpZyA9IHt7U3RhdElEID0gcE91dGZpdC5TdGF0SUR9fQ0KCWVuZA0KCQ0KCWxvY2FsIHZPdXRmaXQgPSBzZWxmOkdlbmVyYXRlU21hcnRPdXRmaXQoDQoJCXBPdXRmaXQuTmFtZSwNCgkJdlN0YXRDb25maWcsDQoJCXNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKSwNCgkJZmFsc2UsDQoJCWZ1bmN0aW9uIChwTmV3T3V0Zml0KQ0KCQkJbG9jYWwgdk5ld0l0ZW1zID0gcE5ld091dGZpdDpHZXRJdGVtcygpDQoJCQkNCgkJCWlmIHBPdXRmaXQ6SXNDb21wbGV0ZShVbml0SGFzUmVsaWNTbG90KCJwbGF5ZXIiKSkgdGhlbg0KCQkJCWxvY2FsIHZPbGRJdGVtcyA9IHBPdXRmaXQ6R2V0SXRlbXMoKQ0KCQkJCQ0KCQkJCWZvciB2SXRlbVNsb3QsIHZPbGRJdGVtIGluIHBhaXJzKHZPbGRJdGVtcykgZG8NCgkJCQkJaWYgbm90IHZOZXdJdGVtc1t2SXRlbVNsb3RdIHRoZW4NCgkJCQkJCXZOZXdJdGVtc1t2SXRlbVNsb3RdID0gdk9sZEl0ZW0NCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJCQ0KCQkJcE91dGZpdDpTZXRJdGVtcyh2TmV3SXRlbXMpDQoJCQlzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChwT3V0Zml0KQ0KCQkJc2VsZjpXZWFyT3V0Zml0KHBPdXRmaXQpDQoJCQlzZWxmOlVwZGF0ZSh0cnVlKQ0KCQllbmQpDQoJDQoJaWYgdk91dGZpdCB0aGVuDQoJCWxvY2FsIHZOZXdJdGVtcyA9IHZPdXRmaXQ6R2V0SXRlbXMoKQ0KCQkNCgkJaWYgcE91dGZpdDpJc0NvbXBsZXRlKFVuaXRIYXNSZWxpY1Nsb3QoInBsYXllciIpKSB0aGVuDQoJCQlsb2NhbCB2T2xkSXRlbXMgPSBwT3V0Zml0OkdldEl0ZW1zKCkNCgkJCQ0KCQkJZm9yIHZJdGVtU2xvdCwgdk9sZEl0ZW0gaW4gcGFpcnModk9sZEl0ZW1zKSBkbw0KCQkJCWlmIG5vdCB2TmV3SXRlbXNbdkl0ZW1TbG90XSB0aGVuDQoJCQkJCXZOZXdJdGVtc1t2SXRlbVNsb3RdID0gdk9sZEl0ZW0NCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgkJcE91dGZpdDpTZXRJdGVtcyh2TmV3SXRlbXMpDQoJCXNlbGY6T3V0Zml0U2V0dGluZ3NDaGFuZ2VkKHBPdXRmaXQpDQoJCXNlbGY6V2Vhck91dGZpdChwT3V0Zml0KQ0KCQlzZWxmOlVwZGF0ZSh0cnVlKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTZXRPdXRmaXRUb0N1cnJlbnQocE91dGZpdCkNCglpZiBub3QgcE91dGZpdCB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCXBPdXRmaXQ6U2V0VG9DdXJyZW50SW52ZW50b3J5KCkNCgkNCglzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChwT3V0Zml0KQ0KCXNlbGY6V2Vhck91dGZpdChwT3V0Zml0KQ0KCQ0KCXNlbGY6VXBkYXRlKHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkFza0RlbGV0ZU91dGZpdChwT3V0Zml0KQ0KCWdPdXRmaXR0ZXJfT3V0Zml0VG9EZWxldGUgPSBwT3V0Zml0DQoJU3RhdGljUG9wdXBfU2hvdygiT1VURklUVEVSX0NPTkZJUk1fREVMRVRFIiwgZ091dGZpdHRlcl9PdXRmaXRUb0RlbGV0ZS5OYW1lKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpEZWxldGVTZWxlY3RlZE91dGZpdCgpDQoJaWYgbm90IGdPdXRmaXR0ZXJfT3V0Zml0VG9EZWxldGUgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglzZWxmOkRlbGV0ZU91dGZpdChnT3V0Zml0dGVyX091dGZpdFRvRGVsZXRlKQ0KCQ0KCXNlbGY6VXBkYXRlKHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlRhbGVudHNDaGFuZ2VkKCkNCglpZiBzZWxmLlBsYXllckNsYXNzID09ICJXQVJSSU9SIiB0aGVuDQoJCWxvY2FsIHZOdW1UYWxlbnRzID0gR2V0TnVtVGFsZW50cygyKQ0KCQkNCgkJZm9yIHZUYWxlbnRJbmRleCA9IDEsIHZOdW1UYWxlbnRzIGRvDQoJCQlsb2NhbCB2VGFsZW50TmFtZSwgdkljb25QYXRoLCB2VGllciwgdkNvbHVtbiwgdkN1cnJlbnRSYW5rLCB2TWF4UmFuaywgdklzRXhjZXB0aW9uYWwsIHZNZWV0c1ByZXJlcSA9IEdldFRhbGVudEluZm8oMiwgdlRhbGVudEluZGV4KQ0KCQkJDQoJCQlpZiB2SWNvblBhdGggPT0gIkludGVyZmFjZVxcSWNvbnNcXEFiaWxpdHlfV2Fycmlvcl9UaXRhbnNHcmlwIiB0aGVuDQoJCQkJLS1zZWxmOlRlc3RNZXNzYWdlKCIlcyBoYXMgJXMgcG9pbnRzIiwgdlRhbGVudE5hbWUsIHZDdXJyZW50UmFuaykNCgkJCQkNCgkJCQlzZWxmLkNhbkR1YWxXaWVsZDJIID0gdkN1cnJlbnRSYW5rID09IDENCgkJCQlicmVhaw0KCQkJZW5kDQoJCWVuZA0KCWVsc2UNCgkJc2VsZi5DYW5EdWFsV2llbGQySCA9IGZhbHNlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlNldFNjcmlwdChwT3V0Zml0LCBwU2NyaXB0KQ0KCXNlbGY6RGVhY3RpdmF0ZVNjcmlwdChwT3V0Zml0KQ0KCQ0KCWlmIHBTY3JpcHQgPT0gIiIgdGhlbg0KCQlwU2NyaXB0ID0gbmlsDQoJZW5kDQoJDQoJcE91dGZpdC5TY3JpcHQgPSBwU2NyaXB0DQoJcE91dGZpdC5TY3JpcHRJRCA9IG5pbA0KCQ0KCXNlbGY6T3V0Zml0U2V0dGluZ3NDaGFuZ2VkKHNlbGYuU2VsZWN0ZWRPdXRmaXQpDQoJc2VsZjpBY3RpdmF0ZVNjcmlwdChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTZXRTY3JpcHRJRChwT3V0Zml0LCBwU2NyaXB0SUQpDQoJc2VsZjpEZWFjdGl2YXRlU2NyaXB0KHBPdXRmaXQpDQoJDQoJaWYgcFNjcmlwdElEID09ICIiIHRoZW4NCgkJcFNjcmlwdElEID0gbmlsDQoJZW5kDQoJDQoJcE91dGZpdC5TY3JpcHQgPSBuaWwNCglwT3V0Zml0LlNjcmlwdElEID0gcFNjcmlwdElEDQoJDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQoc2VsZi5TZWxlY3RlZE91dGZpdCkNCglzZWxmOkFjdGl2YXRlU2NyaXB0KHBPdXRmaXQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldFNjcmlwdChwT3V0Zml0KQ0KCWlmIHBPdXRmaXQuU2NyaXB0SUQgdGhlbg0KCQlsb2NhbCB2UHJlc2V0U2NyaXB0ID0gc2VsZjpHZXRQcmVzZXRTY3JpcHRCeUlEKHBPdXRmaXQuU2NyaXB0SUQpDQoJCQ0KCQlpZiB2UHJlc2V0U2NyaXB0IHRoZW4NCgkJCWxvY2FsIHZTY3JpcHQgPSB2UHJlc2V0U2NyaXB0LlNjcmlwdDpnc3ViKCIoW1xyXHRdKSIsIHtbIlxyIl0gPSAiIiwgWyJcdCJdID0gIiAgICAifSkNCgkJCQ0KCQkJcmV0dXJuIHZTY3JpcHQsIHBPdXRmaXQuU2NyaXB0SUQNCgkJZW5kDQoJZWxzZQ0KCQlyZXR1cm4gcE91dGZpdC5TY3JpcHQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2hvd1BhbmVsKHBQYW5lbEluZGV4KQ0KCXNlbGY6Q2FuY2VsRGlhbG9ncygpIC0tIEZvcmNlIGFueSBkaWFsb2dzIHRvIGNsb3NlIGlmIHRoZXkncmUgb3Blbg0KCQ0KCWlmIHNlbGYuQ3VycmVudFBhbmVsID4gMA0KCWFuZCBzZWxmLkN1cnJlbnRQYW5lbCB+PSBwUGFuZWxJbmRleCB0aGVuDQoJCXNlbGY6SGlkZVBhbmVsKHNlbGYuQ3VycmVudFBhbmVsKQ0KCWVuZA0KCQ0KCS0tIE5PVEU6IERvbid0IGNoZWNrIGZvciByZWR1bmRhbnQgY2FsbHMgc2luY2UgdGhpcyBmdW5jdGlvbg0KCS0tIHdpbGwgYmUgY2FsbGVkIHRvIHJlc2V0IHRoZSBmaWVsZCB2YWx1ZXMgYXMgd2VsbCBhcyB0byANCgktLSBhY3R1YWxseSBzaG93IHRoZSBwYW5lbCB3aGVuIGl0J3MgaGlkZGVuDQoJDQoJc2VsZi5DdXJyZW50UGFuZWwgPSBwUGFuZWxJbmRleA0KCQ0KCWxvY2FsIHZQYW5lbEZyYW1lID0gX0dbc2VsZi5jUGFuZWxGcmFtZXNbcFBhbmVsSW5kZXhdXQ0KCQ0KCXZQYW5lbEZyYW1lOlNob3coKQ0KCQ0KCVBhbmVsVGVtcGxhdGVzX1NldFRhYihPdXRmaXR0ZXJGcmFtZSwgcFBhbmVsSW5kZXgpDQoJDQoJLS0gVXBkYXRlIHRoZSBjb250cm9sIHZhbHVlcw0KCQ0KCWlmIHBQYW5lbEluZGV4ID09IDEgdGhlbg0KCQktLSBNYWluIHBhbmVsDQoJCQ0KCWVsc2VpZiBwUGFuZWxJbmRleCA9PSAyIHRoZW4NCgkJLS0gT3B0aW9ucyBwYW5lbA0KCQkNCgllbHNlaWYgcFBhbmVsSW5kZXggPT0gMyB0aGVuDQoJCS0tIEFib3V0IHBhbmVsDQoJCQ0KCQlpZiBub3Qgc2VsZi5BYm91dFZpZXcgdGhlbg0KCQkJc2VsZi5BYm91dFZpZXcgPSBzZWxmOk5ldyhzZWxmLl9BYm91dFZpZXcpDQoJCWVuZA0KCWVsc2UNCgkJc2VsZjpFcnJvck1lc3NhZ2UoIlVua25vd24gaW5kZXggKCVkKSBpbiBTaG93UGFuZWwoKSIsIHBQYW5lbEluZGV4KQ0KCWVuZA0KCQ0KCXNlbGY6VXBkYXRlKGZhbHNlKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpIaWRlUGFuZWwocFBhbmVsSW5kZXgpDQoJaWYgc2VsZi5DdXJyZW50UGFuZWwgfj0gcFBhbmVsSW5kZXggdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglfR1tzZWxmLmNQYW5lbEZyYW1lc1twUGFuZWxJbmRleF1dOkhpZGUoKQ0KCXNlbGYuQ3VycmVudFBhbmVsID0gMA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpDYW5jZWxEaWFsb2dzKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6QWRkRGl2aWRlck1lbnVJdGVtKCkNCglsb2NhbCB2SW5mbyA9IFVJRHJvcERvd25NZW51X0NyZWF0ZUluZm8oKQ0KCQ0KCXZJbmZvLnRleHQgPSAiICINCgl2SW5mby5ub3RDaGVja2FibGUgPSB0cnVlDQoJdkluZm8ubm90Q2xpY2thYmxlID0gdHJ1ZQ0KCQ0KCVVJRHJvcERvd25NZW51X0FkZEJ1dHRvbih2SW5mbywgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6QWRkQ2F0ZWdvcnlNZW51SXRlbShwTmFtZSkNCglsb2NhbCB2SW5mbyA9IFVJRHJvcERvd25NZW51X0NyZWF0ZUluZm8oKQ0KCQ0KCXZJbmZvLnRleHQgPSBwTmFtZQ0KCXZJbmZvLm5vdENoZWNrYWJsZSA9IHRydWUNCgl2SW5mby5ub3RDbGlja2FibGUgPSB0cnVlDQoJDQoJVUlEcm9wRG93bk1lbnVfQWRkQnV0dG9uKHZJbmZvLCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpBZGRNZW51SXRlbShwRnJhbWUsIHBOYW1lLCBwVmFsdWUsIHBDaGVja2VkLCBwTGV2ZWwsIHBDb2xvckNvZGUsIHBEaXNhYmxlZCwgcEFkZGl0aW9uYWxPcHRpb25zKQ0KCWlmIG5vdCBwQ29sb3JDb2RlIHRoZW4NCgkJcENvbG9yQ29kZSA9IE5PUk1BTF9GT05UX0NPTE9SX0NPREUNCgllbHNlaWYgdHlwZShwQ29sb3JDb2RlKSB+PSAic3RyaW5nIiB0aGVuDQoJCXNlbGY6RXJyb3JNZXNzYWdlKCJBZGRNZW51SXRlbTogcENvbG9yQ29kZSBpcyBub3QgYSBzdHJpbmciKQ0KCQlzZWxmOkRlYnVnU3RhY2soKQ0KCQlwQ29sb3JDb2RlID0gbmlsDQoJZW5kDQoJDQoJbG9jYWwgdkluZm8gPSBVSURyb3BEb3duTWVudV9DcmVhdGVJbmZvKCkNCg0KCXZJbmZvLnRleHQgPSBwTmFtZQ0KCXZJbmZvLmNoZWNrZWQgPSBwQ2hlY2tlZA0KCXZJbmZvLmFyZzEgPSBwRnJhbWUNCgl2SW5mby5hcmcyID0gcFZhbHVlDQoJdkluZm8udmFsdWUgPSBwVmFsdWUNCgl2SW5mby5mdW5jID0gc2VsZi5Ecm9wRG93bl9PbkNsaWNrDQoJdkluZm8uY29sb3JDb2RlID0gcENvbG9yQ29kZQ0KCXZJbmZvLmRpc2FibGVkID0gcERpc2FibGVkDQoJDQoJaWYgcEFkZGl0aW9uYWxPcHRpb25zIHRoZW4NCgkJZm9yIHZLZXksIHZWYWx1ZSBpbiBwYWlycyhwQWRkaXRpb25hbE9wdGlvbnMpIGRvDQoJCQl2SW5mb1t2S2V5XSA9IHZWYWx1ZQ0KCQllbmQNCgllbmQNCgkNCglVSURyb3BEb3duTWVudV9BZGRCdXR0b24odkluZm8sIHBMZXZlbCBvciBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpBZGRTdWJtZW51SXRlbShwRnJhbWUsIHBOYW1lLCBwVmFsdWUsIHBEaXNhYmxlZCwgcEFkZGl0aW9uYWxPcHRpb25zKQ0KCWxvY2FsIHZJbmZvID0gVUlEcm9wRG93bk1lbnVfQ3JlYXRlSW5mbygpDQoNCgl2SW5mby50ZXh0ID0gcE5hbWUNCgl2SW5mby5oYXNBcnJvdyA9IDENCgl2SW5mby5hcmcxID0gcEZyYW1lDQoJdkluZm8uYXJnMiA9IHBWYWx1ZQ0KCXZJbmZvLnZhbHVlID0gcFZhbHVlDQoJdkluZm8uY29sb3JDb2RlID0gTk9STUFMX0ZPTlRfQ09MT1JfQ09ERQ0KCXZJbmZvLmRpc2FibGVkID0gcERpc2FibGVkDQoJDQoJaWYgcEFkZGl0aW9uYWxPcHRpb25zIHRoZW4NCgkJZm9yIHZLZXksIHZWYWx1ZSBpbiBwYWlycyhwQWRkaXRpb25hbE9wdGlvbnMpIGRvDQoJCQl2SW5mb1t2S2V5XSA9IHZWYWx1ZQ0KCQllbmQNCgllbmQNCgkNCglVSURyb3BEb3duTWVudV9BZGRCdXR0b24odkluZm8sIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkluaXRpYWxpemVPdXRmaXRNZW51KHBGcmFtZSwgcE91dGZpdCkNCglpZiBub3QgcE91dGZpdCB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCWlmIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwgPT0gMSB0aGVuDQoJCXNlbGY6QWRkQ2F0ZWdvcnlNZW51SXRlbShwT3V0Zml0OkdldE5hbWUoKSkNCgkJDQoJCS0tIEdlbmVyYWwNCgkJDQoJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBQRVRfUkVOQU1FLCAiUkVOQU1FIikNCgkJc2VsZjpBZGRTdWJtZW51SXRlbShwRnJhbWUsIHNlbGYuY0tleUJpbmRpbmcsICJCSU5ESU5HIikNCgkJc2VsZjpBZGRTdWJtZW51SXRlbShwRnJhbWUsIHNlbGYuY091dGZpdERpc3BsYXksICJESVNQTEFZIikNCgkJc2VsZjpBZGRTdWJtZW51SXRlbShwRnJhbWUsIHNlbGYuY0JhbmtDYXRlZ29yeVRpdGxlLCAiQkFOS0lORyIpDQoJCWlmIHBPdXRmaXQuQ2F0ZWdvcnlJRCB+PSAiQ29tcGxldGUiIHRoZW4NCgkJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNVbmVxdWlwT3RoZXJzLCAiVU5FUVVJUF9PVEhFUlMiLCBwT3V0Zml0LlVuZXF1aXBPdGhlcnMpDQoJCWVuZA0KCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgREVMRVRFLCAiREVMRVRFIikNCgkJDQoJCS0tIFJlYnVpbGQNCgkJDQoJCXNlbGY6QWRkQ2F0ZWdvcnlNZW51SXRlbShzZWxmLmNSZWJ1aWxkKQ0KCQkNCgkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY1NldEN1cnJlbnRJdGVtcywgIlNFVF9DVVJSRU5UIikNCgkJDQoJCWxvY2FsIHZTdGF0TmFtZQ0KCQkNCgkJaWYgcE91dGZpdC5TdGF0Q29uZmlnIHRoZW4NCgkJCXZTdGF0TmFtZSA9IHNlbGY6R2V0U3RhdENvbmZpZ05hbWUocE91dGZpdC5TdGF0Q29uZmlnKQ0KCQllbHNlaWYgcE91dGZpdC5TdGF0SUQgdGhlbg0KCQkJdlN0YXROYW1lID0gc2VsZjpHZXRTdGF0SUROYW1lKHBPdXRmaXQuU3RhdElEKQ0KCQllbmQNCgkJDQoJCWlmIHZTdGF0TmFtZSB0aGVuDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgZm9ybWF0KHNlbGYuY1JlYnVpbGRPdXRmaXRGb3JtYXQsIHZTdGF0TmFtZSksICJSRUJVSUxEIikNCgkJZW5kDQoJCQ0KCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jUmVidWlsZEZvciwgIlJFQlVJTERfRk9SIikNCgkJDQoJCS0tIEF1dG9tYXRpb24NCgkJDQoJCXNlbGY6QWRkQ2F0ZWdvcnlNZW51SXRlbShzZWxmLmNBdXRvbWF0aW9uKQ0KCQkNCgkJbG9jYWwgdlByZXNldFNjcmlwdCA9IHNlbGY6R2V0UHJlc2V0U2NyaXB0QnlJRChwT3V0Zml0LlNjcmlwdElEKQ0KCQlsb2NhbCB2U2NyaXB0TmFtZQ0KCQkNCgkJaWYgdlByZXNldFNjcmlwdCB0aGVuDQoJCQl2U2NyaXB0TmFtZSA9IHZQcmVzZXRTY3JpcHQuTmFtZQ0KCQllbHNlaWYgcE91dGZpdC5TY3JpcHQgdGhlbg0KCQkJdlNjcmlwdE5hbWUgPSBzZWxmLmNDdXN0b21TY3JpcHQNCgkJZWxzZQ0KCQkJdlNjcmlwdE5hbWUgPSBuaWwNCgkJZW5kDQoJCQ0KCQlzZWxmOkFkZFN1Ym1lbnVJdGVtKHBGcmFtZSwgc3RyaW5nLmZvcm1hdChzZWxmLmNTY3JpcHRGb3JtYXQsIHZTY3JpcHROYW1lIG9yIHNlbGYuY05vU2NyaXB0KSwgIlNDUklQVCIpDQoJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNTY3JpcHRTZXR0aW5ncywgIlNDUklQVF9TRVRUSU5HUyIsIG5pbCwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCwgbmlsLCB2U2NyaXB0TmFtZSA9PSBuaWwpDQoJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNEaXNhYmxlU2NyaXB0LCAiRElTQUJMRSIsIHBPdXRmaXQuRGlzYWJsZWQsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwsIG5pbCwgdlNjcmlwdE5hbWUgPT0gbmlsKQ0KCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jRGlzYWJsZU91dGZpdEluQ29tYmF0LCAiQ09NQkFURElTQUJMRSIsIHBPdXRmaXQuQ29tYmF0RGlzYWJsZWQsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwsIG5pbCwgdlNjcmlwdE5hbWUgPT0gbmlsKQ0KCQkNCgkJLS0gT3V0Zml0IGJhcg0KCQkNCgkJaWYgc2VsZi5PdXRmaXRCYXIgdGhlbg0KCQkJc2VsZjpBZGRDYXRlZ29yeU1lbnVJdGVtKHNlbGYuY091dGZpdEJhcikNCgkJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNTaG93SW5PdXRmaXRCYXIsICJPVVRGSVRCQVJfU0hPVyIsIHNlbGYuT3V0Zml0QmFyOklzT3V0Zml0U2hvd24ocE91dGZpdCksIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwpDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jQ2hhbmdlSWNvbiwgIk9VVEZJVEJBUl9DSE9PU0VJQ09OIiwgbmlsLCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQllbmQNCgkJDQoJZWxzZWlmIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwgPT0gMiB0aGVuDQoJCWlmIFVJRFJPUERPV05NRU5VX01FTlVfVkFMVUUgPT0gIkJBTktJTkciIHRoZW4NCgkJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNEZXBvc2l0VG9CYW5rLCAiREVQT1NJVCIsIG5pbCwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCwgbmlsLCBub3Qgc2VsZi5CYW5rRnJhbWVJc09wZW4pDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jRGVwb3NpdFVuaXF1ZVRvQmFuaywgIkRFUE9TSVRVTklRVUUiLCBuaWwsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwsIG5pbCwgbm90IHNlbGYuQmFua0ZyYW1lSXNPcGVuKQ0KCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY1dpdGhkcmF3RnJvbUJhbmssICJXSVRIRFJBVyIsIG5pbCwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCwgbmlsLCBub3Qgc2VsZi5CYW5rRnJhbWVJc09wZW4pDQoJCQlzZWxmOkFkZERpdmlkZXJNZW51SXRlbSgpDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jRGVwb3NpdE90aGVyc1RvQmFuaywgIkRFUE9TSVRPVEhFUlMiLCBuaWwsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwsIG5pbCwgbm90IHNlbGYuQmFua0ZyYW1lSXNPcGVuKQ0KCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY1dpdGhkcmF3T3RoZXJzRnJvbUJhbmssICJXSVRIRFJBV09USEVSUyIsIG5pbCwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCwgbmlsLCBub3Qgc2VsZi5CYW5rRnJhbWVJc09wZW4pDQoJCWVsc2VpZiBVSURST1BET1dOTUVOVV9NRU5VX1ZBTFVFID09ICJCSU5ESU5HIiB0aGVuDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jTm9uZSwgIkJJTkRJTkdfTk9ORSIsIG5vdCBwT3V0Zml0LkJpbmRpbmdJbmRleCwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCkNCgkJCQ0KCQkJZm9yIHZJbmRleCA9IDEsIDEwIGRvDQoJCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIF9HWyJCSU5ESU5HX05BTUVfT1VURklUVEVSX09VVEZJVCIuLnZJbmRleF0sICJCSU5ESU5HXyIuLnZJbmRleCwgcE91dGZpdC5CaW5kaW5nSW5kZXggPT0gdkluZGV4LCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJZW5kDQoJCWVsc2VpZiBVSURST1BET1dOTUVOVV9NRU5VX1ZBTFVFID09ICJESVNQTEFZIiB0aGVuDQoJCQlzZWxmOkFkZENhdGVnb3J5TWVudUl0ZW0oc2VsZi5jSGVsbSkNCgkJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNEb250Q2hhbmdlLCAiSUdOT1JFSEVMTSIsIHBPdXRmaXQuU2hvd0hlbG0gPT0gbmlsLCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY1Nob3csICJTSE9XSEVMTSIsIHBPdXRmaXQuU2hvd0hlbG0gPT0gdHJ1ZSwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCkNCgkJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNIaWRlLCAiSElERUhFTE0iLCBwT3V0Zml0LlNob3dIZWxtID09IGZhbHNlLCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJDQoJCQlzZWxmOkFkZENhdGVnb3J5TWVudUl0ZW0oc2VsZi5jQ2xvYWspDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jRG9udENoYW5nZSwgIklHTk9SRUNMT0FLIiwgcE91dGZpdC5TaG93Q2xvYWsgPT0gbmlsLCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY1Nob3csICJTSE9XQ0xPQUsiLCBwT3V0Zml0LlNob3dDbG9hayA9PSB0cnVlLCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY0hpZGUsICJISURFQ0xPQUsiLCBwT3V0Zml0LlNob3dDbG9hayA9PSBmYWxzZSwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCkNCgkJCQ0KCQkJc2VsZjpBZGRDYXRlZ29yeU1lbnVJdGVtKHNlbGYuY1BsYXllclRpdGxlKQ0KCQkJDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgc2VsZi5jRG9udENoYW5nZSwgIklHTk9SRVRJVExFIiwgcE91dGZpdC5TaG93VGl0bGVJRCA9PSBuaWwsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwpDQoJCQlzZWxmOkFkZE1lbnVJdGVtKHBGcmFtZSwgTk9ORSwgIlRJVExFXy0xIiwgMCA9PSBwT3V0Zml0LlNob3dUaXRsZUlELCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJDQoJCQlsb2NhbCB2TnVtVGl0bGVzID0gR2V0TnVtVGl0bGVzKCkNCgkJCWxvY2FsIHZOdW1WaXNpYmxlVGl0bGVzID0gMA0KCQkJDQoJCQlmb3IgdlRpdGxlSUQgPSAxLCB2TnVtVGl0bGVzIGRvDQoJCQkJaWYgSXNUaXRsZUtub3duKHZUaXRsZUlEKSB+PSAwIHRoZW4NCgkJCQkJdk51bVZpc2libGVUaXRsZXMgPSB2TnVtVmlzaWJsZVRpdGxlcyArIDENCgkJCQkJDQoJCQkJCWlmIHZOdW1WaXNpYmxlVGl0bGVzID4gc2VsZi5NYXhTaW1wbGVUaXRsZXMgdGhlbg0KCQkJCQkJc2VsZjpBZGRTdWJtZW51SXRlbShwRnJhbWUsIHNlbGYuY01vcmUsICJUSVRMRSIpDQoJCQkJCQlicmVhaw0KCQkJCQllbmQNCgkJCQkJDQoJCQkJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBHZXRUaXRsZU5hbWUodlRpdGxlSUQpLCAiVElUTEVfIi4udlRpdGxlSUQsIHZUaXRsZUlEID09IHBPdXRmaXQuU2hvd1RpdGxlSUQsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwpDQoJCQkJZW5kDQoJCQllbmQNCgkJZWxzZWlmIFVJRFJPUERPV05NRU5VX01FTlVfVkFMVUUgPT0gIlNDUklQVCIgdGhlbg0KCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY05vU2NyaXB0LCAiUFJFU0VUX05PTkUiLCBwT3V0Zml0LlNjcmlwdElEID09IG5pbCBhbmQgc2VsZjpHZXRTY3JpcHQocE91dGZpdCkgPT0gbmlsLCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHNlbGYuY0VkaXRTY3JpcHRFbGxpZGUsICJFRElUX1NDUklQVCIsIHBPdXRmaXQuU2NyaXB0SUQgPT0gbmlsIGFuZCBzZWxmOkdldFNjcmlwdChwT3V0Zml0KSB+PSBuaWwsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwpDQoJCQkNCgkJCWxvY2FsIHZDYXRlZ29yeQ0KCQkJDQoJCQlmb3IgXywgdlByZXNldFNjcmlwdCBpbiBpcGFpcnMoc2VsZi5QcmVzZXRTY3JpcHRzKSBkbw0KCQkJCWlmIG5vdCB2UHJlc2V0U2NyaXB0LkNsYXNzDQoJCQkJb3IgdlByZXNldFNjcmlwdC5DbGFzcyA9PSBzZWxmLlBsYXllckNsYXNzIHRoZW4NCgkJCQkJLS0gU3RhcnQgYSBuZXcgY2F0ZWdvcnkgaWYgaXQncyBjaGFuZ2luZw0KCQkJCQkNCgkJCQkJbG9jYWwgdk5ld0NhdGVnb3J5ID0gdlByZXNldFNjcmlwdC5DYXRlZ29yeSBvciB2UHJlc2V0U2NyaXB0LkNsYXNzIG9yICJHRU5FUkFMIg0KCQkJCQkNCgkJCQkJaWYgdkNhdGVnb3J5IH49IHZOZXdDYXRlZ29yeSB0aGVuDQoJCQkJCQl2Q2F0ZWdvcnkgPSB2TmV3Q2F0ZWdvcnkNCgkJCQkJCXNlbGY6QWRkU3VibWVudUl0ZW0ocEZyYW1lLCBzZWxmLmNTY3JpcHRDYXRlZ29yeU5hbWVbdkNhdGVnb3J5XSBvciBzZWxmLmNDbGFzc05hbWVbdkNhdGVnb3J5XSwgdkNhdGVnb3J5KQ0KCQkJCQllbmQNCgkJCQllbmQgLS0gaWYNCgkJCWVuZCAtLSBmb3INCgkJZW5kIC0tIGVsc2VpZg0KCWVsc2VpZiBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMID09IDMgdGhlbg0KCQlpZiBVSURST1BET1dOTUVOVV9NRU5VX1ZBTFVFID09ICJUSVRMRSIgdGhlbg0KCQkJbG9jYWwgdk51bVRpdGxlcyA9IEdldE51bVRpdGxlcygpDQoJCQlsb2NhbCB2TnVtVmlzaWJsZVRpdGxlcyA9IDANCgkJCQ0KCQkJZm9yIHZUaXRsZUlEID0gMSwgdk51bVRpdGxlcyBkbw0KCQkJCWlmIElzVGl0bGVLbm93bih2VGl0bGVJRCkgfj0gMCB0aGVuDQoJCQkJCXZOdW1WaXNpYmxlVGl0bGVzID0gdk51bVZpc2libGVUaXRsZXMgKyAxDQoJCQkJCQ0KCQkJCQlpZiB2TnVtVmlzaWJsZVRpdGxlcyA+IHNlbGYuTWF4U2ltcGxlVGl0bGVzIHRoZW4NCgkJCQkJCXNlbGY6QWRkTWVudUl0ZW0ocEZyYW1lLCBHZXRUaXRsZU5hbWUodlRpdGxlSUQpLCAiVElUTEVfIi4udlRpdGxlSUQsIHZUaXRsZUlEID09IHBPdXRmaXQuU2hvd1RpdGxlSUQsIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVsc2VpZiB0eXBlKFVJRFJPUERPV05NRU5VX01FTlVfVkFMVUUpID09ICJzdHJpbmciIGFuZCBVSURST1BET1dOTUVOVV9NRU5VX1ZBTFVFOnN1YigxLCA4KSA9PSAiUkVCVUlMRF8iIHRoZW4NCgkJCWxvY2FsIHZDYXRlZ29yeSA9IHNlbGY6R2V0Q2F0ZWdvcnlCeUlEKFVJRFJPUERPV05NRU5VX01FTlVfVkFMVUU6c3ViKDkpKQ0KCQkJDQoJCQlpZiB2Q2F0ZWdvcnkgdGhlbg0KCQkJCWxvY2FsIHZOdW1TdGF0cyA9IHZDYXRlZ29yeTpHZXROdW1TdGF0cygpDQoJCQkJDQoJCQkJZm9yIHZTdGF0SW5kZXggPSAxLCB2TnVtU3RhdHMgZG8NCgkJCQkJbG9jYWwgdlN0YXQgPSB2Q2F0ZWdvcnk6R2V0SW5kZXhlZFN0YXQodlN0YXRJbmRleCkNCgkJCQkJc2VsZjpBZGRNZW51SXRlbShwRnJhbWUsIHZTdGF0Lk5hbWUsICJSRUJVSUxEX1NUQVRfIi4udlN0YXQuSUQpDQoJCQkJZW5kDQoJCQllbmQNCgkJZWxzZQ0KCQkJZm9yIF8sIHZQcmVzZXRTY3JpcHQgaW4gaXBhaXJzKHNlbGYuUHJlc2V0U2NyaXB0cykgZG8NCgkJCQlpZiBub3QgdlByZXNldFNjcmlwdC5DbGFzcw0KCQkJCW9yIHZQcmVzZXRTY3JpcHQuQ2xhc3MgPT0gc2VsZi5QbGF5ZXJDbGFzcyB0aGVuDQoJCQkJCWxvY2FsIHZDYXRlZ29yeSA9IHZQcmVzZXRTY3JpcHQuQ2F0ZWdvcnkgb3IgdlByZXNldFNjcmlwdC5DbGFzcyBvciAiR0VORVJBTCINCgkJCQkJDQoJCQkJCWlmIHZDYXRlZ29yeSA9PSBVSURST1BET1dOTUVOVV9NRU5VX1ZBTFVFIHRoZW4NCgkJCQkJCWxvY2FsIHZOYW1lID0gdlByZXNldFNjcmlwdC5OYW1lDQoJCQkJCQlsb2NhbCB2U2NyaXB0RmllbGRzID0gc2VsZjpQYXJzZVNjcmlwdEZpZWxkcyh2UHJlc2V0U2NyaXB0LlNjcmlwdCkNCgkJCQkJCQ0KCQkJCQkJaWYgdlNjcmlwdEZpZWxkcy5JbnB1dHMgfj0gbmlsIGFuZCAjdlNjcmlwdEZpZWxkcy5JbnB1dHMgfj0gMCB0aGVuDQoJCQkJCQkJdk5hbWUgPSB2TmFtZS4uIi4uLiINCgkJCQkJCWVuZA0KCQkJCQkJDQoJCQkJCQlzZWxmOkFkZE1lbnVJdGVtKA0KCQkJCQkJCQlwRnJhbWUsDQoJCQkJCQkJCXZOYW1lLA0KCQkJCQkJCQkiUFJFU0VUXyIuLnZQcmVzZXRTY3JpcHQuSUQsDQoJCQkJCQkJCXBPdXRmaXQuU2NyaXB0SUQgPT0gdlByZXNldFNjcmlwdC5JRCwNCgkJCQkJCQkJbmlsLCAtLSBMZXZlbA0KCQkJCQkJCQluaWwsIC0tIENvbG9yDQoJCQkJCQkJCW5pbCwgLS0gRGlzYWJsZWQNCgkJCQkJCQkJe3Rvb2x0aXBUaXRsZSA9IHZOYW1lLCB0b29sdGlwVGV4dCA9IHZTY3JpcHRGaWVsZHMuRGVzY3JpcHRpb259KQ0KCQkJCQllbmQgLS0gaWYNCgkJCQllbmQgLS0gaWYNCgkJCWVuZCAtLSBmb3INCgkJZW5kIC0tIGVsc2UNCgllbmQgLS0gZWxzZWlmDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkl0ZW1Ecm9wRG93bl9Jbml0aWFsaXplKHBGcmFtZSkNCglsb2NhbCB2SXRlbSA9IHBGcmFtZTpHZXRQYXJlbnQoKTpHZXRQYXJlbnQoKQ0KCWxvY2FsIHZPdXRmaXQgPSBPdXRmaXR0ZXI6R2V0T3V0Zml0RnJvbUxpc3RJdGVtKHZJdGVtKQ0KCQ0KCU91dGZpdHRlcjpJbml0aWFsaXplT3V0Zml0TWVudShwRnJhbWUsIHZPdXRmaXQpDQoJDQoJcEZyYW1lOlNldEhlaWdodChwRnJhbWUuU2F2ZWRIZWlnaHQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlNldEF1dG9Td2l0Y2gocEF1dG9Td2l0Y2gpDQoJbG9jYWwgdkRpc2FibGVBdXRvU3dpdGNoID0gbm90IHBBdXRvU3dpdGNoDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5PcHRpb25zLkRpc2FibGVBdXRvU3dpdGNoID09IHZEaXNhYmxlQXV0b1N3aXRjaCB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCXNlbGYuU2V0dGluZ3MuT3B0aW9ucy5EaXNhYmxlQXV0b1N3aXRjaCA9IHZEaXNhYmxlQXV0b1N3aXRjaA0KCQ0KCWlmIHBBdXRvU3dpdGNoIHRoZW4NCgkJc2VsZjpBY3RpdmF0ZUFsbFNjcmlwdHMoKQ0KCWVsc2UNCgkJc2VsZjpEZWFjdGl2YXRlQWxsU2NyaXB0cygpDQoJZW5kDQoJDQoJc2VsZi5EaXNwbGF5SXNEaXJ0eSA9IHRydWUNCglzZWxmOlVwZGF0ZShmYWxzZSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2V0U2hvd1Rvb2x0aXBJbmZvKHBTaG93SW5mbykNCglzZWxmLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZVRvb2xUaXBJbmZvID0gbm90IHBTaG93SW5mbw0KCXNlbGY6VXBkYXRlKGZhbHNlKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTZXRTaG93SXRlbUNvbXBhcmlzb25zKHBTaG93Q29tcGFyaXNvbnMpDQoJc2VsZi5TZXR0aW5ncy5PcHRpb25zLkRpc2FibGVJdGVtQ29tcGFyaXNvbnMgPSBub3QgcFNob3dDb21wYXJpc29ucw0KCQ0KCWlmIHBTaG93Q29tcGFyaXNvbnMgYW5kIG5vdCBzZWxmLkV4dGVuZGVkQ29tcGFyZVRvb2x0aXAgdGhlbg0KCQlzZWxmLkV4dGVuZGVkQ29tcGFyZVRvb2x0aXAgPSBzZWxmOk5ldyhzZWxmLl9FeHRlbmRlZENvbXBhcmVUb29sdGlwKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTZXRTaG93TWluaW1hcEJ1dHRvbihwU2hvd0J1dHRvbikNCglzZWxmLlNldHRpbmdzLk9wdGlvbnMuSGlkZU1pbmltYXBCdXR0b24gPSBub3QgcFNob3dCdXR0b24NCgkNCglpZiBzZWxmLlNldHRpbmdzLk9wdGlvbnMuSGlkZU1pbmltYXBCdXR0b24gdGhlbg0KCQlPdXRmaXR0ZXJNaW5pbWFwQnV0dG9uOkhpZGUoKQ0KCWVsc2UNCgkJT3V0Zml0dGVyTWluaW1hcEJ1dHRvbjpTaG93KCkNCgllbmQNCgkNCglzZWxmOlVwZGF0ZShmYWxzZSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2V0U2hvd0hvdGtleU1lc3NhZ2VzKHBTaG93SG90a2V5TWVzc2FnZXMpDQoJc2VsZi5TZXR0aW5ncy5PcHRpb25zLkRpc2FibGVIb3RrZXlNZXNzYWdlcyA9IG5vdCBwU2hvd0hvdGtleU1lc3NhZ2VzDQoJDQoJc2VsZjpVcGRhdGUoZmFsc2UpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLlVJRHJvcERvd25NZW51X1NldEFuY2hvciguLi4pIFVJRHJvcERvd25NZW51X1NldEFuY2hvciguLi4pIGVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuTWluaW1hcERyb3BEb3duX09uTG9hZChzZWxmKQ0KCU91dGZpdHRlci5VSURyb3BEb3duTWVudV9TZXRBbmNob3Ioc2VsZiwgMywgLTcsICJUT1BSSUdIVCIsIHNlbGY6R2V0TmFtZSgpLCAiVE9QTEVGVCIpDQoJT3V0Zml0dGVyOkRyb3BEb3duTWVudV9Jbml0aWFsaXplKHNlbGYsIE91dGZpdHRlci5NaW5pbWFwRHJvcERvd25fSW5pdGlhbGl6ZSkNCgktLXNlbGY6UmVmcmVzaCgpIC0tIERvbid0IHJlZnJlc2ggb24gbWVudXMgd2hpY2ggZG9uJ3QgaGF2ZSBhIHRleHQgcG9ydGlvbg0KCQ0KCWlmIG5vdCBPdXRmaXR0ZXIuUmVnaXN0ZXJlZE1pbmltYXBFdmVudHMgdGhlbg0KCQlPdXRmaXR0ZXI6UmVnaXN0ZXJPdXRmaXRFdmVudCgiV0VBUl9PVVRGSVQiLCBPdXRmaXR0ZXIuTWluaW1hcERyb3BEb3duX091dGZpdEV2ZW50KQ0KCQlPdXRmaXR0ZXI6UmVnaXN0ZXJPdXRmaXRFdmVudCgiVU5XRUFSX09VVEZJVCIsIE91dGZpdHRlci5NaW5pbWFwRHJvcERvd25fT3V0Zml0RXZlbnQpDQoJCQ0KCQlPdXRmaXR0ZXIuUmVnaXN0ZXJlZE1pbmltYXBFdmVudHMgPSB0cnVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk1pbmltYXBEcm9wRG93bl9PdXRmaXRFdmVudChwRXZlbnQsIHBQYXJhbWV0ZXIxLCBwUGFyYW1ldGVyMikNCglPdXRmaXR0ZXIuU2NoZWR1bGVyTGliOlNjaGVkdWxlVW5pcXVlVGFzaygwLjEsIE91dGZpdHRlci5NaW5pbWFwRHJvcERvd25fT3V0Zml0RXZlbnQyKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5NaW5pbWFwRHJvcERvd25fT3V0Zml0RXZlbnQyKCkNCglpZiBVSURST1BET1dOTUVOVV9PUEVOX01FTlUgfj0gT3V0Zml0dGVyTWluaW1hcEJ1dHRvbiB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCU91dGZpdHRlcjpEcm9wRG93bk1lbnVfSW5pdGlhbGl6ZShPdXRmaXR0ZXJNaW5pbWFwQnV0dG9uLCBPdXRmaXR0ZXIuTWluaW1hcERyb3BEb3duX0luaXRpYWxpemUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk1pbmltYXBEcm9wRG93bl9BZGp1c3RTY3JlZW5Qb3NpdGlvbihwTWVudSkNCglsb2NhbCB2TGlzdEZyYW1lID0gRHJvcERvd25MaXN0MQ0KCQ0KCWlmIG5vdCB2TGlzdEZyYW1lOklzVmlzaWJsZSgpIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgdkNlbnRlclgsIHZDZW50ZXJZID0gcE1lbnU6R2V0Q2VudGVyKCkNCglsb2NhbCB2U2NyZWVuV2lkdGgsIHZTY3JlZW5IZWlnaHQgPSBHZXRTY3JlZW5XaWR0aCgpLCBHZXRTY3JlZW5IZWlnaHQoKQ0KCQ0KCWxvY2FsIHZBbmNob3INCglsb2NhbCB2T2Zmc2V0WCwgdk9mZnNldFkNCgkNCglpZiB2Q2VudGVyWSA8IHZTY3JlZW5IZWlnaHQgLyAyIHRoZW4NCgkJdkFuY2hvciA9ICJCT1RUT00iDQoJCXZPZmZzZXRZID0gLTgNCgllbHNlDQoJCXZBbmNob3IgPSAiVE9QIg0KCQl2T2Zmc2V0WSA9IC0xNw0KCWVuZA0KCQ0KCWlmIHZDZW50ZXJYIDwgdlNjcmVlbldpZHRoIC8gMiB0aGVuDQoJCXZBbmNob3IgPSB2QW5jaG9yLi4iTEVGVCINCgkJdk9mZnNldFggPSAyMQ0KCWVsc2UNCgkJdkFuY2hvciA9IHZBbmNob3IuLiJSSUdIVCINCgkJdk9mZnNldFggPSAzDQoJZW5kDQoJDQoJdkxpc3RGcmFtZTpDbGVhckFsbFBvaW50cygpDQoJdkxpc3RGcmFtZTpTZXRQb2ludCh2QW5jaG9yLCBwTWVudS5yZWxhdGl2ZVRvLCBwTWVudS5yZWxhdGl2ZVBvaW50LCB2T2Zmc2V0WCwgdk9mZnNldFkpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOk91dGZpdElzVmlzaWJsZShwT3V0Zml0KQ0KCXJldHVybiBub3QgcE91dGZpdC5EaXNhYmxlZA0KCSAgIGFuZCBub3QgcE91dGZpdDpJc0VtcHR5KCkNCgkgICBhbmQgKG5vdCBwT3V0Zml0Lk91dGZpdEJhciBvciBub3QgcE91dGZpdC5PdXRmaXRCYXIuSGlkZSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SGFzVmlzaWJsZU91dGZpdHMocE91dGZpdHMpDQoJaWYgbm90IHBPdXRmaXRzIHRoZW4NCgkJcmV0dXJuIGZhbHNlDQoJZW5kDQoJDQoJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBwYWlycyhwT3V0Zml0cykgZG8NCgkJaWYgc2VsZjpPdXRmaXRJc1Zpc2libGUodk91dGZpdCkgdGhlbgkNCgkJCXJldHVybiB0cnVlDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5NaW5pbWFwRHJvcERvd25fSW5pdGlhbGl6ZShwRnJhbWUpDQoJLS0gSnVzdCByZXR1cm4gaWYgbm90IGluaXRpYWxpemVkIHlldA0KCQ0KCWlmIG5vdCBPdXRmaXR0ZXIuSW5pdGlhbGl6ZWQgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCgktLQ0KCQ0KCU91dGZpdHRlcjpBZGRDYXRlZ29yeU1lbnVJdGVtKE91dGZpdHRlci5jVGl0bGVWZXJzaW9uKQ0KCU91dGZpdHRlcjpBZGRNZW51SXRlbShwRnJhbWUsIE91dGZpdHRlci5jT3Blbk91dGZpdHRlciwgMCkNCglPdXRmaXR0ZXI6QWRkTWVudUl0ZW0ocEZyYW1lLCBPdXRmaXR0ZXIuY0F1dG9Td2l0Y2gsIC0xLCBPdXRmaXR0ZXIuU2V0dGluZ3MuT3B0aW9ucy5EaXNhYmxlQXV0b1N3aXRjaCkNCgkNCglPdXRmaXR0ZXIuTWluaW1hcERyb3BEb3duX0luaXRpYWxpemVPdXRmaXRMaXN0KHBGcmFtZSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0Q2F0ZWdvcnlPcmRlcigpDQoJcmV0dXJuIHNlbGYuY0NhdGVnb3J5T3JkZXINCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0T3V0Zml0c0J5Q2F0ZWdvcnlJRChwQ2F0ZWdvcnlJRCkNCglyZXR1cm4gc2VsZi5TZXR0aW5ncy5PdXRmaXRzW3BDYXRlZ29yeUlEXQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5NaW5pbWFwRHJvcERvd25fSW5pdGlhbGl6ZU91dGZpdExpc3QocEZyYW1lKQ0KCS0tIEp1c3QgcmV0dXJuIGlmIG5vdCBpbml0aWFsaXplZCB5ZXQNCgkNCglpZiBub3QgT3V0Zml0dGVyLkluaXRpYWxpemVkIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0NCgkNCglsb2NhbCB2SW52ZW50b3J5Q2FjaGUgPSBPdXRmaXR0ZXI6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCWxvY2FsIHZDYXRlZ29yeU9yZGVyID0gT3V0Zml0dGVyOkdldENhdGVnb3J5T3JkZXIoKQ0KCQkNCglmb3IgdkNhdGVnb3J5SW5kZXgsIHZDYXRlZ29yeUlEIGluIGlwYWlycyh2Q2F0ZWdvcnlPcmRlcikgZG8NCgkJbG9jYWwgdkNhdGVnb3J5TmFtZSA9IE91dGZpdHRlclsiYyIuLnZDYXRlZ29yeUlELi4iT3V0Zml0cyJdDQoJCWxvY2FsIHZPdXRmaXRzID0gT3V0Zml0dGVyOkdldE91dGZpdHNCeUNhdGVnb3J5SUQodkNhdGVnb3J5SUQpDQoNCgkJaWYgT3V0Zml0dGVyOkhhc1Zpc2libGVPdXRmaXRzKHZPdXRmaXRzKSB0aGVuDQoJCQlPdXRmaXR0ZXI6QWRkQ2F0ZWdvcnlNZW51SXRlbSh2Q2F0ZWdvcnlOYW1lKQ0KCQkJDQoJCQlmb3IgdkluZGV4LCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCQlpZiBPdXRmaXR0ZXI6T3V0Zml0SXNWaXNpYmxlKHZPdXRmaXQpIHRoZW4NCgkJCQkJbG9jYWwgdldlYXJpbmdPdXRmaXQgPSBPdXRmaXR0ZXI6V2VhcmluZ091dGZpdCh2T3V0Zml0KQ0KCQkJCQlsb2NhbCB2TWlzc2luZ0l0ZW1zLCB2QmFua2VkSXRlbXMgPSB2SW52ZW50b3J5Q2FjaGU6R2V0TWlzc2luZ0l0ZW1zKHZPdXRmaXQpDQoJCQkJCWxvY2FsIHZJdGVtQ29sb3IgPSBOT1JNQUxfRk9OVF9DT0xPUl9DT0RFDQoJCQkJCQ0KCQkJCQlpZiB2TWlzc2luZ0l0ZW1zIHRoZW4NCgkJCQkJCXZJdGVtQ29sb3IgPSBSRURfRk9OVF9DT0xPUl9DT0RFDQoJCQkJCWVsc2VpZiB2QmFua2VkSXRlbXMgdGhlbg0KCQkJCQkJdkl0ZW1Db2xvciA9IE91dGZpdHRlci5CQU5LRURfRk9OVF9DT0xPUl9DT0RFDQoJCQkJCWVuZA0KCQkJCQkNCgkJCQkJT3V0Zml0dGVyOkFkZE1lbnVJdGVtKA0KCQkJCQkJCXBGcmFtZSwNCgkJCQkJCQl2T3V0Zml0OkdldE5hbWUoKSwNCgkJCQkJCQl7Q2F0ZWdvcnlJRCA9IHZDYXRlZ29yeUlELCBJbmRleCA9IHZJbmRleH0sDQoJCQkJCQkJdldlYXJpbmdPdXRmaXQsIC0tIENoZWNrZWQNCgkJCQkJCQluaWwsIC0tIExldmVsDQoJCQkJCQkJdkl0ZW1Db2xvciwgLS0gQ29sb3INCgkJCQkJCQluaWwsIC0tIERpc2FibGVkDQoJCQkJCQkJe2ljb24gPSBPdXRmaXR0ZXIuT3V0Zml0QmFyOkdldE91dGZpdFRleHR1cmUodk91dGZpdCl9KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5Ecm9wRG93bl9PbkNsaWNrKHBJdGVtLCBwT3duZXIsIHBWYWx1ZSkNCglpZiBub3QgcE93bmVyIHRoZW4NCgkJT3V0Zml0dGVyOkRlYnVnVGFibGUocEl0ZW0sICJPbkNsaWNrIEl0ZW0iKQ0KCQlyZXR1cm4NCgllbmQNCgkNCglpZiBwT3duZXIuQXV0b1NldFZhbHVlIHRoZW4NCgkJcE93bmVyOlNldFNlbGVjdGVkVmFsdWUocFZhbHVlKQ0KCWVuZA0KCQ0KCWlmIHBPd25lci5DaGFuZ2VkVmFsdWVGdW5jIHRoZW4NCgkJcE93bmVyLkNoYW5nZWRWYWx1ZUZ1bmMocE93bmVyLCBwVmFsdWUpDQoJZW5kDQoJDQoJQ2xvc2VEcm9wRG93bk1lbnVzKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuSXRlbV9TZXRUZXh0Q29sb3IocEl0ZW0sIHBSZWQsIHBHcmVlbiwgcEJsdWUpDQoJbG9jYWwgdkl0ZW1OYW1lRmllbGQNCgkNCglpZiBwSXRlbS5pc0NhdGVnb3J5IHRoZW4NCgkJdkl0ZW1OYW1lRmllbGQgPSBfR1twSXRlbTpHZXROYW1lKCkuLiJDYXRlZ29yeU5hbWUiXQ0KCWVsc2UNCgkJdkl0ZW1OYW1lRmllbGQgPSBfR1twSXRlbTpHZXROYW1lKCkuLiJPdXRmaXROYW1lIl0NCgllbmQNCgkNCgl2SXRlbU5hbWVGaWVsZDpTZXRUZXh0Q29sb3IocFJlZCwgcEdyZWVuLCBwQmx1ZSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2VuZXJhdGVJdGVtTGlzdFN0cmluZyhwTGFiZWwsIHBMaXN0Q29sb3JDb2RlLCBwSXRlbXMpDQoJbG9jYWwgdkl0ZW1MaXN0ID0gbmlsDQoNCglmb3IgdkluZGV4LCB2T3V0Zml0SXRlbSBpbiBpcGFpcnMocEl0ZW1zKSBkbw0KCQlpZiBub3Qgdkl0ZW1MaXN0IHRoZW4NCgkJCXZJdGVtTGlzdCA9IEhJR0hMSUdIVF9GT05UX0NPTE9SX0NPREUuLnBMYWJlbC4ucExpc3RDb2xvckNvZGUuLnRvc3RyaW5nKHZPdXRmaXRJdGVtLk5hbWUpDQoJCWVsc2UNCgkJCXZJdGVtTGlzdCA9IHZJdGVtTGlzdC4uc2VsZi5jTWlzc2luZ0l0ZW1zU2VwYXJhdG9yLi50b3N0cmluZyh2T3V0Zml0SXRlbS5OYW1lKQ0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdkl0ZW1MaXN0DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkFkZE5ld2JpZVRpcChwSXRlbSwgcE5vcm1hbFRleHQsIHBSZWQsIHBHcmVlbiwgcEJsdWUsIHBOZXdiaWVUZXh0LCBwTm9Ob3JtYWxUZXh0KQ0KCWlmIFNIT1dfTkVXQklFX1RJUFMgPT0gIjEiIHRoZW4NCgkJR2FtZVRvb2x0aXBfU2V0RGVmYXVsdEFuY2hvcihHYW1lVG9vbHRpcCwgcEl0ZW0pDQoJCWlmIHBOb3JtYWxUZXh0IHRoZW4NCgkJCUdhbWVUb29sdGlwOlNldFRleHQocE5vcm1hbFRleHQsIHBSZWQsIHBHcmVlbiwgcEJsdWUpDQoJCQlHYW1lVG9vbHRpcDpBZGRMaW5lKHBOZXdiaWVUZXh0LCBOT1JNQUxfRk9OVF9DT0xPUi5yLCBOT1JNQUxfRk9OVF9DT0xPUi5nLCBOT1JNQUxfRk9OVF9DT0xPUi5iLCAxKQ0KCQllbHNlDQoJCQlHYW1lVG9vbHRpcDpTZXRUZXh0KHBOZXdiaWVUZXh0LCBwUmVkLCBwR3JlZW4sIHBCbHVlLCAxLCAxKQ0KCQllbmQNCgkJR2FtZVRvb2x0aXA6U2hvdygpDQoJZWxzZQ0KCQlpZiBub3QgcE5vTm9ybWFsVGV4dCB0aGVuDQoJCQlHYW1lVG9vbHRpcDpTZXRPd25lcihwSXRlbSwgIkFOQ0hPUl9SSUdIVCIpDQoJCQlHYW1lVG9vbHRpcDpTZXRUZXh0KHBOb3JtYWxUZXh0LCBwUmVkLCBwR3JlZW4sIHBCbHVlKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuSXRlbV9PbkVudGVyKHBJdGVtKQ0KCU91dGZpdHRlci5JdGVtX1NldFRleHRDb2xvcihwSXRlbSwgSElHSExJR0hUX0ZPTlRfQ09MT1IuciwgSElHSExJR0hUX0ZPTlRfQ09MT1IuZywgSElHSExJR0hUX0ZPTlRfQ09MT1IuYikNCgkNCglpZiBwSXRlbS5pc0NhdGVnb3J5IHRoZW4NCgkJbG9jYWwgdkRlc2NyaXB0aW9uID0gT3V0Zml0dGVyLmNDYXRlZ29yeURlc2NyaXB0aW9uc1twSXRlbS5jYXRlZ29yeUlEXQ0KCQkNCgkJaWYgdkRlc2NyaXB0aW9uIHRoZW4NCgkJCWxvY2FsIEN2YXRlZ29yeU5hbWUgPSBPdXRmaXR0ZXJbImMiLi5wSXRlbS5jYXRlZ29yeUlELi4iT3V0Zml0cyJdDQoJCQkNCgkJCU91dGZpdHRlci5BZGROZXdiaWVUaXAocEl0ZW0sIHZDYXRlZ29yeU5hbWUsIDEuMCwgMS4wLCAxLjAsIHZEZXNjcmlwdGlvbiwgMSkNCgkJZW5kDQoJCQ0KCQlSZXNldEN1cnNvcigpDQoJZWxzZWlmIHBJdGVtLmlzT3V0Zml0SXRlbSB0aGVuDQoJCWxvY2FsIHZIYXNDb29sZG93biwgdlJlcGFpckNvc3QNCgkJDQoJCUdhbWVUb29sdGlwOlNldE93bmVyKHBJdGVtLCAiQU5DSE9SX1RPUCIpDQoJCQ0KCQlpZiBwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLlNsb3ROYW1lDQoJCW9yIHBJdGVtLm91dGZpdEl0ZW0uTG9jYXRpb24uU2xvdElEIHRoZW4NCgkJCWlmIG5vdCBwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLlNsb3RJRCB0aGVuDQoJCQkJcEl0ZW0ub3V0Zml0SXRlbS5Mb2NhdGlvbi5TbG90SUQgPSBPdXRmaXR0ZXIuY1Nsb3RJRHNbcEl0ZW0ub3V0Zml0SXRlbS5Mb2NhdGlvbi5TbG90TmFtZV0NCgkJCWVuZA0KCQkJDQoJCQlHYW1lVG9vbHRpcDpTZXRJbnZlbnRvcnlJdGVtKCJwbGF5ZXIiLCBwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLlNsb3RJRCkNCgkJZWxzZWlmIHBJdGVtLm91dGZpdEl0ZW0uTG9jYXRpb24uQmFnSW5kZXggPT0gLTEgdGhlbg0KCQkJR2FtZVRvb2x0aXA6U2V0SW52ZW50b3J5SXRlbSgicGxheWVyIiwgQmFua0J1dHRvbklEVG9JbnZTbG90SUQocEl0ZW0ub3V0Zml0SXRlbS5Mb2NhdGlvbi5CYWdTbG90SW5kZXgpKQ0KCQllbHNlDQoJCQl2SGFzQ29vbGRvd24sIHZSZXBhaXJDb3N0ID0gR2FtZVRvb2x0aXA6U2V0QmFnSXRlbShwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLkJhZ0luZGV4LCBwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLkJhZ1Nsb3RJbmRleCkNCgkJZW5kDQoJCQ0KCQlHYW1lVG9vbHRpcDpTaG93KCkNCg0KCQlpZiBJblJlcGFpck1vZGUoKSBhbmQgKHZSZXBhaXJDb3N0IGFuZCB2UmVwYWlyQ29zdCA+IDApIHRoZW4NCgkJCUdhbWVUb29sdGlwOkFkZExpbmUoVEVYVChSRVBBSVJfQ09TVCksICIiLCAxLCAxLCAxKQ0KCQkJU2V0VG9vbHRpcE1vbmV5KEdhbWVUb29sdGlwLCB2UmVwYWlyQ29zdCkNCgkJCUdhbWVUb29sdGlwOlNob3coKQ0KCQllbHNlaWYgTWVyY2hhbnRGcmFtZTpJc1Nob3duKCkgYW5kIE1lcmNoYW50RnJhbWUuc2VsZWN0ZWRUYWIgPT0gMSB0aGVuDQoJCQlpZiBwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLkJhZ0luZGV4IHRoZW4NCgkJCQlTaG93Q29udGFpbmVyU2VsbEN1cnNvcihwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLkJhZ0luZGV4LCBwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uLkJhZ1Nsb3RJbmRleCkNCgkJCWVuZA0KCQllbHNlDQoJCQlSZXNldEN1cnNvcigpDQoJCWVuZA0KCWVsc2UNCgkJbG9jYWwgdk91dGZpdCA9IE91dGZpdHRlcjpHZXRPdXRmaXRGcm9tTGlzdEl0ZW0ocEl0ZW0pDQoJCQ0KCQlPdXRmaXR0ZXI6U2hvd091dGZpdFRvb2x0aXAodk91dGZpdCwgcEl0ZW0sIHBJdGVtLk1pc3NpbmdJdGVtcywgcEl0ZW0uQmFua2VkSXRlbXMpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlNob3dPdXRmaXRUb29sdGlwKHBPdXRmaXQsIHBPd25lciwgcE1pc3NpbmdJdGVtcywgcEJhbmtlZEl0ZW1zLCBwU2hvd0VtcHR5VG9vbHRpcHMsIHBUb29sdGlwQW5jaG9yKQ0KCS0tIGxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IHNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCS0tIGxvY2FsIHZNaXNzaW5nSXRlbXMsIHZCYW5rZWRJdGVtcyA9IHZJbnZlbnRvcnlDYWNoZTpHZXRNaXNzaW5nSXRlbXMocE91dGZpdCkNCgkNCglsb2NhbCB2RGVzY3JpcHRpb24gPSBzZWxmOkdldE91dGZpdERlc2NyaXB0aW9uKHBPdXRmaXQpDQoJDQoJaWYgcE1pc3NpbmdJdGVtcw0KCW9yIHBCYW5rZWRJdGVtcw0KCW9yIHBTaG93RW1wdHlUb29sdGlwcyB0aGVuDQoJCUdhbWVUb29sdGlwOlNldE93bmVyKHBPd25lciwgcFRvb2x0aXBBbmNob3Igb3IgIkFOQ0hPUl9MRUZUIikNCgkJDQoJCUdhbWVUb29sdGlwOkFkZExpbmUocE91dGZpdDpHZXROYW1lKCkpDQoJCQ0KCQlpZiB2RGVzY3JpcHRpb24gdGhlbg0KCQkJR2FtZVRvb2x0aXA6QWRkTGluZSh2RGVzY3JpcHRpb24sIEhJR0hMSUdIVF9GT05UX0NPTE9SLnIsIEhJR0hMSUdIVF9GT05UX0NPTE9SLmcsIEhJR0hMSUdIVF9GT05UX0NPTE9SLmIsIHRydWUpDQoJCWVuZA0KCQkNCgkJaWYgcE1pc3NpbmdJdGVtcyB0aGVuDQoJCQlsb2NhbCB2SXRlbUxpc3QgPSBzZWxmOkdlbmVyYXRlSXRlbUxpc3RTdHJpbmcoc2VsZi5jTWlzc2luZ0l0ZW1zTGFiZWwsIFJFRF9GT05UX0NPTE9SX0NPREUsIHBNaXNzaW5nSXRlbXMpDQoJCQlHYW1lVG9vbHRpcDpBZGRMaW5lKHZJdGVtTGlzdCwgUkVEX0ZPTlRfQ09MT1IuciwgUkVEX0ZPTlRfQ09MT1IuZywgUkVEX0ZPTlRfQ09MT1IuYiwgdHJ1ZSkNCgkJZW5kDQoJCQ0KCQlpZiBwQmFua2VkSXRlbXMgdGhlbg0KCQkJbG9jYWwgdkl0ZW1MaXN0ID0gc2VsZjpHZW5lcmF0ZUl0ZW1MaXN0U3RyaW5nKHNlbGYuY0JhbmtlZEl0ZW1zTGFiZWwsIHNlbGYuQkFOS0VEX0ZPTlRfQ09MT1JfQ09ERSwgcEJhbmtlZEl0ZW1zKQ0KCQkJR2FtZVRvb2x0aXA6QWRkTGluZSh2SXRlbUxpc3QsIFJFRF9GT05UX0NPTE9SLnIsIFJFRF9GT05UX0NPTE9SLmcsIFJFRF9GT05UX0NPTE9SLmIsIHRydWUpDQoJCWVuZA0KCQkNCgkJR2FtZVRvb2x0aXA6U2hvdygpDQoJZWxzZWlmIHZEZXNjcmlwdGlvbiB0aGVuDQoJCXNlbGYuQWRkTmV3YmllVGlwKHBPd25lciwgcE91dGZpdDpHZXROYW1lKCksIDEuMCwgMS4wLCAxLjAsIHZEZXNjcmlwdGlvbiwgMSkNCgllbmQNCgkNCglSZXNldEN1cnNvcigpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldE91dGZpdERlc2NyaXB0aW9uKHBPdXRmaXQpDQoJcmV0dXJuIHNlbGY6R2V0U2NyaXB0RGVzY3JpcHRpb24oc2VsZjpHZXRTY3JpcHQocE91dGZpdCkpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOk91dGZpdEhhc1NldHRpbmdzKHBPdXRmaXQpDQoJcmV0dXJuIHNlbGY6U2NyaXB0SGFzU2V0dGluZ3Moc2VsZjpHZXRTY3JpcHQocE91dGZpdCkpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkl0ZW1fT25MZWF2ZShwSXRlbSkNCglpZiBwSXRlbS5pc0NhdGVnb3J5IHRoZW4NCgkJT3V0Zml0dGVyLkl0ZW1fU2V0VGV4dENvbG9yKHBJdGVtLCAxLCAxLCAxKQ0KCWVsc2UNCgkJT3V0Zml0dGVyLkl0ZW1fU2V0VGV4dENvbG9yKHBJdGVtLCBwSXRlbS5EZWZhdWx0Q29sb3IuciwgcEl0ZW0uRGVmYXVsdENvbG9yLmcsIHBJdGVtLkRlZmF1bHRDb2xvci5iKQ0KCWVuZA0KCQ0KCUdhbWVUb29sdGlwOkhpZGUoKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5JdGVtX09uQ2xpY2socEl0ZW0sIHBCdXR0b24sIHBJZ25vcmVNb2RpZmllcnMpDQoJaWYgcEl0ZW0uaXNDYXRlZ29yeSB0aGVuDQoJCWxvY2FsIHZDYXRlZ29yeU91dGZpdHMgPSBPdXRmaXR0ZXIuU2V0dGluZ3MuT3V0Zml0c1twSXRlbS5jYXRlZ29yeUlEXQ0KCQkNCgkJT3V0Zml0dGVyLkNvbGxhcHNlZFtwSXRlbS5jYXRlZ29yeUlEXSA9IG5vdCBPdXRmaXR0ZXIuQ29sbGFwc2VkW3BJdGVtLmNhdGVnb3J5SURdDQoJCU91dGZpdHRlci5EaXNwbGF5SXNEaXJ0eSA9IHRydWUNCgllbHNlaWYgcEl0ZW0uaXNPdXRmaXRJdGVtIHRoZW4NCgkJaWYgcEJ1dHRvbiA9PSAiTGVmdEJ1dHRvbiIgdGhlbg0KCQkJT3V0Zml0dGVyOlBpY2t1cEl0ZW1Mb2NhdGlvbihwSXRlbS5vdXRmaXRJdGVtLkxvY2F0aW9uKQ0KCQkJU3RhY2tTcGxpdEZyYW1lOkhpZGUoKQ0KCQllbHNlDQoJCQlpZiBNZXJjaGFudEZyYW1lOklzU2hvd24oKSBhbmQgTWVyY2hhbnRGcmFtZS5zZWxlY3RlZFRhYiA9PSAyIHRoZW4NCgkJCQktLSBEb24ndCBzZWxsIHRoZSBpdGVtIGlmIHRoZSBidXliYWNrIHRhYiBpcyBzZWxlY3RlZA0KCQkJCXJldHVybg0KCQkJZWxzZQ0KCQkJCWlmIHBJdGVtLm91dGZpdEl0ZW0uTG9jYXRpb24uQmFnSW5kZXggdGhlbg0KCQkJCQlVc2VDb250YWluZXJJdGVtKHBJdGVtLm91dGZpdEl0ZW0uTG9jYXRpb24uQmFnSW5kZXgsIHBJdGVtLm91dGZpdEl0ZW0uTG9jYXRpb24uQmFnU2xvdEluZGV4KQ0KCQkJCQlTdGFja1NwbGl0RnJhbWU6SGlkZSgpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZWxzZQ0KCQlsb2NhbCB2T3V0Zml0ID0gT3V0Zml0dGVyOkdldE91dGZpdEZyb21MaXN0SXRlbShwSXRlbSkNCgkJDQoJCWlmIG5vdCB2T3V0Zml0IHRoZW4NCgkJCS0tIEVycm9yOiBvdXRmaXQgbm90IGZvdW5kDQoJCQlyZXR1cm4NCgkJZW5kDQoJCQ0KCQlpZiBwQnV0dG9uID09ICJMZWZ0QnV0dG9uIiB0aGVuDQoJCQl2T3V0Zml0LkRpc2FibGVkID0gbmlsDQoJCQlPdXRmaXR0ZXI6V2Vhck91dGZpdCh2T3V0Zml0KQ0KCQllbHNlDQoJCQlpZiBEcm9wRG93bkxpc3QxOklzU2hvd24oKSB0aGVuDQoJCQkJVG9nZ2xlRHJvcERvd25NZW51KG5pbCwgbmlsLCBwSXRlbS5PdXRmaXRNZW51KQ0KCQkJZWxzZQ0KCQkJCVRvZ2dsZURyb3BEb3duTWVudShuaWwsIG5pbCwgcEl0ZW0uT3V0Zml0TWVudSwgImN1cnNvciIpDQoJCQkJUGxheVNvdW5kKCJpZ01haW5NZW51T3B0aW9uQ2hlY2tCb3hPbiIpDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJT3V0Zml0dGVyOlVwZGF0ZSh0cnVlKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpJdGVtX0NoZWNrYm94Q2xpY2tlZChwSXRlbSkNCglpZiBwSXRlbS5pc0NhdGVnb3J5IHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgdk91dGZpdHMgPSBPdXRmaXR0ZXIuU2V0dGluZ3MuT3V0Zml0c1twSXRlbS5jYXRlZ29yeUlEXQ0KCQ0KCWlmIG5vdCB2T3V0Zml0cyB0aGVuDQoJCS0tIEVycm9yOiBvdXRmaXQgY2F0ZWdvcnkgbm90IGZvdW5kDQoJCXJldHVybg0KCWVuZA0KCQ0KCWxvY2FsIHZPdXRmaXQgPSB2T3V0Zml0c1twSXRlbS5vdXRmaXRJbmRleF0NCgkNCglpZiBub3Qgdk91dGZpdCB0aGVuDQoJCS0tIEVycm9yOiBvdXRmaXQgbm90IGZvdW5kDQoJCXJldHVybg0KCWVuZA0KCQ0KCWxvY2FsIHZDaGVja2JveCA9IF9HW3BJdGVtOkdldE5hbWUoKS4uIk91dGZpdFNlbGVjdGVkIl0NCgkNCglpZiB2Q2hlY2tib3g6R2V0Q2hlY2tlZCgpIHRoZW4NCgkJdk91dGZpdC5EaXNhYmxlZCA9IG5pbA0KCQlPdXRmaXR0ZXI6V2Vhck91dGZpdCh2T3V0Zml0KQ0KCWVsc2UNCgkJT3V0Zml0dGVyOlJlbW92ZU91dGZpdCh2T3V0Zml0KQ0KCWVuZA0KCQ0KCXNlbGYuRGlzcGxheUlzRGlydHkgPSB0cnVlDQoJc2VsZjpVcGRhdGUodHJ1ZSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SXRlbV9TdG9yZU9uU2VydmVyQ2xpY2tlZChwSXRlbSkNCglpZiBwSXRlbS5pc0NhdGVnb3J5IHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgdk91dGZpdHMgPSBzZWxmLlNldHRpbmdzLk91dGZpdHNbcEl0ZW0uY2F0ZWdvcnlJRF0NCgkNCglpZiBub3Qgdk91dGZpdHMgdGhlbg0KCQktLSBFcnJvcjogb3V0Zml0IGNhdGVnb3J5IG5vdCBmb3VuZA0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCB2T3V0Zml0ID0gdk91dGZpdHNbcEl0ZW0ub3V0Zml0SW5kZXhdDQoJDQoJaWYgbm90IHZPdXRmaXQgdGhlbg0KCQktLSBFcnJvcjogb3V0Zml0IG5vdCBmb3VuZA0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCB2Q2hlY2tib3ggPSBfR1twSXRlbTpHZXROYW1lKCkuLiJPdXRmaXRTZXJ2ZXJCdXR0b24iXQ0KCQ0KCWlmIHZDaGVja2JveDpHZXRDaGVja2VkKCkgdGhlbg0KCQlpZiB2T3V0Zml0IH49IHNlbGYuU2VsZWN0ZWRPdXRmaXQgdGhlbg0KCQkJc2VsZjpXZWFyT3V0Zml0KHZPdXRmaXQpDQoJCQlzZWxmOlNlbGVjdE91dGZpdCh2T3V0Zml0KQ0KCQllbHNlDQoJCQl2T3V0Zml0OlN0b3JlT25TZXJ2ZXIoKQ0KCQllbmQNCgllbHNlDQoJCXZPdXRmaXQ6U3RvcmVMb2NhbGx5KCkNCgllbmQNCgkNCglzZWxmLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZQ0KCXNlbGY6VXBkYXRlKHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkl0ZW1fU2V0VG9PdXRmaXQocEl0ZW1JbmRleCwgcE91dGZpdCwgcENhdGVnb3J5SUQsIHBPdXRmaXRJbmRleCwgcEludmVudG9yeUNhY2hlKQ0KCWxvY2FsIHZJdGVtTmFtZSA9ICJPdXRmaXR0ZXJJdGVtIi4ucEl0ZW1JbmRleA0KCWxvY2FsIHZJdGVtID0gX0dbdkl0ZW1OYW1lXQ0KCWxvY2FsIHZPdXRmaXRGcmFtZU5hbWUgPSB2SXRlbU5hbWUuLiJPdXRmaXQiDQoJbG9jYWwgdk91dGZpdEZyYW1lID0gX0dbdk91dGZpdEZyYW1lTmFtZV0NCglsb2NhbCB2SXRlbUZyYW1lID0gX0dbdkl0ZW1OYW1lLi4iSXRlbSJdDQoJbG9jYWwgdkNhdGVnb3J5RnJhbWUgPSBfR1t2SXRlbU5hbWUuLiJDYXRlZ29yeSJdDQoJbG9jYWwgdk1pc3NpbmdJdGVtcywgdkJhbmtlZEl0ZW1zID0gcEludmVudG9yeUNhY2hlOkdldE1pc3NpbmdJdGVtcyhwT3V0Zml0KQ0KCQ0KCXZPdXRmaXRGcmFtZTpTaG93KCkNCgl2Q2F0ZWdvcnlGcmFtZTpIaWRlKCkNCgl2SXRlbUZyYW1lOkhpZGUoKQ0KCQ0KCWxvY2FsIHZJdGVtU2VsZWN0ZWRDaGVja21hcmsgPSBfR1t2T3V0Zml0RnJhbWVOYW1lLi4iU2VsZWN0ZWQiXQ0KCWxvY2FsIHZJdGVtTmFtZUZpZWxkID0gX0dbdk91dGZpdEZyYW1lTmFtZS4uIk5hbWUiXQ0KCWxvY2FsIHZJdGVtTWVudSA9IF9HW3ZPdXRmaXRGcmFtZU5hbWUuLiJNZW51Il0NCglsb2NhbCB2SXRlbVNlcnZlckJ1dHRvbiA9IF9HW3ZPdXRmaXRGcmFtZU5hbWUuLiJTZXJ2ZXJCdXR0b24iXQ0KCQ0KCXZJdGVtU2VsZWN0ZWRDaGVja21hcms6U2hvdygpDQoJDQoJaWYgT3V0Zml0dGVyOldlYXJpbmdPdXRmaXQocE91dGZpdCkgdGhlbg0KCQl2SXRlbVNlbGVjdGVkQ2hlY2ttYXJrOlNldENoZWNrZWQodHJ1ZSkNCgllbHNlDQoJCXZJdGVtU2VsZWN0ZWRDaGVja21hcms6U2V0Q2hlY2tlZChuaWwpDQoJZW5kDQoJDQoJdkl0ZW1TZXJ2ZXJCdXR0b246U2V0Q2hlY2tlZChwT3V0Zml0LlN0b3JlZEluRU0pDQoJDQoJdkl0ZW0uTWlzc2luZ0l0ZW1zID0gdk1pc3NpbmdJdGVtcw0KCXZJdGVtLkJhbmtlZEl0ZW1zID0gdkJhbmtlZEl0ZW1zDQoJDQoJaWYgcE91dGZpdC5EaXNhYmxlZCB0aGVuDQoJCXZJdGVtTmFtZUZpZWxkOlNldFRleHQoZm9ybWF0KE91dGZpdHRlci5jRGlzYWJsZWRPdXRmaXROYW1lLCBwT3V0Zml0OkdldE5hbWUoKSkpDQoJCXZJdGVtLkRlZmF1bHRDb2xvciA9IEdSQVlfRk9OVF9DT0xPUg0KCWVsc2UNCgkJdkl0ZW1OYW1lRmllbGQ6U2V0VGV4dChwT3V0Zml0OkdldE5hbWUoKSkNCgkJaWYgdk1pc3NpbmdJdGVtcyB0aGVuDQoJCQl2SXRlbS5EZWZhdWx0Q29sb3IgPSBSRURfRk9OVF9DT0xPUg0KCQllbHNlaWYgdkJhbmtlZEl0ZW1zIHRoZW4NCgkJCXZJdGVtLkRlZmF1bHRDb2xvciA9IE91dGZpdHRlci5CQU5LRURfRk9OVF9DT0xPUg0KCQllbHNlDQoJCQl2SXRlbS5EZWZhdWx0Q29sb3IgPSBOT1JNQUxfRk9OVF9DT0xPUg0KCQllbmQNCgllbmQNCgkNCgl2SXRlbU5hbWVGaWVsZDpTZXRUZXh0Q29sb3Iodkl0ZW0uRGVmYXVsdENvbG9yLnIsIHZJdGVtLkRlZmF1bHRDb2xvci5nLCB2SXRlbS5EZWZhdWx0Q29sb3IuYikNCgkNCgl2SXRlbU1lbnU6U2hvdygpDQoJDQoJdkl0ZW0uaXNDYXRlZ29yeSA9IGZhbHNlDQoJdkl0ZW0uaXNPdXRmaXRJdGVtID0gZmFsc2UNCgl2SXRlbS5vdXRmaXRJdGVtID0gbmlsDQoJdkl0ZW0uY2F0ZWdvcnlJRCA9IHBPdXRmaXQuQ2F0ZWdvcnlJRA0KCXZJdGVtLm91dGZpdEluZGV4ID0gcE91dGZpdEluZGV4DQoJDQoJdkl0ZW06U2hvdygpDQoJDQoJLS0gU2hvdyB0aGUgc2NyaXB0IGljb24gaWYgdGhlcmUncyBvbmUgYXR0YWNoZWQNCgkNCglsb2NhbCB2U2NyaXB0SWNvbiA9IF9HW3ZPdXRmaXRGcmFtZU5hbWUuLiJTY3JpcHRJY29uIl0NCgkNCglpZiBwT3V0Zml0LlNjcmlwdElEIG9yIHBPdXRmaXQuU2NyaXB0IHRoZW4NCgkJdlNjcmlwdEljb246U2V0VGV4dHVyZSgiSW50ZXJmYWNlXFxBZGRvbnNcXE91dGZpdHRlclxcVGV4dHVyZXNcXEdlYXIiKQ0KCQkNCgkJaWYgT3V0Zml0dGVyLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZUF1dG9Td2l0Y2ggb3IgcE91dGZpdC5EaXNhYmxlZCB0aGVuDQoJCQl2U2NyaXB0SWNvbjpTZXRWZXJ0ZXhDb2xvcigwLjQsIDAuNCwgMC40KQ0KCQllbHNlDQoJCQl2U2NyaXB0SWNvbjpTZXRWZXJ0ZXhDb2xvcigxLCAxLCAxKQ0KCQllbmQNCg0KCQl2U2NyaXB0SWNvbjpTaG93KCkNCgllbHNlDQoJCXZTY3JpcHRJY29uOkhpZGUoKQ0KCWVuZA0KCQ0KCS0tIFVwZGF0ZSB0aGUgaGlnaGxpZ2h0aW5nDQoJDQoJaWYgT3V0Zml0dGVyLlNlbGVjdGVkT3V0Zml0ID09IHBPdXRmaXQgdGhlbg0KCQlPdXRmaXR0ZXJNYWluRnJhbWVIaWdobGlnaHQ6U2V0UG9pbnQoIlRPUExFRlQiLCB2SXRlbSwgIlRPUExFRlQiLCAwLCAwKQ0KCQlPdXRmaXR0ZXJNYWluRnJhbWVIaWdobGlnaHQ6U2hvdygpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkl0ZW1fU2V0VG9JdGVtKHBJdGVtSW5kZXgsIHBPdXRmaXRJdGVtKQ0KCWxvY2FsIHZJdGVtTmFtZSA9ICJPdXRmaXR0ZXJJdGVtIi4ucEl0ZW1JbmRleA0KCWxvY2FsIHZJdGVtID0gX0dbdkl0ZW1OYW1lXQ0KCWxvY2FsIHZDYXRlZ29yeUZyYW1lTmFtZSA9IHZJdGVtTmFtZS4uIkNhdGVnb3J5Ig0KCWxvY2FsIHZJdGVtRnJhbWVOYW1lID0gdkl0ZW1OYW1lLi4iSXRlbSINCglsb2NhbCB2SXRlbUZyYW1lID0gX0dbdkl0ZW1GcmFtZU5hbWVdDQoJbG9jYWwgdk91dGZpdEZyYW1lID0gX0dbdkl0ZW1OYW1lLi4iT3V0Zml0Il0NCglsb2NhbCB2Q2F0ZWdvcnlGcmFtZSA9IF9HW3ZDYXRlZ29yeUZyYW1lTmFtZV0NCgkNCgl2SXRlbS5pc091dGZpdEl0ZW0gPSB0cnVlDQoJdkl0ZW0uaXNDYXRlZ29yeSA9IGZhbHNlDQoJdkl0ZW0ub3V0Zml0SXRlbSA9IHBPdXRmaXRJdGVtDQoJDQoJdkl0ZW1GcmFtZTpTaG93KCkNCgl2T3V0Zml0RnJhbWU6SGlkZSgpDQoJdkNhdGVnb3J5RnJhbWU6SGlkZSgpDQoNCglsb2NhbCB2SXRlbU5hbWVGaWVsZCA9IF9HW3ZJdGVtRnJhbWVOYW1lLi4iTmFtZSJdDQoJbG9jYWwgdkl0ZW1JY29uID0gX0dbdkl0ZW1GcmFtZU5hbWUuLiJJY29uIl0NCgkNCgl2SXRlbU5hbWVGaWVsZDpTZXRUZXh0KHBPdXRmaXRJdGVtLk5hbWUpDQoJDQoJaWYgcE91dGZpdEl0ZW0uUXVhbGl0eSB0aGVuDQoJCXZJdGVtLkRlZmF1bHRDb2xvciA9IElURU1fUVVBTElUWV9DT0xPUlNbKHBPdXRmaXRJdGVtLlF1YWxpdHkgfj0gNyBhbmQgcE91dGZpdEl0ZW0uUXVhbGl0eSkgb3IgNl0NCgllbHNlDQoJCXZJdGVtLkRlZmF1bHRDb2xvciA9IEdSQVlfRk9OVF9DT0xPUg0KCWVuZA0KCQ0KCWlmIHBPdXRmaXRJdGVtLlRleHR1cmUgdGhlbg0KCQl2SXRlbUljb246U2V0VGV4dHVyZShwT3V0Zml0SXRlbS5UZXh0dXJlKQ0KCQl2SXRlbUljb246U2hvdygpDQoJZWxzZQ0KCQl2SXRlbUljb246SGlkZSgpDQoJZW5kDQoJDQoJdkl0ZW1OYW1lRmllbGQ6U2V0VGV4dENvbG9yKHZJdGVtLkRlZmF1bHRDb2xvci5yLCB2SXRlbS5EZWZhdWx0Q29sb3IuZywgdkl0ZW0uRGVmYXVsdENvbG9yLmIpDQoJDQoJdkl0ZW06U2hvdygpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkl0ZW1fU2V0VG9DYXRlZ29yeShwSXRlbUluZGV4LCBwQ2F0ZWdvcnlJRCkNCglsb2NhbCB2Q2F0ZWdvcnlOYW1lID0gT3V0Zml0dGVyWyJjIi4ucENhdGVnb3J5SUQuLiJPdXRmaXRzIl0NCglsb2NhbCB2SXRlbU5hbWUgPSAiT3V0Zml0dGVySXRlbSIuLnBJdGVtSW5kZXgNCglsb2NhbCB2SXRlbSA9IF9HW3ZJdGVtTmFtZV0NCglsb2NhbCB2Q2F0ZWdvcnlGcmFtZU5hbWUgPSB2SXRlbU5hbWUuLiJDYXRlZ29yeSINCglsb2NhbCB2T3V0Zml0RnJhbWUgPSBfR1t2SXRlbU5hbWUuLiJPdXRmaXQiXQ0KCWxvY2FsIHZJdGVtRnJhbWUgPSBfR1t2SXRlbU5hbWUuLiJJdGVtIl0NCglsb2NhbCB2Q2F0ZWdvcnlGcmFtZSA9IF9HW3ZDYXRlZ29yeUZyYW1lTmFtZV0NCgkNCgl2T3V0Zml0RnJhbWU6SGlkZSgpDQoJdkNhdGVnb3J5RnJhbWU6U2hvdygpDQoJdkl0ZW1GcmFtZTpIaWRlKCkNCgkNCglsb2NhbCB2SXRlbU5hbWVGaWVsZCA9IF9HW3ZDYXRlZ29yeUZyYW1lTmFtZS4uIk5hbWUiXQ0KCWxvY2FsIHZFeHBhbmRCdXR0b24gPSBfR1t2Q2F0ZWdvcnlGcmFtZU5hbWUuLiJFeHBhbmQiXQ0KCQ0KCXZJdGVtLk1pc3NpbmdJdGVtcyA9IG5pbA0KCXZJdGVtLkJhbmtlZEl0ZW1zID0gbmlsDQoJDQoJaWYgT3V0Zml0dGVyLkNvbGxhcHNlZFtwQ2F0ZWdvcnlJRF0gdGhlbg0KCQl2RXhwYW5kQnV0dG9uOlNldE5vcm1hbFRleHR1cmUoIkludGVyZmFjZVxcQnV0dG9uc1xcVUktUGx1c0J1dHRvbi1VcCIpDQoJZWxzZQ0KCQl2RXhwYW5kQnV0dG9uOlNldE5vcm1hbFRleHR1cmUoIkludGVyZmFjZVxcQnV0dG9uc1xcVUktTWludXNCdXR0b24tVXAiKQ0KCWVuZA0KCQ0KCXZJdGVtTmFtZUZpZWxkOlNldFRleHQodkNhdGVnb3J5TmFtZSkNCgkNCgl2SXRlbS5pc0NhdGVnb3J5ID0gdHJ1ZQ0KCXZJdGVtLmlzT3V0Zml0SXRlbSA9IGZhbHNlDQoJdkl0ZW0ub3V0Zml0SXRlbSA9IG5pbA0KCXZJdGVtLmNhdGVnb3J5SUQgPSBwQ2F0ZWdvcnlJRA0KCQ0KCXZJdGVtOlNob3coKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpBZGRPdXRmaXRzVG9MaXN0KHBPdXRmaXRzLCBwQ2F0ZWdvcnlJRCwgcEl0ZW1JbmRleCwgcEZpcnN0SXRlbUluZGV4LCBwSW52ZW50b3J5Q2FjaGUpDQoJbG9jYWwgdk91dGZpdHMgPSBwT3V0Zml0c1twQ2F0ZWdvcnlJRF0NCglsb2NhbCB2SXRlbUluZGV4ID0gcEl0ZW1JbmRleA0KCWxvY2FsIHZGaXJzdEl0ZW1JbmRleCA9IHBGaXJzdEl0ZW1JbmRleA0KCQ0KCWlmIHZGaXJzdEl0ZW1JbmRleCA9PSAwIHRoZW4NCgkJc2VsZi5JdGVtX1NldFRvQ2F0ZWdvcnkodkl0ZW1JbmRleCwgcENhdGVnb3J5SUQsIGZhbHNlKQ0KCQl2SXRlbUluZGV4ID0gdkl0ZW1JbmRleCArIDENCgllbHNlDQoJCXZGaXJzdEl0ZW1JbmRleCA9IHZGaXJzdEl0ZW1JbmRleCAtIDENCgllbmQNCg0KCWlmIHZJdGVtSW5kZXggPj0gc2VsZi5jTWF4RGlzcGxheWVkSXRlbXMgdGhlbg0KCQlyZXR1cm4gdkl0ZW1JbmRleCwgdkZpcnN0SXRlbUluZGV4DQoJZW5kDQoNCglpZiBub3Qgc2VsZi5Db2xsYXBzZWRbcENhdGVnb3J5SURdDQoJYW5kIHZPdXRmaXRzIHRoZW4NCgkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQlpZiB2Rmlyc3RJdGVtSW5kZXggPT0gMCB0aGVuDQoJCQkJc2VsZi5JdGVtX1NldFRvT3V0Zml0KHZJdGVtSW5kZXgsIHZPdXRmaXQsIHBDYXRlZ29yeUlELCB2SW5kZXgsIHBJbnZlbnRvcnlDYWNoZSkNCgkJCQl2SXRlbUluZGV4ID0gdkl0ZW1JbmRleCArIDENCgkJCQkNCgkJCQlpZiB2SXRlbUluZGV4ID49IHNlbGYuY01heERpc3BsYXllZEl0ZW1zIHRoZW4NCgkJCQkJcmV0dXJuIHZJdGVtSW5kZXgsIHZGaXJzdEl0ZW1JbmRleA0KCQkJCWVuZA0KCQkJZWxzZQ0KCQkJCXZGaXJzdEl0ZW1JbmRleCA9IHZGaXJzdEl0ZW1JbmRleCAtIDENCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdkl0ZW1JbmRleCwgdkZpcnN0SXRlbUluZGV4DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkFkZE91dGZpdEl0ZW1zVG9MaXN0KHBPdXRmaXRJdGVtcywgcENhdGVnb3J5SUQsIHBJdGVtSW5kZXgsIHBGaXJzdEl0ZW1JbmRleCkNCglsb2NhbCB2SXRlbUluZGV4ID0gcEl0ZW1JbmRleA0KCWxvY2FsIHZGaXJzdEl0ZW1JbmRleCA9IHBGaXJzdEl0ZW1JbmRleA0KCQ0KCWlmIHZGaXJzdEl0ZW1JbmRleCA9PSAwIHRoZW4NCgkJc2VsZi5JdGVtX1NldFRvQ2F0ZWdvcnkodkl0ZW1JbmRleCwgcENhdGVnb3J5SUQsIGZhbHNlKQ0KCQl2SXRlbUluZGV4ID0gdkl0ZW1JbmRleCArIDENCgllbHNlDQoJCXZGaXJzdEl0ZW1JbmRleCA9IHZGaXJzdEl0ZW1JbmRleCAtIDENCgllbmQNCg0KCWlmIHZJdGVtSW5kZXggPj0gc2VsZi5jTWF4RGlzcGxheWVkSXRlbXMgdGhlbg0KCQlyZXR1cm4gdkl0ZW1JbmRleCwgdkZpcnN0SXRlbUluZGV4DQoJZW5kDQoNCglpZiBub3Qgc2VsZi5Db2xsYXBzZWRbcENhdGVnb3J5SURdIHRoZW4NCgkJZm9yIHZJbmRleCwgdk91dGZpdEl0ZW0gaW4gaXBhaXJzKHBPdXRmaXRJdGVtcykgZG8NCgkJCWlmIHZGaXJzdEl0ZW1JbmRleCA9PSAwIHRoZW4NCgkJCQlzZWxmLkl0ZW1fU2V0VG9JdGVtKHZJdGVtSW5kZXgsIHZPdXRmaXRJdGVtKQ0KCQkJCXZJdGVtSW5kZXggPSB2SXRlbUluZGV4ICsgMQ0KCQkJCQ0KCQkJCWlmIHZJdGVtSW5kZXggPj0gc2VsZi5jTWF4RGlzcGxheWVkSXRlbXMgdGhlbg0KCQkJCQlyZXR1cm4gdkl0ZW1JbmRleCwgdkZpcnN0SXRlbUluZGV4DQoJCQkJZW5kDQoJCQllbHNlDQoJCQkJdkZpcnN0SXRlbUluZGV4ID0gdkZpcnN0SXRlbUluZGV4IC0gMQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiB2SXRlbUluZGV4LCB2Rmlyc3RJdGVtSW5kZXgNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U29ydE91dGZpdHMoKQ0KCWZvciB2Q2F0ZWdvcnlJRCwgdk91dGZpdHMgaW4gcGFpcnMoc2VsZi5TZXR0aW5ncy5PdXRmaXRzKSBkbw0KCQl0YWJsZS5zb3J0KHZPdXRmaXRzLCBPdXRmaXRlcl9Db21wYXJlT3V0Zml0TmFtZXMpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0ZXJfQ29tcGFyZU91dGZpdE5hbWVzKHBPdXRmaXQxLCBwT3V0Zml0MikNCglpZiBwT3V0Zml0MS5OYW1lIH49IHBPdXRmaXQyLk5hbWUgdGhlbg0KCQlpZiBub3QgcE91dGZpdDEuTmFtZSB0aGVuDQoJCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJCQ0KCQlpZiBub3QgcE91dGZpdDIuTmFtZSB0aGVuDQoJCQlyZXR1cm4gdHJ1ZQ0KCQllbmQNCgkJDQoJCXJldHVybiBwT3V0Zml0MS5OYW1lIDwgcE91dGZpdDIuTmFtZQ0KCWVuZA0KCQ0KCXJldHVybiBwT3V0Zml0MS5TdG9yZWRJbkVNIGFuZCBub3QgcE91dGZpdDIuU3RvcmVkSW5FTQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGUocE91dGZpdHNDaGFuZ2VkKQ0KCS0tIEZsdXNoIHRoZSBjYWNoZXMNCgkNCglpZiBwT3V0Zml0c0NoYW5nZWQgdGhlbg0KCQlzZWxmOkVyYXNlVGFibGUoc2VsZi5PdXRmaXRJbmZvQ2FjaGUpDQoJZW5kDQoJDQoJLS0gSnVzdCBsZWF2ZSBpZiB3ZSdyZSBub3QgdmlzaWJsZSAod2hlbiBkb2VzIHRoaXMgaGFwcGVuPykNCgkNCglpZiBub3QgT3V0Zml0dGVyRnJhbWU6SXNWaXNpYmxlKCkgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCgktLQ0KCQ0KCWlmIHNlbGYuQ3VycmVudFBhbmVsID09IDEgdGhlbg0KCQktLSBNYWluIHBhbmVsDQoJCQ0KCQlpZiBub3Qgc2VsZi5EaXNwbGF5SXNEaXJ0eSB0aGVuDQoJCQlyZXR1cm4NCgkJZW5kDQoJCQ0KCQlzZWxmLkRpc3BsYXlJc0RpcnR5ID0gZmFsc2UNCgkJDQoJCS0tIFNvcnQgdGhlIG91dGZpdHMNCgkJDQoJCXNlbGY6U29ydE91dGZpdHMoKQ0KCQkNCgkJLS0gR2V0IHRoZSBlcXVpcHBhYmxlIGl0ZW1zIHNvIG91dGZpdHMgY2FuIGJlIG1hcmtlZCBpZiB0aGV5J3JlIG1pc3NpbmcgYW55dGhpbmcNCgkJDQoJCWxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IHNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCQkNCgkJLS0gVXBkYXRlIHRoZSBzbG90IGVuYWJsZXMgaWYgdGhleSdyZSBzaG93bg0KCQkNCgkJaWYgcE91dGZpdHNDaGFuZ2VkDQoJCWFuZCBPdXRmaXR0ZXJTbG90RW5hYmxlczpJc1Zpc2libGUoKSB0aGVuDQoJCQlzZWxmOlVwZGF0ZVNsb3RFbmFibGVzKHNlbGYuU2VsZWN0ZWRPdXRmaXQsIHZJbnZlbnRvcnlDYWNoZSkNCgkJZW5kDQoJCQ0KCQl2SW52ZW50b3J5Q2FjaGU6Q29tcGlsZWRVbnVzZWRJdGVtc0xpc3QoKQ0KCQkNCgkJLS0gVXBkYXRlIHRoZSBsaXN0DQoJCQ0KCQlPdXRmaXR0ZXJNYWluRnJhbWVIaWdobGlnaHQ6SGlkZSgpDQoJCQ0KCQlsb2NhbCB2Rmlyc3RJdGVtSW5kZXggPSBGYXV4U2Nyb2xsRnJhbWVfR2V0T2Zmc2V0KE91dGZpdHRlck1haW5GcmFtZVNjcm9sbEZyYW1lKQ0KCQlsb2NhbCB2SXRlbUluZGV4ID0gMA0KCQkNCgkJdkludmVudG9yeUNhY2hlOlJlc2V0SWdub3JlSXRlbUZsYWdzKCkNCgkJDQoJCWZvciB2Q2F0ZWdvcnlJbmRleCwgdkNhdGVnb3J5SUQgaW4gaXBhaXJzKHNlbGYuY0NhdGVnb3J5T3JkZXIpIGRvDQoJCQl2SXRlbUluZGV4LCB2Rmlyc3RJdGVtSW5kZXggPSBzZWxmOkFkZE91dGZpdHNUb0xpc3Qoc2VsZi5TZXR0aW5ncy5PdXRmaXRzLCB2Q2F0ZWdvcnlJRCwgdkl0ZW1JbmRleCwgdkZpcnN0SXRlbUluZGV4LCB2SW52ZW50b3J5Q2FjaGUpDQoJCQkNCgkJCWlmIHZJdGVtSW5kZXggPj0gc2VsZi5jTWF4RGlzcGxheWVkSXRlbXMgdGhlbg0KCQkJCWJyZWFrDQoJCQllbmQNCgkJZW5kDQoJCQ0KCQlpZiB2SXRlbUluZGV4IDwgc2VsZi5jTWF4RGlzcGxheWVkSXRlbXMNCgkJYW5kIHZJbnZlbnRvcnlDYWNoZS5VbnVzZWRJdGVtcyB0aGVuDQoJCQl2SXRlbUluZGV4LCB2Rmlyc3RJdGVtSW5kZXggPSBzZWxmOkFkZE91dGZpdEl0ZW1zVG9MaXN0KHZJbnZlbnRvcnlDYWNoZS5VbnVzZWRJdGVtcywgIk9kZHNORW5kcyIsIHZJdGVtSW5kZXgsIHZGaXJzdEl0ZW1JbmRleCkNCgkJZW5kDQoJCQ0KCQktLSBIaWRlIGFueSB1bnVzZWQgaXRlbXMNCgkJDQoJCWZvciB2SXRlbUluZGV4MiA9IHZJdGVtSW5kZXgsIChzZWxmLmNNYXhEaXNwbGF5ZWRJdGVtcyAtIDEpIGRvDQoJCQlsb2NhbCB2SXRlbU5hbWUgPSAiT3V0Zml0dGVySXRlbSIuLnZJdGVtSW5kZXgyDQoJCQlsb2NhbCB2SXRlbSA9IF9HW3ZJdGVtTmFtZV0NCgkJCQ0KCQkJdkl0ZW06SGlkZSgpDQoJCWVuZA0KCQkNCgkJbG9jYWwgdlRvdGFsTnVtSXRlbXMgPSAwDQoJCQ0KCQlmb3IgdkNhdGVnb3J5SW5kZXgsIHZDYXRlZ29yeUlEIGluIGlwYWlycyhzZWxmLmNDYXRlZ29yeU9yZGVyKSBkbw0KCQkJdlRvdGFsTnVtSXRlbXMgPSB2VG90YWxOdW1JdGVtcyArIDENCgkJCQ0KCQkJbG9jYWwgdk91dGZpdHMgPSBzZWxmLlNldHRpbmdzLk91dGZpdHNbdkNhdGVnb3J5SURdDQoJCQkNCgkJCWlmIG5vdCBzZWxmLkNvbGxhcHNlZFt2Q2F0ZWdvcnlJRF0NCgkJCWFuZCB2T3V0Zml0cyB0aGVuDQoJCQkJdlRvdGFsTnVtSXRlbXMgPSB2VG90YWxOdW1JdGVtcyArICN2T3V0Zml0cw0KCQkJZW5kDQoJCWVuZA0KCQkNCgkJaWYgdkludmVudG9yeUNhY2hlLlVudXNlZEl0ZW1zIHRoZW4NCgkJCXZUb3RhbE51bUl0ZW1zID0gdlRvdGFsTnVtSXRlbXMgKyAxDQoJCQkNCgkJCWlmIG5vdCBzZWxmLkNvbGxhcHNlZFsiT2Rkc05FbmRzIl0gdGhlbg0KCQkJCXZUb3RhbE51bUl0ZW1zID0gdlRvdGFsTnVtSXRlbXMgKyAjdkludmVudG9yeUNhY2hlLlVudXNlZEl0ZW1zDQoJCQllbmQNCgkJZW5kDQoJCQ0KCQlGYXV4U2Nyb2xsRnJhbWVfVXBkYXRlKA0KCQkJCU91dGZpdHRlck1haW5GcmFtZVNjcm9sbEZyYW1lLA0KCQkJCXZUb3RhbE51bUl0ZW1zLCAgICAgICAgICAgICAgICAgLS0gbnVtSXRlbXMNCgkJCQlzZWxmLmNNYXhEaXNwbGF5ZWRJdGVtcywgICAgICAgIC0tIG51bVRvRGlzcGxheQ0KCQkJCTE4LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gdmFsdWVTdGVwDQoJCQkJbmlsLCBuaWwsIG5pbCwgICAgICAgICAgICAgICAgICAtLSBidXR0b24sIHNtYWxsV2lkdGgsIGJpZ1dpZHRoDQoJCQkJbmlsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBoaWdobGlnaHRGcmFtZQ0KCQkJCTAsIDApICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gc21hbGxIaWdobGlnaHRXaWR0aCwgYmlnSGlnaGxpZ2h0V2lkdGgNCgllbHNlaWYgc2VsZi5DdXJyZW50UGFuZWwgPT0gMiB0aGVuIC0tIE9wdGlvbnMgcGFuZWwNCgkJT3V0Zml0dGVyQXV0b1N3aXRjaDpTZXRDaGVja2VkKHNlbGYuU2V0dGluZ3MuT3B0aW9ucy5EaXNhYmxlQXV0b1N3aXRjaCkNCgkJT3V0Zml0dGVyU2hvd01pbmltYXBCdXR0b246U2V0Q2hlY2tlZChub3Qgc2VsZi5TZXR0aW5ncy5PcHRpb25zLkhpZGVNaW5pbWFwQnV0dG9uKQ0KCQlPdXRmaXR0ZXJUb29sdGlwSW5mbzpTZXRDaGVja2VkKG5vdCBzZWxmLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZVRvb2xUaXBJbmZvKQ0KCQlPdXRmaXR0ZXJTaG93SG90a2V5TWVzc2FnZXM6U2V0Q2hlY2tlZChub3Qgc2VsZi5TZXR0aW5ncy5PcHRpb25zLkRpc2FibGVIb3RrZXlNZXNzYWdlcykNCgkJT3V0Zml0dGVyU2hvd091dGZpdEJhcjpTZXRDaGVja2VkKHNlbGYuU2V0dGluZ3MuT3V0Zml0QmFyLlNob3dPdXRmaXRCYXIpDQoJCU91dGZpdHRlckl0ZW1Db21wYXJpc29uczpTZXRDaGVja2VkKG5vdCBzZWxmLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZUl0ZW1Db21wYXJpc29ucykNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT25WZXJ0aWNhbFNjcm9sbChwU2Nyb2xsRnJhbWUpDQoJT3V0Zml0dGVyLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZQ0KCU91dGZpdHRlcjpVcGRhdGUoZmFsc2UpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlNlbGVjdE91dGZpdChwT3V0Zml0KQ0KCWlmIG5vdCBzZWxmOklzT3BlbigpIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJc2VsZi5TZWxlY3RlZE91dGZpdCA9IHBPdXRmaXQNCgkNCgktLSBHZXQgdGhlIGVxdWlwcGFibGUgaXRlbXMgc28gb3V0Zml0cyBjYW4gYmUgbWFya2VkIGlmIHRoZXkncmUgbWlzc2luZyBhbnl0aGluZw0KCQ0KCWxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IHNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCQ0KCS0tIFVwZGF0ZSB0aGUgc2xvdCBlbmFibGVzDQoJDQoJc2VsZjpVcGRhdGVTbG90RW5hYmxlcyhwT3V0Zml0LCB2SW52ZW50b3J5Q2FjaGUpDQoJT3V0Zml0dGVyU2xvdEVuYWJsZXM6U2hvdygpDQoJDQoJLS0gRG9uZSwgcmVidWlsZCB0aGUgbGlzdA0KCQ0KCXNlbGYuRGlzcGxheUlzRGlydHkgPSB0cnVlDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlVwZGF0ZVNsb3RFbmFibGVzKHBPdXRmaXQsIHBJbnZlbnRvcnlDYWNoZSkNCglpZiBVbml0SGFzUmVsaWNTbG90KCJwbGF5ZXIiKSB0aGVuDQoJCU91dGZpdHRlckVuYWJsZUFtbW9TbG90OkhpZGUoKQ0KCWVsc2UNCgkJT3V0Zml0dGVyRW5hYmxlQW1tb1Nsb3Q6U2hvdygpDQoJZW5kDQoJDQoJZm9yIF8sIHZJbnZlbnRvcnlTbG90IGluIGlwYWlycyhzZWxmLmNTbG90TmFtZXMpIGRvDQoJCWxvY2FsIHZDaGVja2JveCA9IF9HWyJPdXRmaXR0ZXJFbmFibGUiLi52SW52ZW50b3J5U2xvdF0NCgkJDQoJCWlmIG5vdCBwT3V0Zml0OlNsb3RJc0VuYWJsZWQodkludmVudG9yeVNsb3QpIHRoZW4NCgkJCXZDaGVja2JveDpTZXRDaGVja2VkKGZhbHNlKQ0KCQllbHNlDQoJCQlpZiBwT3V0Zml0OlNsb3RJc0VxdWlwcGVkKHZJbnZlbnRvcnlTbG90LCBwSW52ZW50b3J5Q2FjaGUpIHRoZW4NCgkJCQl2Q2hlY2tib3g6U2V0Q2hlY2tlZFRleHR1cmUoIkludGVyZmFjZVxcQnV0dG9uc1xcVUktQ2hlY2tCb3gtQ2hlY2siKQ0KCQkJCXZDaGVja2JveC5Jc1Vua25vd24gPSBmYWxzZQ0KCQkJZWxzZQ0KCQkJCXZDaGVja2JveDpTZXRDaGVja2VkVGV4dHVyZSgiSW50ZXJmYWNlXFxBZGRvbnNcXE91dGZpdHRlclxcVGV4dHVyZXNcXENoZWNrYm94VW5rbm93biIpDQoJCQkJdkNoZWNrYm94LklzVW5rbm93biA9IHRydWUNCgkJCWVuZA0KCQkJDQoJCQl2Q2hlY2tib3g6U2V0Q2hlY2tlZCh0cnVlKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6Q2xlYXJTZWxlY3Rpb24oKQ0KCXNlbGYuU2VsZWN0ZWRPdXRmaXQgPSBuaWwNCglzZWxmLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZQ0KCU91dGZpdHRlclNsb3RFbmFibGVzOkhpZGUoKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpGaW5kT3V0Zml0SXRlbUluZGV4KHBPdXRmaXQpDQoJbG9jYWwgdk91dGZpdENhdGVnb3J5SUQsIHZPdXRmaXRJbmRleCA9IHNlbGY6RmluZE91dGZpdChwT3V0Zml0KQ0KCQ0KCWlmIG5vdCB2T3V0Zml0Q2F0ZWdvcnlJRCB0aGVuDQoJCXJldHVybiBuaWwNCgllbmQNCgkNCglsb2NhbCB2SXRlbUluZGV4ID0gMA0KCQ0KCWZvciB2Q2F0ZWdvcnlJbmRleCwgdkNhdGVnb3J5SUQgaW4gaXBhaXJzKHNlbGYuY0NhdGVnb3J5T3JkZXIpIGRvDQoJCXZJdGVtSW5kZXggPSB2SXRlbUluZGV4ICsgMQ0KCQkNCgkJaWYgbm90IHNlbGYuQ29sbGFwc2VkW3ZDYXRlZ29yeUlEXSB0aGVuDQoJCQlpZiB2T3V0Zml0Q2F0ZWdvcnlJRCA9PSB2Q2F0ZWdvcnlJRCB0aGVuDQoJCQkJcmV0dXJuIHZJdGVtSW5kZXggKyB2T3V0Zml0SW5kZXggLSAxDQoJCQllbHNlDQoJCQkJdkl0ZW1JbmRleCA9IHZJdGVtSW5kZXggKyAjc2VsZi5TZXR0aW5ncy5PdXRmaXRzW3ZDYXRlZ29yeUlEXQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBuaWwNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6V2Vhck91dGZpdEJ5TmFtZShwT3V0Zml0TmFtZSwgcExheWVySUQpDQoJdk91dGZpdCA9IHNlbGY6RmluZE91dGZpdEJ5TmFtZShwT3V0Zml0TmFtZSkNCgkNCglpZiBub3Qgdk91dGZpdCB0aGVuDQoJCXNlbGY6RXJyb3JNZXNzYWdlKCJDb3VsZG4ndCBmaW5kIG91dGZpdCBuYW1lZCAlcyIsIHBPdXRmaXROYW1lKQ0KCQlyZXR1cm4NCgllbmQNCgkNCglzZWxmOldlYXJPdXRmaXQodk91dGZpdCwgcExheWVySUQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJlbW92ZU91dGZpdEJ5TmFtZShwT3V0Zml0TmFtZSwgcExheWVySUQpDQoJdk91dGZpdCA9IHNlbGY6RmluZE91dGZpdEJ5TmFtZShwT3V0Zml0TmFtZSkNCgkNCglpZiBub3Qgdk91dGZpdCB0aGVuDQoJCXNlbGY6RXJyb3JNZXNzYWdlKCJDb3VsZG4ndCBmaW5kIG91dGZpdCBuYW1lZCAlcyIsIHBPdXRmaXROYW1lKQ0KCQlyZXR1cm4NCgllbmQNCgkNCglzZWxmOlJlbW92ZU91dGZpdCh2T3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpXZWFyT3V0Zml0Tm93KHBPdXRmaXQsIHBMYXllcklELCBwQ2FsbGVySXNTY3JpcHQpDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJc2VsZjpXZWFyT3V0Zml0KHBPdXRmaXQsIHBMYXllcklELCBwQ2FsbGVySXNTY3JpcHQpDQoJc2VsZjpFbmRFcXVpcG1lbnRVcGRhdGUobmlsLCB0cnVlKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpXZWFyT3V0Zml0KHBPdXRmaXQsIHBMYXllcklELCBwQ2FsbGVySXNTY3JpcHQpDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJDQoJLS0gVXBkYXRlIHRoZSBlcXVpcG1lbnQNCgkNCglwT3V0Zml0LmRpZEVxdWlwID0gcENhbGxlcklzU2NyaXB0DQoJcE91dGZpdC5kaWRVbmVxdWlwID0gZmFsc2UNCgkNCglzZWxmLkVxdWlwcGVkTmVlZHNVcGRhdGUgPSB0cnVlDQoJDQoJLS0gQWRkIHRoZSBvdXRmaXQgdG8gdGhlIHN0YWNrDQoJDQoJaWYgcE91dGZpdC5DYXRlZ29yeUlEID09ICJDb21wbGV0ZSIgdGhlbg0KCQlzZWxmLk91dGZpdFN0YWNrOkNsZWFyKCkNCgllbHNlaWYgcE91dGZpdC5VbmVxdWlwT3RoZXJzIHRoZW4NCgkJc2VsZi5PdXRmaXRTdGFjazpDbGVhckNhdGVnb3J5KCJBY2Nlc3NvcnkiKQ0KCWVuZA0KCQ0KCXNlbGYuT3V0Zml0U3RhY2s6QWRkT3V0Zml0KHBPdXRmaXQsIHBMYXllcklEKQ0KCQ0KCS0tIElmIGl0J3MgYSBDb21wbGV0ZSBvdXRmaXQsIHB1c2ggaXQgb250byB0aGUgbGlzdCBvZiByZWNlbnQgY29tcGxldGUgb3V0Zml0cw0KCQ0KCWlmIHBPdXRmaXQuQ2F0ZWdvcnlJRCA9PSAiQ29tcGxldGUiIGFuZCBwT3V0Zml0OkdldE5hbWUoKSB0aGVuDQoJCWxvY2FsIHZPdXRmaXROYW1lID0gcE91dGZpdDpHZXROYW1lKCkNCgkJDQoJCWZvciB2UmVjZW50SW5kZXgsIHZSZWNlbnROYW1lIGluIGlwYWlycyhzZWxmLlNldHRpbmdzLlJlY2VudENvbXBsZXRlT3V0Zml0cykgZG8NCgkJCWlmIHZSZWNlbnROYW1lID09IHZPdXRmaXROYW1lIHRoZW4NCgkJCQl0YWJsZS5yZW1vdmUoc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHMsIHZSZWNlbnRJbmRleCkNCgkJCQlicmVhaw0KCQkJZW5kDQoJCWVuZA0KCQkNCgkJdGFibGUuaW5zZXJ0KHNlbGYuU2V0dGluZ3MuUmVjZW50Q29tcGxldGVPdXRmaXRzLCB2T3V0Zml0TmFtZSkNCgllbmQNCgkNCgktLSBJZiBPdXRmaXR0ZXIgaXMgb3BlbiB0aGVuIGFsc28gc2VsZWN0IHRoZSBvdXRmaXQuICBUaGlzIGlzIGltcG9ydGFudA0KCS0tIGJlY2F1c2UgdGhlIFVJIGNhbid0IGZ1bmN0aW9uIGNvcnJlY3RseSBpZiB0aGUgc2VsZWN0ZWQgb3V0Zml0IGFuZA0KCS0tIHRvcCBvdXRmaXQgZG9uJ3Qgc3RheSB0aGUgc2FtZS4NCgkNCglpZiBzZWxmOklzT3BlbigpIHRoZW4NCgkJaWYgc2VsZi5PdXRmaXRTdGFjazpJc1RvcG1vc3RPdXRmaXQocE91dGZpdCkgdGhlbg0KCQkJc2VsZjpTZWxlY3RPdXRmaXQocE91dGZpdCkNCgkJZWxzZQ0KCQkJc2VsZjpDbGVhclNlbGVjdGlvbigpDQoJCWVuZA0KCWVuZA0KCQ0KCXNlbGY6RW5kRXF1aXBtZW50VXBkYXRlKCJPdXRmaXR0ZXI6V2Vhck91dGZpdCIpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJlbW92ZU91dGZpdE5vdyhwT3V0Zml0LCBwQ2FsbGVySXNTY3JpcHQpDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJc2VsZjpSZW1vdmVPdXRmaXQocE91dGZpdCwgcENhbGxlcklzU2NyaXB0KQ0KCXNlbGY6RW5kRXF1aXBtZW50VXBkYXRlKG5pbCwgdHJ1ZSkNCmVuZA0KDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpSZW1vdmVPdXRmaXQocE91dGZpdCwgcENhbGxlcklzU2NyaXB0KQ0KCS0tIEhBQ0s6IERpc2FibGluZyB0aGUgdW5lcXVpcHBpbmcgb2YgQ29tcGxldGUgb3V0Zml0cyB0byBzZWUgaXQgd29ya3MgYmV0dGVyDQoJLS0gZm9yIG1vcmUgZW5kLXVzZXIgc2l0dWF0aW9ucw0KCQ0KCS0tIFVQREFURTogSXQgZG9lc24ndCA6KCAgU3RlYWx0aCwgcmlkaW5nIGFuZCBvdGhlciBnZWFyIGFzIENvbXBsZXRlIG91dGZpdHMNCgktLSBmYWlsIHRvIHVuZXF1aXANCgkNCgktLWlmIHBPdXRmaXQuQ2F0ZWdvcnlJRCA9PSAiQ29tcGxldGUiIHRoZW4NCgktLQlyZXR1cm4NCgktLWVuZA0KCQ0KCS0tIFJlbW92ZSBpdCBmcm9tIHRoZSBzdGFjaw0KCQ0KCWlmIG5vdCBzZWxmLk91dGZpdFN0YWNrOlJlbW92ZU91dGZpdChwT3V0Zml0KSB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCS0tIElmIGl0J3MgYSBDb21wbGV0ZSBvdXRmaXQsIG1vdmUgaXQgdG8gdGhlIGJvdHRvbSBvZiB0aGUgbGlzdCBvZiByZWNlbnQgY29tcGxldGUgb3V0Zml0cw0KCQ0KCWlmIHBPdXRmaXQuQ2F0ZWdvcnlJRCA9PSAiQ29tcGxldGUiIGFuZCBwT3V0Zml0OkdldE5hbWUoKSB0aGVuDQoJCWZvciB2UmVjZW50SW5kZXgsIHZSZWNlbnROYW1lIGluIGlwYWlycyhzZWxmLlNldHRpbmdzLlJlY2VudENvbXBsZXRlT3V0Zml0cykgZG8NCgkJCWlmIHZSZWNlbnROYW1lID09IHBPdXRmaXQ6R2V0TmFtZSgpIHRoZW4NCgkJCQl0YWJsZS5yZW1vdmUoc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHMsIHZSZWNlbnRJbmRleCkNCgkJCQlicmVhaw0KCQkJZW5kDQoJCWVuZA0KCQkNCgkJdGFibGUuaW5zZXJ0KHNlbGYuU2V0dGluZ3MuUmVjZW50Q29tcGxldGVPdXRmaXRzLCAxLCBwT3V0Zml0OkdldE5hbWUoKSkNCgllbmQNCgkNCgktLQ0KCQ0KCXNlbGY6QmVnaW5FcXVpcG1lbnRVcGRhdGUoKQ0KCQ0KCS0tIENsZWFyIHRoZSBzZWxlY3Rpb24gaWYgdGhlIG91dGZpdCBiZWluZyByZW1vdmVkDQoJLS0gaXMgc2VsZWN0ZWQgdG9vDQoJDQoJaWYgc2VsZi5TZWxlY3RlZE91dGZpdCA9PSBwT3V0Zml0IHRoZW4NCgkJc2VsZjpDbGVhclNlbGVjdGlvbigpDQoJZW5kDQoNCgktLSBVcGRhdGUgdGhlIGxpc3QNCgkNCglwT3V0Zml0LmRpZEVxdWlwID0gZmFsc2UNCglwT3V0Zml0LmRpZFVuZXF1aXAgPSBwQ2FsbGVySXNTY3JpcHQNCgkNCglzZWxmLkVxdWlwcGVkTmVlZHNVcGRhdGUgPSB0cnVlDQoJDQoJc2VsZjpFbmRFcXVpcG1lbnRVcGRhdGUoIk91dGZpdHRlcjpSZW1vdmVPdXRmaXQiKQ0KCQ0KCXNlbGY6RGlzcGF0Y2hPdXRmaXRFdmVudCgiVU5XRUFSX09VVEZJVCIsIHBPdXRmaXQ6R2V0TmFtZSgpLCBwT3V0Zml0KQ0KCQ0KCS0tIElmIHRoZXkncmUgcmVtb3ZpbmcgYSBjb21wbGV0ZSBvdXRmaXQsIGZpbmQgc29tZXRoaW5nIGVsc2UgdG8gd2VhciBpbnN0ZWFkDQoJDQoJaWYgcE91dGZpdC5DYXRlZ29yeUlEID09ICJDb21wbGV0ZSINCglhbmQgI3NlbGYuU2V0dGluZ3MuUmVjZW50Q29tcGxldGVPdXRmaXRzIHRoZW4NCgkJbG9jYWwgdk91dGZpdA0KCQkNCgkJd2hpbGUgbm90IHZPdXRmaXQgZG8NCgkJCWxvY2FsIHZPdXRmaXROYW1lID0gc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHNbI3NlbGYuU2V0dGluZ3MuUmVjZW50Q29tcGxldGVPdXRmaXRzXQ0KCQkJDQoJCQl2T3V0Zml0ID0gc2VsZjpGaW5kT3V0Zml0QnlOYW1lKHZPdXRmaXROYW1lKQ0KCQkJDQoJCQlpZiB2T3V0Zml0IGFuZCB2T3V0Zml0LkNhdGVnb3J5SUQgPT0gIkNvbXBsZXRlIiB0aGVuDQoJCQkJc2VsZjpXZWFyT3V0Zml0KHZPdXRmaXQpDQoJCQkJYnJlYWsNCgkJCWVuZA0KCQkJDQoJCQl0YWJsZS5yZW1vdmUoc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHMpDQoJCQkNCgkJCWlmICNzZWxmLlNldHRpbmdzLlJlY2VudENvbXBsZXRlT3V0Zml0cyB0aGVuDQoJCQkJYnJlYWsNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VG9nZ2xlT3V0Zml0Tm93KHBPdXRmaXQpDQoJaWYgc2VsZjpXZWFyaW5nT3V0Zml0KHBPdXRmaXQpIHRoZW4NCgkJc2VsZjpSZW1vdmVPdXRmaXROb3cocE91dGZpdCkNCgkJcmV0dXJuIGZhbHNlDQoJZWxzZQ0KCQlzZWxmOldlYXJPdXRmaXROb3cocE91dGZpdCkNCgkJcmV0dXJuIHRydWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VG9nZ2xlT3V0Zml0KHBPdXRmaXQpDQoJaWYgc2VsZjpXZWFyaW5nT3V0Zml0KHBPdXRmaXQpIHRoZW4NCgkJc2VsZjpSZW1vdmVPdXRmaXQocE91dGZpdCkNCgkJcmV0dXJuIGZhbHNlDQoJZWxzZQ0KCQlzZWxmOldlYXJPdXRmaXQocE91dGZpdCkNCgkJcmV0dXJuIHRydWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2V0U291bmRPcHRpb24ocFBhcmFtKQ0KCWlmIHBQYXJhbSA9PSAib24iIHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5FbmFibGVFcXVpcFNvdW5kcyA9IHRydWUNCgkJc2VsZjpOb3RlTWVzc2FnZSgiT3V0Zml0dGVyIHdpbGwgbm8gbG9uZ2VyIGFmZmVjdCBzb3VuZHMgZHVyaW5nIGVxdWlwbWVudCBjaGFuZ2VzIikNCgllbHNlaWYgcFBhcmFtID09ICJvZmYiIHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5FbmFibGVFcXVpcFNvdW5kcyA9IG5pbA0KCQlzZWxmOk5vdGVNZXNzYWdlKCJPdXRmaXR0ZXIgd2lsbCBub3cgZGlzYWJsZSBzb3VuZCBlZmZlY3RzIGR1cmluZyBlcXVpcG1lbnQgY2hhbmdlcyIpDQoJZWxzZQ0KCQlzZWxmOk5vdGVNZXNzYWdlKCJWYWxpZCBzb3VuZCBvcHRpb25zIGFyZSAnb24nIGFuZCAnb2ZmJyIpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlNldEVycm9yc09wdGlvbihwUGFyYW0pDQoJaWYgcFBhcmFtID09ICJvbiIgdGhlbg0KCQlzZWxmLlNldHRpbmdzLkRpc2FibGVFcXVpcEVycm9ycyA9IG5pbA0KCQlzZWxmOk5vdGVNZXNzYWdlKCJPdXRmaXR0ZXIgd2lsbCByZXBvcnQgZXJyb3JzIGR1cmluZyBlcXVpcG1lbnQgY2hhbmdlcyIpDQoJZWxzZWlmIHBQYXJhbSA9PSAib2ZmIiB0aGVuDQoJCXNlbGYuU2V0dGluZ3MuRGlzYWJsZUVxdWlwRXJyb3JzID0gdHJ1ZQ0KCQlzZWxmOk5vdGVNZXNzYWdlKCJPdXRmaXR0ZXIgd2lsbCBub3QgcmVwb3J0IGVycm9ycyBkdXJpbmcgZXF1aXBtZW50IGNoYW5nZXMiKQ0KCWVsc2UNCgkJc2VsZjpOb3RlTWVzc2FnZSgiVmFsaWQgZXJyb3Igb3B0aW9ucyBhcmUgJ29uJyBhbmQgJ29mZiciKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTaG93TGlua1N0YXRzKHBMaW5rKQ0KCWxvY2FsIHZTdGF0cyA9IHNlbGY6R2V0SXRlbUxpbmtTdGF0cyhwTGluaykNCgkNCglpZiBub3QgdlN0YXRzIHRoZW4NCgkJc2VsZjpOb3RlTWVzc2FnZSgiQ291bGRuJ3QgZ2V0IGl0ZW0gc3RhdHMgZnJvbSB0aGUgbGluayBwcm92aWRlZCIpDQoJCXJldHVybg0KCWVuZA0KCQ0KCS0tIHNlbGY6Q29udmVydFJhdGluZ3NUb1N0YXRzKHZTdGF0cykNCgktLSBzZWxmOkRpc3RyaWJ1dGVTZWNvbmRhcnlTdGF0cyh2U3RhdHMsIHNlbGY6R2V0UGxheWVyU3RhdERpc3RyaWJ1dGlvbigpKQ0KCQ0KCWZvciB2U3RhdE5hbWUsIHZTdGF0VmFsdWUgaW4gcGFpcnModlN0YXRzKSBkbw0KCQlzZWxmOk5vdGVNZXNzYWdlKCIlczogJXMiLCB2U3RhdE5hbWUsIHZTdGF0VmFsdWUgb3IgIm5pbCIpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlNob3dMaW5rSW5mbyhwTGluaykNCglsb2NhbCB2SXRlbUluZm8gPSBzZWxmOkdldEl0ZW1JbmZvRnJvbUxpbmsocExpbmspDQoJDQoJaWYgbm90IHZJdGVtSW5mbyB0aGVuDQoJCXNlbGY6Tm90ZU1lc3NhZ2UoIkNvdWxkbid0IGdldCBpdGVtIGluZm8gZnJvbSB0aGUgbGluayBwcm92aWRlZCIpDQoJCXJldHVybg0KCWVuZA0KCQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIk5hbWU6ICIuLnZJdGVtSW5mby5OYW1lKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIlF1YWxpdHk6ICIuLnZJdGVtSW5mby5RdWFsaXR5KQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIkNvZGU6ICIuLnZJdGVtSW5mby5Db2RlKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIlN1YkNvZGU6ICIuLnZJdGVtSW5mby5TdWJDb2RlKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIlR5cGU6ICIuLnZJdGVtSW5mby5UeXBlKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIlN1YlR5cGU6ICIuLnZJdGVtSW5mby5TdWJUeXBlKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIkludlR5cGU6ICIuLnZJdGVtSW5mby5JbnZUeXBlKQ0KCXNlbGY6Tm90ZU1lc3NhZ2UoIkxldmVsOiAiLi52SXRlbUluZm8uTGV2ZWwpDQoJaWYgdkl0ZW1JbmZvLkVuY2hhbnRDb2RlIHRoZW4NCgkJc2VsZjpOb3RlTWVzc2FnZSgiRW5jaGFudENvZGU6ICIuLnZJdGVtSW5mby5FbmNoYW50Q29kZSkNCgllbmQNCglpZiB2SXRlbUluZm8uSmV3ZWxDb2RlMSB0aGVuDQoJCXNlbGY6Tm90ZU1lc3NhZ2UoIkpld2VsQ29kZTE6ICIuLnZJdGVtSW5mby5KZXdlbENvZGUxKQ0KCWVuZA0KCWlmIHZJdGVtSW5mby5KZXdlbENvZGUyIHRoZW4NCgkJc2VsZjpOb3RlTWVzc2FnZSgiSmV3ZWxDb2RlMjogIi4udkl0ZW1JbmZvLkpld2VsQ29kZTIpDQoJZW5kDQoJaWYgdkl0ZW1JbmZvLkpld2VsQ29kZTMgdGhlbg0KCQlzZWxmOk5vdGVNZXNzYWdlKCJKZXdlbENvZGUzOiAiLi52SXRlbUluZm8uSmV3ZWxDb2RlMykNCgllbmQNCglpZiB2SXRlbUluZm8uSmV3ZWxDb2RlNCB0aGVuDQoJCXNlbGY6Tm90ZU1lc3NhZ2UoIkpld2VsQ29kZTQ6ICIuLnZJdGVtSW5mby5KZXdlbENvZGU0KQ0KCWVuZA0KCWlmIHZJdGVtSW5mby5VbmlxdWVJRCB0aGVuDQoJCXNlbGY6Tm90ZU1lc3NhZ2UoIlVuaXF1ZUlEOiAiLi52SXRlbUluZm8uVW5pcXVlSUQpDQoJZW5kDQoJDQoJbG9jYWwgdlN0YXRzID0gc2VsZjpHZXRJdGVtTGlua1N0YXRzKHBMaW5rKQ0KCQ0KCS0tc2VsZjpDb252ZXJ0UmF0aW5nc1RvU3RhdHModlN0YXRzKQ0KCS0tc2VsZjpEaXN0cmlidXRlU2Vjb25kYXJ5U3RhdHModlN0YXRzLCBzZWxmOkdldFBsYXllclN0YXREaXN0cmlidXRpb24oKSkNCgkNCglzZWxmOkRlYnVnVGFibGUodlN0YXRzLCAiU3RhdHMiKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpEZXBvc2l0T3V0Zml0VW5pcXVlKHBPdXRmaXQpDQoJc2VsZjpEZXBvc2l0T3V0Zml0KHBPdXRmaXQsIHRydWUpDQplbmQNCg0KU3RhdGljUG9wdXBEaWFsb2dzLk9VVEZJVFRFUl9DT05GSVJNX1JFU0VUID0NCnsNCgl0ZXh0ID0gVEVYVChPdXRmaXR0ZXIuY0NvbmZpcm1SZXNldE1zZyksDQoJYnV0dG9uMSA9IFRFWFQoT3V0Zml0dGVyLmNSZXNldCksDQoJYnV0dG9uMiA9IFRFWFQoQ0FOQ0VMKSwNCglPbkFjY2VwdCA9IGZ1bmN0aW9uKCkgT3V0Zml0dGVyOlJlc2V0KCkgZW5kLA0KCXRpbWVvdXQgPSAwLA0KCXdoaWxlRGVhZCA9IDEsDQoJaGlkZU9uRXNjYXBlID0gMSwNCn0NCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkFza1Jlc2V0KCkNCglTdGF0aWNQb3B1cF9TaG93KCJPVVRGSVRURVJfQ09ORklSTV9SRVNFVCIpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJlc2V0KCkNCglPdXRmaXR0ZXJGcmFtZTpIaWRlKCkNCgkNCglzZWxmOkNsZWFyU2VsZWN0aW9uKCkNCglzZWxmLk91dGZpdFN0YWNrOkNsZWFyKCkNCgkNCglzZWxmOkluaXRpYWxpemVTZXR0aW5ncygpDQoNCglzZWxmLkN1cnJlbnRPdXRmaXQgPSBzZWxmOkdldEludmVudG9yeU91dGZpdCgpDQoJc2VsZjpJbml0aWFsaXplT3V0Zml0cygpDQoJc2VsZjpTeW5jaHJvbml6ZUVNKCkNCgkNCglzZWxmLkVxdWlwcGVkTmVlZHNVcGRhdGUgPSBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTZXRPdXRmaXRCaW5kaW5nSW5kZXgocE91dGZpdCwgcEJpbmRpbmdJbmRleCkNCglpZiBwQmluZGluZ0luZGV4IHRoZW4NCgkJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCQlmb3Igdk91dGZpdEluZGV4LCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCQlpZiB2T3V0Zml0LkJpbmRpbmdJbmRleCA9PSBwQmluZGluZ0luZGV4IHRoZW4NCgkJCQkJdk91dGZpdC5CaW5kaW5nSW5kZXggPSBuaWwNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglwT3V0Zml0LkJpbmRpbmdJbmRleCA9IHBCaW5kaW5nSW5kZXgNCmVuZA0KDQpPdXRmaXR0ZXIuTGFzdEJpbmRpbmdJbmRleCA9IG5pbA0KT3V0Zml0dGVyLkxhc3RCaW5kaW5nVGltZSA9IG5pbA0KDQpPdXRmaXR0ZXIuY01pbkJpbmRpbmdUaW1lID0gMC43NQ0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6V2VhckJvdW5kT3V0Zml0KHBCaW5kaW5nSW5kZXgpDQoJLS0gQ2hlY2sgZm9yIHRoZSB1c2VyIHNwYW1taW5nIHRoZSBidXR0b24gdG8gcHJldmVudCB0aGUgb3V0Zml0IGZyb20NCgktLSB0b2dnbGluZyBpZiB0aGV5J3JlIHBhbmlja2luZw0KCQ0KCWxvY2FsIHZUaW1lID0gR2V0VGltZSgpDQoJDQoJaWYgc2VsZi5MYXN0QmluZGluZ0luZGV4ID09IHBCaW5kaW5nSW5kZXggdGhlbg0KCQlsb2NhbCB2RWxhcHNlZCA9IHZUaW1lIC0gc2VsZi5MYXN0QmluZGluZ1RpbWUNCgkJDQoJCWlmIHZFbGFwc2VkIDwgc2VsZi5jTWluQmluZGluZ1RpbWUgdGhlbg0KCQkJc2VsZi5MYXN0QmluZGluZ1RpbWUgPSB2VGltZQ0KCQkJcmV0dXJuDQoJCWVuZA0KCWVuZA0KCQ0KCS0tDQoJDQoJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciB2T3V0Zml0SW5kZXgsIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJaWYgdk91dGZpdC5CaW5kaW5nSW5kZXggPT0gcEJpbmRpbmdJbmRleCB0aGVuDQoJCQkJdk91dGZpdC5EaXNhYmxlZCA9IG5pbA0KCQkJCU91dGZpdHRlci5IYXNIV0V2ZW50ID0gdHJ1ZQ0KCQkJCWlmIHZDYXRlZ29yeUlEID09ICJDb21wbGV0ZSIgdGhlbg0KCQkJCQlzZWxmOldlYXJPdXRmaXROb3codk91dGZpdCkNCgkJCQkJaWYgbm90IHNlbGYuU2V0dGluZ3MuT3B0aW9ucy5EaXNhYmxlSG90a2V5TWVzc2FnZXMgdGhlbg0KCQkJCQkJVUlFcnJvcnNGcmFtZTpBZGRNZXNzYWdlKGZvcm1hdChzZWxmLmNFcXVpcE91dGZpdE1lc3NhZ2VGb3JtYXQsIHZPdXRmaXQ6R2V0TmFtZSgpKSwgc2VsZi5PVVRGSVRfTUVTU0FHRV9DT0xPUi5yLCBzZWxmLk9VVEZJVF9NRVNTQUdFX0NPTE9SLmcsIHNlbGYuT1VURklUX01FU1NBR0VfQ09MT1IuYikNCgkJCQkJZW5kDQoJCQkJZWxzZQ0KCQkJCQlsb2NhbCB2RXF1aXBwZWQgPSBzZWxmOlRvZ2dsZU91dGZpdE5vdyh2T3V0Zml0LCB2Q2F0ZWdvcnlJRCkNCgkJCQkJDQoJCQkJCWlmIG5vdCBzZWxmLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZUhvdGtleU1lc3NhZ2VzIHRoZW4NCgkJCQkJCWlmIHZFcXVpcHBlZCB0aGVuDQoJCQkJCQkJVUlFcnJvcnNGcmFtZTpBZGRNZXNzYWdlKGZvcm1hdChzZWxmLmNFcXVpcE91dGZpdE1lc3NhZ2VGb3JtYXQsIHZPdXRmaXQ6R2V0TmFtZSgpKSwgc2VsZi5PVVRGSVRfTUVTU0FHRV9DT0xPUi5yLCBzZWxmLk9VVEZJVF9NRVNTQUdFX0NPTE9SLmcsIHNlbGYuT1VURklUX01FU1NBR0VfQ09MT1IuYikNCgkJCQkJCWVsc2UNCgkJCQkJCQlVSUVycm9yc0ZyYW1lOkFkZE1lc3NhZ2UoZm9ybWF0KHNlbGYuY1VuZXF1aXBPdXRmaXRNZXNzYWdlRm9ybWF0LCB2T3V0Zml0OkdldE5hbWUoKSksIHNlbGYuT1VURklUX01FU1NBR0VfQ09MT1Iuciwgc2VsZi5PVVRGSVRfTUVTU0FHRV9DT0xPUi5nLCBzZWxmLk9VVEZJVF9NRVNTQUdFX0NPTE9SLmIpDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQkJT3V0Zml0dGVyLkhhc0hXRXZlbnQgPSBmYWxzZQ0KCQkJCQ0KCQkJCS0tIFJlbWVtYmVyIHRoZSBiaW5kaW5nIHVzZWQgdG8gZmlsdGVyIGZvciBidXR0b24gc3BhbQ0KCQkJCQ0KCQkJCXNlbGYuTGFzdEJpbmRpbmdJbmRleCA9IHBCaW5kaW5nSW5kZXgNCgkJCQlzZWxmLkxhc3RCaW5kaW5nVGltZSA9IHZUaW1lDQoJCQkJDQoJCQkJcmV0dXJuDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkZpbmRPdXRmaXQocE91dGZpdCkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIHZPdXRmaXRJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQlpZiB2T3V0Zml0ID09IHBPdXRmaXQgdGhlbg0KCQkJCXJldHVybiB2Q2F0ZWdvcnlJRCwgdk91dGZpdEluZGV4DQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIG5pbCwgbmlsDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkZpbmRPdXRmaXRCeU5hbWUocE5hbWUpDQoJaWYgbm90IHBOYW1lDQoJb3IgcE5hbWUgPT0gIiIgdGhlbg0KCQlyZXR1cm4gbmlsDQoJZW5kDQoJDQoJbG9jYWwgdkxvd2VyTmFtZSA9IHN0cmxvd2VyKHBOYW1lKQ0KCQ0KCWZvciB2Q2F0ZWdvcnlJRCwgdk91dGZpdHMgaW4gcGFpcnMoc2VsZi5TZXR0aW5ncy5PdXRmaXRzKSBkbw0KCQlmb3Igdk91dGZpdEluZGV4LCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCWlmIHN0cmxvd2VyKHZPdXRmaXQ6R2V0TmFtZSgpKSA9PSB2TG93ZXJOYW1lIHRoZW4NCgkJCQlyZXR1cm4gdk91dGZpdCwgdkNhdGVnb3J5SUQsIHZPdXRmaXRJbmRleA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBuaWwsIG5pbA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXRPdXRmaXRDYXRlZ29yeUlEKHBPdXRmaXQpDQoJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciB2T3V0Zml0SW5kZXgsIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJaWYgdk91dGZpdCA9PSBwT3V0Zml0IHRoZW4NCgkJCQlyZXR1cm4gdkNhdGVnb3J5SUQsIHZPdXRmaXRJbmRleA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCi0tIE91dGZpdHRlciBkb2Vzbid0IHVzZSB0aGlzIGZ1bmN0aW9uLCBidXQgb3RoZXIgYWRkb25zIHN1Y2ggYXMNCi0tIEZpc2hpbmcgQnVkZHkgbWlnaHQgdXNlIGl0IHRvIGxvY2F0ZSBzcGVjaWZpYyBnZW5lcmF0ZWQgb3V0Zml0cw0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6RmluZE91dGZpdEJ5U3RhdElEKHBTdGF0SUQpDQoJaWYgbm90IHBTdGF0SUQgb3IgcFN0YXRJRCA9PSAiIiB0aGVuDQoJCXJldHVybiBuaWwNCgllbmQNCg0KCWZvciB2Q2F0ZWdvcnlJRCwgdk91dGZpdHMgaW4gcGFpcnMoc2VsZi5TZXR0aW5ncy5PdXRmaXRzKSBkbw0KCQlmb3Igdk91dGZpdEluZGV4LCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCWlmIHZPdXRmaXQuU3RhdElEIGFuZCB2T3V0Zml0LlN0YXRJRCA9PSBwU3RhdElEIHRoZW4NCgkJCQlyZXR1cm4gdk91dGZpdCwgdkNhdGVnb3J5SUQsIHZPdXRmaXRJbmRleA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBuaWwNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0UGxheWVyU3RhdERpc3RyaWJ1dGlvbigpDQoJbG9jYWwgdkNsYXNzRGlzdCA9IHNlbGYuY1N0YXREaXN0cmlidXRpb25bc2VsZi5QbGF5ZXJDbGFzc10NCglsb2NhbCB2UmF0aW5nc0Rpc3QgPSBzZWxmOkdldFBsYXllclJhdGluZ1N0YXREaXN0cmlidXRpb24oKQ0KCQ0KCWZvciB2U3RhdElELCB2RGlzdCBpbiBwYWlycyh2UmF0aW5nc0Rpc3QpIGRvDQoJCXZDbGFzc0Rpc3RbdlN0YXRJRF0gPSB2RGlzdA0KCWVuZA0KCQ0KCXJldHVybiB2Q2xhc3NEaXN0DQplbmQNCg0KT3V0Zml0dGVyLkJhc2VSYXRpbmdzNjEgPQ0Kew0KCUFybW9yUGVuZXRyYXRpb24gPSAzLjc1LA0KCUV4cGVydGlzZSA9IDIuNSwNCgkNCglNZWxlZUhhc3RlID0gMTAsDQoJTWVsZWVIaXQgPSAxMCwNCglNZWxlZUNyaXQgPSAxNCwNCgkNCglTcGVsbEhhc3RlID0gMTAsDQoJU3BlbGxIaXQgPSA4LA0KCVNwZWxsQ3JpdCA9IDE0LA0KCQ0KCURlZmVuc2UgPSAxLjUsDQoJRG9kZ2UgPSAxMiwNCglQYXJyeSA9IDE1LA0KCUJsb2NrID0gNSwNCglSZXNpbGllbmNlID0gMjUsDQp9DQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXRQbGF5ZXJSYXRpbmdTdGF0RGlzdHJpYnV0aW9uKCkNCglsb2NhbCB2TGV2ZWwgPSBVbml0TGV2ZWwoInBsYXllciIpDQoJDQoJaWYgc2VsZi5SYXRpbmdTdGF0RGlzdHJpYnV0aW9uDQoJYW5kIHNlbGYuUmF0aW5nU3RhdERpc3RyaWJ1dGlvbkxldmVsID09IHZMZXZlbCB0aGVuDQoJCXJldHVybiBzZWxmLlJhdGluZ1N0YXREaXN0cmlidXRpb24NCgllbmQNCgkNCgktLQ0KCQ0KCXNlbGYuUmF0aW5nU3RhdERpc3RyaWJ1dGlvbiA9IHt9DQoJDQoJaWYgdkxldmVsIDwgMTAgdGhlbg0KCQl2TGV2ZWwgPSAxMA0KCWVuZA0KCQ0KCWxvY2FsIHZMZXZlbEZhY3Rvcg0KCWxvY2FsIHZEb2RnZUxldmVsRmFjdG9yDQoJDQoJaWYgdkxldmVsIDw9IDEwIHRoZW4NCgkJdkxldmVsRmFjdG9yID0gMSAvIDI2DQoJZWxzZWlmIHZMZXZlbCA8PSA2MCB0aGVuDQoJCXZMZXZlbEZhY3RvciA9ICh2TGV2ZWwgLSA4KSAvIDUyDQoJZWxzZWlmIHZMZXZlbCA8PSA3MCB0aGVuDQoJCXZMZXZlbEZhY3RvciA9IDgyIC8gKDI2MiAtIDMgKiB2TGV2ZWwpDQoJZWxzZQ0KCQl2TGV2ZWxGYWN0b3IgPSAoODIgLyA1MikgKiAoMTMxIC8gNjMpIF4gKCh2TGV2ZWwgLSA3MCkgLyAxMCkNCgllbmQNCgkNCglpZiB2TGV2ZWwgPD0gMzQgdGhlbg0KCQl2RG9kZ2VMZXZlbEZhY3RvciA9IDEgLyAyDQoJZWxzZQ0KCQl2RG9kZ2VMZXZlbEZhY3RvciA9ICh2TGV2ZWwgLSA4KSAvIDUyDQoJZW5kDQoJDQoJZm9yIHZTdGF0SUQsIHZCYXNlIGluIHBhaXJzKHNlbGYuQmFzZVJhdGluZ3M2MSkgZG8NCgkJaWYgdlN0YXRJRCA9PSAiRG9kZ2UiIHRoZW4NCgkJCXNlbGYuUmF0aW5nU3RhdERpc3RyaWJ1dGlvblt2U3RhdElELi4iUmF0aW5nIl0gPSB7W3ZTdGF0SURdID0ge0NvZWZmID0gMS4wIC8gKHZCYXNlICogdkRvZGdlTGV2ZWxGYWN0b3IpfX0NCgkJZWxzZQ0KCQkJc2VsZi5SYXRpbmdTdGF0RGlzdHJpYnV0aW9uW3ZTdGF0SUQuLiJSYXRpbmciXSA9IHtbdlN0YXRJRF0gPSB7Q29lZmYgPSAxLjAgLyAodkJhc2UgKiB2TGV2ZWxGYWN0b3IpfX0NCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIHNlbGYuUmF0aW5nU3RhdERpc3RyaWJ1dGlvbg0KZW5kDQoJDQpmdW5jdGlvbiBPdXRmaXR0ZXI6T3V0Zml0U3VtbWFyeSgpDQoJbG9jYWwgdlN0YXREaXN0cmlidXRpb24gPSBzZWxmOkdldFBsYXllclN0YXREaXN0cmlidXRpb24oKQ0KCQ0KCXNlbGY6RGVidWdUYWJsZSh2U3RhdERpc3RyaWJ1dGlvbiwgIlN0YXREaXN0cmlidXRpb24iKQ0KCQ0KCWxvY2FsIHZDdXJyZW50T3V0Zml0U3RhdHMgPSBzZWxmLlRhbmtQb2ludHNfR2V0Q3VycmVudE91dGZpdFN0YXRzKHZTdGF0RGlzdHJpYnV0aW9uKQ0KCQ0KCXNlbGY6RGVidWdUYWJsZSh2Q3VycmVudE91dGZpdFN0YXRzLCAiQ3VycmVudCBTdGF0cyIpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJhdGluZ1N1bW1hcnkoKQ0KCWxvY2FsIHZSYXRpbmdJRHMgPQ0KCXsNCgkJIldlYXBvbiIsDQoJCSJEZWZlbnNlIiwNCgkJIkRvZGdlIiwNCgkJIlBhcnJ5IiwNCgkJIkJsb2NrIiwNCgkJIk1lbGVlIEhpdCIsDQoJCSJSYW5nZWQgSGl0IiwNCgkJIlNwZWxsIEhpdCIsDQoJCSJNZWxlZSBDcml0IiwNCgkJIlJhbmdlZCBDcml0IiwNCgkJIlNwZWxsIENyaXQiLA0KCQkiTWVsZWUgSGl0IFRha2VuIiwNCgkJIlJhbmdlZCBIaXQgVGFrZW4iLA0KCQkiU3BlbGwgSGl0IFRha2VuIiwNCgkJIk1lbGVlIENyaXQgVGFrZW4iLA0KCQkiUmFuZ2VkIENyaXQgVGFrZW4iLA0KCQkiU3BlbGwgQ3JpdCBUYWtlbiIsDQoJCSJNZWxlZSBIYXN0ZSIsDQoJCSJSYW5nZWQgSGFzdGUiLA0KCQkiU3BlbGwgSGFzdGUiLA0KCX0NCgkNCglmb3IgdlJhdGluZ0lELCB2UmF0aW5nTmFtZSBpbiBpcGFpcnModlJhdGluZ0lEcykgZG8NCgkJbG9jYWwgdlJhdGluZyA9IEdldENvbWJhdFJhdGluZyh2UmF0aW5nSUQpDQoJCWxvY2FsIHZSYXRpbmdCb251cyA9IEdldENvbWJhdFJhdGluZ0JvbnVzKHZSYXRpbmdJRCkNCgkJDQoJCWlmIHZSYXRpbmdCb251cyA+IDAgdGhlbg0KCQkJc2VsZjpOb3RlTWVzc2FnZSh2UmF0aW5nTmFtZS4uIjogIi4uKHZSYXRpbmcgLyB2UmF0aW5nQm9udXMpKQ0KCQllbmQNCgllbmQNCmVuZA0KDQotLSBXb3JrLWluLXByb2dyZXNzIGZvciBiYWcgb3JnYW5pemF0aW9uLiAgUHJvYmFibHkgd2lsbCBnZXQgc3BsaXQgaW50byBhbm90aGVyIGFkZG9uDQotLSBhdCBzb21lIHBvaW50LCBqdXN0IHBsYXlpbmcgYXJvdW5kIHdpdGggaXQgZm9yIG5vdy4NCg0KbG9jYWwgZ091dGZpdHRlcl9Tb3J0QmFnSXRlbXMNCmxvY2FsIGdPdXRmaXR0ZXJfQ2F0ZWdvcmllcyA9DQp7DQoJIkFybW9yIiwNCgkiV2VhcG9ucyIsDQoJIkNvbnN1bWFibGVzIiwNCgkJIlBvdGlvbnMiLA0KCQkiSGVhbHRoc3RvbmUiLA0KCQkiTWFuYSBnZW0iLA0KCQkiRmxhc2tzIiwNCgkJIkVsaXhpcnMiLA0KCQkiQmFuZGFnZXMiLA0KCQkiVHJpbmtldHMiLA0KCSJUcmFkZXNraWxsIiwNCgkJIkhlcmJzIiwNCgkJIk1ldGFscyIsDQoJCSJHZW1zIiwNCgkJIkNsb3RoIiwNCgkJIkxlYXRoZXIiLA0KCQkiQ29va2luZyIsDQoJCQkiU3BpY2VzIiwNCgkJCSJNZWF0IiwNCgkiUXVlc3RJdGVtcyIsDQoJIkxvb3QiLA0KCQkiQm9FcyIsDQoJIkp1bmsiLA0KfQ0KDQpsb2NhbCBnT3V0Zml0dGVySXRlbUNvcnJlY3Rpb25zID0NCnsNCglbNjUzM10gPSB7VHlwZSA9ICJDb25zdW1hYmxlIiwgU3ViVHlwZSA9ICJPdGhlciJ9LCAtLSBBcXVhZHluYW1pYyBGaXNoIEF0dHJhY3Rvcg0KCVsyNzUwM10gPSB7U3ViVHlwZSA9ICJTY3JvbGwifSwgLS0gU2Nyb2xsIG9mIFByb3RlY3Rpb24gVg0KCVsyNzUxNV0gPSB7VHlwZSA9ICJUcmFkZSBHb29kcyIsIFN1YlR5cGUgPSAiTWVhdCIsIEludlR5cGUgPSAiIn0sIC0tIEh1Z2UgU3BvdHRlZCBGZWx0YWlsDQp9DQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpDb3JyZWN0SXRlbUluZm8ocEl0ZW1JbmZvKQ0KCWxvY2FsIHZDb3JyZWN0aW9uID0gZ091dGZpdHRlckl0ZW1Db3JyZWN0aW9uc1twSXRlbUluZm8uQ29kZV0NCgkNCglpZiBub3QgdkNvcnJlY3Rpb24gdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglmb3IgdkluZGV4LCB2VmFsdWUgaW4gcGFpcnModkNvcnJlY3Rpb24pIGRvDQoJCXBJdGVtSW5mb1t2SW5kZXhdID0gdlZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkdldEl0ZW1Tb3J0UmFuayhwSXRlbSkNCglpZiBwSXRlbS5JdGVtSXNVc2VkIHRoZW4NCgkJcmV0dXJuIDANCgllbHNlaWYgcEl0ZW0uUXVhbGl0eSA9PSAwIHRoZW4NCgkJcmV0dXJuIDMNCgllbHNlaWYgcEl0ZW0uRXF1aXBwYWJsZSB0aGVuDQoJCXJldHVybiAyDQoJZWxzZQ0KCQlyZXR1cm4gMQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTb3J0QmFncygpDQoJc2VsZi5Tb3J0QmFnc0Nvcm91dGluZVJlZiA9IGNvcm91dGluZS5jcmVhdGUoc2VsZi5Tb3J0QmFnc1RocmVhZCkNCgkNCglzZWxmOlJ1blRocmVhZHMoKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpSdW5UaHJlYWRzKCkNCglpZiBzZWxmLlNvcnRCYWdzQ29yb3V0aW5lUmVmIHRoZW4NCgkJbG9jYWwgdlN1Y2Nlc3MsIHZNZXNzYWdlID0gY29yb3V0aW5lLnJlc3VtZShzZWxmLlNvcnRCYWdzQ29yb3V0aW5lUmVmLCBzZWxmKQ0KCQkNCgkJaWYgbm90IHZTdWNjZXNzIHRoZW4NCgkJCXNlbGY6RXJyb3JNZXNzYWdlKCJTb3J0QmFncyByZXN1bWUgZmFpbGVkOiAlcyIsIHZNZXNzYWdlKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U29ydEJhZ3NUaHJlYWQoKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiQkFHX1VQREFURSIsIHNlbGYuQmFnU29ydEJhZ3NDaGFuZ2VkLCBzZWxmKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiUExBWUVSQkFOS1NMT1RTX0NIQU5HRUQiLCBzZWxmLkJhZ1NvcnRCYWdzQ2hhbmdlZCwgc2VsZikNCgkNCglpZiB0cnVlIHRoZW4NCgkJc2VsZjpTb3J0QmFnUmFuZ2UoTlVNX0JBR19TTE9UUywgMCkNCgkJDQoJCWlmIHNlbGYuQmFua0ZyYW1lT3BlbmVkIHRoZW4NCgkJCWZvciB2QmFua1Nsb3QgPSBOVU1fQkFHX1NMT1RTICsgMSwgTlVNX0JBR19TTE9UUyArIE5VTV9CQU5LQkFHU0xPVFMgZG8NCgkJCQlzZWxmOlNvcnRCYWdSYW5nZSh2QmFua1Nsb3QsIHZCYW5rU2xvdCkNCgkJCWVuZA0KCQkJDQoJCQlzZWxmOlNvcnRCYWdSYW5nZSgtMSwgLTEpDQoJCWVuZA0KCWVsc2UNCgkJc2VsZjpTb3J0QmFnUmFuZ2UoNSwgNSkNCgllbmQNCg0KCXNlbGYuRXZlbnRMaWI6VW5yZWdpc3RlckV2ZW50KCJCQUdfVVBEQVRFIiwgc2VsZi5CYWdTb3J0QmFnc0NoYW5nZWQsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpVbnJlZ2lzdGVyRXZlbnQoIlBMQVlFUkJBTktTTE9UU19DSEFOR0VEIiwgc2VsZi5CYWdTb3J0QmFnc0NoYW5nZWQsIHNlbGYpDQoJDQoJc2VsZi5Tb3J0QmFnc0Nvcm91dGluZVJlZiA9IG5pbA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpCYWdTb3J0QmFnc0NoYW5nZWQoKQ0KCXNlbGYuQmFnQ2hhbmdlVGltZSA9IEdldFRpbWUoKQ0KCQ0KCXNlbGYuU2NoZWR1bGVyTGliOlJlc2NoZWR1bGVUYXNrKDAuNSwgc2VsZi5SdW5UaHJlYWRzLCBzZWxmKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTb3J0QmFnUmFuZ2UocFN0YXJ0SW5kZXgsIHBFbmRJbmRleCkNCglzZWxmOkRlYnVnTWVzc2FnZSgiU29ydEJhZ1JhbmdlOiAlcywgJXMiLCBwU3RhcnRJbmRleCBvciAibmlsIiwgcEVuZEluZGV4IG9yICJuaWwiKQ0KCQ0KCS0tIEdhdGhlciBhIGxpc3Qgb2YgdGhlIGl0ZW1zDQoJDQoJbG9jYWwgdkl0ZW1zID0ge30NCglsb2NhbCB2SXRlcmF0b3IgPSBzZWxmOk5ldyhzZWxmLl9CYWdJdGVyYXRvciwgcFN0YXJ0SW5kZXgsIHBFbmRJbmRleCkNCgkNCgl3aGlsZSB2SXRlcmF0b3I6TmV4dFNsb3QoKSBkbw0KCQlzZWxmOkRlYnVnTWVzc2FnZSgiQ2hlY2tpbmcgc2xvdCAlZCwgJWQiLCB2SXRlcmF0b3IuQmFnSW5kZXgsIHZJdGVyYXRvci5CYWdTbG90SW5kZXgpDQoJCQ0KCQlsb2NhbCB2SXRlbUluZm8gPSBzZWxmOkdldEJhZ0l0ZW1JbmZvKHZJdGVyYXRvci5CYWdJbmRleCwgdkl0ZXJhdG9yLkJhZ1Nsb3RJbmRleCkNCgkJDQoJCWlmIHZJdGVtSW5mbyB0aGVuDQoJCQlzZWxmOkNvcnJlY3RJdGVtSW5mbyh2SXRlbUluZm8pDQoJCQkNCgkJCXZJdGVtSW5mby5JdGVtSXNVc2VkID0gc2VsZjpHZXRPdXRmaXRzVXNpbmdJdGVtKHZJdGVtSW5mbykNCgkJCXZJdGVtSW5mby5FcXVpcHBhYmxlID0gdkl0ZW1JbmZvLkludlR5cGUgfj0gIiINCgkJCXZJdGVtSW5mby5Tb3J0UmFuayA9IHNlbGYuR2V0SXRlbVNvcnRSYW5rKHZJdGVtSW5mbykNCgkJCQ0KCQkJdGFibGUuaW5zZXJ0KHZJdGVtcywgdkl0ZW1JbmZvKQ0KCQllbmQNCgllbmQNCgkNCgktLSBTb3J0IHRoZSBpdGVtcw0KCQ0KCXNlbGY6RGVidWdNZXNzYWdlKCJTb3J0aW5nIHRoZSBpdGVtcyIpDQoJDQoJdGFibGUuc29ydCh2SXRlbXMsIHNlbGYuQmFnU29ydENvbXBhcmVJdGVtcykNCgkNCgktLSBBc3NpZ24gdGhlIGl0ZW1zIHRvIGJhZyBzbG90cw0KCQ0KCXNlbGY6RGVidWdNZXNzYWdlKCJBc3NpZ25pbmcgbG9jYXRpb25zIikNCgkNCglsb2NhbCB2RGVzdEJhZ1Nsb3QgPSBzZWxmOk5ldyhzZWxmLl9CYWdJdGVyYXRvciwgcFN0YXJ0SW5kZXgsIHBFbmRJbmRleCkNCgkNCglmb3IgXywgdkl0ZW1JbmZvIGluIGlwYWlycyh2SXRlbXMpIGRvDQoJCWlmIG5vdCB2RGVzdEJhZ1Nsb3Q6TmV4dFNsb3QoKSB0aGVuDQoJCQlicmVhaw0KCQllbmQNCgkJDQoJCXZJdGVtSW5mby5EZXN0QmFnSW5kZXggPSB2RGVzdEJhZ1Nsb3QuQmFnSW5kZXgNCgkJdkl0ZW1JbmZvLkRlc3RCYWdTbG90SW5kZXggPSB2RGVzdEJhZ1Nsb3QuQmFnU2xvdEluZGV4DQoJZW5kDQoJDQoJLS0NCgkNCglzZWxmOkRlYnVnTWVzc2FnZSgiU3RhcnRpbmcgaXRlbSBtb3ZlcyIpDQoJDQoJd2hpbGUgc2VsZjpCYWdTb3J0TW92ZUl0ZW1zKHZJdGVtcykgZG8NCgkJc2VsZjpEZWJ1Z01lc3NhZ2UoIkNvbXBsZXRlZCBvbmUgbW92ZSIpDQoJCQ0KCQl3aGlsZSBub3Qgc2VsZi5CYWdDaGFuZ2VUaW1lIG9yIEdldFRpbWUoKSAtIHNlbGYuQmFnQ2hhbmdlVGltZSA8IDAuNSBkbw0KCQkJc2VsZjpEZWJ1Z01lc3NhZ2UoIllpZWxkaW5nIikNCgkJCXNlbGY6QmFnU29ydEJhZ3NDaGFuZ2VkKCkNCgkJCWNvcm91dGluZS55aWVsZCgpDQoJCWVuZA0KCWVuZA0KCQ0KCXNlbGY6RGVidWdNZXNzYWdlKCJEb25lIG1vdmluZyBpdGVtcyIpDQplbmQJDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpCYWdTb3J0TW92ZUl0ZW1zKHBJdGVtcykNCglzZWxmOkRlYnVnTWVzc2FnZSgiQmFnU29ydE1vdmVJdGVtcyIpDQoJDQoJbG9jYWwgdkRpZE1vdmUgPSBmYWxzZQ0KCWxvY2FsIHZCYWdTbG90VXNlZCA9IHt9DQoJDQoJZm9yIHZJbmRleCA9IC0xLCBOVU1fQkFHX1NMT1RTICsgTlVNX0JBTktCQUdTTE9UUyBkbw0KCQl2QmFnU2xvdFVzZWRbdkluZGV4XSA9IHt9DQoJZW5kDQoJDQoJLS0gTW92ZSB0aGUgaXRlbXMgdG8gdGhlaXIgZGVzdGluYXRpb25zDQoJDQoJbG9jYWwgdlNhdmVkX0VuYWJsZVNGWCA9IEdldENWYXIoIlNvdW5kX0VuYWJsZVNGWCIpDQoJU2V0Q1ZhcigiU291bmRfRW5hYmxlU0ZYIiwgIjAiKQ0KCQ0KCWxvY2FsIHZOdW1Nb3ZlcyA9IDANCgkNCglmb3IgXywgdkl0ZW1JbmZvIGluIGlwYWlycyhwSXRlbXMpIGRvDQoJCWlmICh2SXRlbUluZm8uTG9jYXRpb24uQmFnSW5kZXggfj0gdkl0ZW1JbmZvLkRlc3RCYWdJbmRleA0KCQlvciB2SXRlbUluZm8uTG9jYXRpb24uQmFnU2xvdEluZGV4IH49IHZJdGVtSW5mby5EZXN0QmFnU2xvdEluZGV4KQ0KCQlhbmQgbm90IHZCYWdTbG90VXNlZFt2SXRlbUluZm8uTG9jYXRpb24uQmFnSW5kZXhdW3ZJdGVtSW5mby5Mb2NhdGlvbi5CYWdTbG90SW5kZXhdDQoJCWFuZCBub3QgdkJhZ1Nsb3RVc2VkW3ZJdGVtSW5mby5EZXN0QmFnSW5kZXhdW3ZJdGVtSW5mby5EZXN0QmFnU2xvdEluZGV4XSB0aGVuDQoJCQkNCgkJCXNlbGY6RGVidWdNZXNzYWdlKCJDaGVja2luZyBpdGVtIGluICVkLCAlZCIsIHZJdGVtSW5mby5Mb2NhdGlvbi5CYWdJbmRleCwgdkl0ZW1JbmZvLkxvY2F0aW9uLkJhZ1Nsb3RJbmRleCkNCgkJCQ0KCQkJLS0gRmluZCB0aGUgaXRlbSBjdXJyZW50bHkgYXQgdGhlIGRlc3RpbmF0aW9uIChpZiBhbnkpDQoJCQkNCgkJCWxvY2FsIHZEZXN0SXRlbUluZm8NCgkJCQ0KCQkJZm9yIF8sIHZJdGVtSW5mbzIgaW4gaXBhaXJzKHBJdGVtcykgZG8NCgkJCQlpZiB2SXRlbUluZm8yLkxvY2F0aW9uLkJhZ1Nsb3RJbmRleCA9PSB2SXRlbUluZm8uRGVzdEJhZ1Nsb3RJbmRleA0KCQkJCWFuZCB2SXRlbUluZm8yLkxvY2F0aW9uLkJhZ0luZGV4ID09IHZJdGVtSW5mby5EZXN0QmFnSW5kZXggdGhlbg0KCQkJCQlzZWxmOkRlYnVnTWVzc2FnZSgiRm91bmQgaXRlbSBpbiBwSXRlbXMiKQ0KCQkJCQl2RGVzdEl0ZW1JbmZvID0gdkl0ZW1JbmZvMg0KCQkJCQlicmVhaw0KCQkJCWVuZA0KCQkJZW5kDQoJCQkNCgkJCS0tIE1vdmUvc3dhcCB0aGUgaXRlbXMNCgkJCQ0KCQkJc2VsZjpOb3RlTWVzc2FnZShmb3JtYXQoDQoJCQkJCSJNb3ZpbmcgJXMgZnJvbSBiYWcgJWQsICVkIHRvICVkLCAlZCIsDQoJCQkJCXZJdGVtSW5mby5OYW1lLA0KCQkJCQl2SXRlbUluZm8uTG9jYXRpb24uQmFnSW5kZXgsIHZJdGVtSW5mby5Mb2NhdGlvbi5CYWdTbG90SW5kZXgsDQoJCQkJCXZJdGVtSW5mby5EZXN0QmFnSW5kZXgsIHZJdGVtSW5mby5EZXN0QmFnU2xvdEluZGV4KSkNCgkJCQ0KCQkJDQoJCQlDbGVhckN1cnNvcigpDQoJCQlzZWxmOlBpY2t1cEl0ZW1Mb2NhdGlvbih2SXRlbUluZm8uTG9jYXRpb24pDQoJCQlzZWxmOlBpY2t1cEl0ZW1Mb2NhdGlvbih7QmFnSW5kZXggPSB2SXRlbUluZm8uRGVzdEJhZ0luZGV4LCBCYWdTbG90SW5kZXggPSB2SXRlbUluZm8uRGVzdEJhZ1Nsb3RJbmRleH0pDQoJCQlpZiB2RGVzdEl0ZW1JbmZvIHRoZW4gc2VsZjpQaWNrdXBJdGVtTG9jYXRpb24odkl0ZW1JbmZvLkxvY2F0aW9uKSBlbmQNCgkJCUNsZWFyQ3Vyc29yKCkNCgkJCQ0KCQkJLS0gTWFyayB0aGUgYmFnIHNsb3RzIGFzIGFscmVhZHkgYmVpbmcgaW52b2x2ZWQgaW4gdGhpcyByb3VuZA0KCQkJDQoJCQl2QmFnU2xvdFVzZWRbdkl0ZW1JbmZvLkxvY2F0aW9uLkJhZ0luZGV4XVt2SXRlbUluZm8uTG9jYXRpb24uQmFnU2xvdEluZGV4XSA9IHRydWUNCgkJCXZCYWdTbG90VXNlZFt2SXRlbUluZm8uRGVzdEJhZ0luZGV4XVt2SXRlbUluZm8uRGVzdEJhZ1Nsb3RJbmRleF0gPSB0cnVlDQoJCQkNCgkJCS0tIFVwZGF0ZSB0aGUgc291cmNlIGFuZCBkZXN0IGl0ZW0gaW5mbw0KCQkJDQoJCQlpZiB2RGVzdEl0ZW1JbmZvIHRoZW4NCgkJCQl2RGVzdEl0ZW1JbmZvLkxvY2F0aW9uLkJhZ0luZGV4ID0gdkl0ZW1JbmZvLkxvY2F0aW9uLkJhZ0luZGV4DQoJCQkJdkRlc3RJdGVtSW5mby5Mb2NhdGlvbi5CYWdTbG90SW5kZXggPSB2SXRlbUluZm8uTG9jYXRpb24uQmFnU2xvdEluZGV4DQoJCQllbmQNCgkJCQ0KCQkJdkl0ZW1JbmZvLkxvY2F0aW9uLkJhZ0luZGV4ID0gdkl0ZW1JbmZvLkRlc3RCYWdJbmRleA0KCQkJdkl0ZW1JbmZvLkxvY2F0aW9uLkJhZ1Nsb3RJbmRleCA9IHZJdGVtSW5mby5EZXN0QmFnU2xvdEluZGV4DQoJCQkNCgkJCXZEaWRNb3ZlID0gdHJ1ZQ0KCQkJDQoJCQlzZWxmOkJhZ1NvcnRCYWdzQ2hhbmdlZCgpDQoJCQkNCgkJCS0tIFlpZWxkIGV2ZXJ5IHRlbiBpdGVtIG1vdmVzDQoJCQkNCgkJCXZOdW1Nb3ZlcyA9IHZOdW1Nb3ZlcyArIDENCgkJCQ0KCQkJaWYgdk51bU1vdmVzID49IDEwIHRoZW4NCgkJCQlTZXRDVmFyKCJTb3VuZF9FbmFibGVTRlgiLCB2U2F2ZWRfRW5hYmxlU0ZYKQ0KCQkJCWNvcm91dGluZS55aWVsZCgpDQoJCQkJU2V0Q1ZhcigiU291bmRfRW5hYmxlU0ZYIiwgIjAiKQ0KCQkJCQ0KCQkJCXZOdW1Nb3ZlcyA9IDANCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglTZXRDVmFyKCJTb3VuZF9FbmFibGVTRlgiLCB2U2F2ZWRfRW5hYmxlU0ZYKQ0KCQ0KCXNlbGY6RGVidWdNZXNzYWdlKCJCYWdTb3J0TW92ZUl0ZW1zIGNvbXBsZXRlZDogdkRpZE1vdmUgPSAlcyIsIHRvc3RyaW5nKHZEaWRNb3ZlKSkNCgkNCglyZXR1cm4gdkRpZE1vdmUNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuQmFnU29ydENvbXBhcmVJdGVtcyhwSXRlbTEsIHBJdGVtMikgLS0gTXVzdCBub3QgYmUgbWV0aG9kIHNpbmNlIGl0J3MgY2FsbGVkIGJ5IHRhYmxlLnNvcnQNCglpZiBwSXRlbTEuU29ydFJhbmsgfj0gcEl0ZW0yLlNvcnRSYW5rIHRoZW4NCgkJcmV0dXJuIHBJdGVtMS5Tb3J0UmFuayA8IHBJdGVtMi5Tb3J0UmFuaw0KCWVuZA0KCQ0KCS0tIElmIGJvdGggaXRlbXMgYXJlIGVxdWlwcGFibGUsIHNvcnQgdGhlbSBieQ0KCS0tIHNsb3QgZmlyc3QNCgkNCglpZiBwSXRlbTEuRXF1aXBwYWJsZSB0aGVuDQoJCXJldHVybiBwSXRlbTEuSW52VHlwZSA8IHBJdGVtMi5JbnZUeXBlDQoJZW5kDQoJDQoJLS0gU29ydCBpdGVtcyBieSB0eXBlDQoJDQoJaWYgcEl0ZW0xLlR5cGUgfj0gcEl0ZW0yLlR5cGUgdGhlbg0KCQlyZXR1cm4gcEl0ZW0xLlR5cGUgPCBwSXRlbTIuVHlwZQ0KCWVuZA0KCQ0KCS0tIFNvcnQgYnkgc3VidHlwZQ0KCQ0KCWlmIHBJdGVtMS5TdWJUeXBlIH49IHBJdGVtMi5TdWJUeXBlIHRoZW4NCgkJcmV0dXJuIHBJdGVtMS5TdWJUeXBlIDwgcEl0ZW0yLlN1YlR5cGUNCgllbmQNCgkNCgktLSBTb3J0IGJ5IG5hbWUNCgkNCglpZiBwSXRlbTEuTmFtZSB+PSBwSXRlbTIuTmFtZSB0aGVuDQoJCXJldHVybiBwSXRlbTEuTmFtZSA8IHBJdGVtMi5OYW1lDQoJZW5kDQoJDQoJLS0gU29ydCBieSB3aGVyZSB0aGV5J3JlIGFscmVhZHkgYXQgaWYgdGhleSdyZSB0aGUgc2FtZSBpdGVtDQoJDQoJaWYgcEl0ZW0xLkxvY2F0aW9uLkJhZ0luZGV4IH49IHBJdGVtMi5Mb2NhdGlvbi5CYWdJbmRleCB0aGVuDQoJCXJldHVybiBwSXRlbTEuTG9jYXRpb24uQmFnSW5kZXggPiBwSXRlbTIuTG9jYXRpb24uQmFnSW5kZXgNCgllbmQNCgkNCglpZiBwSXRlbTEuTG9jYXRpb24uQmFnU2xvdEluZGV4IH49IHBJdGVtMi5Mb2NhdGlvbi5CYWdTbG90SW5kZXggdGhlbg0KCQlyZXR1cm4gcEl0ZW0xLkxvY2F0aW9uLkJhZ1Nsb3RJbmRleCA8IHBJdGVtMi5Mb2NhdGlvbi5CYWdTbG90SW5kZXgNCgllbmQNCgkNCglyZXR1cm4gZmFsc2UNCmVuZA0KDQpPdXRmaXR0ZXIuX0JhZ0l0ZXJhdG9yID0ge30NCk91dGZpdHRlci5jR2VuZXJhbEJhZ1R5cGUgPSAwDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fQmFnSXRlcmF0b3I6Q29uc3RydWN0KHBTdGFydEluZGV4LCBwRW5kSW5kZXgpDQoJc2VsZjpSZXNldChwU3RhcnRJbmRleCwgcEVuZEluZGV4KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fQmFnSXRlcmF0b3I6UmVzZXQocFN0YXJ0SW5kZXgsIHBFbmRJbmRleCkNCglpZiBub3QgcFN0YXJ0SW5kZXggdGhlbg0KCQlwU3RhcnRJbmRleCA9IE5VTV9CQUdfU0xPVFMNCgkJcEVuZEluZGV4ID0gMA0KCWVuZA0KCQ0KCWlmIG5vdCBwRW5kSW5kZXggdGhlbg0KCQlwRW5kSW5kZXggPSBwU3RhcnRJbmRleA0KCWVuZA0KCQ0KCWlmIHBTdGFydEluZGV4IDw9IHBFbmRJbmRleCB0aGVuDQoJCXNlbGYuRGlyZWN0aW9uID0gMQ0KCWVsc2UNCgkJc2VsZi5EaXJlY3Rpb24gPSAtMQ0KCWVuZA0KCQ0KCXNlbGYuQmFnSW5kZXggPSBwU3RhcnRJbmRleA0KCXNlbGYuRW5kQmFnSW5kZXggPSBwRW5kSW5kZXgNCgkNCglzZWxmLkJhZ1Nsb3RJbmRleCA9IDANCgkNCglpZiBwU3RhcnRJbmRleCA9PSBwRW5kSW5kZXgNCglvciBPdXRmaXR0ZXI6R2V0QmFnVHlwZShzZWxmLkJhZ0luZGV4KT09IE91dGZpdHRlci5jR2VuZXJhbEJhZ1R5cGUgdGhlbg0KCQlzZWxmLk51bUJhZ1Nsb3RzID0gR2V0Q29udGFpbmVyTnVtU2xvdHMoc2VsZi5CYWdJbmRleCkNCgllbHNlDQoJCXNlbGYuTnVtQmFnU2xvdHMgPSAwDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9CYWdJdGVyYXRvcjpOZXh0U2xvdCgpDQoJc2VsZi5CYWdTbG90SW5kZXggPSBzZWxmLkJhZ1Nsb3RJbmRleCArIDENCgkNCgl3aGlsZSBzZWxmLkJhZ1Nsb3RJbmRleCA+IHNlbGYuTnVtQmFnU2xvdHMgZG8NCgkJaWYgc2VsZi5CYWdJbmRleCA9PSBzZWxmLkVuZEJhZ0luZGV4IHRoZW4NCgkJCXJldHVybiBmYWxzZQ0KCQllbmQNCgkJDQoJCXNlbGYuQmFnSW5kZXggPSBzZWxmLkJhZ0luZGV4ICsgc2VsZi5EaXJlY3Rpb24NCgkJDQoJCXNlbGYuQmFnU2xvdEluZGV4ID0gMQ0KCQkNCgkJaWYgT3V0Zml0dGVyOkdldEJhZ1R5cGUoc2VsZi5CYWdJbmRleCkgPT0gT3V0Zml0dGVyLmNHZW5lcmFsQmFnVHlwZSB0aGVuDQoJCQlzZWxmLk51bUJhZ1Nsb3RzID0gR2V0Q29udGFpbmVyTnVtU2xvdHMoc2VsZi5CYWdJbmRleCkNCgkJZWxzZQ0KCQkJc2VsZi5OdW1CYWdTbG90cyA9IDANCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SXRlbVVzZXNCb3RoV2VhcG9uU2xvdHMocEl0ZW0pDQoJaWYgbm90IHBJdGVtIHRoZW4NCgkJc2VsZjpEZWJ1Z01lc3NhZ2UoIkl0ZW1Vc2VzQm90aFdlYXBvblNsb3RzOiBuaWwgaXRlbSIpDQoJCXNlbGY6RGVidWdTdGFjaygpDQoJCXJldHVybiBmYWxzZQ0KCWVuZA0KCQ0KCWlmIHBJdGVtLkludlR5cGUgfj0gIklOVlRZUEVfMkhXRUFQT04idGhlbg0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCgkNCglpZiBub3Qgc2VsZi5DYW5EdWFsV2llbGQySCB0aGVuDQoJCXJldHVybiB0cnVlDQoJZW5kDQoJDQoJaWYgbm90IHBJdGVtLlN1YlR5cGUgdGhlbg0KCQlzZWxmOkRlYnVnTWVzc2FnZSgiSXRlbVVzZXNCb3RoV2VhcG9uU2xvdHM6IFN1YlR5cGUgbm90IHNwZWNpZmllZCIpDQoJCXNlbGY6RGVidWdUYWJsZShwSXRlbSwgInBJdGVtIikNCgkJc2VsZjpEZWJ1Z1N0YWNrKCkNCgllbmQNCgkNCglsb2NhbCB2SXNEdWFsV2llbGRhYmxlMkggPSBwSXRlbS5TdWJUeXBlID09IE91dGZpdHRlci5MQklbIlR3by1IYW5kZWQgQXhlcyJdDQoJICAgICAgICAgICAgICAgICAgICAgICAgb3IgcEl0ZW0uU3ViVHlwZSA9PSBPdXRmaXR0ZXIuTEJJWyJUd28tSGFuZGVkIE1hY2VzIl0NCgkgICAgICAgICAgICAgICAgICAgICAgICBvciBwSXRlbS5TdWJUeXBlID09IE91dGZpdHRlci5MQklbIlR3by1IYW5kZWQgU3dvcmRzIl0NCgkNCglyZXR1cm4gbm90IHZJc0R1YWxXaWVsZGFibGUySA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXRJdGVtTWV0YVNsb3QocEl0ZW0pDQoJaWYgcEl0ZW0uTWV0YVNsb3ROYW1lID09ICJUd29IYW5kU2xvdCINCglhbmQgbm90IHNlbGY6SXRlbVVzZXNCb3RoV2VhcG9uU2xvdHMocEl0ZW0pIHRoZW4NCgkJcmV0dXJuICJXZWFwb24wU2xvdCINCgllbHNlDQoJCXJldHVybiBwSXRlbS5NZXRhU2xvdE5hbWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0Q29tcGlsZWRPdXRmaXQoKQ0KCWxvY2FsIHZDb21waWxlZE91dGZpdCA9IHNlbGY6TmV3RW1wdHlPdXRmaXQoKQ0KCQ0KCXZDb21waWxlZE91dGZpdC5Tb3VyY2VPdXRmaXQgPSB7fQ0KCQ0KCS0tIFN0YXJ0IHdpdGggdGhlIGN1cnJlbnQgaW52ZW50b3J5DQoJDQoJaWYgc2VsZi5DdXJyZW50SW52ZW50b3J5T3V0Zml0IHRoZW4NCgkJbG9jYWwgdkl0ZW1zID0gc2VsZi5DdXJyZW50SW52ZW50b3J5T3V0Zml0OkdldEl0ZW1zKCkNCgkJDQoJCWZvciB2SW52ZW50b3J5U2xvdCwgdk91dGZpdEl0ZW0gaW4gcGFpcnModkl0ZW1zKSBkbw0KCQkJdkNvbXBpbGVkT3V0Zml0OlNldEl0ZW0odkludmVudG9yeVNsb3QsIHZPdXRmaXRJdGVtKQ0KCQkJdkNvbXBpbGVkT3V0Zml0LlNvdXJjZU91dGZpdFt2SW52ZW50b3J5U2xvdF0gPSAiRXF1aXBwZWQiDQoJCWVuZA0KCWVuZA0KCQ0KCS0tIExheWVyIGVhY2ggc2VsZWN0ZWQgb3V0Zml0DQoJDQoJZm9yIHZTdGFja0luZGV4LCB2T3V0Zml0IGluIGlwYWlycyhPdXRmaXR0ZXIuT3V0Zml0U3RhY2suT3V0Zml0cykgZG8NCgkJbG9jYWwgdkl0ZW1zID0gdk91dGZpdDpHZXRJdGVtcygpDQoJCQ0KCQlpZiB2SXRlbXMgdGhlbg0KCQkJZm9yIHZJbnZlbnRvcnlTbG90LCB2T3V0Zml0SXRlbSBpbiBwYWlycyh2SXRlbXMpIGRvDQoJCQkJdkNvbXBpbGVkT3V0Zml0OlNldEl0ZW0odkludmVudG9yeVNsb3QsIHZPdXRmaXRJdGVtKQ0KCQkJCXZDb21waWxlZE91dGZpdC5Tb3VyY2VPdXRmaXRbdkludmVudG9yeVNsb3RdID0gdk91dGZpdDpHZXROYW1lKCkNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCgktLSBNYWtlIHN1cmUgdGhlIE9IIHNsb3QgaXMgbWFya2VkIGFzIGVtcHR5IGlmIGEgMkggd2VhcG9uIGlzIGVxdWlwcGVkDQoJLS0gYW5kIHRoZSBwbGF5ZXIgY2FuJ3QgZHVhbC13aWVsZCAySCB3ZWFwb25zDQoJDQoJdkNvbXBpbGVkT3V0Zml0OkFkanVzdE9mZmhhbmRTbG90KCkNCgkNCglyZXR1cm4gdkNvbXBpbGVkT3V0Zml0DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldEV4cGVjdGVkT3V0Zml0KHBFeGNsdWRlT3V0Zml0KQ0KCWxvY2FsIHZDb21waWxlZE91dGZpdCA9IHNlbGY6TmV3RW1wdHlPdXRmaXQoKQ0KCQ0KCXZDb21waWxlZE91dGZpdC5Tb3VyY2VPdXRmaXQgPSB7fQ0KCQ0KCWZvciB2U3RhY2tJbmRleCwgdk91dGZpdCBpbiBpcGFpcnMoc2VsZi5PdXRmaXRTdGFjay5PdXRmaXRzKSBkbw0KCQlpZiB2T3V0Zml0IH49IHBFeGNsdWRlT3V0Zml0IHRoZW4NCgkJCWxvY2FsIHZJdGVtcyA9IHZPdXRmaXQ6R2V0SXRlbXMoKQ0KCQkJDQoJCQlmb3IgdkludmVudG9yeVNsb3QsIHZPdXRmaXRJdGVtIGluIHBhaXJzKHZJdGVtcykgZG8NCgkJCQl2Q29tcGlsZWRPdXRmaXQ6U2V0SXRlbSh2SW52ZW50b3J5U2xvdCwgdk91dGZpdEl0ZW0pDQoJCQkJdkNvbXBpbGVkT3V0Zml0LlNvdXJjZU91dGZpdFt2SW52ZW50b3J5U2xvdF0gPSB2T3V0Zml0OkdldE5hbWUoKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiB2Q29tcGlsZWRPdXRmaXQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0QmFnVHlwZShwQmFnSW5kZXgpDQoJaWYgcEJhZ0luZGV4ID09IDANCglvciBwQmFnSW5kZXggPT0gLTEgdGhlbiAtLSBzcGVjaWFsIGNhc2UgMCBhbmQgLTEgc2luY2UgQ29udGFpbmVySURUb0ludmVudG9yeUlEIHdpbGwgYmFyZiBvbiBpdA0KCQlyZXR1cm4gT3V0Zml0dGVyLmNHZW5lcmFsQmFnVHlwZQ0KCWVuZA0KCQ0KCWlmIHBCYWdJbmRleCA8IDAgdGhlbg0KCQlwQmFnSW5kZXggPSA0IC0gcEJhZ0luZGV4DQoJZW5kDQoJDQoJbG9jYWwgdkl0ZW1MaW5rID0gR2V0SW52ZW50b3J5SXRlbUxpbmsoInBsYXllciIsIENvbnRhaW5lcklEVG9JbnZlbnRvcnlJRChwQmFnSW5kZXgpKQ0KCQ0KCWlmIG5vdCB2SXRlbUxpbmsgdGhlbg0KCQlyZXR1cm4gbmlsDQoJZW5kDQoJDQoJcmV0dXJuIEdldEl0ZW1GYW1pbHkodkl0ZW1MaW5rKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXRFbXB0eUJhZ1Nsb3QocFN0YXJ0QmFnSW5kZXgsIHBTdGFydEJhZ1Nsb3RJbmRleCwgcEluY2x1ZGVCYW5rKQ0KCWxvY2FsIHZTdGFydEJhZ0luZGV4ID0gcFN0YXJ0QmFnSW5kZXgNCglsb2NhbCB2U3RhcnRCYWdTbG90SW5kZXggPSBwU3RhcnRCYWdTbG90SW5kZXgNCgkNCglpZiBub3QgdlN0YXJ0QmFnSW5kZXggdGhlbg0KCQl2U3RhcnRCYWdJbmRleCA9IE5VTV9CQUdfU0xPVFMNCgllbmQNCgkNCglpZiBub3QgdlN0YXJ0QmFnU2xvdEluZGV4IHRoZW4NCgkJdlN0YXJ0QmFnU2xvdEluZGV4ID0gMQ0KCWVuZA0KCQ0KCWxvY2FsIHZFbmRCYWdJbmRleCA9IDANCgkNCglpZiBwSW5jbHVkZUJhbmsgdGhlbg0KCQl2RW5kQmFnSW5kZXggPSAtMQ0KCWVuZA0KCQ0KCWZvciB2QmFnSW5kZXggPSB2U3RhcnRCYWdJbmRleCwgdkVuZEJhZ0luZGV4LCAtMSBkbw0KCQlsb2NhbCB2TnVtRW1wdHlTbG90cywgdkJhZ1R5cGUgPSBHZXRDb250YWluZXJOdW1GcmVlU2xvdHModkJhZ0luZGV4KQ0KCQkNCgkJaWYgdk51bUVtcHR5U2xvdHMgPiAwIHRoZW4NCgkJCWxvY2FsIHZOdW1CYWdTbG90cyA9IEdldENvbnRhaW5lck51bVNsb3RzKHZCYWdJbmRleCkNCgkJCQ0KCQkJZm9yIHZTbG90SW5kZXggPSB2U3RhcnRCYWdTbG90SW5kZXgsIHZOdW1CYWdTbG90cyBkbw0KCQkJCWlmIG5vdCBHZXRDb250YWluZXJJdGVtTGluayh2QmFnSW5kZXgsIHZTbG90SW5kZXgpIHRoZW4NCgkJCQkJcmV0dXJuIHtCYWdJbmRleCA9IHZCYWdJbmRleCwgQmFnU2xvdEluZGV4ID0gdlNsb3RJbmRleCwgQmFnVHlwZSA9IHZCYWdUeXBlfQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCQkNCgkJdlN0YXJ0QmFnU2xvdEluZGV4ID0gMQ0KCWVuZA0KCQ0KCXJldHVybiBuaWwNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0RW1wdHlCYWdTbG90TGlzdCgpDQoJbG9jYWwgdkVtcHR5QmFnU2xvdHMgPSB7fQ0KCQ0KCWxvY2FsIHZCYWdJbmRleCA9IE5VTV9CQUdfU0xPVFMNCglsb2NhbCB2QmFnU2xvdEluZGV4ID0gMQ0KCQ0KCXdoaWxlIHRydWUgZG8NCgkJbG9jYWwgdkJhZ1Nsb3RJbmZvID0gc2VsZjpHZXRFbXB0eUJhZ1Nsb3QodkJhZ0luZGV4LCB2QmFnU2xvdEluZGV4KQ0KCQkNCgkJaWYgbm90IHZCYWdTbG90SW5mbyB0aGVuDQoJCQlyZXR1cm4gdkVtcHR5QmFnU2xvdHMNCgkJZW5kDQoJCQ0KCQl0YWJsZS5pbnNlcnQodkVtcHR5QmFnU2xvdHMsIHZCYWdTbG90SW5mbykNCgkJDQoJCXZCYWdJbmRleCA9IHZCYWdTbG90SW5mby5CYWdJbmRleA0KCQl2QmFnU2xvdEluZGV4ID0gdkJhZ1Nsb3RJbmZvLkJhZ1Nsb3RJbmRleCArIDENCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0RW1wdHlCYW5rU2xvdExpc3QoKQ0KCWxvY2FsIHZFbXB0eUJhZ1Nsb3RzID0ge30NCgkNCglsb2NhbCB2QmFnSW5kZXggPSBOVU1fQkFHX1NMT1RTICsgTlVNX0JBTktCQUdTTE9UUw0KCWxvY2FsIHZCYWdTbG90SW5kZXggPSAxDQoJDQoJd2hpbGUgdHJ1ZSBkbw0KCQlsb2NhbCB2QmFnU2xvdEluZm8gPSBzZWxmOkdldEVtcHR5QmFnU2xvdCh2QmFnSW5kZXgsIHZCYWdTbG90SW5kZXgsIHRydWUpDQoJCQ0KCQlpZiBub3QgdkJhZ1Nsb3RJbmZvIHRoZW4NCgkJCXJldHVybiB2RW1wdHlCYWdTbG90cw0KCQkNCgkJZWxzZWlmIHZCYWdTbG90SW5mby5CYWdJbmRleCA+IE5VTV9CQUdfU0xPVFMNCgkJb3IgdkJhZ1Nsb3RJbmZvLkJhZ0luZGV4IDwgMCB0aGVuDQoJCQl0YWJsZS5pbnNlcnQodkVtcHR5QmFnU2xvdHMsIHZCYWdTbG90SW5mbykNCgkJZW5kDQoJCQ0KCQl2QmFnSW5kZXggPSB2QmFnU2xvdEluZm8uQmFnSW5kZXgNCgkJdkJhZ1Nsb3RJbmRleCA9IHZCYWdTbG90SW5mby5CYWdTbG90SW5kZXggKyAxDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkZpbmRJdGVtc0luQmFnc0ZvclNsb3QocFNsb3ROYW1lLCBwSWdub3JlSXRlbXMpDQoJLS0gQWxpYXMgdGhlIHNsb3QgbmFtZXMgZG93biBmb3IgZmluZ2VyIGFuZCB0cmlua2V0DQoJDQoJbG9jYWwgdkludmVudG9yeVNsb3QgPSBwU2xvdE5hbWUNCgkNCglpZiB2SW52ZW50b3J5U2xvdCA9PSAiRmluZ2VyMVNsb3QiIHRoZW4NCgkJdkludmVudG9yeVNsb3QgPSAiRmluZ2VyMFNsb3QiDQoJZWxzZWlmIHZJbnZlbnRvcnlTbG90ID09ICJUcmlua2V0MVNsb3QiIHRoZW4NCgkJdkludmVudG9yeVNsb3QgPSAiVHJpbmtldDBTbG90Ig0KCWVuZA0KCQ0KCS0tDQoJDQoJbG9jYWwgdkl0ZW1zID0ge30NCglsb2NhbCB2TnVtQmFncywgdkZpcnN0QmFnSW5kZXggPSBzZWxmOkdldE51bUJhZ3MoKQ0KCQ0KCWZvciB2QmFnSW5kZXggPSB2Rmlyc3RCYWdJbmRleCwgdk51bUJhZ3MgZG8NCgkJbG9jYWwgdk51bUJhZ1Nsb3RzID0gR2V0Q29udGFpbmVyTnVtU2xvdHModkJhZ0luZGV4KQ0KCQkNCgkJaWYgdk51bUJhZ1Nsb3RzID4gMCB0aGVuDQoJCQlmb3IgdlNsb3RJbmRleCA9IDEsIHZOdW1CYWdTbG90cyBkbw0KCQkJCWxvY2FsIHZJdGVtSW5mbyA9IHNlbGY6R2V0QmFnSXRlbUluZm8odkJhZ0luZGV4LCB2U2xvdEluZGV4KQ0KCQkJCQ0KCQkJCWlmIHZJdGVtSW5mbw0KCQkJCWFuZCAobm90IHBJZ25vcmVJdGVtcyBvciBub3QgcElnbm9yZUl0ZW1zW3ZJdGVtSW5mby5Db2RlXSkgdGhlbg0KCQkJCQlsb2NhbCB2SXRlbVNsb3ROYW1lID0gdkl0ZW1JbmZvLkl0ZW1TbG90TmFtZQ0KCQkJCQkNCgkJCQkJaWYgdkl0ZW1JbmZvLk1ldGFTbG90TmFtZSB0aGVuDQoJCQkJCQl2SXRlbVNsb3ROYW1lID0gc2VsZjpHZXRJdGVtTWV0YVNsb3Qodkl0ZW1JbmZvKQ0KCQkJCQllbmQNCgkJCQkJDQoJCQkJCWlmIHZJdGVtU2xvdE5hbWUgPT0gIlR3b0hhbmRTbG90IiB0aGVuDQoJCQkJCQl2SXRlbVNsb3ROYW1lID0gIk1haW5IYW5kU2xvdCINCgkJCQkJDQoJCQkJCWVsc2VpZiB2SXRlbVNsb3ROYW1lID09ICJXZWFwb24wU2xvdCIgdGhlbg0KCQkJCQkJaWYgdkludmVudG9yeVNsb3QgPT0gIk1haW5IYW5kU2xvdCINCgkJCQkJCW9yIHZJbnZlbnRvcnlTbG90ID09ICJTZWNvbmRhcnlIYW5kU2xvdCIgdGhlbg0KCQkJCQkJCXZJdGVtU2xvdE5hbWUgPSB2SW52ZW50b3J5U2xvdA0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCQkNCgkJCQkJaWYgdkl0ZW1TbG90TmFtZSA9PSB2SW52ZW50b3J5U2xvdCB0aGVuDQoJCQkJCQl0YWJsZS5pbnNlcnQodkl0ZW1zLCB2SXRlbUluZm8pDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCWlmICN2SXRlbXMgPT0gMCB0aGVuCQ0KCQlyZXR1cm4gbmlsDQoJZW5kDQoJDQoJcmV0dXJuIHZJdGVtcw0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpDcmVhdGVOZXdPdXRmaXQoKQ0KCU91dGZpdHRlci5OYW1lT3V0Zml0RGlhbG9nOk9wZW4obmlsKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpOZXdOYWtlZE91dGZpdChwTmFtZSkNCglsb2NhbCB2T3V0Zml0ID0gc2VsZjpOZXdFbXB0eU91dGZpdChwTmFtZSkNCg0KCWZvciBfLCB2SW52ZW50b3J5U2xvdCBpbiBpcGFpcnMoT3V0Zml0dGVyLmNTbG90TmFtZXMpIGRvDQoJCXZPdXRmaXQ6QWRkSXRlbSh2SW52ZW50b3J5U2xvdCwgbmlsKQ0KCWVuZA0KCQ0KCXJldHVybiB2T3V0Zml0DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOk5ld0VtcHR5SXRlbUluZm8oKQ0KCXJldHVybg0KCXsNCgkJTmFtZSA9ICIiLA0KCQlDb2RlID0gMCwNCgkJU3ViQ29kZSA9IDAsDQoJCUVuY2hhbnRDb2RlID0gMCwNCgkJSmV3ZWxDb2RlMSA9IDAsDQoJCUpld2VsQ29kZTIgPSAwLA0KCQlKZXdlbENvZGUzID0gMCwNCgkJSmV3ZWxDb2RlNCA9IDAsDQoJCVVuaXF1ZUlEID0gMCwNCgkJSW52VHlwZSA9IG5pbCwNCgl9DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldEludmVudG9yeU91dGZpdChwTmFtZSwgcE91dGZpdCkNCglsb2NhbCB2T3V0Zml0DQoJDQoJaWYgcE91dGZpdCB0aGVuDQoJCXZPdXRmaXQgPSBwT3V0Zml0DQoJZWxzZQ0KCQl2T3V0Zml0ID0gc2VsZjpOZXdFbXB0eU91dGZpdChwTmFtZSkNCgllbmQNCgkNCglmb3IgXywgdkludmVudG9yeVNsb3QgaW4gaXBhaXJzKE91dGZpdHRlci5jU2xvdE5hbWVzKSBkbw0KCQlsb2NhbCB2SXRlbUluZm8gPSBzZWxmOkdldEludmVudG9yeUl0ZW1JbmZvKHZJbnZlbnRvcnlTbG90KQ0KCQkNCgkJLS0gVG8gYXZvaWQgZXh0cmEgbWVtb3J5IG9wZXJhdGlvbnMsIG9ubHkgdXBkYXRlIHRoZSBpdGVtIGlmIGl0J3MgZGlmZmVyZW50DQoJCQ0KCQlsb2NhbCB2RXhpc3RpbmdJdGVtID0gdk91dGZpdDpHZXRJdGVtKHZJbnZlbnRvcnlTbG90KQ0KCQkNCgkJaWYgbm90IHZJdGVtSW5mbyB0aGVuDQoJCQlpZiBub3QgdkV4aXN0aW5nSXRlbQ0KCQkJb3IgdkV4aXN0aW5nSXRlbS5Db2RlIH49IDAgdGhlbg0KCQkJCXZPdXRmaXQ6QWRkSXRlbSh2SW52ZW50b3J5U2xvdCwgbmlsKQ0KCQkJZW5kDQoJCWVsc2UNCgkJCWlmIG5vdCB2RXhpc3RpbmdJdGVtDQoJCQlvciB2RXhpc3RpbmdJdGVtLkNvZGUgfj0gdkl0ZW1JbmZvLkNvZGUNCgkJCW9yIHZFeGlzdGluZ0l0ZW0uU3ViQ29kZSB+PSB2SXRlbUluZm8uU3ViQ29kZQ0KCQkJb3IgdkV4aXN0aW5nSXRlbS5FbmNoYW50Q29kZSB+PSB2SXRlbUluZm8uRW5jaGFudENvZGUgDQoJCQlvciB2RXhpc3RpbmdJdGVtLkpld2VsQ29kZTEgfj0gdkl0ZW1JbmZvLkpld2VsQ29kZTENCgkJCW9yIHZFeGlzdGluZ0l0ZW0uSmV3ZWxDb2RlMiB+PSB2SXRlbUluZm8uSmV3ZWxDb2RlMg0KCQkJb3IgdkV4aXN0aW5nSXRlbS5KZXdlbENvZGUzIH49IHZJdGVtSW5mby5KZXdlbENvZGUzDQoJCQlvciB2RXhpc3RpbmdJdGVtLkpld2VsQ29kZTQgfj0gdkl0ZW1JbmZvLkpld2VsQ29kZTQNCgkJCW9yIHZFeGlzdGluZ0l0ZW0uVW5pcXVlSUQgfj0gdkl0ZW1JbmZvLlVuaXF1ZUlEIHRoZW4NCgkJCQl2T3V0Zml0OkFkZEl0ZW0odkludmVudG9yeVNsb3QsIHZJdGVtSW5mbykNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdk91dGZpdA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGVPdXRmaXRGcm9tSW52ZW50b3J5KHBPdXRmaXQsIHBOZXdJdGVtc091dGZpdCkNCglpZiBub3QgcE5ld0l0ZW1zT3V0Zml0IHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgdk5ld0l0ZW1zID0gcE5ld0l0ZW1zT3V0Zml0OkdldEl0ZW1zKCkNCgkNCglwT3V0Zml0OkFkZE5ld0l0ZW1zKHZOZXdJdGVtcykNCgkNCglzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTdWJ0cmFjdE91dGZpdChwT3V0Zml0MSwgcE91dGZpdDIsIHBDaGVja0FsdGVybmF0ZVNsb3RzKQ0KCWxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IHNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCQ0KCS0tIFJlbW92ZSBpdGVtcyBmcm9tIHBPdXRmaXQxIGlmIHRoZXkgbWF0Y2ggdGhlIGl0ZW0gaW4gcE91dGZpdDINCgkNCglmb3IgXywgdkludmVudG9yeVNsb3QgaW4gaXBhaXJzKHNlbGYuY1Nsb3ROYW1lcykgZG8NCgkJbG9jYWwgdkl0ZW0xID0gcE91dGZpdDE6R2V0SXRlbSh2SW52ZW50b3J5U2xvdCkNCgkJbG9jYWwgdkl0ZW0yID0gcE91dGZpdDI6R2V0SXRlbSh2SW52ZW50b3J5U2xvdCkNCgkJDQoJCWlmIHZJbnZlbnRvcnlDYWNoZTpJdGVtc0FyZVNhbWUodkl0ZW0xLCB2SXRlbTIpIHRoZW4NCgkJCXBPdXRmaXQxOlJlbW92ZUl0ZW0odkludmVudG9yeVNsb3QpDQoJCWVsc2VpZiBwQ2hlY2tBbHRlcm5hdGVTbG90cyB0aGVuDQoJCQlsb2NhbCB2QWx0ZXJuYXRlU2xvdE5hbWUgPSBzZWxmLmNGdWxsQWx0ZXJuYXRlU3RhdFNsb3RbdkludmVudG9yeVNsb3RdDQoJCQkNCgkJCXZJdGVtMiA9IHBPdXRmaXQyOkdldEl0ZW0odkFsdGVybmF0ZVNsb3ROYW1lKQ0KCQkJDQoJCQlpZiB2SW52ZW50b3J5Q2FjaGU6SXRlbXNBcmVTYW1lKHZJdGVtMSwgdkl0ZW0yKSB0aGVuDQoJCQkJcE91dGZpdDE6UmVtb3ZlSXRlbSh2SW52ZW50b3J5U2xvdCkNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6T3V0Zml0SXRlbXNBcmVTYW1lKHBPdXRmaXQxLCBwT3V0Zml0MiwgcENoZWNrQWx0ZXJuYXRlU2xvdHMsIHBJZ25vcmVBbW1vKQ0KCWxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IHNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCQ0KCWxvY2FsIHZJZ25vcmVBbW1vU2xvdCA9IHBJZ25vcmVBbW1vIG9yIFVuaXRIYXNSZWxpY1Nsb3QoInBsYXllciIpDQoJDQoJZm9yIF8sIHZJbnZlbnRvcnlTbG90IGluIGlwYWlycyhPdXRmaXR0ZXIuY1Nsb3ROYW1lcykgZG8NCgkJaWYgdkludmVudG9yeVNsb3Qgfj0gIkFtbW9TbG90IiBvciBub3Qgdklnbm9yZUFtbW9TbG90IHRoZW4NCgkJCWxvY2FsIHZJdGVtMSA9IHBPdXRmaXQxOkdldEl0ZW0odkludmVudG9yeVNsb3QpDQoJCQlsb2NhbCB2SXRlbTIgPSBwT3V0Zml0MjpHZXRJdGVtKHZJbnZlbnRvcnlTbG90KQ0KCQkJDQoJCQlpZiB2SW52ZW50b3J5Q2FjaGU6SXRlbXNBcmVTYW1lKHZJdGVtMSwgdkl0ZW0yKSB0aGVuDQoJCQkJLS0gZG8gbm90aGluZw0KCQkJZWxzZWlmIHBDaGVja0FsdGVybmF0ZVNsb3RzIHRoZW4NCgkJCQlsb2NhbCB2QWx0ZXJuYXRlU2xvdE5hbWUgPSBzZWxmLmNGdWxsQWx0ZXJuYXRlU3RhdFNsb3RbdkludmVudG9yeVNsb3RdDQoJCQkJDQoJCQkJdkl0ZW0yID0gcE91dGZpdDI6R2V0SXRlbSh2QWx0ZXJuYXRlU2xvdE5hbWUpDQoJCQkJDQoJCQkJaWYgdkludmVudG9yeUNhY2hlOkl0ZW1zQXJlU2FtZSh2SXRlbTEsIHZJdGVtMikgdGhlbg0KCQkJCQktLSBkbyBub3RoaW5nDQoJCQkJZWxzZQ0KCQkJCQlyZXR1cm4gZmFsc2UNCgkJCQllbmQNCgkJCWVsc2UNCgkJCQlyZXR1cm4gZmFsc2UNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXROZXdJdGVtc091dGZpdChwUHJldmlvdXNPdXRmaXQpDQoJLS0gR2V0IHRoZSBjdXJyZW50IG91dGZpdCBhbmQgdGhlIGxpc3QNCgktLSBvZiBlcXVpcHBhYmxlIGl0ZW1zDQoJDQoJc2VsZi5DdXJyZW50SW52ZW50b3J5T3V0Zml0ID0gc2VsZjpHZXRJbnZlbnRvcnlPdXRmaXQoc2VsZi5DdXJyZW50SW52ZW50b3J5T3V0Zml0KQ0KCQ0KCWxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IHNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCQ0KCS0tIENyZWF0ZSBhIHRlbXBvcmFyeSBvdXRmaXQgZnJvbSB0aGUgZGlmZmVyZW5jZXMNCgkNCglsb2NhbCB2TmV3SXRlbXNPdXRmaXQgPSBzZWxmOk5ld0VtcHR5T3V0Zml0KCkNCglsb2NhbCB2T3V0Zml0SGFzSXRlbXMgPSBmYWxzZQ0KCQ0KCWZvciBfLCB2SW52ZW50b3J5U2xvdCBpbiBpcGFpcnMoc2VsZi5jU2xvdE5hbWVzKSBkbw0KCQlsb2NhbCB2Q3VycmVudEl0ZW0gPSBzZWxmLkN1cnJlbnRJbnZlbnRvcnlPdXRmaXQ6R2V0SXRlbSh2SW52ZW50b3J5U2xvdCkNCgkJbG9jYWwgdlByZXZpb3VzSXRlbSA9IHBQcmV2aW91c091dGZpdDpHZXRJdGVtKHZJbnZlbnRvcnlTbG90KQ0KCQlsb2NhbCB2U2tpcFNsb3QgPSBmYWxzZQ0KCQkNCgkJaWYgdkludmVudG9yeVNsb3QgPT0gIlNlY29uZGFyeUhhbmRTbG90IiB0aGVuDQoJCQlsb2NhbCB2TWFpbkhhbmRJdGVtID0gcFByZXZpb3VzT3V0Zml0OkdldEl0ZW0oIk1haW5IYW5kU2xvdCIpDQoJCQkNCgkJCWlmIG5vdCB2TWFpbkhhbmRJdGVtIHRoZW4NCgkJCQktLXNlbGY6RGVidWdNZXNzYWdlKCJNYWluSGFuZEl0ZW0gaXMgbmlsIikNCgkJCQktLXNlbGY6RGVidWdUYWJsZShwUHJldmlvdXNPdXRmaXQ6R2V0SXRlbXMoKSwgIkl0ZW1zIikNCgkJCWVuZA0KCQkJDQoJCQlpZiBzZWxmOkl0ZW1Vc2VzQm90aFdlYXBvblNsb3RzKHZNYWluSGFuZEl0ZW0pIHRoZW4NCgkJCQl2U2tpcFNsb3QgPSB0cnVlDQoJCQllbmQNCgkJZWxzZWlmIHZJbnZlbnRvcnlTbG90ID09ICJBbW1vU2xvdCINCgkJYW5kIChub3QgdkN1cnJlbnRJdGVtIG9yIHZDdXJyZW50SXRlbS5Db2RlID09IDApIHRoZW4NCgkJCXZTa2lwU2xvdCA9IHRydWUNCgkJZW5kDQoJCQ0KCQlpZiBub3QgdlNraXBTbG90DQoJCWFuZCBub3QgdkludmVudG9yeUNhY2hlOkludmVudG9yeVNsb3RDb250YWluc0l0ZW0odkludmVudG9yeVNsb3QsIHZQcmV2aW91c0l0ZW0pIHRoZW4NCgkJCWlmIHNlbGYuRGVidWcuTmV3SXRlbXMgdGhlbg0KCQkJCXNlbGY6RGVidWdNZXNzYWdlKCJOZXcgaXRlbSBpbiBzbG90ICVzIiwgdG9zdHJpbmcodkludmVudG9yeVNsb3QpKQ0KCQkJCXNlbGY6RGVidWdUYWJsZSh2Q3VycmVudEl0ZW0sICJOZXdJdGVtIiwgMSkNCgkJCWVuZA0KCQkJDQoJCQl2TmV3SXRlbXNPdXRmaXQ6U2V0SXRlbSh2SW52ZW50b3J5U2xvdCwgdkN1cnJlbnRJdGVtKQ0KCQkJdk91dGZpdEhhc0l0ZW1zID0gdHJ1ZQ0KCQllbmQNCgllbmQNCgkNCglpZiBub3Qgdk91dGZpdEhhc0l0ZW1zIHRoZW4NCgkJcmV0dXJuIG5pbA0KCWVuZA0KCQ0KCXJldHVybiB2TmV3SXRlbXNPdXRmaXQsIHNlbGYuQ3VycmVudEludmVudG9yeU91dGZpdA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGVUZW1wb3JhcnlPdXRmaXQocE5ld0l0ZW1zT3V0Zml0KQ0KCS0tIEp1c3QgcmV0dXJuIGlmIG5vdGhpbmcgaGFzIGNoYW5nZWQNCgkNCglpZiBub3QgcE5ld0l0ZW1zT3V0Zml0IHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0gTWVyZ2UgdGhlIG5ldyBpdGVtcyB3aXRoIGFuIGV4aXN0aW5nIHRlbXBvcmFyeSBvdXRmaXQNCgkNCglsb2NhbCB2VGVtcG9yYXJ5T3V0Zml0ID0gT3V0Zml0dGVyLk91dGZpdFN0YWNrOkdldFRlbXBvcmFyeU91dGZpdCgpDQoJbG9jYWwgdlVzaW5nRXhpc3RpbmdUZW1wT3V0Zml0ID0gZmFsc2UNCgkNCglpZiB2VGVtcG9yYXJ5T3V0Zml0IHRoZW4NCgkJbG9jYWwgdk5ld0l0ZW1zID0gcE5ld0l0ZW1zT3V0Zml0OkdldEl0ZW1zKCkNCgkJDQoJCWZvciB2SW52ZW50b3J5U2xvdCwgdkl0ZW0gaW4gcGFpcnModk5ld0l0ZW1zKSBkbw0KCQkJdlRlbXBvcmFyeU91dGZpdDpTZXRJdGVtKHZJbnZlbnRvcnlTbG90LCB2SXRlbSkNCgkJZW5kDQoJCQ0KCQl2VXNpbmdFeGlzdGluZ1RlbXBPdXRmaXQgPSB0cnVlDQoJDQoJLS0gT3RoZXJ3aXNlIGFkZCB0aGUgbmV3IGl0ZW1zIGFzIHRoZSB0ZW1wb3Jhcnkgb3V0Zml0DQoJDQoJZWxzZQ0KCQl2VGVtcG9yYXJ5T3V0Zml0ID0gcE5ld0l0ZW1zT3V0Zml0DQoJZW5kDQoJDQoJLS0gU3VidHJhY3Qgb3V0IGl0ZW1zIHdoaWNoIGFyZSBleHBlY3RlZCB0byBiZSBpbiB0aGUgb3V0Zml0DQoJDQoJbG9jYWwgdkV4cGVjdGVkT3V0Zml0ID0gc2VsZjpHZXRFeHBlY3RlZE91dGZpdCh2VGVtcG9yYXJ5T3V0Zml0KQ0KCQ0KCXNlbGY6U3VidHJhY3RPdXRmaXQodlRlbXBvcmFyeU91dGZpdCwgdkV4cGVjdGVkT3V0Zml0KQ0KCQ0KCWlmIHZUZW1wb3JhcnlPdXRmaXQ6SXNFbXB0eSgpIHRoZW4NCgkJaWYgdlVzaW5nRXhpc3RpbmdUZW1wT3V0Zml0IHRoZW4NCgkJCXNlbGY6UmVtb3ZlT3V0Zml0KHZUZW1wb3JhcnlPdXRmaXQpDQoJCWVuZA0KCWVsc2UNCgkJaWYgbm90IHZVc2luZ0V4aXN0aW5nVGVtcE91dGZpdCB0aGVuDQoJCQlPdXRmaXR0ZXIuT3V0Zml0U3RhY2s6QWRkT3V0Zml0KHZUZW1wb3JhcnlPdXRmaXQpDQoJCWVuZA0KCWVuZA0KCQ0KCS0tIEFkZCB0aGUgbmV3IGl0ZW1zIHRvIHRoZSBjdXJyZW50IGNvbXBpbGVkIG91dGZpdA0KCQ0KCWxvY2FsIHZOZXdJdGVtcyA9IHBOZXdJdGVtc091dGZpdDpHZXRJdGVtcygpDQoJDQoJaWYgc2VsZi5EZWJ1Zy5FcXVpcG1lbnRDaGFuZ2VzIHRoZW4NCgkJc2VsZjpEZWJ1Z01lc3NhZ2UoIkFkZGluZyBuZXcgaXRlbXMgdG8gdGVtcG9yYXJ5IG91dGZpdCIpDQoJCXNlbGY6RGVidWdUYWJsZSh2TmV3SXRlbXMsICJOZXdJdGVtcyIsIDIpDQoJZW5kDQoJDQoJZm9yIHZJbnZlbnRvcnlTbG90LCB2SXRlbSBpbiBwYWlycyh2TmV3SXRlbXMpIGRvDQoJCU91dGZpdHRlci5FeHBlY3RlZE91dGZpdDpTZXRJdGVtKHZJbnZlbnRvcnlTbG90LCB2SXRlbSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2V0U2xvdEVuYWJsZShwU2xvdE5hbWUsIHBFbmFibGUpDQoJaWYgbm90IHNlbGYuU2VsZWN0ZWRPdXRmaXQgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglpZiBwRW5hYmxlIHRoZW4NCgkJc2VsZi5TZWxlY3RlZE91dGZpdDpTZXRJbnZlbnRvcnlJdGVtKHBTbG90TmFtZSkNCgllbHNlDQoJCXNlbGYuU2VsZWN0ZWRPdXRmaXQ6UmVtb3ZlSXRlbShwU2xvdE5hbWUpDQoJZW5kDQoJDQoJc2VsZi5EaXNwbGF5SXNEaXJ0eSA9IHRydWUNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0T3V0Zml0QnlTY3JpcHRJRChwU2NyaXB0SUQpDQoJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciBfLCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCWlmIHZPdXRmaXQuU2NyaXB0SUQgPT0gcFNjcmlwdElEIHRoZW4NCgkJCQlyZXR1cm4gdk91dGZpdA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBuaWwNCmVuZA0KDQpPdXRmaXR0ZXIuQXVyYVN0YXRlcyA9DQp7DQoJRGluaW5nID0gZmFsc2UsDQoJU2hhZG93Zm9ybSA9IGZhbHNlLA0KCUdob3N0V29sZiA9IGZhbHNlLA0KCUZlaWduaW5nID0gZmFsc2UsDQoJRXZvY2F0ZSA9IGZhbHNlLA0KCU1vbmtleSA9IGZhbHNlLA0KCUhhd2sgPSBmYWxzZSwNCglDaGVldGFoID0gZmFsc2UsDQoJUGFjayA9IGZhbHNlLA0KCUJlYXN0ID0gZmFsc2UsDQoJV2lsZCA9IGZhbHNlLA0KCVZpcGVyID0gZmFsc2UsDQoJRHJhZ29uaGF3ayA9IGZhbHNlLA0KCVByb3dsID0gZmFsc2UsDQp9DQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXRQbGF5ZXJBdXJhU3RhdGVzKCkNCglsb2NhbCB2QnVmZkluZGV4ID0gMQ0KCQ0KCWZvciB2S2V5LCBfIGluIHBhaXJzKHNlbGYuQXVyYVN0YXRlcykgZG8NCgkJc2VsZi5BdXJhU3RhdGVzW3ZLZXldID0gZmFsc2UNCgllbmQNCgkNCgl3aGlsZSB0cnVlIGRvDQoJCWxvY2FsIHZOYW1lLCBfLCB2VGV4dHVyZSwgXywgXywgXywgXywgXywgXywgXywgdlNwZWxsSUQgPSBVbml0QnVmZigicGxheWVyIiwgdkJ1ZmZJbmRleCkgDQoJCQ0KCQlpZiBub3Qgdk5hbWUgdGhlbg0KCQkJcmV0dXJuIHNlbGYuQXVyYVN0YXRlcw0KCQllbmQNCgkJDQoJCS0tDQoJCQ0KCQlsb2NhbCB2U3BlY2lhbElEID0gT3V0Zml0dGVyLmNBdXJhSWNvblNwZWNpYWxJRFt2TmFtZV0NCgkJbG9jYWwgdlRleHR1cmVOYW1lDQoJCQ0KCQlpZiBub3QgdlNwZWNpYWxJRCB0aGVuDQoJCQlfLCBfLCB2VGV4dHVyZU5hbWUgPSB2VGV4dHVyZTpmaW5kKCIoW14lXFxdKikkIikNCgkJCQ0KCQkJdlNwZWNpYWxJRCA9IE91dGZpdHRlci5jQXVyYUljb25TcGVjaWFsSURbdlRleHR1cmVOYW1lXQ0KCQllbmQNCgkJDQoJCWlmIG5vdCB2U3BlY2lhbElEIHRoZW4NCgkJCXZTcGVjaWFsSUQgPSBzZWxmLmNTcGVsbElEVG9TcGVjaWFsSURbdlNwZWxsSURdDQoJCWVuZA0KCQkJDQoJCWlmIHZTcGVjaWFsSUQgdGhlbg0KCQkJc2VsZi5BdXJhU3RhdGVzW3ZTcGVjaWFsSURdID0gdHJ1ZQ0KCQkNCgkJLS0NCgkJDQoJCWVsc2VpZiBub3Qgc2VsZi5BdXJhU3RhdGVzLkRpbmluZw0KCQlhbmQgdlRleHR1cmVOYW1lOmZpbmQoIklOVl9EcmluayIpIHRoZW4NCgkJCXNlbGYuQXVyYVN0YXRlcy5EaW5pbmcgPSB0cnVlDQoJCWVuZA0KCQkNCgkJdkJ1ZmZJbmRleCA9IHZCdWZmSW5kZXggKyAxDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldEJ1ZmZUb29sdGlwVGV4dChwQnVmZkluZGV4KQ0KCU91dGZpdHRlclRvb2x0aXA6U2V0T3duZXIoT3V0Zml0dGVyRnJhbWUsICJBTkNIT1JfQk9UVE9NUklHSFQiLCAwLCAwKQ0KCU91dGZpdHRlclRvb2x0aXA6U2V0VW5pdEJ1ZmYoInBsYXllciIsIHBCdWZmSW5kZXgpDQoJDQoJbG9jYWwgdlRleHQxLCB2VGV4dDINCgkNCglpZiBPdXRmaXR0ZXJUb29sdGlwVGV4dExlZnQxOklzU2hvd24oKSB0aGVuDQoJCXZUZXh0MSA9IE91dGZpdHRlclRvb2x0aXBUZXh0TGVmdDE6R2V0VGV4dCgpDQoJZW5kIC0tIGlmIElzU2hvd24NCg0KCWlmIE91dGZpdHRlclRvb2x0aXBUZXh0TGVmdDI6SXNTaG93bigpIHRoZW4NCgkJdlRleHQyID0gT3V0Zml0dGVyVG9vbHRpcFRleHRMZWZ0MjpHZXRUZXh0KCkNCgllbmQgLS0gaWYgSXNTaG93bg0KDQoJT3V0Zml0dGVyVG9vbHRpcDpIaWRlKCkNCgkNCglyZXR1cm4gdlRleHQxLCB2VGV4dDINCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VXBkYXRlU3dpbW1pbmcoKQ0KCXNlbGY6QmVnaW5FcXVpcG1lbnRVcGRhdGUoKQ0KCQ0KCXNlbGYuRXZlbnRMaWI6RGlzcGF0Y2hFdmVudCgiVElNRVIiKQ0KCQ0KCXNlbGY6VXBkYXRlTW91bnRlZFN0YXRlKCkNCgkNCglsb2NhbCB2U3dpbW1pbmcgPSBmYWxzZQ0KCQ0KCWlmIElzU3dpbW1pbmcoKSB0aGVuDQoJCXZTd2ltbWluZyA9IHRydWUNCgllbmQNCgkNCglpZiBub3Qgc2VsZi5TcGVjaWFsU3RhdGUuU3dpbW1pbmcgdGhlbg0KCQlzZWxmLlNwZWNpYWxTdGF0ZS5Td2ltbWluZyA9IGZhbHNlDQoJZW5kDQoJDQoJc2VsZjpTZXRTcGVjaWFsT3V0Zml0RW5hYmxlZCgiU3dpbW1pbmciLCB2U3dpbW1pbmcpDQoJc2VsZjpFbmRFcXVpcG1lbnRVcGRhdGUoKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVbml0QXVyYUNoYW5nZWQocEV2ZW50LCBwVW5pdElEKQ0KCWlmIHBVbml0SUQgfj0gInBsYXllciIgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglpZiBzZWxmLkluQ29tYmF0IHRoZW4NCgkJc2VsZi5TY2hlZHVsZXJMaWI6U2NoZWR1bGVVbmlxdWVUYXNrKDIuMCwgc2VsZi5VcGRhdGVBdXJhU3RhdGVzLCBzZWxmKQ0KCWVsc2UNCgkJc2VsZjpVcGRhdGVBdXJhU3RhdGVzKCkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VXBkYXRlQXVyYVN0YXRlcygpDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJDQoJLS0gQ2hlY2sgZm9yIHNwZWNpYWwgYXVyYSBvdXRmaXRzDQoNCglsb2NhbCB2QXVyYVN0YXRlcyA9IHNlbGY6R2V0UGxheWVyQXVyYVN0YXRlcygpDQoJDQoJZm9yIHZTcGVjaWFsSUQsIHZJc0FjdGl2ZSBpbiBwYWlycyh2QXVyYVN0YXRlcykgZG8NCgkJaWYgdlNwZWNpYWxJRCA9PSAiRmVpZ25pbmciIHRoZW4NCgkJCXNlbGYuSXNGZWlnbmluZyA9IHZJc0FjdGl2ZQ0KCQllbmQNCgkJDQoJCWlmIG5vdCBPdXRmaXR0ZXIuU3BlY2lhbFN0YXRlW3ZTcGVjaWFsSURdIHRoZW4NCgkJCXNlbGYuU3BlY2lhbFN0YXRlW3ZTcGVjaWFsSURdID0gZmFsc2UNCgkJZW5kDQoJCQ0KCQktLSBEb24ndCBlcXVpcCB0aGUgZGluaW5nIG91dGZpdCBpZiBoZWFsdGggYW5kIG1hbmEgYXJlIGFsbW9zdCB0b3BwZWQgdXANCg0KCQlpZiB2U3BlY2lhbElEID09ICJEaW5pbmciDQoJCWFuZCB2SXNBY3RpdmUNCgkJYW5kIHNlbGY6UGxheWVySXNGdWxsKCkgdGhlbg0KCQkJdklzQWN0aXZlID0gZmFsc2UNCgkJZW5kDQoJCQ0KCQktLSBVcGRhdGUgdGhlIHN0YXRlDQoJCQ0KCQlzZWxmOlNldFNwZWNpYWxPdXRmaXRFbmFibGVkKHZTcGVjaWFsSUQsIHZJc0FjdGl2ZSkNCgllbmQNCgkNCglzZWxmOlVwZGF0ZU1vdW50ZWRTdGF0ZSgpDQoJDQoJc2VsZjpFbmRFcXVpcG1lbnRVcGRhdGUoKQ0KCQ0KCS0tIFVwZGF0ZSBzaGFwZXNoaWZ0IHN0YXRlIG9uIGF1cmEgY2hhbmdlIHRvbw0KCS0tIE5PVEU6IEN1cnJlbnRseSAoV29XIGNsaWVudCAyLjMpIHRoZSBzaGFwZXNoaWZ0IGluZm8gaXNuJ3QNCgktLSBhbHdheXMgdXAtdG8tZGF0ZSB3aGVuIHRoZSBBVVJBIGV2ZW50IGNvbWVzIGluLCBzbyB1cGRhdGUNCgktLSB0aGUgc2hhcGVzaGlmdCBzdGF0ZSBhZnRlciBhYm91dCAxIGZyYW1lIHRvIGFsbG93IHRoZSBzdGF0ZSB0bw0KCS0tIHN5bmNoDQoJDQoJc2VsZi5TY2hlZHVsZXJMaWI6U2NoZWR1bGVVbmlxdWVUYXNrKDAuMDEsIHNlbGYuVXBkYXRlU2hhcGVzaGlmdFN0YXRlLCBzZWxmKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGVNb3VudGVkU3RhdGUoKQ0KCWxvY2FsIHZSaWRpbmcgPSBJc01vdW50ZWQoKSBhbmQgbm90IFVuaXRPblRheGkoInBsYXllciIpDQoJDQoJc2VsZjpTZXRTcGVjaWFsT3V0Zml0RW5hYmxlZCgiUmlkaW5nIiwgdlJpZGluZykNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VXBkYXRlU2hhcGVzaGlmdFN0YXRlKCkNCglzZWxmOkJlZ2luRXF1aXBtZW50VXBkYXRlKCkNCgkNCglpZiBub3Qgc2VsZi5TZXR0aW5ncy5TaGFwZXNoaWZ0SW5kZXhJbmZvIHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5TaGFwZXNoaWZ0SW5kZXhJbmZvID0ge30NCgllbmQNCgkNCglsb2NhbCB2TnVtRm9ybXMgPSBHZXROdW1TaGFwZXNoaWZ0Rm9ybXMoKQ0KCQ0KCS0tIERlYWN0aXZhdGUgdGhlIHByZXZpb3VzIHNoYXBlc2hpZnQgZm9ybSBmaXJzdA0KCQ0KCWxvY2FsIHZBY3RpdmVGb3JtDQoJDQoJZm9yIHZJbmRleCA9IDEsIHZOdW1Gb3JtcyBkbw0KCQlsb2NhbCB2VGV4dHVyZSwgdk5hbWUsIHZJc0FjdGl2ZSwgdklzQ2FzdGFibGUgPSBHZXRTaGFwZXNoaWZ0Rm9ybUluZm8odkluZGV4KQ0KCQkNCgkJXywgXywgdlRleHR1cmUgPSB2VGV4dHVyZTpmaW5kKCIoW15cXF0rKSQiKQ0KCQkNCgkJLS0gc2VsZjpUZXN0TWVzc2FnZSgiJXMgdGV4dHVyZSA9ICVzICglZCkgJXMiLCB2TmFtZSwgdlRleHR1cmUsIHZUZXh0dXJlOmxlbigpLCB0ZXJuKHZJc0FjdGl2ZSwgIkFDVElWRSIsICJub3QgYWN0aXZlIikpDQoJCQ0KCQlsb2NhbCB2U2hhcGVzaGlmdEluZm8gPSBzZWxmLmNTaGFwZXNoaWZ0VGV4dHVyZUluZm9bdlRleHR1cmVdDQoJCQ0KCQlpZiB2U2hhcGVzaGlmdEluZm8gdGhlbg0KCQkJc2VsZi5TZXR0aW5ncy5TaGFwZXNoaWZ0SW5kZXhJbmZvW3ZJbmRleF0gPSB2U2hhcGVzaGlmdEluZm8NCgkJZWxzZQ0KCQkJdlNoYXBlc2hpZnRJbmZvID0gc2VsZi5TZXR0aW5ncy5TaGFwZXNoaWZ0SW5kZXhJbmZvW3ZJbmRleF0NCgkJZW5kDQoJCQ0KCQlpZiB2U2hhcGVzaGlmdEluZm8gdGhlbg0KCQkJaWYgbm90IHZJc0FjdGl2ZSB0aGVuDQoJCQkJc2VsZjpVcGRhdGVTaGFwZXNoaWZ0SW5mbyh2U2hhcGVzaGlmdEluZm8sIGZhbHNlKQ0KCQkJZWxzZQ0KCQkJCXZBY3RpdmVGb3JtID0gdlNoYXBlc2hpZnRJbmZvDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJLS0gU3Vic3RpdHV0ZSB0aGUgZHJ1aWQgY2FzdGVyIHBzZXVkby1mb3JtIGlmIG5lY2Vzc2FyeSBvciBkZWFjdGl2YXRlIGl0DQoJLS0gaWYgaXQncyBub3QNCgkNCglpZiBzZWxmLlBsYXllckNsYXNzID09ICJEUlVJRCIgdGhlbg0KCQlpZiBub3QgdkFjdGl2ZUZvcm0gdGhlbg0KCQkJdkFjdGl2ZUZvcm0gPSBzZWxmLmNTaGFwZXNoaWZ0VGV4dHVyZUluZm8uQ2FzdGVyRm9ybQ0KCQllbHNlDQoJCQlzZWxmOlVwZGF0ZVNoYXBlc2hpZnRJbmZvKHNlbGYuY1NoYXBlc2hpZnRUZXh0dXJlSW5mby5DYXN0ZXJGb3JtLCBmYWxzZSkNCgkJZW5kDQoJZW5kDQoJDQoJLS0gQWN0aXZhdGUgdGhlIG5ldyBmb3JtDQoJDQoJaWYgdkFjdGl2ZUZvcm0gdGhlbg0KCQlzZWxmOlVwZGF0ZVNoYXBlc2hpZnRJbmZvKHZBY3RpdmVGb3JtLCB0cnVlKQ0KCWVuZA0KCQ0KCXNlbGY6RW5kRXF1aXBtZW50VXBkYXRlKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VXBkYXRlU2hhcGVzaGlmdEluZm8ocFNoYXBlc2hpZnRJbmZvLCBwSXNBY3RpdmUpDQoJLS0gRW5zdXJlIGEgcHJvcGVyIGJvb2xlYW4NCgkNCglpZiBwSXNBY3RpdmUgdGhlbg0KCQlwSXNBY3RpdmUgPSB0cnVlDQoJZWxzZQ0KCQlwSXNBY3RpdmUgPSBmYWxzZQ0KCWVuZA0KCQ0KCS0tDQoJDQoJaWYgc2VsZi5TcGVjaWFsU3RhdGVbcFNoYXBlc2hpZnRJbmZvLklEXSA9PSBuaWwgdGhlbg0KCQlzZWxmLlNwZWNpYWxTdGF0ZVtwU2hhcGVzaGlmdEluZm8uSURdID0gc2VsZjpXZWFyaW5nT3V0Zml0V2l0aFNjcmlwdElEKHBTaGFwZXNoaWZ0SW5mby5JRCkNCgllbmQNCgkNCglpZiBzZWxmLlNwZWNpYWxTdGF0ZVtwU2hhcGVzaGlmdEluZm8uSURdIH49IHBJc0FjdGl2ZSB0aGVuDQoJCWlmIHBJc0FjdGl2ZSBhbmQgcFNoYXBlc2hpZnRJbmZvLk1heWJlSW5Db21iYXQgdGhlbg0KCQkJc2VsZi5NYXliZUluQ29tYmF0ID0gdHJ1ZQ0KCQllbmQNCgkJDQoJCXNlbGY6U2V0U3BlY2lhbE91dGZpdEVuYWJsZWQocFNoYXBlc2hpZnRJbmZvLklELCBwSXNBY3RpdmUpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlNldFNwZWNpYWxPdXRmaXRFbmFibGVkKHBTcGVjaWFsSUQsIHBFbmFibGUpDQoJLS0gRW5zdXJlIGEgcHJvcGVyIGJvb2xlYW4NCgkNCglpZiBwRW5hYmxlIHRoZW4NCgkJcEVuYWJsZSA9IHRydWUNCgllbHNlDQoJCXBFbmFibGUgPSBmYWxzZQ0KCWVuZA0KCQ0KCWlmIHNlbGYuU3BlY2lhbFN0YXRlW3BTcGVjaWFsSURdID09IHBFbmFibGUgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCgktLSBTdXNwZW5kIG9yIHJlc3VtZSBtb25pdG9yaW5nIHRoZSBwbGF5ZXIgaGVhbHRoDQoJLS0gaWYgdGhlIGRpbmluZyBvdXRmaXQgaXMgYmVpbmcgY2hhbmdlZA0KCQ0KCWlmIHBTcGVjaWFsSUQgPT0gIkRpbmluZyIgYW5kIHBFbmFibGUgdGhlbg0KCQlzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlVOSVRfSEVBTFRIIiwgc2VsZi5Vbml0SGVhbHRoT3JNYW5hQ2hhbmdlZCwgc2VsZiwgdHJ1ZSkgLS0gUmVnaXN0ZXIgYXMgYSBibGluZCBldmVudCBoYW5kbGVyDQoJZWxzZQ0KCQlzZWxmLkV2ZW50TGliOlVucmVnaXN0ZXJFdmVudCgiVU5JVF9IRUFMVEgiLCBzZWxmLlVuaXRIZWFsdGhPck1hbmFDaGFuZ2VkLCBzZWxmKQ0KCWVuZA0KCQ0KCS0tDQoJDQoJc2VsZi5TcGVjaWFsU3RhdGVbcFNwZWNpYWxJRF0gPSBwRW5hYmxlDQoJDQoJLS0gRGlzcGF0Y2ggdGhlIHNwZWNpYWwgSUQgZXZlbnRzDQoJDQoJbG9jYWwgdkV2ZW50cyA9IHNlbGYuY1NwZWNpYWxJREV2ZW50c1twU3BlY2lhbElEXQ0KCQ0KCWlmIHZFdmVudHMgdGhlbg0KCQlpZiBwRW5hYmxlIHRoZW4NCgkJCXNlbGYuRXZlbnRMaWI6RGlzcGF0Y2hFdmVudCh2RXZlbnRzLkVxdWlwKQ0KCQllbHNlDQoJCQlzZWxmLkV2ZW50TGliOkRpc3BhdGNoRXZlbnQodkV2ZW50cy5VbmVxdWlwKQ0KCQllbmQNCgllbHNlDQoJCXNlbGY6RXJyb3JNZXNzYWdlKCJObyBldmVudHMgZm91bmQgZm9yICIuLnBTcGVjaWFsSUQpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOldlYXJpbmdPdXRmaXRXaXRoU2NyaXB0SUQocFNwZWNpYWxJRCkNCglmb3IgdkluZGV4LCB2T3V0Zml0IGluIGlwYWlycyhzZWxmLk91dGZpdFN0YWNrLk91dGZpdHMpIGRvDQoJCWlmIHZPdXRmaXQuU2NyaXB0SUQgPT0gcFNwZWNpYWxJRCB0aGVuDQoJCQlyZXR1cm4gdHJ1ZSwgdkluZGV4DQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTY2hlZHVsZVVwZGF0ZVpvbmUoKQ0KCXNlbGYuU2NoZWR1bGVyTGliOlJlc2NoZWR1bGVUYXNrKDAuMDEsIHNlbGYuVXBkYXRlWm9uZSwgc2VsZikNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VXBkYXRlWm9uZSgpDQoJbG9jYWwgdkN1cnJlbnRab25lID0gR2V0Wm9uZVRleHQoKQ0KCQ0KCS0tIFRyZWF0IFZhdWx0IG9mIEFyY2hhdm9uIGFzIGl0cyBvd24gem9uZSBzbw0KCS0tIHRoYXQgaXQgZG9lc24ndCByZWdpc3RlciBhcyB0aGUgV2ludGVyZ3Jhc3ANCgktLSBQdlAgem9uZQ0KCQ0KCWlmIHZDdXJyZW50Wm9uZSA9PSBzZWxmLkxaWyJXaW50ZXJncmFzcCJdIHRoZW4NCgkJbG9jYWwgdk1pbmltYXBab25lID0gR2V0TWluaW1hcFpvbmVUZXh0KCkNCgkJDQoJCWlmIHZNaW5pbWFwWm9uZSA9PSBzZWxmLkxaWyJWYXVsdCBvZiBBcmNoYXZvbiJdIHRoZW4NCgkJCXZDdXJyZW50Wm9uZSA9IHZNaW5pbWFwWm9uZQ0KCQllbmQNCgllbmQNCgkNCgktLSBKdXN0IHJldHVybiBpZiB0aGUgem9uZSBpc24ndCBjaGFuZ2luZw0KCQ0KCWlmIHZDdXJyZW50Wm9uZSA9PSBzZWxmLkN1cnJlbnRab25lIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJc2VsZi5DdXJyZW50Wm9uZSA9IHZDdXJyZW50Wm9uZQ0KCXNlbGYuQ3VycmVudFpvbmVJRHMgPSBzZWxmOkdldEN1cnJlbnRab25lSURzKHNlbGYuQ3VycmVudFpvbmVJRHMpDQoJDQoJc2VsZjpCZWdpbkVxdWlwbWVudFVwZGF0ZSgpDQoJDQoJLS0NCgkNCglmb3IgXywgdlNwZWNpYWxJRCBpbiBpcGFpcnMoc2VsZi5jWm9uZVNwZWNpYWxJRHMpIGRvDQoJCWxvY2FsIHZJc0FjdGl2ZSA9IHNlbGYuQ3VycmVudFpvbmVJRHNbdlNwZWNpYWxJRF0gPT0gdHJ1ZQ0KCQlsb2NhbCB2Q3VycmVudElzQWN0aXZlID0gc2VsZi5TcGVjaWFsU3RhdGVbdlNwZWNpYWxJRF0NCgkJDQoJCWlmIHZDdXJyZW50SXNBY3RpdmUgPT0gbmlsIHRoZW4NCgkJCXZDdXJyZW50SXNBY3RpdmUgPSBzZWxmOldlYXJpbmdPdXRmaXRXaXRoU2NyaXB0SUQodlNwZWNpYWxJRCkNCgkJCXNlbGYuU3BlY2lhbFN0YXRlW3ZTcGVjaWFsSURdID0gdkN1cnJlbnRJc0FjdGl2ZQ0KCQllbmQNCgkJDQoJCXNlbGY6U2V0U3BlY2lhbE91dGZpdEVuYWJsZWQodlNwZWNpYWxJRCwgdklzQWN0aXZlKQ0KCWVuZA0KCQ0KCXNlbGY6RW5kRXF1aXBtZW50VXBkYXRlKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0Q3VycmVudFpvbmVJRHMocFJlY3ljbGVUYWJsZSkNCglsb2NhbCB2Wm9uZUlEcyA9IHNlbGY6UmVjeWNsZVRhYmxlKHBSZWN5Y2xlVGFibGUpDQoJDQoJbG9jYWwgdlpvbmVTcGVjaWFsSURNYXAgPSBzZWxmLmNab25lU3BlY2lhbElETWFwW3NlbGYuQ3VycmVudFpvbmVdDQoJDQoJaWYgbm90IHZab25lU3BlY2lhbElETWFwIHRoZW4NCgkJdlpvbmVTcGVjaWFsSURNYXAgPSBzZWxmLmNab25lU3BlY2lhbElETWFwW0dldFJlYWxab25lVGV4dCgpXQ0KCWVuZA0KCQ0KCWxvY2FsIHZQVlBUeXBlLCB2SXNBcmVuYSwgdkZhY3Rpb25OYW1lID0gR2V0Wm9uZVBWUEluZm8oKQ0KCQ0KCWlmIHZab25lU3BlY2lhbElETWFwIHRoZW4NCgkJZm9yIF8sIHZab25lU3BlY2lhbElEIGluIGlwYWlycyh2Wm9uZVNwZWNpYWxJRE1hcCkgZG8NCgkJCWlmIHZab25lU3BlY2lhbElEIH49ICJDaXR5IiBvciB2UFZQVHlwZSB+PSAiaG9zdGlsZSIgdGhlbg0KCQkJCXZab25lSURzW3Zab25lU3BlY2lhbElEXSA9IHRydWUNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdlpvbmVJRHMNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SW5ab25lVHlwZShwWm9uZVR5cGUpDQoJcmV0dXJuIHNlbGYuQ3VycmVudFpvbmVJRHNbcFpvbmVUeXBlXSA9PSB0cnVlDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkluQmF0dGxlZ3JvdW5kWm9uZSgpDQoJcmV0dXJuIHNlbGY6SW5ab25lVHlwZSgiQmF0dGxlZ3JvdW5kIikNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2V0QWxsU2xvdEVuYWJsZXMocEVuYWJsZSkNCglpZiBwRW5hYmxlIHRoZW4NCgkJc2VsZi5TZWxlY3RlZE91dGZpdDpFbmFibGVBbGxTbG90cygpDQoJZWxzZQ0KCQlzZWxmLlNlbGVjdGVkT3V0Zml0OkRpc2FibGVBbGxTbG90cygpDQoJZW5kDQoJDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQoc2VsZi5TZWxlY3RlZE91dGZpdCkNCglzZWxmOlVwZGF0ZSh0cnVlKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCglpZiBub3QgcE91dGZpdCB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCWxvY2FsIHZUYXJnZXRDYXRlZ29yeUlEID0gcE91dGZpdDpDYWxjdWxhdGVPdXRmaXRDYXRlZ29yeSgpDQoJDQoJaWYgcE91dGZpdC5DYXRlZ29yeUlEIH49IHZUYXJnZXRDYXRlZ29yeUlEIHRoZW4NCgkJbG9jYWwgdk91dGZpdENhdGVnb3J5SUQsIHZPdXRmaXRJbmRleCA9IHNlbGY6RmluZE91dGZpdChwT3V0Zml0KQ0KCQkNCgkJaWYgbm90IHZPdXRmaXRDYXRlZ29yeUlEIHRoZW4NCgkJCXNlbGY6RXJyb3JNZXNzYWdlKHBPdXRmaXQ6R2V0TmFtZSgpLi4iIG5vdCBmb3VuZCBpbiBvdXRmaXQgbGlzdCIpDQoJCQlyZXR1cm4NCgkJZW5kDQoJCQ0KCQlpZiB2T3V0Zml0Q2F0ZWdvcnlJRCB+PSBwT3V0Zml0LkNhdGVnb3J5SUQgdGhlbg0KCQkJc2VsZjpEZWJ1Z01lc3NhZ2UoIk91dGZpdFNldHRpbmdzQ2hhbmdlZDogIi4ucE91dGZpdDpHZXROYW1lKCkuLiIgc2F5cyBpdCdzIGluICIuLnBPdXRmaXQuQ2F0ZWdvcnlJRC4uIiBidXQgaXQncyBpbiAiLi52T3V0Zml0Q2F0ZWdvcnlJRCkNCgkJZW5kDQoJCQ0KCQl0YWJsZS5yZW1vdmUoc2VsZi5TZXR0aW5ncy5PdXRmaXRzW3ZPdXRmaXRDYXRlZ29yeUlEXSwgdk91dGZpdEluZGV4KQ0KCQkNCgkJc2VsZjpBZGRPdXRmaXQocE91dGZpdCkNCgllbmQNCgkNCglzZWxmLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZQ0KCQ0KCXNlbGY6RGlzcGF0Y2hPdXRmaXRFdmVudCgiRURJVF9PVVRGSVQiLCBwT3V0Zml0OkdldE5hbWUoKSwgcE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6RGVsZXRlT3V0Zml0KHBPdXRmaXQpDQoJbG9jYWwgdldlYXJpbmdPdXRmaXQgPSBzZWxmOldlYXJpbmdPdXRmaXQocE91dGZpdCkNCgkNCgktLSBEZXNlbGVjdCB0aGUgb3V0Zml0DQoJDQoJaWYgcE91dGZpdCA9PSBzZWxmLlNlbGVjdGVkT3V0Zml0IHRoZW4NCgkJc2VsZjpDbGVhclNlbGVjdGlvbigpDQoJZW5kDQoJDQoJLS0gUmVtb3ZlIHRoZSBvdXRmaXQgaWYgaXQncyBiZWluZyB3b3JuDQoJDQoJc2VsZjpSZW1vdmVPdXRmaXQocE91dGZpdCkNCglzZWxmOkRlYWN0aXZhdGVTY3JpcHQocE91dGZpdCkNCgkNCglsb2NhbCB2T3V0Zml0Q2F0ZWdvcnlJRCwgdk91dGZpdEluZGV4ID0gc2VsZjpGaW5kT3V0Zml0KHBPdXRmaXQpDQoJDQoJaWYgbm90IHZPdXRmaXRDYXRlZ29yeUlEIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0gRGVsZXRlIHRoZSBvdXRmaXQNCgkNCgl0YWJsZS5yZW1vdmUoc2VsZi5TZXR0aW5ncy5PdXRmaXRzW3ZPdXRmaXRDYXRlZ29yeUlEXSwgdk91dGZpdEluZGV4KQ0KCQ0KCXBPdXRmaXQ6RGVsZXRlKCkNCg0KCS0tDQoJDQoJc2VsZi5EaXNwbGF5SXNEaXJ0eSA9IHRydWUNCgkNCglzZWxmOkRpc3BhdGNoT3V0Zml0RXZlbnQoIkRFTEVURV9PVVRGSVQiLCBwT3V0Zml0OkdldE5hbWUoKSwgcE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6QWRkT3V0Zml0KHBPdXRmaXQpDQoJbG9jYWwgdkNhdGVnb3J5SUQNCgkNCgl2Q2F0ZWdvcnlJRCA9IHBPdXRmaXQ6Q2FsY3VsYXRlT3V0Zml0Q2F0ZWdvcnkoKQ0KCQ0KCWlmIG5vdCBzZWxmLlNldHRpbmdzLk91dGZpdHMgdGhlbg0KCQlzZWxmLlNldHRpbmdzLk91dGZpdHMgPSB7fQ0KCWVuZA0KCQ0KCWlmIG5vdCBzZWxmLlNldHRpbmdzLk91dGZpdHNbdkNhdGVnb3J5SURdIHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5PdXRmaXRzW3ZDYXRlZ29yeUlEXSA9IHt9DQoJZW5kDQoJDQoJdGFibGUuaW5zZXJ0KHNlbGYuU2V0dGluZ3MuT3V0Zml0c1t2Q2F0ZWdvcnlJRF0sIHBPdXRmaXQpDQoJcE91dGZpdC5DYXRlZ29yeUlEID0gdkNhdGVnb3J5SUQNCgkNCglzZWxmLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZQ0KCQ0KCXNlbGY6RGlzcGF0Y2hPdXRmaXRFdmVudCgiQUREX09VVEZJVCIsIHBPdXRmaXQ6R2V0TmFtZSgpLCBwT3V0Zml0KQ0KCQ0KCXJldHVybiB2Q2F0ZWdvcnlJRA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTbG90RW5hYmxlQ2xpY2tlZChwQ2hlY2tib3gsIHBCdXR0b24pDQoJLS0gSWYgdGhlIHVzZXIgaXMgYXR0ZW1wdGluZyB0byBkcm9wIGFuIGl0ZW0gcHV0IGl0IGluIHRoZSBzbG90IGZvciB0aGVtDQoJDQoJaWYgQ3Vyc29ySGFzSXRlbSgpIHRoZW4NCgkJUGlja3VwSW52ZW50b3J5SXRlbShzZWxmLmNTbG90SURzW3BDaGVja2JveC5TbG90TmFtZV0pDQoJCXJldHVybg0KCWVuZA0KCQ0KCS0tDQoJDQoJbG9jYWwgdkNoZWNrZWQgPSBwQ2hlY2tib3g6R2V0Q2hlY2tlZCgpDQoJDQoJaWYgcENoZWNrYm94LklzVW5rbm93biB0aGVuDQoJCXBDaGVja2JveC5Jc1Vua25vd24gPSBmYWxzZQ0KCQlwQ2hlY2tib3g6U2V0Q2hlY2tlZFRleHR1cmUoIkludGVyZmFjZVxcQnV0dG9uc1xcVUktQ2hlY2tCb3gtQ2hlY2siKQ0KCQl2Q2hlY2tlZCA9IHRydWUNCgllbmQNCgkNCglzZWxmOlNldFNsb3RFbmFibGUocENoZWNrYm94LlNsb3ROYW1lLCB2Q2hlY2tlZCkNCglzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChzZWxmLlNlbGVjdGVkT3V0Zml0KQ0KCXNlbGY6VXBkYXRlKHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkZpbmRNdWx0aXBsZUl0ZW1Mb2NhdGlvbihwSXRlbXMsIHBJbnZlbnRvcnlDYWNoZSkNCglmb3Igdkxpc3RJbmRleCwgdkxpc3RJdGVtIGluIGlwYWlycyhwSXRlbXMpIGRvDQoJCWxvY2FsIHZJdGVtID0gcEludmVudG9yeUNhY2hlOkZpbmRJdGVtT3JBbHQodkxpc3RJdGVtKQ0KCQkNCgkJaWYgdkl0ZW0gdGhlbg0KCQkJcmV0dXJuIHZJdGVtLCB2TGlzdEl0ZW0NCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIG5pbCwgbmlsDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkZpbmRBbmRBZGRJdGVtc1RvT3V0Zml0KHBPdXRmaXQsIHBTbG90TmFtZSwgcEl0ZW1zLCBwSW52ZW50b3J5Q2FjaGUpDQoJdkl0ZW1Mb2NhdGlvbiwgdkl0ZW0gPSBzZWxmOkZpbmRNdWx0aXBsZUl0ZW1Mb2NhdGlvbihwSXRlbXMsIHBJbnZlbnRvcnlDYWNoZSkNCgkNCglpZiB2SXRlbUxvY2F0aW9uIHRoZW4NCgkJbG9jYWwgdkludmVudG9yeVNsb3QgPSBwU2xvdE5hbWUNCgkJDQoJCWlmIG5vdCB2SW52ZW50b3J5U2xvdCB0aGVuDQoJCQl2SW52ZW50b3J5U2xvdCA9IHZJdGVtTG9jYXRpb24uSXRlbVNsb3ROYW1lDQoJCWVuZA0KCQkNCgkJcE91dGZpdDpBZGRJdGVtKHZJbnZlbnRvcnlTbG90LCB2SXRlbSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SXNJbml0aWFsaXplZCgpDQoJcmV0dXJuIHNlbGYuSW5pdGlhbGl6ZWQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SW5pdGlhbGl6YXRpb25DaGVjaygpDQoJLS0gRG9uJ3QgaW5pdGlhbGl6ZSBmb3IgYSBzaG9ydCB0aW1lIGFmdGVyIFdvVyBjb21lcyB1cCB0byBhbGxvdw0KCS0tIHRpbWUgZm9yIFdvVyB0byBsb2FkIGludmVudG9yeSwgYmFncywgdGFsZW50IHRyZWVzLCBldGMuDQoJDQoJc2VsZi5TY2hlZHVsZXJMaWI6UmVzY2hlZHVsZVRhc2soMSwgc2VsZi5Jbml0aWFsaXplLCBzZWxmKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpJbml0aWFsaXplKCkNCglpZiBzZWxmLkluaXRpYWxpemVkIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0gVW5yZWdpc3RlciB0aGUgaW5pdGlhbGl6YXRpb24gZXZlbnRzDQoJDQoJZm9yIHZFdmVudElELCBfIGluIHBhaXJzKHNlbGYuY0luaXRpYWxpemF0aW9uRXZlbnRzKSBkbw0KCQlzZWxmLkV2ZW50TGliOlVucmVnaXN0ZXJFdmVudCh2RXZlbnRJRCwgc2VsZi5Jbml0aWFsaXphdGlvbkNoZWNrLCBzZWxmKQ0KCWVuZA0KCQ0KCS0tIE1ha2VzIHN1cmUgdGhleSdyZSBub3QgdXBncmFkaW5nIHdpdGggYSByZWxvYWR1aSB3aGVuIHRoZXJlIGFyZSBuZXcgZmlsZXMNCgkNCglpZiBub3Qgc2VsZi5fUXVpY2tTbG90cw0KCW9yIG5vdCBzZWxmLl9PdXRmaXRJdGVyYXRvcg0KCW9yIG5vdCBzZWxmLkJ1aWxkRXF1aXBtZW50Q2hhbmdlTGlzdA0KCW9yIG5vdCBzZWxmLl9BYm91dFZpZXcNCglvciBub3Qgc2VsZi5OZXcgdGhlbg0KCQlPdXRmaXR0ZXJNaW5pbWFwQnV0dG9uOkhpZGUoKSAtLSBSZW1vdmUgYWNjZXNzIHRvIE91dGZpdHRlciBzbyBtb3JlIGVycm9ycyBkb24ndCBzdGFydCBjb21pbmcgdXANCgkJT3V0Zml0dGVyQnV0dG9uRnJhbWU6SGlkZSgpDQoJCVN0YXRpY1BvcHVwX1Nob3coIk9VVEZJVFRFUl9DQU5UX1JFTE9BRFVJIikNCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0gR2V0IHRoZSBiYXNpYyBwbGF5ZXIgaW5mbw0KCQ0KCXNlbGYuUGxheWVyTmFtZSA9IFVuaXROYW1lKCJwbGF5ZXIiKQ0KCXNlbGYuUmVhbG1OYW1lID0gR2V0UmVhbG1OYW1lKCkNCgkNCglsb2NhbCBfLCB2UGxheWVyQ2xhc3MgPSBVbml0Q2xhc3MoInBsYXllciIpDQoJDQoJc2VsZi5QbGF5ZXJDbGFzcyA9IHZQbGF5ZXJDbGFzcw0KCQ0KCS0tIFN3YXAgaW4gdGhlIEhvcmRlIExhbmNlIGZvciB0aGUgQWxsaWFuY2UgTGFuY2UgbWFwcGluZw0KCQ0KCWlmIFVuaXRGYWN0aW9uR3JvdXAoInBsYXllciIpID09ICJIb3JkZSIgdGhlbg0KCQlPdXRmaXR0ZXIuY0l0ZW1BbGlhc2VzWzQ2MTA2XSA9IDQ2MDcwIC0tIEFyZ2VudCBMYW5jZSAtPiBIb3JkZSBMYW5jZQ0KCWVuZA0KCQ0KCS0tDQoJDQoJaWYgbm90IGdPdXRmaXR0ZXJfR2xvYmFsU2V0dGluZ3MgdGhlbg0KCQlzZWxmOkluaXRpYWxpemVHbG9iYWxTZXR0aW5ncygpDQoJZW5kDQoJDQoJaWYgKHNlbGYuRG91Y2hlYmFnc1tzZWxmLlJlYWxtTmFtZV0NCglhbmQgc2VsZi5Eb3VjaGViYWdzW3NlbGYuUmVhbG1OYW1lXVtzZWxmLlBsYXllck5hbWVdKQ0KCW9yIGdPdXRmaXR0ZXJfR2xvYmFsU2V0dGluZ3MuQmFubmVkIHRoZW4NCgkJZ091dGZpdHRlcl9HbG9iYWxTZXR0aW5ncy5CYW5uZWQgPSB0cnVlDQoJCQ0KCQlPdXRmaXR0ZXJNaW5pbWFwQnV0dG9uOkhpZGUoKQ0KCQlPdXRmaXR0ZXJCdXR0b25GcmFtZTpIaWRlKCkNCgkJc2VsZjpFcnJvck1lc3NhZ2UoIllvdXIgY2hhcmFjdGVyIGlzIGJhbm5lZCBmcm9tIE91dGZpdHRlci4gIFVzZSBzb21ldGhpbmcgZWxzZSBmb3IgeW91ciBnZWFyIG1hbmFnZW1lbnQuIikNCgkJcmV0dXJuDQoJZW5kDQoNCglzZWxmLk1lbnVNYW5hZ2VyID0gc2VsZjpOZXcoc2VsZi5fTWVudU1hbmFnZXIpDQoJLS0gc2VsZi5NZW51TWFuYWdlcjpUZXN0KCkNCgkNCgktLQ0KCQ0KCS0tIEluaXRpYWxpemUgdGhlIG1haW4gVUkgdGFicw0KCQ0KCXNlbGYuX1NpZGViYXJXaW5kb3dGcmFtZS5Db25zdHJ1Y3QoT3V0Zml0dGVyRnJhbWUpDQoJDQoJUGFuZWxUZW1wbGF0ZXNfU2V0TnVtVGFicyhPdXRmaXR0ZXJGcmFtZSwgI3NlbGYuY1BhbmVsRnJhbWVzKQ0KCU91dGZpdHRlckZyYW1lLnNlbGVjdGVkVGFiID0gc2VsZi5DdXJyZW50UGFuZWwNCglQYW5lbFRlbXBsYXRlc19VcGRhdGVUYWJzKE91dGZpdHRlckZyYW1lKQ0KCQ0KCS0tIEluc3RhbGwgdGhlIC9vdXRmaXQgY29tbWFuZCBoYW5kbGVyDQoNCglTbGFzaENtZExpc3QuT1VURklUVEVSID0gZnVuY3Rpb24gKHBDb21tYW5kKSBPdXRmaXR0ZXI6RXhlY3V0ZUNvbW1hbmQocENvbW1hbmQpIGVuZA0KCVNMQVNIX09VVEZJVFRFUjEgPSAiL291dGZpdHRlciINCgkNCglpZiBub3QgU2xhc2hDbWRMaXN0LlVORVFVSVAgdGhlbg0KCQlTbGFzaENtZExpc3QuVU5FUVVJUCA9IHNlbGYuVW5lcXVpcEl0ZW1CeU5hbWUNCgkJU0xBU0hfVU5FUVVJUDEgPSAiL3VuZXF1aXAiDQoJZW5kDQoJDQoJLS0gSW5pdGlhbGl6ZSB0aGUgc2xvdCBJRCBtYXANCgkNCglzZWxmLmNTbG90SURzID0ge30NCglzZWxmLmNTbG90SURUb0ludmVudG9yeVNsb3QgPSB7fQ0KCQkNCglmb3IgXywgdkludmVudG9yeVNsb3QgaW4gaXBhaXJzKHNlbGYuY1Nsb3ROYW1lcykgZG8NCgkJbG9jYWwgdlNsb3RJRCA9IEdldEludmVudG9yeVNsb3RJbmZvKHZJbnZlbnRvcnlTbG90KQ0KCQkNCgkJc2VsZi5jU2xvdElEc1t2SW52ZW50b3J5U2xvdF0gPSB2U2xvdElEDQoJCXNlbGYuY1Nsb3RJRFRvSW52ZW50b3J5U2xvdFt2U2xvdElEXSA9IHZJbnZlbnRvcnlTbG90DQoJZW5kDQoJDQoJLS0gSW5pdGlhbGl6ZSB0aGUgc2V0dGluZ3MNCgkNCglpZiBub3QgZ091dGZpdHRlcl9TZXR0aW5ncyB0aGVuDQoJCXNlbGY6SW5pdGlhbGl6ZVNldHRpbmdzKCkNCgllbHNlDQoJCXNlbGYuU2V0dGluZ3MgPSBnT3V0Zml0dGVyX1NldHRpbmdzDQoJZW5kDQoJDQoJLS0gSW5pdGlhbGl6ZSB0aGUgb3V0Zml0cw0KCQ0KCXNlbGYuQ3VycmVudE91dGZpdCA9IHNlbGY6R2V0SW52ZW50b3J5T3V0Zml0KCkNCgkNCglpZiBub3Qgc2VsZi5TZXR0aW5ncy5PdXRmaXRzIHRoZW4NCgkJc2VsZjpJbml0aWFsaXplT3V0Zml0cygpDQoJZW5kDQoJDQoJc2VsZjpBdHRhY2hPdXRmaXRNZXRob2RzKCkNCglzZWxmOkNoZWNrRGF0YWJhc2UoKQ0KCQ0KCS0tIEluaXRpYWxpemUgdGhlIG91dGZpdCBzdGFjaw0KCQ0KCXNlbGYuT3V0Zml0U3RhY2s6SW5pdGlhbGl6ZSgpDQoJDQoJLS0gQ2xlYW4gdXAgYW55IHJlY2VudCBjb21wbGV0ZSBvdXRmaXRzIHdoaWNoIGRvbid0IGV4aXN0IGFzDQoJLS0gd2VsbCBhcyBkdXBsaWNhdGUgZW50cmllcw0KCQ0KCWxvY2FsIHZVc2VkUmVjZW50TmFtZXMgPSB7fQ0KCQ0KCWZvciB2SW5kZXggPSAjc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHMsIDEsIC0xIGRvDQoJCWxvY2FsIHZOYW1lID0gc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHNbdkluZGV4XQ0KCQkNCgkJaWYgbm90IHNlbGY6RmluZE91dGZpdEJ5TmFtZSh2TmFtZSkNCgkJb3IgdlVzZWRSZWNlbnROYW1lc1t2TmFtZV0gdGhlbg0KCQkJdGFibGUucmVtb3ZlKHNlbGYuU2V0dGluZ3MuUmVjZW50Q29tcGxldGVPdXRmaXRzLCB2SW5kZXgpDQoJCWVsc2UNCgkJCXZVc2VkUmVjZW50TmFtZXNbdk5hbWVdID0gdHJ1ZQ0KCQllbmQNCgllbmQNCgkNCgktLSBTZXQgdGhlIG1pbmltYXAgYnV0dG9uDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5PcHRpb25zLkhpZGVNaW5pbWFwQnV0dG9uIHRoZW4NCgkJT3V0Zml0dGVyTWluaW1hcEJ1dHRvbjpIaWRlKCkNCgllbHNlDQoJCU91dGZpdHRlck1pbmltYXBCdXR0b246U2hvdygpDQoJZW5kDQoJDQoJaWYgbm90IHNlbGYuU2V0dGluZ3MuT3B0aW9ucy5NaW5pbWFwQnV0dG9uQW5nbGUNCglhbmQgbm90IHNlbGYuU2V0dGluZ3MuT3B0aW9ucy5NaW5pbWFwQnV0dG9uWCB0aGVuDQoJCXNlbGYuU2V0dGluZ3MuT3B0aW9ucy5NaW5pbWFwQnV0dG9uQW5nbGUgPSAtMS41NzA4DQoJZW5kDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5PcHRpb25zLk1pbmltYXBCdXR0b25BbmdsZSB0aGVuDQoJCXNlbGYuTWluaW1hcEJ1dHRvbl9TZXRQb3NpdGlvbkFuZ2xlKHNlbGYuU2V0dGluZ3MuT3B0aW9ucy5NaW5pbWFwQnV0dG9uQW5nbGUpDQoJZWxzZQ0KCQlzZWxmLk1pbmltYXBCdXR0b25fU2V0UG9zaXRpb24oc2VsZi5TZXR0aW5ncy5PcHRpb25zLk1pbmltYXBCdXR0b25YLCBzZWxmLlNldHRpbmdzLk9wdGlvbnMuTWluaW1hcEJ1dHRvblkpDQoJZW5kDQoJDQoJc2VsZi5OYW1lT3V0Zml0RGlhbG9nID0gT3V0Zml0dGVyOk5ldyhPdXRmaXR0ZXIuX05hbWVPdXRmaXREaWFsb2csIE91dGZpdHRlckZyYW1lKQ0KCXNlbGYuUmVidWlsZE91dGZpdERpYWxvZyA9IE91dGZpdHRlcjpOZXcoT3V0Zml0dGVyLl9SZWJ1aWxkT3V0Zml0RGlhbG9nLCBPdXRmaXR0ZXJGcmFtZSkNCgkNCgktLSBNb3ZlIHRoZSBFcXVpcG1lbnQgTWFuYWdlciBidXR0b24gaW4gY2FzZSB0aGUgdXNlciB3YW50cyB0byB1c2UgYm90aA0KCQ0KCUdlYXJNYW5hZ2VyVG9nZ2xlQnV0dG9uOkNsZWFyQWxsUG9pbnRzKCkNCglHZWFyTWFuYWdlclRvZ2dsZUJ1dHRvbjpTZXRQb2ludCgiVE9QTEVGVCIsIFBhcGVyRG9sbEZyYW1lLCAiVE9QTEVGVCIsIDcwLCAtMzkpDQoJDQoJLS0gSW5pdGlhbGl6ZSBwbGF5ZXIgc3RhdGUNCgkNCglzZWxmLlNwaXJpdFJlZ2VuRW5hYmxlZCA9IHRydWUNCgkNCgktLSBEb25lIGluaXRpYWxpemluZw0KCQ0KCXNlbGYuSW5pdGlhbGl6ZWQgPSB0cnVlDQoJDQoJLS0gTWFrZSBzdXJlIHRoZSBvdXRmaXQgc3RhdGUgaXMgZ29vZA0KCQ0KCXNlbGY6U2V0U3BlY2lhbE91dGZpdEVuYWJsZWQoIlJpZGluZyIsIGZhbHNlKQ0KCXNlbGY6U2V0U3BlY2lhbE91dGZpdEVuYWJsZWQoIlNwaXJpdCIsIGZhbHNlKQ0KCXNlbGY6VXBkYXRlQXVyYVN0YXRlcygpDQoJDQoJLS0gU3RhcnQgbGlzdGVuaW5nIGZvciBldmVudHMNCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlBMQVlFUl9FTlRFUklOR19XT1JMRCIsIHNlbGYuU2NoZWR1bGVQbGF5ZXJFbnRlcmluZ1dvcmxkLCBzZWxmKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiUExBWUVSX0xFQVZJTkdfV09STEQiLCBzZWxmLlBsYXllckxlYXZpbmdXb3JsZCwgc2VsZikNCgkNCgktLSBGb3IgbW9uaXRvcmluZyBtb3VudGVkLCBkaW5pbmcgYW5kIHNoYWRvd2Zvcm0gc3RhdGVzDQoJDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJVTklUX0FVUkEiLCBzZWxmLlVuaXRBdXJhQ2hhbmdlZCwgc2VsZikNCgkNCglob29rc2VjdXJlZnVuYygiU2hhcGVzaGlmdEJhcl9VcGRhdGVTdGF0ZSIsIGZ1bmN0aW9uICgpIE91dGZpdHRlci5TY2hlZHVsZXJMaWI6U2NoZWR1bGVVbmlxdWVUYXNrKDAuMDEsIHNlbGYuVXBkYXRlU2hhcGVzaGlmdFN0YXRlLCBzZWxmKSBlbmQpDQoJDQoJLS0gRm9yIG1vbml0b3JpbmcgcGxhZ3VlbGFuZHMgYW5kIGJhdHRsZWdyb3VuZHMNCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlpPTkVfQ0hBTkdFRF9ORVdfQVJFQSIsIHNlbGYuU2NoZWR1bGVVcGRhdGVab25lLCBzZWxmKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiWk9ORV9DSEFOR0VEIiwgc2VsZi5TY2hlZHVsZVVwZGF0ZVpvbmUsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJaT05FX0NIQU5HRURfSU5ET09SUyIsIHNlbGYuU2NoZWR1bGVVcGRhdGVab25lLCBzZWxmKQ0KCQ0KCS0tIEZvciBtb25pdG9yaW5nIHBsYXllciBjb21iYXQgc3RhdGUNCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlBMQVlFUl9SRUdFTl9FTkFCTEVEIiwgc2VsZi5SZWdlbkVuYWJsZWQsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJQTEFZRVJfUkVHRU5fRElTQUJMRUQiLCBzZWxmLlJlZ2VuRGlzYWJsZWQsIHNlbGYpDQoJDQoJLS0gRm9yIG1vbml0b3JpbmcgcGxheWVyIGRlYWQvYWxpdmUgc3RhdGUNCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlBMQVlFUl9ERUFEIiwgc2VsZi5QbGF5ZXJEZWFkLCBzZWxmKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiUExBWUVSX0FMSVZFIiwgc2VsZi5QbGF5ZXJBbGl2ZSwgc2VsZikNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlBMQVlFUl9VTkdIT1NUIiwgc2VsZi5QbGF5ZXJBbGl2ZSwgc2VsZikNCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlVOSVRfSU5WRU5UT1JZX0NIQU5HRUQiLCBzZWxmLlVuaXRJbnZlbnRvcnlDaGFuZ2VkLCBzZWxmLCB0cnVlKSAtLSBSZWdpc3RlciBhcyBhIGJsaW5kIGV2ZW50IGhhbmRsZXIgKG5vIGV2ZW50IGlkIHBhcmFtKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiT1VURklUVEVSX0lOVkVOVE9SWV9DSEFOR0VEIiwgc2VsZi5JbnZlbnRvcnlDaGFuZ2VkLCBzZWxmLCB0cnVlKSAtLSBSZWdpc3RlciBhcyBhIGJsaW5kIGV2ZW50IGhhbmRsZXIgKG5vIGV2ZW50IGlkIHBhcmFtKQ0KDQoJLS0gRm9yIGluZGljYXRpbmcgd2hpY2ggb3V0Zml0cyBhcmUgbWlzc2luZyBpdGVtcw0KCQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiQkFHX1VQREFURSIsIHNlbGYuQmFnVXBkYXRlLCBzZWxmKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiUExBWUVSQkFOS1NMT1RTX0NIQU5HRUQiLCBzZWxmLkJhbmtTbG90c0NoYW5nZWQsIHNlbGYpDQoJDQoJLS0gRm9yIG1vbml0b3JpbmcgYmFuayBiYWdzDQoJDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJCQU5LRlJBTUVfT1BFTkVEIiwgc2VsZi5CYW5rRnJhbWVPcGVuZWQsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJCQU5LRlJBTUVfQ0xPU0VEIiwgc2VsZi5CYW5rRnJhbWVDbG9zZWQsIHNlbGYpDQoJDQoJLS0gRm9yIHVuZXF1aXBwaW5nIHRoZSBkaW5pbmcgb3V0Zml0DQoJDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJVTklUX01BTkEiLCBzZWxmLlVuaXRIZWFsdGhPck1hbmFDaGFuZ2VkLCBzZWxmLCB0cnVlKSAtLSBSZWdpc3RlciBhcyBhIGJsaW5kIGV2ZW50IGhhbmRsZXIgKG5vIGV2ZW50IGlkIHBhcmFtKQ0KCQ0KCS0tIEZvciBtb25pdG9yaW5nIHNwZWxsY2FzdHMNCgkNCi0tW1sNCglmb3IgXywgdkV2ZW50SUQgaW4gaXBhaXJzKHsNCgkJIlVOSVRfU1BFTExDQVNUX0NIQU5ORUxfU1RBUlQiLA0KCQkiVU5JVF9TUEVMTENBU1RfQ0hBTk5FTF9TVE9QIiwNCgkJIlVOSVRfU1BFTExDQVNUX0NIQU5ORUxfVVBEQVRFIiwNCgkJIlVOSVRfU1BFTExDQVNUX0RFTEFZRUQiLA0KCQkiVU5JVF9TUEVMTENBU1RfRkFJTEVEIiwNCgkJIlVOSVRfU1BFTExDQVNUX0ZBSUxFRF9RVUlFVCIsDQoJCSJVTklUX1NQRUxMQ0FTVF9JTlRFUlJVUFRFRCIsDQoJCSJVTklUX1NQRUxMQ0FTVF9TRU5UIiwNCgkJIlVOSVRfU1BFTExDQVNUX1NUQVJUIiwNCgkJIlVOSVRfU1BFTExDQVNUX1NUT1AiLA0KCQkiVU5JVF9TUEVMTENBU1RfU1VDQ0VFREVEIiwNCgkJIlVOSVRfU1BFTExNSVNTIg0KCX0pIGRvDQoJCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCh2RXZlbnRJRCwgc2VsZi5Vbml0U3BlbGxjYXN0RGVidWcsIHNlbGYpDQoJZW5kDQpdXQ0KCQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiVU5JVF9TUEVMTENBU1RfU0VOVCIsIHNlbGYuVW5pdFNwZWxsY2FzdFNlbnQsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJVTklUX1NQRUxMQ0FTVF9TVEFSVCIsIHNlbGYuVW5pdFNwZWxsY2FzdFNlbnQsIHNlbGYpDQoJDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJVTklUX1NQRUxMQ0FTVF9JTlRFUlJVUFRFRCIsIHNlbGYuVW5pdFNwZWxsY2FzdFN0b3AsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJVTklUX1NQRUxMQ0FTVF9TVE9QIiwgc2VsZi5Vbml0U3BlbGxjYXN0U3RvcCwgc2VsZikNCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlVOSVRfU1BFTExDQVNUX0NIQU5ORUxfU1RBUlQiLCBzZWxmLlVuaXRTcGVsbGNhc3RDaGFubmVsU3RhcnQsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJVTklUX1NQRUxMQ0FTVF9DSEFOTkVMX1NUT1AiLCBzZWxmLlVuaXRTcGVsbGNhc3RDaGFubmVsU3RvcCwgc2VsZikNCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlVOSVRfU1BFTExDQVNUX0ZBSUxFRCIsIHNlbGYuVW5pdFNwZWxsY2FzdFN0b3AsIHNlbGYpDQoJc2VsZi5FdmVudExpYjpSZWdpc3RlckV2ZW50KCJVTklUX1NQRUxMQ0FTVF9GQUlMRURfUVVJRVQiLCBzZWxmLlVuaXRTcGVsbGNhc3RTdG9wLCBzZWxmKQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiVU5JVF9TUEVMTENBU1RfU1VDQ0VFREVEIiwgc2VsZi5Vbml0U3BlbGxjYXN0U3RvcCwgc2VsZikNCgkNCgktLQ0KCQ0KCXNlbGYuRXZlbnRMaWI6UmVnaXN0ZXJFdmVudCgiQ0hBUkFDVEVSX1BPSU5UU19DSEFOR0VEIiwgc2VsZi5UYWxlbnRzQ2hhbmdlZCwgc2VsZikNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIlBMQVlFUl9UQUxFTlRfVVBEQVRFIiwgc2VsZi5UYWxlbnRzQ2hhbmdlZCwgc2VsZikNCgkNCglzZWxmOlRhbGVudHNDaGFuZ2VkKCkNCgkNCgktLSBQYXRjaCBHYW1lVG9vbHRpcCBzbyB3ZSBjYW4gbW9uaXRvciBoaWRlL3Nob3cgZXZlbnRzDQoJDQoJc2VsZjpIb29rU2NyaXB0KEdhbWVUb29sdGlwLCAiT25TaG93Iiwgc2VsZi5HYW1lVG9vbFRpcF9PblNob3cpDQoJc2VsZjpIb29rU2NyaXB0KEdhbWVUb29sdGlwLCAiT25IaWRlIiwgc2VsZi5HYW1lVG9vbFRpcF9PbkhpZGUpDQoJDQoJLS0gUGF0Y2ggTW9iSW5mbyB0b29sdGlwIHNpbmNlIGl0IHJlcGxhY2VzIHRoZSBHYW1lVG9vbFRpcCAoYmxlY2gpDQoJDQoJaWYgTUkyX1Rvb2x0aXBGcmFtZSB0aGVuDQoJCXNlbGY6SG9va1NjcmlwdChNSTJfVG9vbHRpcEZyYW1lLCAiT25TaG93Iiwgc2VsZi5HYW1lVG9vbFRpcF9PblNob3cpDQoJCXNlbGY6SG9va1NjcmlwdChNSTJfVG9vbHRpcEZyYW1lLCAiT25IaWRlIiwgc2VsZi5HYW1lVG9vbFRpcF9PbkhpZGUpDQoJZW5kDQoJDQoJLS0gU3luY2hyb25pemUgd2l0aCB0aGUgRXF1aXBtZW50IE1hbmFnZXINCgkNCglzZWxmLkV2ZW50TGliOlJlZ2lzdGVyRXZlbnQoIkVRVUlQTUVOVF9TRVRTX0NIQU5HRUQiLCBzZWxmLlN5bmNocm9uaXplRU0sIHNlbGYpDQoJDQoJLS0NCgkNCglzZWxmOkRpc3BhdGNoT3V0Zml0RXZlbnQoIk9VVEZJVFRFUl9JTklUIikNCgkNCglzZWxmLlNjaGVkdWxlckxpYjpTY2hlZHVsZVVuaXF1ZVJlcGVhdGluZ1Rhc2soMC41LCBzZWxmLlVwZGF0ZVN3aW1taW5nLCBzZWxmLCBuaWwsICJPdXRmaXR0ZXI6VXBkYXRlU3dpbW1pbmciKQ0KCQ0KCS0tIEFjdGl2YXRlIGFsbCBvdXRmaXQgc2NyaXB0cw0KCQ0KCWlmIG5vdCBzZWxmLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZUF1dG9Td2l0Y2ggdGhlbg0KCQlzZWxmOkFjdGl2YXRlQWxsU2NyaXB0cygpDQoJZW5kDQoJDQoJLS0gSW5zdGFsbCB0aGUgIlVzZWQgYnkgb3V0Zml0cyIgdG9vbHRpcCBmZWF0dXJlDQoJDQoJR2FtZVRvb2x0aXAuT3V0Zml0dGVyX09yaWdTZXRCYWdJdGVtID0gR2FtZVRvb2x0aXAuU2V0QmFnSXRlbQ0KCUdhbWVUb29sdGlwLlNldEJhZ0l0ZW0gPSBzZWxmLkdhbWVUb29sdGlwX1NldEJhZ0l0ZW0NCgkNCglHYW1lVG9vbHRpcC5PdXRmaXR0ZXJfT3JpZ1NldEludmVudG9yeUl0ZW0gPSBHYW1lVG9vbHRpcC5TZXRJbnZlbnRvcnlJdGVtDQoJR2FtZVRvb2x0aXAuU2V0SW52ZW50b3J5SXRlbSA9IHNlbGYuR2FtZVRvb2x0aXBfU2V0SW52ZW50b3J5SXRlbQ0KCQ0KCUdhbWVUb29sdGlwLk91dGZpdHRlcl9PcmlnU2V0SHlwZXJsaW5rID0gR2FtZVRvb2x0aXAuU2V0SHlwZXJsaW5rDQoJR2FtZVRvb2x0aXAuU2V0SHlwZXJsaW5rID0gc2VsZi5HYW1lVG9vbHRpcF9TZXRIeXBlcmxpbmsNCgkNCgktLSBJbnN0YWxsIHRoZSBpdGVtIGNvbXBhcmUgdG9vbHRpcHMNCgkNCglpZiBub3Qgc2VsZi5TZXR0aW5ncy5PcHRpb25zLkRpc2FibGVJdGVtQ29tcGFyaXNvbnMgdGhlbg0KCQlzZWxmLkV4dGVuZGVkQ29tcGFyZVRvb2x0aXAgPSBPdXRmaXR0ZXI6TmV3KE91dGZpdHRlci5fRXh0ZW5kZWRDb21wYXJlVG9vbHRpcCkNCgllbmQNCgkNCgktLSBGaXJlIHRoaW5ncyB1cCB3aXRoIGEgc2ltdWxhdGVkIGVudHJhbmNlDQoJDQoJc2VsZjpTY2hlZHVsZVBsYXllckVudGVyaW5nV29ybGQoKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpJbml0aWFsaXplU2V0dGluZ3MoKQ0KCWdPdXRmaXR0ZXJfU2V0dGluZ3MgPQ0KCXsNCgkJVmVyc2lvbiA9IDE4LA0KCQlPcHRpb25zID0ge30sDQoJCUxhc3RPdXRmaXRTdGFjayA9IHt9LA0KCQlMYXllckluZGV4ID0ge30sDQoJCVJlY2VudENvbXBsZXRlT3V0Zml0cyA9IHt9LA0KCX0NCgkNCglzZWxmLlNldHRpbmdzID0gZ091dGZpdHRlcl9TZXR0aW5ncw0KCQ0KCXNlbGYuT3V0Zml0QmFyOkluaXRpYWxpemVTZXR0aW5ncygpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkluaXRpYWxpemVHbG9iYWxTZXR0aW5ncygpDQoJZ091dGZpdHRlcl9HbG9iYWxTZXR0aW5ncyA9DQoJew0KCQlWZXJzaW9uID0gMSwNCgkJU2F2ZWRTY3JpcHRzID0ge30sDQoJfQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpBdHRhY2hPdXRmaXRNZXRob2RzKCkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQlpZiB2T3V0Zml0LlN0b3JlZEluRU0gdGhlbg0KCQkJCXNldG1ldGF0YWJsZSh2T3V0Zml0LCBPdXRmaXR0ZXIuX091dGZpdE1ldGFUYWJsZUVNKQ0KCQkJZWxzZQ0KCQkJCXNldG1ldGF0YWJsZSh2T3V0Zml0LCBPdXRmaXR0ZXIuX091dGZpdE1ldGFUYWJsZSkNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U3luY2hyb25pemVFTSgpDQoJbG9jYWwgdk51bUVNT3V0Zml0cyA9IEdldE51bUVxdWlwbWVudFNldHMoKQ0KCQ0KCS0tIE1hcmsgYWxsIHRoZSBFTSBvdXRmaXRzIGFzIHVudXNlZA0KCQ0KCWZvciB2Q2F0ZWdvcnlJRCwgdk91dGZpdHMgaW4gcGFpcnMoc2VsZi5TZXR0aW5ncy5PdXRmaXRzKSBkbw0KCQlmb3IgdkluZGV4LCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCWlmIHZPdXRmaXQuU3RvcmVkSW5FTSB0aGVuDQoJCQkJdk91dGZpdC5VbnVzZWQgPSB0cnVlDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJLS0gSWYgTnVtRXF1aXBtZW50U2V0cyBpcyB6ZXJvLCBhc3N1bWUgdGhhdCB0aGUgRU0gaXMgZmxha2luZyBvdXQNCgktLSBhbmQgc2F2ZSB0aGUgRU0tYmFzZWQgb3V0Zml0cyBzbyB0aGV5IGNhbiBiZSByZXN0b3JlZCBpZiB0aGUgRU0NCgktLSBoYXBwZW5zIHRvIHN0cmFpZ2h0ZW4gdXAgbGF0ZXINCgkNCglpZiB2TnVtRU1PdXRmaXRzID09IDAgdGhlbg0KCQlpZiBub3Qgc2VsZi5TZXR0aW5ncy5QcmVzZXJ2ZWRFTU91dGZpdHMgdGhlbg0KCQkJc2VsZi5TZXR0aW5ncy5QcmVzZXJ2ZWRFTU91dGZpdHMgPSB7fQ0KCQllbmQNCgkJDQoJCWZvciB2Q2F0ZWdvcnlJRCwgdk91dGZpdHMgaW4gcGFpcnMoc2VsZi5TZXR0aW5ncy5PdXRmaXRzKSBkbw0KCQkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQkJaWYgdk91dGZpdC5TdG9yZWRJbkVNIHRoZW4NCgkJCQkJc2VsZi5TZXR0aW5ncy5QcmVzZXJ2ZWRFTU91dGZpdHNbdk91dGZpdC5OYW1lXSA9IHZPdXRmaXQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCgktLSBTY2FuIHRoZSBFTSBvdXRmaXRzDQoJDQoJZm9yIHZJbmRleCA9IDEsIHZOdW1FTU91dGZpdHMgZG8NCgkJbG9jYWwgdk5hbWUgPSBHZXRFcXVpcG1lbnRTZXRJbmZvKHZJbmRleCkNCgkJbG9jYWwgdk91dGZpdCA9IHNlbGY6RmluZEVNT3V0Zml0QnlOYW1lKHZOYW1lKQ0KCQkNCgkJLS0gSWYgdGhlIG91dGZpdCBpcyBtaXNzaW5nLCBzZWUgaWYgaXQgY2FuIGJlIHJlc3RvcmVkIGZyb20NCgkJLS0gdGhlIHByZXNlcnZlZCBsaXN0DQoJCQ0KCQlpZiBub3Qgdk91dGZpdA0KCQlhbmQgc2VsZi5TZXR0aW5ncy5QcmVzZXJ2ZWRFTU91dGZpdHMgdGhlbg0KCQkJdk91dGZpdCA9IHNlbGYuU2V0dGluZ3MuUHJlc2VydmVkRU1PdXRmaXRzW3ZOYW1lXQ0KCQkJDQoJCQlpZiB2T3V0Zml0IHRoZW4NCgkJCQlzZXRtZXRhdGFibGUodk91dGZpdCwgT3V0Zml0dGVyLl9PdXRmaXRNZXRhVGFibGVFTSkNCgkJCQlzZWxmOkFkZE91dGZpdCh2T3V0Zml0KQ0KCQkJCQ0KCQkJCU91dGZpdHRlcjpBY3RpdmF0ZVNjcmlwdCh2T3V0Zml0KQ0KCQkJZW5kDQoJCWVuZA0KCQkNCgkJaWYgbm90IHZPdXRmaXQgdGhlbg0KCQkJdk91dGZpdCA9DQoJCQl7DQoJCQkJTmFtZSA9IHZOYW1lLA0KCQkJCVN0b3JlZEluRU0gPSB0cnVlLA0KCQkJCUl0ZW1zID0ge30sDQoJCQl9DQoJCQkNCgkJCXNldG1ldGF0YWJsZSh2T3V0Zml0LCBPdXRmaXR0ZXIuX091dGZpdE1ldGFUYWJsZUVNKQ0KCQkJDQoJCQlzZWxmOkFkZE91dGZpdCh2T3V0Zml0KQ0KCQllbHNlDQoJCQl2T3V0Zml0LlVudXNlZCA9IG5pbA0KCQllbmQNCgllbmQNCgkNCgktLSBEZWxldGUgdW51c2VkIG91dGZpdHMNCgkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJbG9jYWwgdk51bU91dGZpdHMgPSAjdk91dGZpdHMNCgkJbG9jYWwgdkluZGV4ID0gMQ0KCQkNCgkJd2hpbGUgdkluZGV4IDw9IHZOdW1PdXRmaXRzIGRvDQoJCQlsb2NhbCB2T3V0Zml0ID0gdk91dGZpdHNbdkluZGV4XQ0KCQkJDQoJCQlpZiB2T3V0Zml0LlN0b3JlZEluRU0gYW5kIHZPdXRmaXQuVW51c2VkIHRoZW4NCgkJCQlPdXRmaXR0ZXI6RGVhY3RpdmF0ZVNjcmlwdCh2T3V0Zml0KQ0KCQkJCQ0KCQkJCXRhYmxlLnJlbW92ZSh2T3V0Zml0cywgdkluZGV4KQ0KCQkJCXZOdW1PdXRmaXRzID0gdk51bU91dGZpdHMgLSAxDQoJCQllbHNlDQoJCQkJdkluZGV4ID0gdkluZGV4ICsgMQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCS0tIElmIE51bUVxdWlwbWVudFNldHMgaXMgbm90IHplcm8sIGFzc3VtZSB0aGF0IHRoZSBFTSBpcyB3b3JraW5nIGNvcnJlY3RseQ0KCS0tIGFuZCBnZXQgcmlkIG9mIGFueSBwcmVzZXJ2ZWQgb3V0Zml0cw0KCQ0KCWlmIHZOdW1FTU91dGZpdHMgPiAwIHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5QcmVzZXJ2ZWRFTU91dGZpdHMgPSBuaWwNCgllbmQNCgkNCgktLSBEb25lDQoJDQoJc2VsZi5EaXNwbGF5SXNEaXJ0eSA9IHRydWUNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6RmluZEVNT3V0Zml0QnlOYW1lKHBOYW1lKQ0KCWxvY2FsIHZMb3dlck5hbWUgPSBwTmFtZTpsb3dlcigpDQoJDQoJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciB2SW5kZXgsIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJaWYgdk91dGZpdC5TdG9yZWRJbkVNDQoJCQlhbmQgdk91dGZpdC5OYW1lOmxvd2VyKCkgPT0gdkxvd2VyTmFtZSB0aGVuDQoJCQkJcmV0dXJuIHZPdXRmaXQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SW5pdGlhbGl6ZU91dGZpdHMoKQ0KCWxvY2FsIHZPdXRmaXQsIHZJdGVtTG9jYXRpb24sIHZJdGVtDQoJbG9jYWwgdkludmVudG9yeUNhY2hlID0gT3V0Zml0dGVyOkdldEludmVudG9yeUNhY2hlKCkNCgkNCgktLSBDcmVhdGUgdGhlIG91dGZpdCBjYXRlZ29yaWVzDQoJDQoJc2VsZi5TZXR0aW5ncy5PdXRmaXRzID0ge30NCgkNCglmb3IgdkNhdGVnb3J5SW5kZXgsIHZDYXRlZ29yeUlEIGluIGlwYWlycyhPdXRmaXR0ZXIuY0NhdGVnb3J5T3JkZXIpIGRvDQoJCXNlbGYuU2V0dGluZ3MuT3V0Zml0c1t2Q2F0ZWdvcnlJRF0gPSB7fQ0KCWVuZA0KDQoJLS0gQ3JlYXRlIHRoZSBub3JtYWwgb3V0Zml0IHVzaW5nIHRoZSBjdXJyZW50DQoJLS0gaW52ZW50b3J5IGFuZCBzZXQgaXQgYXMgdGhlIGN1cnJlbnRseSBlcXVpcHBlZCBvdXRmaXQNCgkNCgl2T3V0Zml0ID0gT3V0Zml0dGVyOkdldEludmVudG9yeU91dGZpdChPdXRmaXR0ZXIuY05vcm1hbE91dGZpdCkNCglPdXRmaXR0ZXI6QWRkT3V0Zml0KHZPdXRmaXQpDQoJc2VsZi5TZXR0aW5ncy5MYXN0T3V0Zml0U3RhY2sgPSB7e05hbWUgPSBPdXRmaXR0ZXIuY05vcm1hbE91dGZpdH19DQoJT3V0Zml0dGVyLk91dGZpdFN0YWNrLk91dGZpdHMgPSB7dk91dGZpdH0NCgkNCgktLSBDcmVhdGUgdGhlIG5ha2VkIG91dGZpdA0KCQ0KCXZPdXRmaXQgPSBPdXRmaXR0ZXI6TmV3TmFrZWRPdXRmaXQoT3V0Zml0dGVyLmNOYWtlZE91dGZpdCkNCglPdXRmaXR0ZXI6QWRkT3V0Zml0KHZPdXRmaXQpDQoJDQoJLS0gR2VuZXJhdGUgdGhlIHNtYXJ0IG91dGZpdHMNCgkNCglmb3IgdlNtYXJ0SW5kZXgsIHZTbWFydE91dGZpdCBpbiBpcGFpcnMoT3V0Zml0dGVyLmNTbWFydE91dGZpdHMpIGRvDQoJCXZPdXRmaXQgPSBPdXRmaXR0ZXI6R2VuZXJhdGVTbWFydE91dGZpdCh2U21hcnRPdXRmaXQuTmFtZSwgdlNtYXJ0T3V0Zml0LlN0YXRJRCwgdkludmVudG9yeUNhY2hlKQ0KCQkNCgkJaWYgdk91dGZpdCB0aGVuDQoJCQl2T3V0Zml0LlNjcmlwdElEID0gdlNtYXJ0T3V0Zml0LlNjcmlwdElEDQoJCQlPdXRmaXR0ZXI6QWRkT3V0Zml0KHZPdXRmaXQpDQoJCWVuZA0KCWVuZA0KCQ0KCU91dGZpdHRlcjpJbml0aWFsaXplU3BlY2lhbE9jY2FzaW9uT3V0Zml0cygpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNyZWF0ZUVtcHR5U3BlY2lhbE9jY2FzaW9uT3V0Zml0KHBTY3JpcHRJRCwgcE5hbWUpDQoJdk91dGZpdCA9IE91dGZpdHRlcjpHZXRPdXRmaXRCeVNjcmlwdElEKHBTY3JpcHRJRCkNCgkNCglpZiB2T3V0Zml0IHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJdk91dGZpdCA9IE91dGZpdHRlcjpOZXdFbXB0eU91dGZpdChwTmFtZSkNCgl2T3V0Zml0LlNjcmlwdElEID0gcFNjcmlwdElEDQoJDQoJT3V0Zml0dGVyOkFkZE91dGZpdCh2T3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpJbml0aWFsaXplU3BlY2lhbE9jY2FzaW9uT3V0Zml0cygpDQoJbG9jYWwgdkludmVudG9yeUNhY2hlID0gc2VsZjpHZXRJbnZlbnRvcnlDYWNoZSgpDQoJbG9jYWwgdk91dGZpdA0KCQ0KCS0tIEZpbmQgYW4gYXJnZW50IGRhd24gdHJpbmtldCBhbmQgc2V0IHRoZSBhcmdlbnQgZGF3biBvdXRmaXQNCgktLVtbIFRha2luZyB0aGlzIG91dCBzaW5jZSBwb3N0LVRCQyBpdCdzIGxhcmdlbHkgaXJyZWxldmFudA0KCXZPdXRmaXQgPSBzZWxmOkdldE91dGZpdEJ5U2NyaXB0SUQoIkFyZ2VudERhd24iKQ0KCQ0KCWlmIG5vdCB2T3V0Zml0IHRoZW4NCgkJdk91dGZpdCA9IHNlbGY6R2VuZXJhdGVTbWFydE91dGZpdChPdXRmaXR0ZXIuY0FyZ2VudERhd25PdXRmaXQsICJBcmdlbnREYXduIiwgdkludmVudG9yeUNhY2hlLCB0cnVlKQ0KCQl2T3V0Zml0LlNjcmlwdElEID0gIkFyZ2VudERhd24iDQoJCU91dGZpdHRlcjpBZGRPdXRmaXQodk91dGZpdCkNCgllbmQNCgldXS0tDQoJLS0gRmluZCByaWRpbmcgaXRlbXMNCgkNCgl2T3V0Zml0ID0gT3V0Zml0dGVyOkdldE91dGZpdEJ5U2NyaXB0SUQoIlJpZGluZyIpDQoJDQoJaWYgbm90IHZPdXRmaXQgdGhlbg0KCQl2T3V0Zml0ID0gT3V0Zml0dGVyOkdlbmVyYXRlU21hcnRPdXRmaXQoT3V0Zml0dGVyLmNSaWRpbmdPdXRmaXQsICJNT1VOVF9TUEVFRCIsIHZJbnZlbnRvcnlDYWNoZSwgdHJ1ZSkNCgkJdk91dGZpdC5TY3JpcHRJRCA9ICJSaWRpbmciDQoJCXZPdXRmaXQuU2NyaXB0U2V0dGluZ3MgPSB7fQ0KCQl2T3V0Zml0LlNjcmlwdFNldHRpbmdzLkRpc2FibGVCRyA9IHRydWUgLS0gRGVmYXVsdCB0byBkaXNhYmxpbmcgaW4gQkdzIHNpbmNlIHRoYXQgYXBwZWFycyB0byBiZSB0aGUgbW9zdCBwb3B1bGFyDQoJCU91dGZpdHRlcjpBZGRPdXRmaXQodk91dGZpdCkNCgllbmQNCgkNCgktLSBDcmVhdGUgdGhlIEJhdHRsZWdyb3VuZHMgb3V0Zml0cw0KCQ0KCU91dGZpdHRlcjpDcmVhdGVFbXB0eVNwZWNpYWxPY2Nhc2lvbk91dGZpdCgiQmF0dGxlZ3JvdW5kIiwgT3V0Zml0dGVyLmNCYXR0bGVncm91bmRPdXRmaXQpDQoJDQoJLS0gQ3JlYXRlIHRoZSBzd2ltbWluZyBvdXRmaXQNCgkNCglPdXRmaXR0ZXI6Q3JlYXRlRW1wdHlTcGVjaWFsT2NjYXNpb25PdXRmaXQoIlN3aW1taW5nIiwgT3V0Zml0dGVyLmNTd2ltbWluZ091dGZpdCkNCgkNCgktLSBDcmVhdGUgY2xhc3Mtc3BlY2lmaWMgb3V0Zml0cw0KCQ0KCU91dGZpdHRlcjpJbml0aWFsaXplQ2xhc3NPdXRmaXRzKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SW5pdGlhbGl6ZUNsYXNzT3V0Zml0cygpDQoJbG9jYWwgdk91dGZpdHMgPSBPdXRmaXR0ZXIuY0NsYXNzU3BlY2lhbE91dGZpdHNbT3V0Zml0dGVyLlBsYXllckNsYXNzXQ0KCQ0KCWlmIG5vdCB2T3V0Zml0cyB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCWZvciB2SW5kZXgsIHZPdXRmaXRJbmZvIGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJT3V0Zml0dGVyOkNyZWF0ZUVtcHR5U3BlY2lhbE9jY2FzaW9uT3V0Zml0KHZPdXRmaXRJbmZvLlNjcmlwdElELCB2T3V0Zml0SW5mby5OYW1lKQ0KCWVuZA0KZW5kDQoNCk91dGZpdHRlci5jRGVmb3JtYXQgPQ0Kew0KCXMgPSAiKC4tKSIsDQoJZCA9ICIoLT9bJWRdKykiLA0KCWYgPSAiKC0/WyVkJS5dKykiLA0KCWcgPSAiKC0/WyVkJS5dKykiLA0KCVsiJSJdID0gIiUlIiwNCn0NCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNvbnZlcnRGb3JtYXRTdHJpbmdUb1NlYXJjaFBhdHRlcm4ocEZvcm1hdCkNCglsb2NhbCB2Rm9ybWF0ID0gcEZvcm1hdDpnc3ViKA0KCQkJIlslWyVdJS5dIiwNCgkJCWZ1bmN0aW9uIChwQ2hhcikgcmV0dXJuICIlIi4ucENoYXIgZW5kKQ0KCQ0KCXJldHVybiB2Rm9ybWF0OmdzdWIoDQoJCQkiJSVbJS0lZCUuXS0oW3NkZ2YlJV0pIiwNCgkJCXNlbGYuY0RlZm9ybWF0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpGaW5kVG9vbHRpcExpbmUocFRvb2x0aXAsIHBUZXh0LCBwUGxhaW4pDQoJbG9jYWwgdlRvb2x0aXBOYW1lID0gcFRvb2x0aXA6R2V0TmFtZSgpDQoJDQoJZm9yIHZMaW5lSW5kZXggPSAxLCAxMDAgZG8NCgkJbG9jYWwgdkxlZnRUZXh0RnJhbWUgPSBfR1t2VG9vbHRpcE5hbWUuLiJUZXh0TGVmdCIuLnZMaW5lSW5kZXhdDQoJCQ0KCQlpZiBub3QgdkxlZnRUZXh0RnJhbWUgdGhlbg0KCQkJYnJlYWsNCgkJZW5kDQoJCQ0KCQlsb2NhbCB2TGVmdFRleHQgPSB2TGVmdFRleHRGcmFtZTpHZXRUZXh0KCkNCgkJDQoJCWlmIHZMZWZ0VGV4dA0KCQlhbmQgdkxlZnRUZXh0OmZpbmQocFRleHQsIG5pbCwgcFBsYWluKSB0aGVuDQoJCQlyZXR1cm4gdkxpbmVJbmRleCwgdkxlZnRUZXh0RnJhbWUNCgkJZW5kDQoJZW5kIC0tIGZvciB2TGluZUluZGV4DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNhbkVxdWlwQmFnSXRlbShwQmFnSW5kZXgsIHBCYWdTbG90SW5kZXgpDQoJbG9jYWwgdkl0ZW1Db2RlLA0KCSAgICAgIHZJdGVtRW5jaGFudENvZGUsDQoJICAgICAgdkl0ZW1KZXdlbENvZGUxLA0KCSAgICAgIHZJdGVtSmV3ZWxDb2RlMiwNCgkgICAgICB2SXRlbUpld2VsQ29kZTMsDQoJICAgICAgdkl0ZW1KZXdlbENvZGU0LA0KCSAgICAgIHZJdGVtU3ViQ29kZSwNCgkgICAgICB2SXRlbVVuaXF1ZUlELA0KCSAgICAgIHZJdGVtVW5rbm93bkNvZGUxLA0KCSAgICAgIHZJdGVtTmFtZSwNCgkgICAgICB2SXRlbUZhbWlseU5hbWUsDQoJICAgICAgdkl0ZW1MaW5rLA0KCSAgICAgIHZJdGVtUXVhbGl0eSwNCgkgICAgICB2SXRlbUxldmVsLA0KCSAgICAgIHZJdGVtTWluTGV2ZWwsDQoJICAgICAgdkl0ZW1UeXBlLA0KCSAgICAgIHZJdGVtU3ViVHlwZSwNCgkgICAgICB2SXRlbUNvdW50LA0KCSAgICAgIHZJdGVtSW52VHlwZSA9IHNlbGY6R2V0RXh0ZW5kZWRCYWdJdGVtTGlua0luZm8ocEJhZ0luZGV4LCBwQmFnU2xvdEluZGV4KQ0KCQ0KCXJldHVybiBPdXRmaXR0ZXIuY0ludlR5cGVUb1Nsb3ROYW1lW3ZJdGVtSW52VHlwZV0gfj0gbmlsDQoJICAgICAgIGFuZCAobm90IHZJdGVtTWluTGV2ZWwgb3IgVW5pdExldmVsKCJwbGF5ZXIiKSA+PSB2SXRlbU1pbkxldmVsKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpCYWdJdGVtV2lsbEJpbmQocEJhZ0luZGV4LCBwQmFnU2xvdEluZGV4KQ0KCWxvY2FsIHZJdGVtTGluayA9IEdldENvbnRhaW5lckl0ZW1MaW5rKHBCYWdJbmRleCwgcEJhZ1Nsb3RJbmRleCkNCgkNCglpZiBub3Qgdkl0ZW1MaW5rIHRoZW4NCgkJcmV0dXJuIG5pbA0KCWVuZA0KCQ0KCU91dGZpdHRlclRvb2x0aXA6U2V0T3duZXIoT3V0Zml0dGVyRnJhbWUsICJBTkNIT1JfQk9UVE9NUklHSFQiLCAwLCAwKQ0KCU91dGZpdHRlclRvb2x0aXA6U2V0QmFnSXRlbShwQmFnSW5kZXgsIHBCYWdTbG90SW5kZXgpDQoJDQoJbG9jYWwgdklzQk9FID0gc2VsZjpGaW5kVG9vbHRpcExpbmUoT3V0Zml0dGVyVG9vbHRpcCwgSVRFTV9CSU5EX09OX0VRVUlQLCB0cnVlKSB+PSBuaWwNCgkNCglPdXRmaXR0ZXJUb29sdGlwOkhpZGUoKQ0KCQ0KCXJldHVybiB2SXNCT0UNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6QXJyYXlJc0VtcHR5KHBBcnJheSkNCglpZiBub3QgcEFycmF5IHRoZW4NCgkJcmV0dXJuIHRydWUNCgllbmQNCgkNCglyZXR1cm4gbmV4dChwQXJyYXkpID09IG5pbA0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCk91dGZpdHRlci5fTmFtZU91dGZpdERpYWxvZyA9IHt9DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fTmFtZU91dGZpdERpYWxvZzpOZXcocFBhcmVudCkNCglyZXR1cm4gT3V0Zml0dGVyOk5ldyhPdXRmaXR0ZXIuVUlFbGVtZW50c0xpYi5fTW9kYWxEaWFsb2dGcmFtZSwgcFBhcmVudCwgT3V0Zml0dGVyLl9jTmV3T3V0Zml0LCAzMTUsIDIwNykNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX05hbWVPdXRmaXREaWFsb2c6Q29uc3RydWN0KHBQYXJlbnQpDQoJc2VsZjpIaWRlKCkNCgkNCgktLXNlbGY6U2V0VG9wTGV2ZWwodHJ1ZSkNCglzZWxmOlNldEZyYW1lU3RyYXRhKCJESUFMT0ciKQ0KCXNlbGY6RW5hYmxlTW91c2UodHJ1ZSkNCgkNCgktLSBDb250cm9scw0KCQ0KCXNlbGYuSW5mb1NlY3Rpb24gPSBPdXRmaXR0ZXI6TmV3KE91dGZpdHRlci5VSUVsZW1lbnRzTGliLl9TZWN0aW9uLCBzZWxmLCBPdXRmaXR0ZXIuY0luZm8pDQoJc2VsZi5CdWlsZFNlY3Rpb24gPSBPdXRmaXR0ZXI6TmV3KE91dGZpdHRlci5VSUVsZW1lbnRzTGliLl9TZWN0aW9uLCBzZWxmLCBPdXRmaXR0ZXIuY0J1aWxkKQ0KCXNlbGYuU3RhdHNTZWN0aW9uID0gT3V0Zml0dGVyOk5ldyhPdXRmaXR0ZXIuVUlFbGVtZW50c0xpYi5fU2VjdGlvbiwgc2VsZiwgT3V0Zml0dGVyLmNTdGF0cykNCgkNCglzZWxmLk5hbWUgPSBPdXRmaXR0ZXI6TmV3KE91dGZpdHRlci5VSUVsZW1lbnRzTGliLl9FZGl0Qm94LCBzZWxmLkluZm9TZWN0aW9uLCBPdXRmaXR0ZXIuY05hbWVMYWJlbCwgNDAsIDE3MCkNCgkNCglzZWxmLlNjcmlwdE1lbnUgPSBPdXRmaXR0ZXI6TmV3KE91dGZpdHRlci5VSUVsZW1lbnRzTGliLl9Ecm9wRG93bk1lbnUsIHNlbGYuSW5mb1NlY3Rpb24sIGZ1bmN0aW9uICguLi4pIHNlbGY6U2NyaXB0TWVudUZ1bmMoLi4uKSBlbmQpDQoJc2VsZi5TY3JpcHRNZW51OlNldFRpdGxlKE91dGZpdHRlci5jQXV0b21hdGlvbkxhYmVsKQ0KCQ0KCXNlbGYuRW1wdHlPdXRmaXRDaGVja0J1dHRvbiA9IE91dGZpdHRlcjpOZXcoT3V0Zml0dGVyLlVJRWxlbWVudHNMaWIuX0NoZWNrQnV0dG9uLCBzZWxmLkJ1aWxkU2VjdGlvbiwgT3V0Zml0dGVyLmNVc2VFbXB0eU91dGZpdCwgdHJ1ZSkNCglzZWxmLkV4aXN0aW5nT3V0Zml0Q2hlY2tCdXR0b24gPSBPdXRmaXR0ZXI6TmV3KE91dGZpdHRlci5VSUVsZW1lbnRzTGliLl9DaGVja0J1dHRvbiwgc2VsZi5CdWlsZFNlY3Rpb24sIE91dGZpdHRlci5jVXNlQ3VycmVudE91dGZpdCwgdHJ1ZSkNCglzZWxmLkdlbmVyYXRlT3V0Zml0Q2hlY2tCdXR0b24gPSBPdXRmaXR0ZXI6TmV3KE91dGZpdHRlci5VSUVsZW1lbnRzTGliLl9DaGVja0J1dHRvbiwgc2VsZi5CdWlsZFNlY3Rpb24sIE91dGZpdHRlci5jQ3JlYXRlVXNpbmdUaXRsZSwgdHJ1ZSkNCgkNCglzZWxmLk11bHRpU3RhdENvbmZpZyA9IE91dGZpdHRlcjpOZXcoT3V0Zml0dGVyLl9NdWx0aVN0YXRDb25maWcsIHNlbGYuU3RhdHNTZWN0aW9uKQ0KCQ0KCXNlbGYuRXJyb3IgPSBzZWxmOkNyZWF0ZUZvbnRTdHJpbmcobmlsLCAiQVJUV09SSyIsICJHYW1lRm9udFJlZCIpDQoJDQoJLS0gTGF5b3V0DQoJDQoJc2VsZjpTZXRQb2ludCgiVE9QTEVGVCIsIE91dGZpdHRlckZyYW1lLCAiVE9QTEVGVCIsIDIwLCAtNDApDQoJDQoJLS0gSW5mbyBzZWN0aW9uDQoJDQoJc2VsZi5JbmZvU2VjdGlvbjpTZXRQb2ludCgiVE9QTEVGVCIsIHNlbGYsICJUT1BMRUZUIiwgMjAsIC0yNSkNCglzZWxmLkluZm9TZWN0aW9uOlNldFdpZHRoKDI5NSkNCglzZWxmLkluZm9TZWN0aW9uOlNldEhlaWdodCgxMDApDQoJDQoJc2VsZi5OYW1lOlNldFBvaW50KCJUT1BMRUZUIiwgc2VsZi5JbmZvU2VjdGlvbiwgIlRPUExFRlQiLCAxMDAsIC0yMCkNCgkNCglzZWxmLlNjcmlwdE1lbnU6U2V0UG9pbnQoIlRPUExFRlQiLCBzZWxmLk5hbWUsICJUT1BMRUZUIiwgMCwgLTM1KQ0KCXNlbGYuU2NyaXB0TWVudTpTZXRXaWR0aCgxNzApDQoJDQoJLS0gQnVpbGQgc2VjdGlvbg0KCQ0KCXNlbGYuQnVpbGRTZWN0aW9uOlNldFBvaW50KCJUT1BMRUZUIiwgc2VsZi5JbmZvU2VjdGlvbiwgIlRPUFJJR0hUIiwgMTAsIDApDQoJc2VsZi5CdWlsZFNlY3Rpb246U2V0UG9pbnQoIkJPVFRPTSIsIHNlbGYuSW5mb1NlY3Rpb24sICJCT1RUT00iKQ0KCXNlbGYuQnVpbGRTZWN0aW9uOlNldFBvaW50KCJSSUdIVCIsIHNlbGYsICJSSUdIVCIsIC0yMCwgMCkNCgkNCglzZWxmLkVtcHR5T3V0Zml0Q2hlY2tCdXR0b246U2V0UG9pbnQoIlRPUExFRlQiLCBzZWxmLkJ1aWxkU2VjdGlvbiwgIlRPUExFRlQiLCAzMCwgLTIzKQ0KCXNlbGYuRXhpc3RpbmdPdXRmaXRDaGVja0J1dHRvbjpTZXRQb2ludCgiVE9QTEVGVCIsIHNlbGYuRW1wdHlPdXRmaXRDaGVja0J1dHRvbiwgIlRPUExFRlQiLCAwLCAtMjUpDQoJc2VsZi5HZW5lcmF0ZU91dGZpdENoZWNrQnV0dG9uOlNldFBvaW50KCJUT1BMRUZUIiwgc2VsZi5FeGlzdGluZ091dGZpdENoZWNrQnV0dG9uLCAiVE9QTEVGVCIsIDAsIC0yNSkNCgkNCgktLSBTdGF0cyBzZWN0aW9uDQoJDQoJc2VsZi5TdGF0c1NlY3Rpb246U2V0UG9pbnQoIlRPUExFRlQiLCBzZWxmLkluZm9TZWN0aW9uLCAiQk9UVE9NTEVGVCIsIDAsIC0xMCkNCglzZWxmLlN0YXRzU2VjdGlvbjpTZXRQb2ludCgiUklHSFQiLCBzZWxmLkJ1aWxkU2VjdGlvbiwgIlJJR0hUIiwgMCwgMCkNCgkNCglzZWxmLk11bHRpU3RhdENvbmZpZzpTZXRQb2ludCgiVE9QTEVGVCIsIHNlbGYuU3RhdHNTZWN0aW9uLCAiVE9QTEVGVCIsIDI1LCAtMTUpDQoJDQoJLS0gRXJyb3IgbWVzc2FnZQ0KCQ0KCXNlbGYuRXJyb3I6SGlkZSgpDQoJc2VsZi5FcnJvcjpTZXRXaWR0aCgyODApDQoJc2VsZi5FcnJvcjpTZXRQb2ludCgiUklHSFQiLCBzZWxmLkRvbmVCdXR0b24sICJMRUZUIiwgLTMwLCAwKQ0KCQ0KCS0tIEV2ZW50cw0KCQ0KCXNlbGY6U2V0U2NyaXB0KCJPblNob3ciLCBmdW5jdGlvbiAoc2VsZikgT3V0Zml0dGVyLlVJRWxlbWVudHNMaWI6QmVnaW5EaWFsb2coc2VsZikgZW5kKQ0KCXNlbGY6U2V0U2NyaXB0KCJPbkhpZGUiLCBmdW5jdGlvbiAoc2VsZikgT3V0Zml0dGVyLlVJRWxlbWVudHNMaWI6RW5kRGlhbG9nKHNlbGYpIGVuZCkNCgkNCglzZWxmLk5hbWU6U2V0U2NyaXB0KCJPbkVudGVyUHJlc3NlZCIsIGZ1bmN0aW9uIChzZWxmKSBzZWxmOkRvbmUoKSBlbmQpDQoJc2VsZi5OYW1lOlNldFNjcmlwdCgiT25UZXh0Q2hhbmdlZCIsIGZ1bmN0aW9uICgpIHNlbGY6VXBkYXRlKCkgZW5kKQ0KCQ0KCXNlbGYuU2NyaXB0TWVudS5JdGVtQ2xpY2tlZEZ1bmMgPSBmdW5jdGlvbiAocE1lbnUsIHBWYWx1ZSkNCgkJc2VsZjpQcmVzZXRTY3JpcHRDaGFuZ2VkKHBNZW51LCBwVmFsdWUpDQoJZW5kDQoJDQoJc2VsZi5FbXB0eU91dGZpdENoZWNrQnV0dG9uOlNldFNjcmlwdCgiT25DbGljayIsIGZ1bmN0aW9uIChwQ2hlY2tCdXR0b24pDQoJCXNlbGYuRW1wdHlPdXRmaXRDaGVja0J1dHRvbjpTZXRDaGVja2VkKHRydWUpDQoJCXNlbGYuRXhpc3RpbmdPdXRmaXRDaGVja0J1dHRvbjpTZXRDaGVja2VkKGZhbHNlKQ0KCQlzZWxmLkdlbmVyYXRlT3V0Zml0Q2hlY2tCdXR0b246U2V0Q2hlY2tlZChmYWxzZSkNCgkJc2VsZi5NdWx0aVN0YXRDb25maWc6SGlkZSgpDQoJCXNlbGY6QWRqdXN0U2l6ZSgpDQoJZW5kKQ0KCQ0KCXNlbGYuRXhpc3RpbmdPdXRmaXRDaGVja0J1dHRvbjpTZXRTY3JpcHQoIk9uQ2xpY2siLCBmdW5jdGlvbiAocENoZWNrQnV0dG9uKQ0KCQlzZWxmLkVtcHR5T3V0Zml0Q2hlY2tCdXR0b246U2V0Q2hlY2tlZChmYWxzZSkNCgkJc2VsZi5FeGlzdGluZ091dGZpdENoZWNrQnV0dG9uOlNldENoZWNrZWQodHJ1ZSkNCgkJc2VsZi5HZW5lcmF0ZU91dGZpdENoZWNrQnV0dG9uOlNldENoZWNrZWQoZmFsc2UpDQoJCXNlbGYuTXVsdGlTdGF0Q29uZmlnOkhpZGUoKQ0KCQlzZWxmOkFkanVzdFNpemUoKQ0KCWVuZCkNCgkNCglzZWxmLkdlbmVyYXRlT3V0Zml0Q2hlY2tCdXR0b246U2V0U2NyaXB0KCJPbkNsaWNrIiwgZnVuY3Rpb24gKHBDaGVja0J1dHRvbikNCgkJc2VsZi5FbXB0eU91dGZpdENoZWNrQnV0dG9uOlNldENoZWNrZWQoZmFsc2UpDQoJCXNlbGYuRXhpc3RpbmdPdXRmaXRDaGVja0J1dHRvbjpTZXRDaGVja2VkKGZhbHNlKQ0KCQlzZWxmLkdlbmVyYXRlT3V0Zml0Q2hlY2tCdXR0b246U2V0Q2hlY2tlZCh0cnVlKQ0KCQlzZWxmLk11bHRpU3RhdENvbmZpZzpTaG93KCkNCgkJc2VsZjpBZGp1c3RTaXplKCkNCgllbmQpDQoJDQoJc2VsZi5NdWx0aVN0YXRDb25maWcuT25OdW1MaW5lc0NoYW5nZWQgPSBmdW5jdGlvbiAocE11bHRpU3RhdENvbmZpZywgcE51bUxpbmVzKQ0KCQlzZWxmOkFkanVzdFNpemUoKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fTmFtZU91dGZpdERpYWxvZzpPcGVuKHBPdXRmaXQpDQoJc2VsZi5PdXRmaXRUb1JlbmFtZSA9IHBPdXRmaXQNCgkNCglpZiBzZWxmLk91dGZpdFRvUmVuYW1lIHRoZW4NCgkJc2VsZi5UaXRsZTpTZXRUZXh0KE91dGZpdHRlci5jUmVuYW1lT3V0Zml0KQ0KCQkNCgkJc2VsZi5OYW1lOlNldFRleHQoc2VsZi5PdXRmaXRUb1JlbmFtZS5OYW1lKQ0KCQkNCgllbHNlDQoJCXNlbGYuVGl0bGU6U2V0VGV4dChPdXRmaXR0ZXIuY05ld091dGZpdCkNCgkJDQoJCXNlbGYuTmFtZTpTZXRUZXh0KCIiKQ0KCQkNCgkJc2VsZi5TY3JpcHRNZW51OlNldFNlbGVjdGVkVmFsdWUoIk5PTkUiKQ0KCQkNCgkJc2VsZi5FbXB0eU91dGZpdENoZWNrQnV0dG9uOlNldENoZWNrZWQoZmFsc2UpDQoJCXNlbGYuRXhpc3RpbmdPdXRmaXRDaGVja0J1dHRvbjpTZXRDaGVja2VkKHRydWUpDQoJCXNlbGYuR2VuZXJhdGVPdXRmaXRDaGVja0J1dHRvbjpTZXRDaGVja2VkKGZhbHNlKQ0KCQkNCgkJc2VsZi5NdWx0aVN0YXRDb25maWc6U2V0Q29uZmlnKG5pbCkNCgkJc2VsZi5NdWx0aVN0YXRDb25maWc6SGlkZSgpDQoJZW5kDQoJDQoJc2VsZjpBZGp1c3RTaXplKCkNCglzZWxmOlNob3coKQ0KCXNlbGYuTmFtZTpTZXRGb2N1cygpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9OYW1lT3V0Zml0RGlhbG9nOkFkanVzdFNpemUoKQ0KCWxvY2FsIHZIZWlnaHQgPSA3OA0KCWxvY2FsIHZXaWR0aCA9IDMzNQ0KCQ0KCWlmIG5vdCBzZWxmLk91dGZpdFRvUmVuYW1lIHRoZW4NCgkJc2VsZi5TY3JpcHRNZW51OlNob3coKQ0KCQlzZWxmLkluZm9TZWN0aW9uOlNldEhlaWdodCgxMDApDQoJCQ0KCQl2SGVpZ2h0ID0gdkhlaWdodCArIDEwMA0KCQkNCgkJdldpZHRoID0gdldpZHRoICsgMjAwDQoJCQ0KCQlpZiBzZWxmLk11bHRpU3RhdENvbmZpZzpJc1Nob3duKCkgdGhlbg0KCQkJbG9jYWwgdlN0YXRDb25maWdIZWlnaHQgPSBzZWxmLk11bHRpU3RhdENvbmZpZzpHZXRIZWlnaHQoKQ0KCQkJDQoJCQl2SGVpZ2h0ID0gdkhlaWdodCArIHZTdGF0Q29uZmlnSGVpZ2h0ICsgMzMNCgkJCQ0KCQkJbG9jYWwgdlN0YXRXaWR0aCA9IDIwICsgc2VsZi5NdWx0aVN0YXRDb25maWc6R2V0V2lkdGgoKSArIDIwDQoJCQkNCgkJCWlmIHZTdGF0V2lkdGggPiB2V2lkdGggdGhlbg0KCQkJCXZXaWR0aCA9IHZTdGF0V2lkdGgNCgkJCWVuZA0KCQkJDQoJCQlzZWxmLlN0YXRzU2VjdGlvbjpTZXRIZWlnaHQodlN0YXRDb25maWdIZWlnaHQgKyAyNSkNCgkJCXNlbGYuU3RhdHNTZWN0aW9uOlNob3coKQ0KCQllbHNlDQoJCQlzZWxmLlN0YXRzU2VjdGlvbjpIaWRlKCkNCgkJZW5kDQoJCQ0KCQlzZWxmLkJ1aWxkU2VjdGlvbjpTaG93KCkNCgllbHNlDQoJCXNlbGYuU2NyaXB0TWVudTpIaWRlKCkNCgkJc2VsZi5JbmZvU2VjdGlvbjpTZXRIZWlnaHQoNjUpDQoJCQ0KCQl2SGVpZ2h0ID0gdkhlaWdodCArIDY1DQoJCQ0KCQlzZWxmLkJ1aWxkU2VjdGlvbjpIaWRlKCkNCgkJc2VsZi5TdGF0c1NlY3Rpb246SGlkZSgpDQoJZW5kDQoJDQoJc2VsZjpTZXRXaWR0aCh2V2lkdGgpDQoJc2VsZjpTZXRIZWlnaHQodkhlaWdodCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX05hbWVPdXRmaXREaWFsb2c6U2NyaXB0TWVudUZ1bmMocE1lbnUpDQoJaWYgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCA9PSAyIHRoZW4NCgkJZm9yIF8sIHZQcmVzZXRTY3JpcHQgaW4gaXBhaXJzKE91dGZpdHRlci5QcmVzZXRTY3JpcHRzKSBkbw0KCQkJaWYgbm90IHZQcmVzZXRTY3JpcHQuQ2xhc3MNCgkJCW9yIHZQcmVzZXRTY3JpcHQuQ2xhc3MgPT0gT3V0Zml0dGVyLlBsYXllckNsYXNzIHRoZW4NCgkJCQlsb2NhbCB2Q2F0ZWdvcnkgPSB2UHJlc2V0U2NyaXB0LkNhdGVnb3J5IG9yIHZQcmVzZXRTY3JpcHQuQ2xhc3Mgb3IgIkdFTkVSQUwiDQoJCQkJDQoJCQkJaWYgdkNhdGVnb3J5ID09IFVJRFJPUERPV05NRU5VX01FTlVfVkFMVUUgdGhlbg0KCQkJCQlwTWVudTpBZGROb3JtYWxJdGVtKHZQcmVzZXRTY3JpcHQuTmFtZSwgdlByZXNldFNjcmlwdC5JRCkNCgkJCQkJLS0gVE9ETzogdG9vbHRpcFRleHQgPSBPdXRmaXR0ZXI6R2V0U2NyaXB0RGVzY3JpcHRpb24odlByZXNldFNjcmlwdC5TY3JpcHQpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZWxzZQ0KCQlsb2NhbCB2Q2F0ZWdvcnkNCgkJDQoJCXBNZW51OkFkZE5vcm1hbEl0ZW0oT3V0Zml0dGVyLmNOb1NjcmlwdCwgIk5PTkUiKQ0KCQkNCgkJZm9yIF8sIHZQcmVzZXRTY3JpcHQgaW4gaXBhaXJzKE91dGZpdHRlci5QcmVzZXRTY3JpcHRzKSBkbw0KCQkJaWYgbm90IHZQcmVzZXRTY3JpcHQuQ2xhc3MNCgkJCW9yIHZQcmVzZXRTY3JpcHQuQ2xhc3MgPT0gT3V0Zml0dGVyLlBsYXllckNsYXNzIHRoZW4NCgkJCQktLSBTdGFydCBhIG5ldyBjYXRlZ29yeSBpZiBpdCdzIGNoYW5naW5nDQoJCQkJDQoJCQkJbG9jYWwgdk5ld0NhdGVnb3J5ID0gdlByZXNldFNjcmlwdC5DYXRlZ29yeSBvciB2UHJlc2V0U2NyaXB0LkNsYXNzIG9yICJHRU5FUkFMIg0KCQkJCQ0KCQkJCWlmIHZDYXRlZ29yeSB+PSB2TmV3Q2F0ZWdvcnkgdGhlbg0KCQkJCQl2Q2F0ZWdvcnkgPSB2TmV3Q2F0ZWdvcnkNCgkJCQkJcE1lbnU6QWRkQ2hpbGRNZW51KA0KCQkJCQkJT3V0Zml0dGVyLmNTY3JpcHRDYXRlZ29yeU5hbWVbdkNhdGVnb3J5XSBvciBPdXRmaXR0ZXIuY0NsYXNzTmFtZVt2Q2F0ZWdvcnldLA0KCQkJCQkJdkNhdGVnb3J5KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fTmFtZU91dGZpdERpYWxvZzpEb25lKCkNCglsb2NhbCB2TmFtZSA9IHNlbGYuTmFtZTpHZXRUZXh0KCkNCgkNCglpZiB2TmFtZQ0KCWFuZCB2TmFtZSB+PSAiIiB0aGVuDQoJCWlmIHNlbGYuT3V0Zml0VG9SZW5hbWUgdGhlbg0KCQkJbG9jYWwgdldlYXJpbmdPdXRmaXQgPSBPdXRmaXR0ZXI6V2VhcmluZ091dGZpdChzZWxmLk91dGZpdFRvUmVuYW1lKQ0KCQkJDQoJCQlpZiB2V2VhcmluZ091dGZpdCB0aGVuDQoJCQkJT3V0Zml0dGVyOkRpc3BhdGNoT3V0Zml0RXZlbnQoIlVOV0VBUl9PVVRGSVQiLCBzZWxmLk91dGZpdFRvUmVuYW1lLk5hbWUsIHNlbGYuT3V0Zml0VG9SZW5hbWUpDQoJCQllbmQNCgkJCQ0KCQkJc2VsZi5PdXRmaXRUb1JlbmFtZTpTZXROYW1lKHZOYW1lKQ0KCQkJT3V0Zml0dGVyLkRpc3BsYXlJc0RpcnR5ID0gdHJ1ZQ0KDQoJCQlpZiB2V2VhcmluZ091dGZpdCB0aGVuDQoJCQkJT3V0Zml0dGVyOkRpc3BhdGNoT3V0Zml0RXZlbnQoIldFQVJfT1VURklUIiwgc2VsZi5PdXRmaXRUb1JlbmFtZS5OYW1lLCBzZWxmLk91dGZpdFRvUmVuYW1lKQ0KCQkJZW5kDQoJCWVsc2UNCgkJCS0tIENyZWF0ZSB0aGUgbmV3IG91dGlmdA0KCQkJDQoJCQlsb2NhbCB2U2NyaXB0SUQgPSBzZWxmLlNjcmlwdE1lbnU6R2V0U2VsZWN0ZWRWYWx1ZSgpDQoJCQkNCgkJCWxvY2FsIHZPdXRmaXQNCgkJCQ0KCQkJaWYgc2VsZi5FbXB0eU91dGZpdENoZWNrQnV0dG9uOkdldENoZWNrZWQoKSB0aGVuDQoJCQkJdk91dGZpdCA9IE91dGZpdHRlcjpOZXdFbXB0eU91dGZpdCh2TmFtZSkNCgkJCWVsc2VpZiBzZWxmLkV4aXN0aW5nT3V0Zml0Q2hlY2tCdXR0b246R2V0Q2hlY2tlZCgpIHRoZW4NCgkJCQl2T3V0Zml0ID0gT3V0Zml0dGVyOkdldEludmVudG9yeU91dGZpdCh2TmFtZSkNCgkJCWVsc2UNCgkJCQlsb2NhbCB2U3RhdENvbmZpZyA9IHNlbGYuTXVsdGlTdGF0Q29uZmlnOkdldENvbmZpZygpDQoJCQkJDQoJCQkJdk91dGZpdCA9IE91dGZpdHRlcjpHZW5lcmF0ZVNtYXJ0T3V0Zml0KHZOYW1lLCB2U3RhdENvbmZpZywgT3V0Zml0dGVyOkdldEludmVudG9yeUNhY2hlKCksIGZhbHNlLCBmdW5jdGlvbiAocE91dGZpdCkNCgkJCQkJcE91dGZpdC5TdGF0Q29uZmlnID0gdlN0YXRDb25maWcNCgkJCQkJc2VsZjpBZGRPdXRmaXQocE91dGZpdCwgdlNjcmlwdElEKQ0KCQkJCWVuZCkNCgkJCQkNCgkJCQlzZWxmOkhpZGUoKQ0KCQkJCXJldHVybg0KCQkJZW5kDQoJCQkNCgkJCWlmIG5vdCB2T3V0Zml0IHRoZW4NCgkJCQl2T3V0Zml0ID0gT3V0Zml0dGVyOk5ld0VtcHR5T3V0Zml0KHZOYW1lKQ0KCQkJZW5kDQoJCQkNCgkJCXNlbGY6QWRkT3V0Zml0KHZPdXRmaXQsIHZTY3JpcHRJRCkNCgkJZW5kDQoJZW5kDQoJDQoJc2VsZjpIaWRlKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX05hbWVPdXRmaXREaWFsb2c6UHJlc2V0U2NyaXB0Q2hhbmdlZChwTWVudSwgcFZhbHVlKQ0KCXBNZW51OlNldFNlbGVjdGVkVmFsdWUocFZhbHVlKQ0KCQ0KCS0tIFNldCB0aGUgZGVmYXVsdCBuYW1lIGlmIHRoZXJlIGlzbid0IG9uZSBvciBpdCdzIHRoZSBwcmV2aW91cyBkZWZhdWx0DQoJDQoJbG9jYWwgdk5hbWUgPSBzZWxmLk5hbWU6R2V0VGV4dCgpDQoJDQoJaWYgcFZhbHVlIH49ICJOT05FIg0KCWFuZCAobm90IHZOYW1lIG9yIHZOYW1lID09ICIiIG9yIHZOYW1lID09IHNlbGYuUHJldmlvdXNEZWZhdWx0TmFtZSkgdGhlbg0KCQl2TmFtZSA9IE91dGZpdHRlcjpHZXRQcmVzZXRTY3JpcHRCeUlEKHBWYWx1ZSkuTmFtZQ0KCQkNCgkJc2VsZi5OYW1lOlNldFRleHQodk5hbWUpDQoJCXNlbGYuUHJldmlvdXNEZWZhdWx0TmFtZSA9IHZOYW1lDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9OYW1lT3V0Zml0RGlhbG9nOkNoZWNrRm9yU3RhdE91dGZpdChwTWVudSwgcFZhbHVlKQ0KCXNlbGY6VXBkYXRlKHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9OYW1lT3V0Zml0RGlhbG9nOkNhbmNlbCgpDQoJc2VsZjpIaWRlKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX05hbWVPdXRmaXREaWFsb2c6VXBkYXRlKHBDaGVja0ZvclN0YXRPdXRmaXQpDQoJbG9jYWwgdkVuYWJsZURvbmVCdXR0b24gPSB0cnVlDQoJbG9jYWwgdkVycm9yTWVzc2FnZSA9IG5pbA0KCQ0KCS0tIElmIHRoZXJlJ3Mgbm8gbmFtZSBlbnRlcmVkIHRoZW4gZGlzYWJsZSB0aGUgb2theSBidXR0b24NCgkNCglsb2NhbCB2TmFtZSA9IHNlbGYuTmFtZTpHZXRUZXh0KCkNCgkNCglpZiBub3Qgdk5hbWUNCglvciB2TmFtZSA9PSAiIiB0aGVuDQoJCXZFbmFibGVEb25lQnV0dG9uID0gZmFsc2UNCgllbHNlDQoJCWxvY2FsIHZPdXRmaXQgPSBPdXRmaXR0ZXI6RmluZE91dGZpdEJ5TmFtZSh2TmFtZSkNCgkJDQoJCWlmIHZPdXRmaXQNCgkJYW5kIHZPdXRmaXQgfj0gc2VsZi5PdXRmaXRUb1JlbmFtZSB0aGVuDQoJCQl2RXJyb3JNZXNzYWdlID0gT3V0Zml0dGVyLmNOYW1lQWxyZWFkeVVzZWRFcnJvcg0KCQkJdkVuYWJsZURvbmVCdXR0b24gPSBmYWxzZQ0KCQllbmQNCgllbmQNCgkNCgktLSANCgkNCglpZiBub3QgdkVycm9yTWVzc2FnZQ0KCWFuZCBwQ2hlY2tGb3JTdGF0T3V0Zml0IHRoZW4NCgktLVtbDQoJCWxvY2FsIHZTdGF0ID0gc2VsZi5PcHRpbWl6ZU1lbnU6R2V0U2VsZWN0ZWRWYWx1ZSgpDQoJCQ0KCQlpZiB2U3RhdA0KCQlhbmQgdlN0YXQgfj0gMA0KCQlhbmQgdlN0YXQgfj0gIkVNUFRZIg0KCQlhbmQgbm90IHZTdGF0LkNvbXBsZXggdGhlbiAtLSBEb24ndCBhdHRlbXB0IHRvIHRlc3QgZm9yIGl0ZXJhdGl2ZSBvdXRmaXRzDQoJCQlsb2NhbCB2T3V0Zml0ID0gT3V0Zml0dGVyOkdlbmVyYXRlU21hcnRPdXRmaXQoInRlbXAgb3V0Zml0IiwgdlN0YXQsIE91dGZpdHRlcjpHZXRJbnZlbnRvcnlDYWNoZSgpKQ0KCQkJDQoJCQlpZiBub3Qgdk91dGZpdA0KCQkJb3Igdk91dGZpdDpJc0VtcHR5KCkgdGhlbg0KCQkJCXZFcnJvck1lc3NhZ2UgPSBPdXRmaXR0ZXIuY05vSXRlbXNXaXRoU3RhdEVycm9yDQoJCQllbmQNCgkJZW5kDQoJXV0NCgllbmQNCgkNCglpZiB2RXJyb3JNZXNzYWdlIHRoZW4NCgkJc2VsZi5FcnJvcjpTZXRUZXh0KHZFcnJvck1lc3NhZ2UpDQoJCXNlbGYuRXJyb3I6U2hvdygpDQoJZWxzZQ0KCQlzZWxmLkVycm9yOkhpZGUoKQ0KCWVuZA0KCQ0KCXNlbGYuRG9uZUJ1dHRvbjpTZXRFbmFibGVkKHZFbmFibGVEb25lQnV0dG9uKQ0KCQ0KCXNlbGY6QWRqdXN0U2l6ZSgpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9OYW1lT3V0Zml0RGlhbG9nOkFkZE91dGZpdChwT3V0Zml0LCBwU2NyaXB0SUQpDQoJLS0gQWRkIHRoZSBvdXRmaXQNCg0KCWxvY2FsIHZDYXRlZ29yeUlEID0gT3V0Zml0dGVyOkFkZE91dGZpdChwT3V0Zml0KQ0KDQoJLS0gU2V0IHRoZSBzY3JpcHQNCg0KCWlmIHBTY3JpcHRJRCBhbmQgcFNjcmlwdElEIH49ICJOT05FIiB0aGVuDQoJCU91dGZpdHRlcjpTZXRTY3JpcHRJRChwT3V0Zml0LCBwU2NyaXB0SUQpDQoJZW5kDQoNCgktLSBXZWFyIHRoZSBvdXRmaXQNCg0KCU91dGZpdHRlcjpXZWFyT3V0Zml0KHBPdXRmaXQpDQoJDQoJT3V0Zml0dGVyOlVwZGF0ZSh0cnVlKQ0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCk91dGZpdHRlci5fUmVidWlsZE91dGZpdERpYWxvZyA9IHt9DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fUmVidWlsZE91dGZpdERpYWxvZzpOZXcocFBhcmVudCkNCglyZXR1cm4gT3V0Zml0dGVyOk5ldyhPdXRmaXR0ZXIuVUlFbGVtZW50c0xpYi5fTW9kYWxEaWFsb2dGcmFtZSwgcFBhcmVudCwgT3V0Zml0dGVyLmNSZWJ1aWxkLCAzMTUsIDIwNykNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX1JlYnVpbGRPdXRmaXREaWFsb2c6Q29uc3RydWN0KHBQYXJlbnQpDQoJc2VsZjpIaWRlKCkNCgkNCgktLXNlbGY6U2V0VG9wTGV2ZWwodHJ1ZSkNCglzZWxmOlNldEZyYW1lU3RyYXRhKCJESUFMT0ciKQ0KCXNlbGY6RW5hYmxlTW91c2UodHJ1ZSkNCgkNCgktLSBDb250cm9scw0KCQ0KCXNlbGYuU3RhdHNTZWN0aW9uID0gT3V0Zml0dGVyOk5ldyhPdXRmaXR0ZXIuVUlFbGVtZW50c0xpYi5fU2VjdGlvbiwgc2VsZiwgT3V0Zml0dGVyLmNTdGF0cykNCglzZWxmLk11bHRpU3RhdENvbmZpZyA9IE91dGZpdHRlcjpOZXcoT3V0Zml0dGVyLl9NdWx0aVN0YXRDb25maWcsIHNlbGYuU3RhdHNTZWN0aW9uKQ0KCQ0KCS0tIExheW91dA0KCQ0KCXNlbGY6U2V0UG9pbnQoIlRPUExFRlQiLCBPdXRmaXR0ZXJGcmFtZSwgIlRPUExFRlQiLCAyMCwgLTQwKQ0KCQ0KCS0tIFN0YXRzIHNlY3Rpb24NCgkNCglzZWxmLlN0YXRzU2VjdGlvbjpTZXRQb2ludCgiVE9QTEVGVCIsIHNlbGYsICJUT1BMRUZUIiwgMjAsIC0yNSkNCglzZWxmLlN0YXRzU2VjdGlvbjpTZXRQb2ludCgiUklHSFQiLCBzZWxmLCAiUklHSFQiLCAtMjAsIDApDQoJDQoJc2VsZi5NdWx0aVN0YXRDb25maWc6U2V0UG9pbnQoIlRPUExFRlQiLCBzZWxmLlN0YXRzU2VjdGlvbiwgIlRPUExFRlQiLCAyNSwgLTE1KQ0KCQ0KCS0tIEV2ZW50cw0KCQ0KCXNlbGY6U2V0U2NyaXB0KCJPblNob3ciLCBmdW5jdGlvbiAoc2VsZikgT3V0Zml0dGVyLlVJRWxlbWVudHNMaWI6QmVnaW5EaWFsb2coc2VsZikgZW5kKQ0KCXNlbGY6U2V0U2NyaXB0KCJPbkhpZGUiLCBmdW5jdGlvbiAoc2VsZikgT3V0Zml0dGVyLlVJRWxlbWVudHNMaWI6RW5kRGlhbG9nKHNlbGYpIGVuZCkNCgkNCglzZWxmLk11bHRpU3RhdENvbmZpZy5Pbk51bUxpbmVzQ2hhbmdlZCA9IGZ1bmN0aW9uIChwTXVsdGlTdGF0Q29uZmlnLCBwTnVtTGluZXMpDQoJCXNlbGY6QWRqdXN0U2l6ZSgpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9SZWJ1aWxkT3V0Zml0RGlhbG9nOk9wZW4ocE91dGZpdCkNCglzZWxmLk91dGZpdCA9IHBPdXRmaXQNCgkNCglpZiBzZWxmLk91dGZpdC5TdGF0SUQNCglhbmQgbm90IHNlbGYuT3V0Zml0LlN0YXRDb25maWcgdGhlbg0KCQlzZWxmLk91dGZpdC5TdGF0Q29uZmlnID0ge3tTdGF0SUQgPSBzZWxmLk91dGZpdC5TdGF0SUR9fQ0KCWVuZA0KCQ0KCXNlbGYuTXVsdGlTdGF0Q29uZmlnOlNldENvbmZpZyhzZWxmLk91dGZpdC5TdGF0Q29uZmlnKQ0KCQ0KCXNlbGY6QWRqdXN0U2l6ZSgpDQoJc2VsZjpTaG93KCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX1JlYnVpbGRPdXRmaXREaWFsb2c6QWRqdXN0U2l6ZSgpDQoJbG9jYWwgdlN0YXRDb25maWdIZWlnaHQgPSBzZWxmLk11bHRpU3RhdENvbmZpZzpHZXRIZWlnaHQoKQ0KCQ0KCWxvY2FsIHZIZWlnaHQgPSA1MSArIHZTdGF0Q29uZmlnSGVpZ2h0ICsgNDgNCglsb2NhbCB2V2lkdGggPSA0MCArIHNlbGYuTXVsdGlTdGF0Q29uZmlnOkdldFdpZHRoKCkgKyA0MA0KCQ0KCXNlbGYuU3RhdHNTZWN0aW9uOlNldEhlaWdodCh2U3RhdENvbmZpZ0hlaWdodCArIDI1KQ0KCQkJDQoJc2VsZjpTZXRXaWR0aCh2V2lkdGgpDQoJc2VsZjpTZXRIZWlnaHQodkhlaWdodCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX1JlYnVpbGRPdXRmaXREaWFsb2c6RG9uZSgpDQoJc2VsZi5PdXRmaXQuU3RhdENvbmZpZyA9IHNlbGYuTXVsdGlTdGF0Q29uZmlnOkdldENvbmZpZygpDQoJDQoJc2VsZjpIaWRlKCkNCgkNCglPdXRmaXR0ZXI6UmVidWlsZE91dGZpdChzZWxmLk91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX1JlYnVpbGRPdXRmaXREaWFsb2c6Q2FuY2VsKCkNCglzZWxmOkhpZGUoKQ0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTZXRCdXR0b25FbmFibGUocEJ1dHRvbiwgcEVuYWJsZWQpDQoJaWYgcEVuYWJsZWQgdGhlbg0KCQlwQnV0dG9uOkVuYWJsZSgpDQoJCXBCdXR0b246U2V0QWxwaGEoMS4wKQ0KCQlwQnV0dG9uOkVuYWJsZU1vdXNlKHRydWUpDQoJCS0tX0dbcEJ1dHRvbjpHZXROYW1lKCkuLiJUZXh0Il06U2V0QWxwaGEoMS4wKQ0KCWVsc2UNCgkJcEJ1dHRvbjpEaXNhYmxlKCkNCgkJcEJ1dHRvbjpTZXRBbHBoYSgwLjcpDQoJCXBCdXR0b246RW5hYmxlTW91c2UoZmFsc2UpDQoJCS0tX0dbcEJ1dHRvbjpHZXROYW1lKCkuLiJUZXh0Il06U2V0QWxwaGEoMC43KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXRPdXRmaXRGcm9tTGlzdEl0ZW0ocEl0ZW0pDQoJaWYgcEl0ZW0uaXNDYXRlZ29yeSB0aGVuDQoJCXJldHVybiBuaWwNCgllbmQNCgkNCglpZiBub3Qgc2VsZi5TZXR0aW5ncy5PdXRmaXRzIHRoZW4NCgkJcmV0dXJuIG5pbA0KCWVuZA0KCQ0KCWxvY2FsIHZPdXRmaXRzID0gc2VsZi5TZXR0aW5ncy5PdXRmaXRzW3BJdGVtLmNhdGVnb3J5SURdDQoJDQoJaWYgbm90IHZPdXRmaXRzIHRoZW4NCgkJLS0gRXJyb3I6IG91dGZpdCBjYXRlZ29yeSBub3QgZm91bmQNCgkJcmV0dXJuIG5pbA0KCWVuZA0KCQ0KCXJldHVybiB2T3V0Zml0c1twSXRlbS5vdXRmaXRJbmRleF0NCmVuZA0KDQpPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnMgPSB7fQ0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6REVMRVRFKHBPdXRmaXQpDQoJc2VsZjpBc2tEZWxldGVPdXRmaXQocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6UkVOQU1FKHBPdXRmaXQpDQoJc2VsZi5OYW1lT3V0Zml0RGlhbG9nOk9wZW4ocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6U0NSSVBUX1NFVFRJTkdTKHBPdXRmaXQpDQoJT3V0Zml0dGVyRWRpdFNjcmlwdERpYWxvZzpPcGVuKHBPdXRmaXQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdE1lbnVBY3Rpb25zOkVESVRfU0NSSVBUKHBPdXRmaXQpDQoJaWYgcE91dGZpdC5TY3JpcHRJRCA9PSBuaWwgYW5kIHBPdXRmaXQuU2NyaXB0ID09IG5pbCB0aGVuDQoJCXBPdXRmaXQuU2NyaXB0ID0gcE91dGZpdC5TYXZlZFNjcmlwdA0KCQlwT3V0Zml0LlNhdmVkU2NyaXB0ID0gbmlsDQoJZW5kDQoJDQoJT3V0Zml0dGVyRWRpdFNjcmlwdERpYWxvZzpPcGVuKHBPdXRmaXQsIHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdE1lbnVBY3Rpb25zOkRJU0FCTEUocE91dGZpdCkNCglpZiBwT3V0Zml0LkRpc2FibGVkIHRoZW4NCgkJcE91dGZpdC5EaXNhYmxlZCA9IG5pbA0KCQlzZWxmOkFjdGl2YXRlU2NyaXB0KHBPdXRmaXQpDQoJZWxzZQ0KCQlwT3V0Zml0LkRpc2FibGVkID0gdHJ1ZQ0KCQlzZWxmOkRlYWN0aXZhdGVTY3JpcHQocE91dGZpdCkNCgllbmQNCglzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uczpTSE9XSEVMTShwT3V0Zml0KQ0KCXBPdXRmaXQuU2hvd0hlbG0gPSB0cnVlDQoJc2VsZi5PdXRmaXRTdGFjazpVcGRhdGVPdXRmaXREaXNwbGF5KCkNCglzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uczpISURFSEVMTShwT3V0Zml0KQ0KCXBPdXRmaXQuU2hvd0hlbG0gPSBmYWxzZQ0KCXNlbGYuT3V0Zml0U3RhY2s6VXBkYXRlT3V0Zml0RGlzcGxheSgpDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6SUdOT1JFSEVMTShwT3V0Zml0KQ0KCXBPdXRmaXQuU2hvd0hlbG0gPSBuaWwNCglzZWxmLk91dGZpdFN0YWNrOlVwZGF0ZU91dGZpdERpc3BsYXkoKQ0KCXNlbGY6T3V0Zml0U2V0dGluZ3NDaGFuZ2VkKHBPdXRmaXQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdE1lbnVBY3Rpb25zOlNIT1dDTE9BSyhwT3V0Zml0KQ0KCXBPdXRmaXQuU2hvd0Nsb2FrID0gdHJ1ZQ0KCXNlbGYuT3V0Zml0U3RhY2s6VXBkYXRlT3V0Zml0RGlzcGxheSgpDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6SElERUNMT0FLKHBPdXRmaXQpDQoJcE91dGZpdC5TaG93Q2xvYWsgPSBmYWxzZQ0KCXNlbGYuT3V0Zml0U3RhY2s6VXBkYXRlT3V0Zml0RGlzcGxheSgpDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6SUdOT1JFQ0xPQUsocE91dGZpdCkNCglwT3V0Zml0LlNob3dDbG9hayA9IG5pbA0KCXNlbGYuT3V0Zml0U3RhY2s6VXBkYXRlT3V0Zml0RGlzcGxheSgpDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6SUdOT1JFVElUTEUocE91dGZpdCkNCglwT3V0Zml0LlNob3dUaXRsZUlEID0gbmlsDQoJc2VsZi5PdXRmaXRTdGFjazpVcGRhdGVPdXRmaXREaXNwbGF5KCkNCglzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uczpDT01CQVRESVNBQkxFKHBPdXRmaXQpDQoJaWYgcE91dGZpdC5Db21iYXREaXNhYmxlZCB0aGVuDQoJCXBPdXRmaXQuQ29tYmF0RGlzYWJsZWQgPSBuaWwNCgllbHNlDQoJCXBPdXRmaXQuQ29tYmF0RGlzYWJsZWQgPSB0cnVlDQoJZW5kDQoJDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6UkVCVUlMRChwT3V0Zml0KQ0KCXNlbGY6QXNrUmVidWlsZE91dGZpdChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uczpSRUJVSUxEX0ZPUihwT3V0Zml0KQ0KCXNlbGYuUmVidWlsZE91dGZpdERpYWxvZzpPcGVuKHBPdXRmaXQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdE1lbnVBY3Rpb25zOlNFVF9DVVJSRU5UKHBPdXRmaXQpDQoJc2VsZjpBc2tTZXRDdXJyZW50KHBPdXRmaXQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdE1lbnVBY3Rpb25zOlVORVFVSVBfT1RIRVJTKHBPdXRmaXQpDQoJaWYgcE91dGZpdC5VbmVxdWlwT3RoZXJzIHRoZW4NCgkJcE91dGZpdC5VbmVxdWlwT3RoZXJzID0gbmlsDQoJZWxzZQ0KCQlwT3V0Zml0LlVuZXF1aXBPdGhlcnMgPSB0cnVlDQoJZW5kDQoJDQoJc2VsZjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6REVQT1NJVChwT3V0Zml0KQ0KCXNlbGY6RGVwb3NpdE91dGZpdChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uczpERVBPU0lUVU5JUVVFKHBPdXRmaXQpDQoJc2VsZjpEZXBvc2l0T3V0Zml0KHBPdXRmaXQsIHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdE1lbnVBY3Rpb25zOkRFUE9TSVRPVEhFUlMocE91dGZpdCkNCglzZWxmOkRlcG9zaXRPdGhlck91dGZpdHMocE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuT3V0Zml0TWVudUFjdGlvbnM6V0lUSERSQVcocE91dGZpdCkNCglzZWxmOldpdGhkcmF3T3V0Zml0KHBPdXRmaXQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdE1lbnVBY3Rpb25zOldJVEhEUkFXT1RIRVJTKHBPdXRmaXQpDQoJc2VsZjpXaXRoZHJhd090aGVyT3V0Zml0cyhwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uczpPVVRGSVRCQVJfU0hPVyhwT3V0Zml0KQ0KCWxvY2FsIHZTZXR0aW5ncyA9IHNlbGYuT3V0Zml0QmFyOkdldE91dGZpdFNldHRpbmdzKHBPdXRmaXQpDQoJDQoJdlNldHRpbmdzLkhpZGUgPSBub3QgdlNldHRpbmdzLkhpZGUNCgkNCglzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZChwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uczpPVVRGSVRCQVJfQ0hPT1NFSUNPTihwT3V0Zml0KQ0KCU91dGZpdHRlckNob29zZUljb25EaWFsb2c6T3BlbihwT3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpQZXJmb3JtQWN0aW9uKHBBY3Rpb25JRCwgcE91dGZpdCkNCglsb2NhbCB2QWN0aW9uRnVuYyA9IE91dGZpdHRlci5PdXRmaXRNZW51QWN0aW9uc1twQWN0aW9uSURdDQoJDQoJaWYgdkFjdGlvbkZ1bmMgdGhlbg0KCQl2QWN0aW9uRnVuYyhzZWxmLCBwT3V0Zml0KQ0KCWVsc2VpZiBzdHJpbmcuc3ViKHBBY3Rpb25JRCwgMSwgOCkgPT0gIkJJTkRJTkdfIiB0aGVuDQoJCWxvY2FsIHZCaW5kaW5nSW5kZXggPSBzdHJpbmcuc3ViKHBBY3Rpb25JRCwgOSkNCgkJDQoJCWlmIHZCaW5kaW5nSW5kZXggPT0gIk5PTkUiIHRoZW4NCgkJCU91dGZpdHRlcjpTZXRPdXRmaXRCaW5kaW5nSW5kZXgocE91dGZpdCwgbmlsKQ0KCQllbHNlDQoJCQlPdXRmaXR0ZXI6U2V0T3V0Zml0QmluZGluZ0luZGV4KHBPdXRmaXQsIHRvbnVtYmVyKHZCaW5kaW5nSW5kZXgpKQ0KCQllbmQNCgllbHNlaWYgc3RyaW5nLnN1YihwQWN0aW9uSUQsIDEsIDcpID09ICJQUkVTRVRfIiB0aGVuDQoJCWxvY2FsIHZTY3JpcHRJRCA9IHN0cmluZy5zdWIocEFjdGlvbklELCA4KQ0KCQkNCgkJaWYgdlNjcmlwdElEID09ICJOT05FIiB0aGVuDQoJCQlPdXRmaXR0ZXI6RGVhY3RpdmF0ZVNjcmlwdChwT3V0Zml0KQ0KCQkJDQoJCQlwT3V0Zml0LlNhdmVkU2NyaXB0ID0gcE91dGZpdC5TY3JpcHQNCgkJCQ0KCQkJcE91dGZpdC5TY3JpcHRJRCA9IG5pbA0KCQkJcE91dGZpdC5TY3JpcHQgPSBuaWwNCgkJZWxzZQ0KCQkJcE91dGZpdC5TYXZlZFNjcmlwdCA9IG5pbA0KCQkJDQoJCQlPdXRmaXR0ZXI6U2V0U2NyaXB0SUQocE91dGZpdCwgdlNjcmlwdElEKQ0KCQkJDQoJCQktLSBJZiB0aGUgc2NyaXB0IGhhcyBzZXR0aW5ncyB0aGVuIG9wZW4gdGhlDQoJCQktLSBkaWFsb2cNCgkJCQ0KCQkJaWYgT3V0Zml0dGVyOk91dGZpdEhhc1NldHRpbmdzKHBPdXRmaXQpIHRoZW4NCgkJCQlPdXRmaXR0ZXJFZGl0U2NyaXB0RGlhbG9nOk9wZW4ocE91dGZpdCkNCgkJCWVuZA0KCQllbmQNCgkJDQoJCU91dGZpdHRlcjpPdXRmaXRTZXR0aW5nc0NoYW5nZWQocE91dGZpdCkNCgllbHNlaWYgc3RyaW5nLnN1YihwQWN0aW9uSUQsIDEsIDYpID09ICJUSVRMRV8iIHRoZW4NCgkJbG9jYWwgdlRpdGxlSUQgPSB0b251bWJlcihzdHJpbmcuc3ViKHBBY3Rpb25JRCwgNykpDQoJCQ0KCQlwT3V0Zml0LlNob3dUaXRsZUlEID0gdlRpdGxlSUQNCgkJDQoJCXNlbGYuU2NoZWR1bGVyTGliOlNjaGVkdWxlVW5pcXVlVGFzaygwLjUsIHNlbGYuT3V0Zml0U3RhY2suVXBkYXRlT3V0Zml0RGlzcGxheSwgc2VsZi5PdXRmaXRTdGFjaykNCgllbHNlaWYgc3RyaW5nLnN1YihwQWN0aW9uSUQsIDEsIDEzKSA9PSAiUkVCVUlMRF9TVEFUXyIgdGhlbg0KCQlsb2NhbCB2U3RhdElEID0gc3RyaW5nLnN1YihwQWN0aW9uSUQsIDE0KQ0KCQkNCgkJcE91dGZpdC5TdGF0SUQgPSB2U3RhdElEDQoJCU91dGZpdHRlcjpBc2tSZWJ1aWxkT3V0Zml0KHBPdXRmaXQpDQoJZWxzZQ0KCQlyZXR1cm4NCgllbmQNCgkNCglPdXRmaXR0ZXI6VXBkYXRlKHRydWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLk91dGZpdEl0ZW1TZWxlY3RlZChwTWVudSwgcFZhbHVlKQ0KCWxvY2FsIHZJdGVtID0gcE1lbnU6R2V0UGFyZW50KCk6R2V0UGFyZW50KCkNCglsb2NhbCB2T3V0Zml0ID0gT3V0Zml0dGVyOkdldE91dGZpdEZyb21MaXN0SXRlbSh2SXRlbSkNCg0KCWlmIG5vdCB2T3V0Zml0IHRoZW4NCgkJT3V0Zml0dGVyOkVycm9yTWVzc2FnZSgiT3V0Zml0IGZvciBtZW51IGl0ZW0gIi4udkl0ZW06R2V0TmFtZSgpLi4iIG5vdCBmb3VuZCIpDQoJCXJldHVybg0KCWVuZA0KDQoJT3V0Zml0dGVyOlBlcmZvcm1BY3Rpb24ocFZhbHVlLCB2T3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5QcmVzZXRTY3JpcHREcm9wRG93bl9PbkxvYWQoc2VsZikNCglPdXRmaXR0ZXI6RHJvcERvd25NZW51X0luaXRpYWxpemUoc2VsZiwgT3V0Zml0dGVyLlByZXNldFNjcmlwdERyb3Bkb3duX0luaXRpYWxpemUpDQoJc2VsZjpTZXRNZW51V2lkdGgoMTUwKQ0KCXNlbGY6UmVmcmVzaCgpDQoJDQoJc2VsZi5BdXRvU2V0VmFsdWUgPSB0cnVlDQoJc2VsZi5DaGFuZ2VkVmFsdWVGdW5jID0gT3V0Zml0dGVyLlByZXNldFNjcmlwdERyb3Bkb3duX0NoYW5nZWRWYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5QcmVzZXRTY3JpcHREcm9wZG93bl9DaGFuZ2VkVmFsdWUocEZyYW1lLCBwVmFsdWUpDQoJcEZyYW1lLkRpYWxvZzpTZXRQcmVzZXRTY3JpcHRJRChwVmFsdWUpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLlByZXNldFNjcmlwdERyb3Bkb3duX0luaXRpYWxpemUocEZyYW1lKQ0KCWlmIFVJRFJPUERPV05NRU5VX01FTlVfTEVWRUwgPT0gMiB0aGVuDQoJCWZvciBfLCB2UHJlc2V0U2NyaXB0IGluIGlwYWlycyhPdXRmaXR0ZXIuUHJlc2V0U2NyaXB0cykgZG8NCgkJCWlmIG5vdCB2UHJlc2V0U2NyaXB0LkNsYXNzDQoJCQlvciB2UHJlc2V0U2NyaXB0LkNsYXNzID09IE91dGZpdHRlci5QbGF5ZXJDbGFzcyB0aGVuDQoJCQkJbG9jYWwgdkNhdGVnb3J5ID0gdlByZXNldFNjcmlwdC5DYXRlZ29yeSBvciB2UHJlc2V0U2NyaXB0LkNsYXNzIG9yICJHRU5FUkFMIg0KCQkJCQ0KCQkJCWlmIHZDYXRlZ29yeSA9PSBVSURST1BET1dOTUVOVV9NRU5VX1ZBTFVFIHRoZW4NCgkJCQkJVUlEcm9wRG93bk1lbnVfQWRkQnV0dG9uKHsNCgkJCQkJCXRleHQgPSB2UHJlc2V0U2NyaXB0Lk5hbWUsDQoJCQkJCQlhcmcxID0gcEZyYW1lLA0KCQkJCQkJYXJnMiA9IHZQcmVzZXRTY3JpcHQuSUQsDQoJCQkJCQl2YWx1ZSA9IHZQcmVzZXRTY3JpcHQuSUQsDQoJCQkJCQlmdW5jID0gT3V0Zml0dGVyLkRyb3BEb3duX09uQ2xpY2ssDQoJCQkJCQl0b29sdGlwVGl0bGUgPSB2UHJlc2V0U2NyaXB0Lk5hbWUsDQoJCQkJCQl0b29sdGlwVGV4dCA9IE91dGZpdHRlcjpHZXRTY3JpcHREZXNjcmlwdGlvbih2UHJlc2V0U2NyaXB0LlNjcmlwdCksDQoJCQkJCQljb2xvckNvZGUgPSBOT1JNQUxfRk9OVF9DT0xPUl9DT0RFLA0KCQkJCQl9LCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVsc2UNCgkJbG9jYWwgdkNhdGVnb3J5DQoJCQ0KCQlmb3IgXywgdlByZXNldFNjcmlwdCBpbiBpcGFpcnMoT3V0Zml0dGVyLlByZXNldFNjcmlwdHMpIGRvDQoJCQlpZiBub3QgdlByZXNldFNjcmlwdC5DbGFzcw0KCQkJb3IgdlByZXNldFNjcmlwdC5DbGFzcyA9PSBPdXRmaXR0ZXIuUGxheWVyQ2xhc3MgdGhlbg0KCQkJCS0tIFN0YXJ0IGEgbmV3IGNhdGVnb3J5IGlmIGl0J3MgY2hhbmdpbmcNCgkJCQkNCgkJCQlsb2NhbCB2TmV3Q2F0ZWdvcnkgPSB2UHJlc2V0U2NyaXB0LkNhdGVnb3J5IG9yIHZQcmVzZXRTY3JpcHQuQ2xhc3Mgb3IgIkdFTkVSQUwiDQoJCQkJDQoJCQkJaWYgdkNhdGVnb3J5IH49IHZOZXdDYXRlZ29yeSB0aGVuDQoJCQkJCXZDYXRlZ29yeSA9IHZOZXdDYXRlZ29yeQ0KCQkJCQkNCgkJCQkJVUlEcm9wRG93bk1lbnVfQWRkQnV0dG9uKHsNCgkJCQkJCXRleHQgPSBPdXRmaXR0ZXIuY1NjcmlwdENhdGVnb3J5TmFtZVt2Q2F0ZWdvcnldIG9yIE91dGZpdHRlci5jQ2xhc3NOYW1lW3ZDYXRlZ29yeV0sDQoJCQkJCQloYXNBcnJvdyA9IDEsDQoJCQkJCQlhcmcxPSBwRnJhbWUsDQoJCQkJCQlhcmcyID0gdkNhdGVnb3J5LA0KCQkJCQkJdmFsdWUgPSB2Q2F0ZWdvcnl9LCBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tIE91dGZpdHRlci5TdGF0RHJvcERvd24NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KZnVuY3Rpb24gT3V0Zml0dGVyLlN0YXREcm9wRG93bl9PbkxvYWQoc2VsZikNCglPdXRmaXR0ZXI6RHJvcERvd25NZW51X0luaXRpYWxpemUoc2VsZiwgT3V0Zml0dGVyLlN0YXREcm9wZG93bl9Jbml0aWFsaXplKQ0KCXNlbGY6U2V0TWVudVdpZHRoKDE1MCkNCglzZWxmOlJlZnJlc2goKQ0KDQoJc2VsZi5BdXRvU2V0VmFsdWUgPSB0cnVlDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLlN0YXREcm9wZG93bl9Jbml0aWFsaXplKHBGcmFtZSkNCglpZiBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMID09IDIgdGhlbg0KCQlsb2NhbCB2Q2F0ZWdvcnkgPSBPdXRmaXR0ZXI6R2V0Q2F0ZWdvcnlCeUlEKFVJRFJPUERPV05NRU5VX01FTlVfVkFMVUUpDQoJCQ0KCQlpZiB2Q2F0ZWdvcnkgdGhlbg0KCQkJbG9jYWwgdk51bVN0YXRzID0gdkNhdGVnb3J5OkdldE51bVN0YXRzKCkNCgkJCQ0KCQkJZm9yIHZTdGF0SW5kZXggPSAxLCB2TnVtU3RhdHMgZG8NCgkJCQlsb2NhbCB2U3RhdCA9IHZDYXRlZ29yeTpHZXRJbmRleGVkU3RhdCh2U3RhdEluZGV4KQ0KCQkJCQ0KCQkJCVVJRHJvcERvd25NZW51X0FkZEJ1dHRvbih7dGV4dCA9IHZTdGF0Lk5hbWUsIGFyZzEgPSBwRnJhbWUsIGFyZzIgPSB2U3RhdCwgdmFsdWUgPSB2U3RhdCwgZnVuYyA9IE91dGZpdHRlci5Ecm9wRG93bl9PbkNsaWNrfSwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCkNCgkJCWVuZA0KCQllbmQNCgllbHNlDQoJCVVJRHJvcERvd25NZW51X0FkZEJ1dHRvbih7dGV4dCA9IE91dGZpdHRlci5jVXNlQ3VycmVudE91dGZpdCwgYXJnMSA9IHBGcmFtZSwgYXJnMiA9IDAsIHZhbHVlID0gMCwgZnVuYyA9IE91dGZpdHRlci5Ecm9wRG93bl9PbkNsaWNrfSkNCgkJVUlEcm9wRG93bk1lbnVfQWRkQnV0dG9uKHt0ZXh0ID0gT3V0Zml0dGVyLmNVc2VFbXB0eU91dGZpdCwgYXJnMSA9IHBGcmFtZSwgYXJnMiA9ICJFTVBUWSIsIHZhbHVlID0gIkVNUFRZIiwgZnVuYyA9IE91dGZpdHRlci5Ecm9wRG93bl9PbkNsaWNrfSkNCgkJDQoJCVVJRHJvcERvd25NZW51X0FkZEJ1dHRvbih7dGV4dCA9ICIgIiwgbm90Q2hlY2thYmxlID0gdHJ1ZSwgbm90Q2xpY2thYmxlID0gdHJ1ZX0pDQoJCQ0KCQlmb3IgXywgdkNhdGVnb3J5IGluIGlwYWlycyhPdXRmaXR0ZXIuU3RhdENhdGVnb3JpZXMpIGRvDQoJCQlVSURyb3BEb3duTWVudV9BZGRCdXR0b24oe3RleHQgPSB2Q2F0ZWdvcnkuTmFtZSwgaGFzQXJyb3cgPSAxLCBhcmcxID0gcEZyYW1lLCBhcmcyID0gdkNhdGVnb3J5LkNhdGVnb3J5SUQsIHZhbHVlID0gdkNhdGVnb3J5LkNhdGVnb3J5SUR9KQ0KCQllbmQNCgllbmQNCmVuZA0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpPdXRmaXR0ZXIuX0Ryb3BEb3duTWVudSA9IHt9DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpEcm9wRG93bk1lbnVfSW5pdGlhbGl6ZShwRnJhbWUsIHBJbml0RnVuY3Rpb24sIHBEaXNwbGF5TW9kZSwgcExldmVsLCBwTWVudUxpc3QpDQoJaWYgbm90IHBGcmFtZTpHZXROYW1lKCkgdGhlbg0KCQlzZWxmOkVycm9yTWVzc2FnZSgiRHJvcERvd25NZW51X0luaXRpYWxpemU6IHBGcmFtZSBpcyBhbm9ueW1vdXMiKQ0KCQlzZWxmOkRlYnVnU3RhY2soKQ0KCQlyZXR1cm4NCgllbmQNCgkNCglmb3Igdk5hbWUsIHZGdW5jdGlvbiBpbiBwYWlycyhzZWxmLl9Ecm9wRG93bk1lbnUpIGRvDQoJCXBGcmFtZVt2TmFtZV0gPSB2RnVuY3Rpb24NCgllbmQNCgkNCglVSURyb3BEb3duTWVudV9Jbml0aWFsaXplKHBGcmFtZSwgcEluaXRGdW5jdGlvbiwgcERpc3BsYXlNb2RlLCBwTGV2ZWwsIHBNZW51TGlzdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX0Ryb3BEb3duTWVudTpTZXRNZW51V2lkdGgocFdpZHRoLCBwUGFkZGluZykNCglVSURyb3BEb3duTWVudV9TZXRXaWR0aChzZWxmLCBwV2lkdGgsIHBQYWRkaW5nKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fRHJvcERvd25NZW51OlNldE1lbnVUZXh0KHBUZXh0KQ0KCVVJRHJvcERvd25NZW51X1NldFRleHQoc2VsZiwgcFRleHQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9Ecm9wRG93bk1lbnU6UmVmcmVzaCgpDQoJVUlEcm9wRG93bk1lbnVfUmVmcmVzaChzZWxmKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fRHJvcERvd25NZW51OlNldFNlbGVjdGVkVmFsdWUocFZhbHVlKQ0KCVVJRHJvcERvd25NZW51X1NldFNlbGVjdGVkVmFsdWUoc2VsZiwgcFZhbHVlKQ0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tIE91dGZpdHRlci5BdXRvbWF0aW9uRHJvcERvd24NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkF1dG9tYXRpb25Ecm9wRG93bl9PbkxvYWQoc2VsZikNCglPdXRmaXR0ZXI6RHJvcERvd25NZW51X0luaXRpYWxpemUoc2VsZiwgT3V0Zml0dGVyLkF1dG9tYXRpb25Ecm9wZG93bl9Jbml0aWFsaXplKQ0KCXNlbGY6U2V0TWVudVdpZHRoKDE1MCkNCglzZWxmOlJlZnJlc2goKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5BdXRvbWF0aW9uRHJvcGRvd25fSW5pdGlhbGl6ZShwRnJhbWUpDQoJaWYgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCA9PSAyIHRoZW4NCgkJZm9yIF8sIHZQcmVzZXRTY3JpcHQgaW4gaXBhaXJzKE91dGZpdHRlci5QcmVzZXRTY3JpcHRzKSBkbw0KCQkJaWYgbm90IHZQcmVzZXRTY3JpcHQuQ2xhc3MNCgkJCW9yIHZQcmVzZXRTY3JpcHQuQ2xhc3MgPT0gT3V0Zml0dGVyLlBsYXllckNsYXNzIHRoZW4NCgkJCQlsb2NhbCB2Q2F0ZWdvcnkgPSB2UHJlc2V0U2NyaXB0LkNhdGVnb3J5IG9yIHZQcmVzZXRTY3JpcHQuQ2xhc3Mgb3IgIkdFTkVSQUwiDQoJCQkJDQoJCQkJaWYgdkNhdGVnb3J5ID09IFVJRFJPUERPV05NRU5VX01FTlVfVkFMVUUgdGhlbg0KCQkJCQlsb2NhbCB2TmFtZSA9IHZQcmVzZXRTY3JpcHQuTmFtZQ0KCQkJCQlsb2NhbCB2RGVzY3JpcHRpb24gPSBPdXRmaXR0ZXI6R2V0U2NyaXB0RGVzY3JpcHRpb24odlByZXNldFNjcmlwdC5TY3JpcHQpDQoJCQkJCQ0KCQkJCQlPdXRmaXR0ZXI6QWRkTWVudUl0ZW0oDQoJCQkJCQkJcEZyYW1lLA0KCQkJCQkJCXZOYW1lLA0KCQkJCQkJCXZQcmVzZXRTY3JpcHQuSUQsDQoJCQkJCQkJbmlsLCAtLSBDaGVja2VkDQoJCQkJCQkJVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCwNCgkJCQkJCQluaWwsIC0tIENvbG9yDQoJCQkJCQkJbmlsLCAtLSBEaXNhYmxlZA0KCQkJCQkJCXt0b29sdGlwVGl0bGUgPSB2TmFtZSwgdG9vbHRpcFRleHQgPSB2RGVzY3JpcHRpb259KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVsc2UNCgkJbG9jYWwgdkNhdGVnb3J5DQoJCQ0KCQlPdXRmaXR0ZXI6QWRkTWVudUl0ZW0ocEZyYW1lLCBPdXRmaXR0ZXIuY05vU2NyaXB0LCAiTk9ORSIpDQoJCQ0KCQlsb2NhbCB2Q2F0ZWdvcnkNCgkJDQoJCWZvciBfLCB2UHJlc2V0U2NyaXB0IGluIGlwYWlycyhPdXRmaXR0ZXIuUHJlc2V0U2NyaXB0cykgZG8NCgkJCWlmIG5vdCB2UHJlc2V0U2NyaXB0LkNsYXNzDQoJCQlvciB2UHJlc2V0U2NyaXB0LkNsYXNzID09IE91dGZpdHRlci5QbGF5ZXJDbGFzcyB0aGVuDQoJCQkJLS0gU3RhcnQgYSBuZXcgY2F0ZWdvcnkgaWYgaXQncyBjaGFuZ2luZw0KCQkJCQ0KCQkJCWxvY2FsIHZOZXdDYXRlZ29yeSA9IHZQcmVzZXRTY3JpcHQuQ2F0ZWdvcnkgb3IgdlByZXNldFNjcmlwdC5DbGFzcyBvciAiR0VORVJBTCINCgkJCQkNCgkJCQlpZiB2Q2F0ZWdvcnkgfj0gdk5ld0NhdGVnb3J5IHRoZW4NCgkJCQkJdkNhdGVnb3J5ID0gdk5ld0NhdGVnb3J5DQoJCQkJCQ0KCQkJCQlVSURyb3BEb3duTWVudV9BZGRCdXR0b24oew0KCQkJCQkJdGV4dCA9IE91dGZpdHRlci5jU2NyaXB0Q2F0ZWdvcnlOYW1lW3ZDYXRlZ29yeV0gb3IgT3V0Zml0dGVyLmNDbGFzc05hbWVbdkNhdGVnb3J5XSwNCgkJCQkJCWhhc0Fycm93ID0gMSwNCgkJCQkJCWFyZzEgPSBwRnJhbWUsDQoJCQkJCQlhcmcyID0gdkNhdGVnb3J5LA0KCQkJCQkJY29sb3JDb2RlID0gTk9STUFMX0ZPTlRfQ09MT1JfQ09ERSwNCgkJCQkJCXZhbHVlID0gdkNhdGVnb3J5fSwgVUlEUk9QRE9XTk1FTlVfTUVOVV9MRVZFTCkNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLSANCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KLS1bWw0KZnVuY3Rpb24gVUlEcm9wRG93bk1lbnVfUmVmcmVzaChmcmFtZSwgdXNlVmFsdWUsIGRyb3Bkb3duTGV2ZWwpDQoJT3V0Zml0dGVyOkRlYnVnTWVzc2FnZSgiVUlEcm9wRG93bk1lbnVfUmVmcmVzaDogZnJhbWUgc2VsZWN0ZWQgdmFsdWUgaXMgJXMiLCBVSURyb3BEb3duTWVudV9HZXRTZWxlY3RlZFZhbHVlKGZyYW1lKSBvciAibmlsIikNCgkNCglsb2NhbCBidXR0b24sIGNoZWNrZWQsIGNoZWNrSW1hZ2UsIG5vcm1hbFRleHQsIHdpZHRoOw0KCWxvY2FsIG1heFdpZHRoID0gMDsNCglhc3NlcnQoZnJhbWUpOw0KCWlmICggbm90IGRyb3Bkb3duTGV2ZWwgKSB0aGVuDQoJCWRyb3Bkb3duTGV2ZWwgPSBVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMOw0KCWVuZA0KCQ0KCS0tIEp1c3QgcmVkcmF3cyB0aGUgZXhpc3RpbmcgbWVudQ0KCWZvciBpPTEsIFVJRFJPUERPV05NRU5VX01BWEJVVFRPTlMgZG8NCgkJYnV0dG9uID0gX0dbIkRyb3BEb3duTGlzdCIuLmRyb3Bkb3duTGV2ZWwuLiJCdXR0b24iLi5pXQ0KCQlPdXRmaXR0ZXI6RGVidWdNZXNzYWdlKCIgRXhhbWluZ2luZyBidXR0b24gJWQsIHRpdGxlICVzLCB2YWx1ZSBpcyAlcyIsIGksIGJ1dHRvbjpHZXRUZXh0KCkgb3IgIm5pbCIsIGJ1dHRvbi52YWx1ZSBvciAibmlsIikNCgkJDQoJCWNoZWNrZWQgPSBuaWw7DQoJCS0tIFNlZSBpZiBjaGVja2VkIG9yIG5vdA0KCQlpZiAoIFVJRHJvcERvd25NZW51X0dldFNlbGVjdGVkTmFtZShmcmFtZSkgKSB0aGVuDQoJCQlpZiAoIGJ1dHRvbjpHZXRUZXh0KCkgPT0gVUlEcm9wRG93bk1lbnVfR2V0U2VsZWN0ZWROYW1lKGZyYW1lKSApIHRoZW4NCgkJCQljaGVja2VkID0gMTsNCgkJCWVuZA0KCQllbHNlaWYgKCBVSURyb3BEb3duTWVudV9HZXRTZWxlY3RlZElEKGZyYW1lKSApIHRoZW4NCgkJCWlmICggYnV0dG9uOkdldElEKCkgPT0gVUlEcm9wRG93bk1lbnVfR2V0U2VsZWN0ZWRJRChmcmFtZSkgKSB0aGVuDQoJCQkJY2hlY2tlZCA9IDE7DQoJCQllbmQNCgkJZWxzZWlmICggVUlEcm9wRG93bk1lbnVfR2V0U2VsZWN0ZWRWYWx1ZShmcmFtZSkgKSB0aGVuDQoJCQlpZiAoIGJ1dHRvbi52YWx1ZSA9PSBVSURyb3BEb3duTWVudV9HZXRTZWxlY3RlZFZhbHVlKGZyYW1lKSApIHRoZW4NCgkJCQljaGVja2VkID0gMTsNCgkJCWVuZA0KCQllbmQNCg0KCQktLSBJZiBjaGVja2VkIHNob3cgY2hlY2sgaW1hZ2UNCgkJY2hlY2tJbWFnZSA9IF9HWyJEcm9wRG93bkxpc3QiLi5kcm9wZG93bkxldmVsLi4iQnV0dG9uIi4uaS4uIkNoZWNrIl0NCgkJaWYgKCBjaGVja2VkICkgdGhlbg0KCQkJT3V0Zml0dGVyOkRlYnVnTWVzc2FnZSgiIEl0ZW0gaXMgY2hlY2tlZCIpDQoJCQkNCgkJCWlmICggdXNlVmFsdWUgKSB0aGVuDQoJCQkJVUlEcm9wRG93bk1lbnVfU2V0VGV4dChmcmFtZSwgYnV0dG9uLnZhbHVlKTsNCgkJCWVsc2UNCgkJCQlVSURyb3BEb3duTWVudV9TZXRUZXh0KGZyYW1lLCBidXR0b246R2V0VGV4dCgpKTsNCgkJCWVuZA0KCQkJYnV0dG9uOkxvY2tIaWdobGlnaHQoKTsNCgkJCWNoZWNrSW1hZ2U6U2hvdygpOw0KCQllbHNlDQoJCQlPdXRmaXR0ZXI6RGVidWdNZXNzYWdlKCIgSXRlbSBpcyBub3QgY2hlY2tlZCIpDQoJCQlidXR0b246VW5sb2NrSGlnaGxpZ2h0KCk7DQoJCQljaGVja0ltYWdlOkhpZGUoKTsNCgkJZW5kDQoNCgkJaWYgKCBidXR0b246SXNTaG93bigpICkgdGhlbg0KCQkJbm9ybWFsVGV4dCA9IF9HW2J1dHRvbjpHZXROYW1lKCkuLiJOb3JtYWxUZXh0Il0NCgkJCS0tIERldGVybWluZSB0aGUgbWF4aW11bSB3aWR0aCBvZiBhIGJ1dHRvbg0KCQkJd2lkdGggPSBub3JtYWxUZXh0OkdldFdpZHRoKCkgKyA0MDsNCgkJCS0tIEFkZCBwYWRkaW5nIGlmIGhhcyBhbmQgZXhwYW5kIGFycm93IG9yIGNvbG9yIHN3YXRjaA0KCQkJaWYgKCBidXR0b24uaGFzQXJyb3cgb3IgYnV0dG9uLmhhc0NvbG9yU3dhdGNoICkgdGhlbg0KCQkJCXdpZHRoID0gd2lkdGggKyAxMDsNCgkJCWVuZA0KCQkJaWYgKCBidXR0b24ubm90Q2hlY2thYmxlICkgdGhlbg0KCQkJCXdpZHRoID0gd2lkdGggLSAzMDsNCgkJCWVuZA0KCQkJaWYgKCB3aWR0aCA+IG1heFdpZHRoICkgdGhlbg0KCQkJCW1heFdpZHRoID0gd2lkdGg7DQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJZm9yIGk9MSwgVUlEUk9QRE9XTk1FTlVfTUFYQlVUVE9OUyBkbw0KCQlidXR0b24gPSBfR1siRHJvcERvd25MaXN0Ii4uZHJvcGRvd25MZXZlbC4uIkJ1dHRvbiIuLmldDQoJCWJ1dHRvbjpTZXRXaWR0aChtYXhXaWR0aCk7DQoJZW5kDQoJX0dbIkRyb3BEb3duTGlzdCIuLmRyb3Bkb3duTGV2ZWxdOlNldFdpZHRoKG1heFdpZHRoKzE1KTsNCmVuZA0KXV0NCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkRyb3BEb3duX1NldFNlbGVjdGVkVmFsdWUocERyb3BEb3duLCBwVmFsdWUpDQoJcERyb3BEb3duOlNldE1lbnVUZXh0KCIiKSAtLSBTZXQgdG8gZW1wdHkgaW4gY2FzZSB0aGUgc2VsZWN0ZWQgdmFsdWUgaXNuJ3QgdGhlcmUNCglPdXRmaXR0ZXI6RHJvcERvd25NZW51X0luaXRpYWxpemUocERyb3BEb3duLCBwRHJvcERvd24uaW5pdGlhbGl6ZSkNCglwRHJvcERvd246U2V0U2VsZWN0ZWRWYWx1ZShwVmFsdWUpDQoJDQoJLS0gQWxsIGRvbmUgaWYgdGhlIGl0ZW0gdGV4dCBnb3Qgc2V0IHN1Y2Nlc3NmdWxseQ0KCQ0KCWxvY2FsIHZJdGVtVGV4dCA9IFVJRHJvcERvd25NZW51X0dldFRleHQocERyb3BEb3duKQ0KCQ0KCWlmIHZJdGVtVGV4dCBhbmQgdkl0ZW1UZXh0IH49ICIiIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0gU2NhbiBmb3Igc3VibWVudXMNCgkNCglsb2NhbCB2Um9vdExpc3RGcmFtZU5hbWUgPSAiRHJvcERvd25MaXN0MSINCglsb2NhbCB2Um9vdExpc3RGcmFtZSA9IF9HW3ZSb290TGlzdEZyYW1lTmFtZV0NCglsb2NhbCB2Um9vdE51bUl0ZW1zID0gdlJvb3RMaXN0RnJhbWUubnVtQnV0dG9ucw0KCQ0KCWZvciB2Um9vdEl0ZW1JbmRleCA9IDEsIHZSb290TnVtSXRlbXMgZG8NCgkJbG9jYWwgdkl0ZW0gPSBfR1t2Um9vdExpc3RGcmFtZU5hbWUuLiJCdXR0b24iLi52Um9vdEl0ZW1JbmRleF0NCgkJDQoJCWlmIHZJdGVtLmhhc0Fycm93IHRoZW4NCgkJCWxvY2FsIHZTdWJNZW51RnJhbWUgPSBEcm9wRG93bkxpc3QyDQoJCQkNCgkJCVVJRFJPUERPV05NRU5VX09QRU5fTUVOVSA9IHBEcm9wRG93bg0KCQkJVUlEUk9QRE9XTk1FTlVfTUVOVV9WQUxVRSA9IHZJdGVtLnZhbHVlDQoJCQlVSURST1BET1dOTUVOVV9NRU5VX0xFVkVMID0gMg0KCQkJDQoJCQlPdXRmaXR0ZXI6RHJvcERvd25NZW51X0luaXRpYWxpemUocERyb3BEb3duLCBwRHJvcERvd24uaW5pdGlhbGl6ZSwgbmlsLCAyKQ0KCQkJcERyb3BEb3duOlNldFNlbGVjdGVkVmFsdWUocFZhbHVlKQ0KCQkJDQoJCQktLSBBbGwgZG9uZSBpZiB0aGUgaXRlbSB0ZXh0IGdvdCBzZXQgc3VjY2Vzc2Z1bGx5DQoJCQkNCgkJCWxvY2FsIHZJdGVtVGV4dCA9IFVJRHJvcERvd25NZW51X0dldFRleHQocERyb3BEb3duKQ0KCQkJDQoJCQlpZiB2SXRlbVRleHQgYW5kIHZJdGVtVGV4dCB+PSAiIiB0aGVuDQoJCQkJcmV0dXJuDQoJCQllbmQNCgkJCQ0KCQkJLS0gU3dpdGNoIGJhY2sgdG8gdGhlIHJvb3QgbWVudQ0KCQkJDQoJCQlVSURST1BET1dOTUVOVV9PUEVOX01FTlUgPSBuaWwNCgkJCU91dGZpdHRlcjpEcm9wRG93bk1lbnVfSW5pdGlhbGl6ZShwRHJvcERvd24sIHBEcm9wRG93bi5pbml0aWFsaXplLCBuaWwsIDEpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5TY3JvbGxiYXJUcmVuY2hfU2l6ZUNoYW5nZWQocFNjcm9sbGJhclRyZW5jaCkNCglsb2NhbCB2U2Nyb2xsYmFyVHJlbmNoTmFtZSA9IHBTY3JvbGxiYXJUcmVuY2g6R2V0TmFtZSgpDQoJbG9jYWwgdlNjcm9sbGJhclRyZW5jaE1pZGRsZSA9IF9HW3ZTY3JvbGxiYXJUcmVuY2hOYW1lLi4iTWlkZGxlIl0NCgkNCglsb2NhbCB2TWlkZGxlSGVpZ2h0PSBwU2Nyb2xsYmFyVHJlbmNoOkdldEhlaWdodCgpIC0gNTENCgl2U2Nyb2xsYmFyVHJlbmNoTWlkZGxlOlNldEhlaWdodCh2TWlkZGxlSGVpZ2h0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5JbnB1dEJveF9PbkxvYWQoc2VsZiwgcENoaWxkRGVwdGgpDQoJaWYgbm90IHBDaGlsZERlcHRoIHRoZW4NCgkJcENoaWxkRGVwdGggPSAwDQoJZW5kDQoJDQoJbG9jYWwgdlBhcmVudCA9IHNlbGY6R2V0UGFyZW50KCkNCgkNCglmb3IgdkRlcHRoSW5kZXggPSAxLCBwQ2hpbGREZXB0aCBkbw0KCQl2UGFyZW50ID0gdlBhcmVudDpHZXRQYXJlbnQoKQ0KCWVuZA0KCQ0KCWlmIHZQYXJlbnQubGFzdEVkaXRCb3ggdGhlbg0KCQlzZWxmLnByZXZFZGl0Qm94ID0gdlBhcmVudC5sYXN0RWRpdEJveA0KCQlzZWxmLm5leHRFZGl0Qm94ID0gdlBhcmVudC5sYXN0RWRpdEJveC5uZXh0RWRpdEJveA0KCQkNCgkJc2VsZi5wcmV2RWRpdEJveC5uZXh0RWRpdEJveCA9IHNlbGYNCgkJc2VsZi5uZXh0RWRpdEJveC5wcmV2RWRpdEJveCA9IHNlbGYNCgllbHNlDQoJCXNlbGYucHJldkVkaXRCb3ggPSBzZWxmDQoJCXNlbGYubmV4dEVkaXRCb3ggPSBzZWxmDQoJZW5kDQoNCgl2UGFyZW50Lmxhc3RFZGl0Qm94ID0gc2VsZg0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5JbnB1dEJveF9UYWJQcmVzc2VkKHNlbGYpDQoJbG9jYWwgdlJldmVyc2UgPSBJc1NoaWZ0S2V5RG93bigpDQoJbG9jYWwgdkVkaXRCb3ggPSBzZWxmDQoJDQoJZm9yIHZJbmRleCA9IDEsIDUwIGRvDQoJCWxvY2FsIHZOZXh0RWRpdEJveA0KCQkJDQoJCWlmIHZSZXZlcnNlIHRoZW4NCgkJCXZOZXh0RWRpdEJveCA9IHZFZGl0Qm94LnByZXZFZGl0Qm94DQoJCWVsc2UNCgkJCXZOZXh0RWRpdEJveCA9IHZFZGl0Qm94Lm5leHRFZGl0Qm94DQoJCWVuZA0KCQkNCgkJaWYgdk5leHRFZGl0Qm94OklzVmlzaWJsZSgpDQoJCWFuZCBub3Qgdk5leHRFZGl0Qm94LmlzRGlzYWJsZWQgdGhlbg0KCQkJdk5leHRFZGl0Qm94OlNldEZvY3VzKCkNCgkJCXJldHVybg0KCQllbmQNCgkJDQoJCXZFZGl0Qm94ID0gdk5leHRFZGl0Qm94DQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlRvZ2dsZVVJKHBUb2dnbGVDaGFyV2luZG93KQ0KCWlmIHNlbGY6SXNPcGVuKCkgdGhlbg0KCQlPdXRmaXR0ZXJGcmFtZTpIaWRlKCkNCgkJDQoJCWlmIHBUb2dnbGVDaGFyV2luZG93IHRoZW4NCgkJCUhpZGVVSVBhbmVsKENoYXJhY3RlckZyYW1lKQ0KCQllbmQNCgllbHNlDQoJCXNlbGY6T3BlblVJKCkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6T3BlblVJKCkNCglTaG93VUlQYW5lbChDaGFyYWN0ZXJGcmFtZSkNCglDaGFyYWN0ZXJGcmFtZV9TaG93U3ViRnJhbWUoIlBhcGVyRG9sbEZyYW1lIikNCglPdXRmaXR0ZXJGcmFtZTpTaG93KCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6V2VhcmluZ091dGZpdE5hbWUocE91dGZpdE5hbWUpDQoJbG9jYWwgdk91dGZpdCA9IE91dGZpdHRlcjpGaW5kT3V0Zml0QnlOYW1lKHBPdXRmaXROYW1lKQ0KCQ0KCXJldHVybiB2T3V0Zml0IGFuZCBPdXRmaXR0ZXI6V2VhcmluZ091dGZpdCh2T3V0Zml0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpXZWFyaW5nT3V0Zml0KHBPdXRmaXQpDQoJcmV0dXJuIE91dGZpdHRlci5PdXRmaXRTdGFjazpGaW5kT3V0Zml0KHBPdXRmaXQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNoZWNrRGF0YWJhc2UoKQ0KCWxvY2FsIHZPdXRmaXQNCgkNCglpZiBub3Qgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIHRoZW4NCgkJbG9jYWwgdk91dGZpdHMgPSBzZWxmLlNldHRpbmdzLk91dGZpdHNbdkNhdGVnb3J5SURdDQoJCQ0KCQlpZiBzZWxmLlNldHRpbmdzLk91dGZpdHMgdGhlbg0KCQkJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCQkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQkJCWlmIHZPdXRmaXQ6SXNDb21wbGV0ZSh0cnVlKSB0aGVuDQoJCQkJCQl2T3V0Zml0OkFkZEl0ZW0oIkFtbW9TbG90IiwgbmlsKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgkJDQoJCXNlbGYuU2V0dGluZ3MuVmVyc2lvbiA9IDENCgllbmQNCgkNCgktLSBWZXJzaW9ucyAxIGFuZCAyIGJvdGggc2ltcGx5IGFkZCBjbGFzcyBvdXRmaXRzDQoJLS0gc28ganVzdCByZWluaXRpYWxpemUgdGhvc2UNCgkNCglpZiBzZWxmLlNldHRpbmdzLlZlcnNpb24gPCAzIHRoZW4NCgkJc2VsZjpJbml0aWFsaXplQ2xhc3NPdXRmaXRzKCkNCgkJc2VsZi5TZXR0aW5ncy5WZXJzaW9uID0gMw0KCWVuZA0KCQ0KCS0tIFZlcnNpb24gNCBzZXRzIHRoZSBCR0Rpc2FibGVkIGZsYWcgZm9yIHRoZSBtb3VudGVkIG91dGZpdA0KCQ0KCWlmIHNlbGYuU2V0dGluZ3MuVmVyc2lvbiA8IDQgdGhlbg0KCQlsb2NhbCB2UmlkaW5nT3V0Zml0ID0gc2VsZjpHZXRPdXRmaXRCeVNjcmlwdElEKCJSaWRpbmciKQ0KCQkNCgkJaWYgdlJpZGluZ091dGZpdCB0aGVuDQoJCQl2UmlkaW5nT3V0Zml0LkJHRGlzYWJsZWQgPSB0cnVlDQoJCWVuZA0KCQkNCgkJc2VsZi5TZXR0aW5ncy5WZXJzaW9uID0gNA0KCWVuZA0KCQ0KCS0tIFZlcnNpb24gNSBhZGRzIG1vb25raW4gZm9ybSwganVzdCByZWluaXRpYWxpemUgY2xhc3Mgb3V0Zml0cw0KDQoJaWYgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIDwgNSB0aGVuDQoJCXNlbGY6SW5pdGlhbGl6ZUNsYXNzT3V0Zml0cygpDQoJCXNlbGYuU2V0dGluZ3MuVmVyc2lvbiA9IDUNCgllbmQNCgkNCgktLSBNYWtlIHN1cmUgYWxsIG91dGZpdHMgaGF2ZSBhbiBhc3NvY2lhdGVkIGNhdGVnb3J5IElEDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5PdXRmaXRzIHRoZW4NCgkJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCQlmb3IgdkluZGV4LCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCQl2T3V0Zml0LkNhdGVnb3J5SUQgPSB2Q2F0ZWdvcnlJRA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCS0tIFZlcnNpb24gNiBhbmQgNyBhZGRzIGl0ZW0gc3ViLWNvZGUgYW5kIGVuY2hhbnRtZW50IGNvZGVzDQoJLS0gKDcgdHJpZXMgdG8gY2xlYW4gdXAgZmFpbGVkIHVwZGF0ZXMgZnJvbSA2KQ0KCQ0KCWlmIHNlbGYuU2V0dGluZ3MuVmVyc2lvbiA8IDcgdGhlbg0KCQlzZWxmLlNjaGVkdWxlckxpYjpTY2hlZHVsZVRhc2soNSwgT3V0Zml0dGVyLlVwZGF0ZURhdGFiYXNlSXRlbUNvZGVzLCBPdXRmaXR0ZXIpDQoJCQ0KCQlzZWxmLlNldHRpbmdzLlZlcnNpb24gPSA3DQoJZW5kDQoJDQoJLS0gVmVyc2lvbiA4IHJlbW92ZXMgdGhlIG9sZCBzdHlsZSBjbG9hay9oZWxtIHNldHRpbmdzDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIDwgOCB0aGVuDQoJCXNlbGYuU2V0dGluZ3MuSGlkZUhlbG0gPSBuaWwNCgkJc2VsZi5TZXR0aW5ncy5IaWRlQ2xvYWsgPSBuaWwNCgkJc2VsZi5TZXR0aW5ncy5WZXJzaW9uID0gOA0KCWVuZA0KCQ0KCS0tIFZlcnNpb24gOSBjb252ZXJ0cyBvbGQgU3BlY2lhbElEcyB0byBTY3JpcHRJRHMNCgktLSBhbmQgcmVtb3ZlcyB0aGUgcGFyaWFsIGFuZCBzcGVjaWFsIGNhdGVnb3JpZXMNCgkNCglpZiBzZWxmLlNldHRpbmdzLlZlcnNpb24gPCA5IHRoZW4NCgkJbG9jYWwgdlVwZGF0ZWRPdXRmaXRzID0ge30NCgkJbG9jYWwgdkRlbGV0ZWRPdXRmaXRzID0ge30NCgkJDQoJCWxvY2FsIHZQcmVzZXJ2ZWRPdXRmaXRzID0NCgkJew0KCQkJQmF0dGxlID0gdHJ1ZSwNCgkJCURlZmVuc2l2ZSA9IHRydWUsDQoJCQlCZXJzZXJrZXIgPSB0cnVlLA0KCQkJDQoJCQlCZWFyID0gdHJ1ZSwNCgkJCUNhdCA9IHRydWUsDQoJCQlBcXVhdGljID0gdHJ1ZSwNCgkJCVRyYXZlbCA9IHRydWUsDQoJCQlNb29ua2luID0gdHJ1ZSwNCgkJCVRyZWUgPSB0cnVlLA0KCQkJUHJvd2wgPSB0cnVlLA0KCQkJRmxpZ2h0ID0gdHJ1ZSwNCg0KCQkJU2hhZG93Zm9ybSA9IHRydWUsDQoNCgkJCVN0ZWFsdGggPSB0cnVlLA0KDQoJCQlHaG9zdFdvbGYgPSB0cnVlLA0KDQoJCQlNb25rZXkgPSB0cnVlLA0KCQkJSGF3ayA9IHRydWUsDQoJCQlDaGVldGFoID0gdHJ1ZSwNCgkJCVBhY2sgPSB0cnVlLA0KCQkJQmVhc3QgPSB0cnVlLA0KCQkJV2lsZCA9IHRydWUsDQoJCQlWaXBlciA9IHRydWUsDQoJCQlEcmFnb25oYXdrID0gdHJ1ZSwNCgkJCUZlaWduaW5nID0gdHJ1ZSwNCgkJCQ0KCQkJRXZvY2F0ZSA9IHRydWUsDQoJCQkNCgkJCUFyZ2VudERhd24gPSB0cnVlLA0KDQoJCQlCYXR0bGVncm91bmQgPSB0cnVlLA0KCQl9DQoJCQ0KCQlmb3IgXywgdk91dGZpdCBpbiBpcGFpcnMoc2VsZi5TZXR0aW5ncy5PdXRmaXRzLlNwZWNpYWwpIGRvDQoJCQlpZiB2T3V0Zml0OklzRW1wdHkoKQ0KCQkJYW5kIG5vdCB2UHJlc2VydmVkT3V0Zml0c1t2T3V0Zml0LlNwZWNpYWxJRF0gdGhlbg0KCQkJCXRhYmxlLmluc2VydCh2RGVsZXRlZE91dGZpdHMsIHZPdXRmaXQpDQoJCQllbHNlDQoJCQkJdk91dGZpdC5TY3JpcHRJRCA9IHZPdXRmaXQuU3BlY2lhbElEDQoJCQkJdk91dGZpdC5TcGVjaWFsSUQgPSBuaWwNCgkJCQkNCgkJCQl0YWJsZS5pbnNlcnQodlVwZGF0ZWRPdXRmaXRzLCB2T3V0Zml0KQ0KCQkJZW5kDQoJCWVuZA0KCQkNCgkJLS0NCgkJDQoJCWZvciBfLCB2T3V0Zml0IGluIGlwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMuUGFydGlhbCkgZG8NCgkJCXZPdXRmaXQuSXNBY2Nlc3NvcnkgPSBuaWwNCgkJCXRhYmxlLmluc2VydCh2VXBkYXRlZE91dGZpdHMsIHZPdXRmaXQpDQoJCWVuZA0KCQkNCgkJLS0NCgkJDQoJCWZvciBfLCB2T3V0Zml0IGluIGlwYWlycyh2VXBkYXRlZE91dGZpdHMpIGRvDQoJCQlzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZCh2T3V0Zml0KQ0KCQllbmQNCgkJDQoJCWZvciBfLCB2T3V0Zml0IGluIGlwYWlycyh2RGVsZXRlZE91dGZpdHMpIGRvDQoJCQlzZWxmOkRlbGV0ZU91dGZpdCh2T3V0Zml0KQ0KCQllbmQNCgkJDQoJCXNlbGYuU2V0dGluZ3MuT3V0Zml0cy5TcGVjaWFsID0gbmlsDQoJCXNlbGYuU2V0dGluZ3MuT3V0Zml0cy5QYXJ0aWFsID0gbmlsDQoJCQ0KCQlzZWxmLlNldHRpbmdzLlZlcnNpb24gPSA5DQoJZW5kDQoJDQoJLS0gVmVyc2lvbiAxMCBlbGltaW5hdGVzIHRoZSBTY3JpcHRFdmVudHMgZmllbGQgYW5kIG1vdmVzDQoJLS0gaXQgdG8gdGhlIHNvdXJjZSBpbnN0ZWFkDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIDwgMTAgdGhlbg0KCQlmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJCWZvciB2SW5kZXgsIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJCWlmIHZPdXRmaXQuU2NyaXB0IGFuZCB2T3V0Zml0LlNjcmlwdEV2ZW50cyB0aGVuDQoJCQkJCXZPdXRmaXQuU2NyaXB0ID0gIi0tICRFVkVOVFMgIi4udk91dGZpdC5TY3JpcHRFdmVudHMuLiJcbiIuLnZPdXRmaXQuU2NyaXB0DQoJCQkJZW5kDQoJCQkJdk91dGZpdC5TY3JpcHRFdmVudHMgPSBuaWwNCgkJCWVuZA0KCQllbmQNCgkJDQoJCXNlbGYuU2V0dGluZ3MuVmVyc2lvbiA9IDEwDQoJZW5kDQoJDQoJLS0gVmVyc2lvbiAxMSBwcmV2ZW50cyBzY3JpcHRlZCBvdXRmaXRzIGZyb20gYmVpbmcgdHJlYXRlZCBhcyBjb21wbGV0ZSBvdXRmaXRzDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIDwgMTEgdGhlbg0KCQlzZWxmOkNoZWNrT3V0Zml0Q2F0ZWdvcmllcygpDQoJCXNlbGYuU2V0dGluZ3MuVmVyc2lvbiA9IDExDQoJZW5kDQoJDQoJLS0gVmVyc2lvbiAxMiBtb3ZlcyB0aGUgQkdEaXNhYmxlZCwgQVFEaXNhYmxlZCBhbmQgTmF4eERpc2FibGVkIGZsYWdzIHRvDQoJLS0gdGhlIHNjcmlwdCBzZXR0aW5ncyBmb3IgdGhlIHJpZGluZyBvdXRmaVp0DQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIDwgMTIgdGhlbg0KCQlsb2NhbCB2UmlkaW5nT3V0Zml0ID0gc2VsZjpHZXRPdXRmaXRCeVNjcmlwdElEKCJSaWRpbmciKQ0KCQkNCgkJaWYgdlJpZGluZ091dGZpdCB0aGVuDQoJCQlpZiBub3QgdlJpZGluZ091dGZpdC5TY3JpcHRTZXR0aW5ncyB0aGVuDQoJCQkJdlJpZGluZ091dGZpdC5TY3JpcHRTZXR0aW5ncyA9IHt9DQoJCQllbmQNCgkJCQ0KCQkJdlJpZGluZ091dGZpdC5TY3JpcHRTZXR0aW5ncy5EaXNhYmxlQVE0MCA9IHZSaWRpbmdPdXRmaXQuQVFEaXNhYmxlZA0KCQkJdlJpZGluZ091dGZpdC5TY3JpcHRTZXR0aW5ncy5EaXNhYmxlQkcgPSB2UmlkaW5nT3V0Zml0LkJHRGlzYWJsZWQNCgkJCXZSaWRpbmdPdXRmaXQuU2NyaXB0U2V0dGluZ3MuRGlzYWJsZU5heHggPSB2UmlkaW5nT3V0Zml0Lk5heHhEaXNhYmxlZA0KCQkJDQoJCQl2UmlkaW5nT3V0Zml0LkFRRGlzYWJsZWQgPSBuaWwNCgkJCXZSaWRpbmdPdXRmaXQuQkdEaXNhYmxlZCA9IG5pbA0KCQkJdlJpZGluZ091dGZpdC5OYXh4RGlzYWJsZWQgPSBuaWwNCgkJZW5kDQoJCQ0KCQlzZWxmLlNldHRpbmdzLlZlcnNpb24gPSAxMg0KCWVuZA0KCQ0KCS0tIFZlcnNpb24gMTMgYWRkcyB0aGUgTGF5ZXJJbmRleCB0YWJsZQ0KCQ0KCWlmIHNlbGYuU2V0dGluZ3MuVmVyc2lvbiA8IDEzIHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5MYXllckluZGV4ID0ge30NCgkJc2VsZi5TZXR0aW5ncy5WZXJzaW9uID0gMTMNCgllbmQNCgkNCgktLSBWZXJzaW9uIDE0IHVwZGF0ZXMgYWxsIG91dGZpdHMgd2l0aCBJbnZUeXBlIGZpZWxkcw0KCQ0KCWlmIHNlbGYuU2V0dGluZ3MuVmVyc2lvbiA8IDE0IHRoZW4NCgkJc2VsZi5TY2hlZHVsZXJMaWI6U2NoZWR1bGVUYXNrKDUsIE91dGZpdHRlci5VcGRhdGVJbnZUeXBlcywgT3V0Zml0dGVyKQ0KCQkNCgkJc2VsZi5TZXR0aW5ncy5WZXJzaW9uID0gMTQNCgllbmQNCgkNCgktLSBWZXJzaW9uIDE1IGFsbG93cyBzY3JpcHRlZCBvdXRmaXRzIHRvIGJlIGNvbXBsZXRlIG91dGZpdHMNCgkNCglpZiBzZWxmLlNldHRpbmdzLlZlcnNpb24gPCAxNSB0aGVuDQoJCXNlbGY6Q2hlY2tPdXRmaXRDYXRlZ29yaWVzKCkNCgkJc2VsZi5TZXR0aW5ncy5WZXJzaW9uID0gMTUNCgllbmQNCgkNCgktLSBWZXJzaW9uIDE2IGFkZHMgdGhlIFJlY2VudENvbXBsZXRlT3V0Zml0cyBsaXN0IHRvIHRoZSBzZXR0aW5ncw0KCQ0KCWlmIHNlbGYuU2V0dGluZ3MuVmVyc2lvbiA8IDE2IHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHMgPSB7fQ0KCQlzZWxmLlNldHRpbmdzLlZlcnNpb24gPSAxNg0KCWVuZA0KCQ0KCS0tIFZlcnNpb24gMTcgdXBkYXRlcyBhbGwgb3V0Zml0cyB3aXRoIFN1YlR5cGUgZmllbGRzDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIDwgMTcgdGhlbg0KCQlzZWxmLlNjaGVkdWxlckxpYjpTY2hlZHVsZVRhc2soNSwgT3V0Zml0dGVyLlVwZGF0ZVN1YlR5cGVzLCBPdXRmaXR0ZXIpDQoJCQ0KCQlzZWxmLlNldHRpbmdzLlZlcnNpb24gPSAxNw0KCWVuZA0KCQ0KCS0tIFZlcnNpb24gMTggY29udmVydHMgYWxsIG91dGZpdHMgSmV3ZWxDb2RlIGZpZWxkcyB0byBHZW0gZmllbGRzDQoJDQoJaWYgc2VsZi5TZXR0aW5ncy5WZXJzaW9uIDwgMTggdGhlbg0KCQlpZiBzZWxmLlNldHRpbmdzLk91dGZpdHMgdGhlbg0KCQkJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCQkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQkJCWlmIHZPdXRmaXQuSXRlbXMgdGhlbg0KCQkJCQkJZm9yIHZJbnZlbnRvcnlTbG90LCB2SXRlbUluZm8gaW4gcGFpcnModk91dGZpdC5JdGVtcykgZG8NCgkJCQkJCQl2SXRlbUluZm8uR2VtMSA9IE91dGZpdHRlci5jVW5pcXVlR2VtRW5jaGFudElEc1t2SXRlbUluZm8uSmV3ZWxDb2RlMV0NCgkJCQkJCQl2SXRlbUluZm8uR2VtMiA9IE91dGZpdHRlci5jVW5pcXVlR2VtRW5jaGFudElEc1t2SXRlbUluZm8uSmV3ZWxDb2RlMl0NCgkJCQkJCQl2SXRlbUluZm8uR2VtMyA9IE91dGZpdHRlci5jVW5pcXVlR2VtRW5jaGFudElEc1t2SXRlbUluZm8uSmV3ZWxDb2RlM10NCgkJCQkJCWVuZA0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgkJDQoJCXNlbGYuU2V0dGluZ3MuVmVyc2lvbiA9IDE4DQoJZW5kDQoJDQoJLS0gUmVwYWlyIG1pc3Npbmcgc2V0dGluZ3MNCgkNCglpZiBub3Qgc2VsZi5TZXR0aW5ncy5SZWNlbnRDb21wbGV0ZU91dGZpdHMgdGhlbg0KCQlzZWxmLlNldHRpbmdzLlJlY2VudENvbXBsZXRlT3V0Zml0cyA9IHt9DQoJZW5kDQoJDQoJaWYgbm90IHNlbGYuU2V0dGluZ3MuTGF5ZXJJbmRleCB0aGVuDQoJCXNlbGYuU2V0dGluZ3MuTGF5ZXJJbmRleCA9IHt9DQoJZW5kDQoJDQoJaWYgbm90IHNlbGYuU2V0dGluZ3MuTGFzdE91dGZpdFN0YWNrIHRoZW4NCgkJc2VsZi5TZXR0aW5ncy5MYXN0T3V0Zml0U3RhY2sgPSB7fQ0KCWVuZA0KCQ0KCWlmIG5vdCBzZWxmLlNldHRpbmdzLlJlY2VudENvbXBsZXRlT3V0Zml0cyB0aGVuDQoJCXNlbGYuU2V0dGluZ3MuUmVjZW50Q29tcGxldGVPdXRmaXRzID0ge30NCgllbmQNCgkNCglpZiBub3Qgc2VsZi5TZXR0aW5ncy5PdXRmaXRCYXIgdGhlbg0KCQlzZWxmLlNldHRpbmdzLk91dGZpdEJhciA9IHt9DQoJCXNlbGYuU2V0dGluZ3MuT3V0Zml0QmFyLlNob3dPdXRmaXRCYXIgPSB0cnVlDQoJZW5kDQoJDQoJLS0gU2NhbiB0aGUgb3V0Zml0cyBhbmQgbWFrZSBzdXJlIGV2ZXJ5dGhpbmcgaXMgaW4gb3JkZXINCgkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQl2T3V0Zml0OkNoZWNrT3V0Zml0KHZDYXRlZ29yeUlEKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6Q2hlY2tPdXRmaXRDYXRlZ29yaWVzKCkNCglsb2NhbCB2QWxsT3V0Zml0cyA9IHt9DQoJDQoJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciBfLCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCXRhYmxlLmluc2VydCh2QWxsT3V0Zml0cywgdk91dGZpdCkNCgkJZW5kDQoJZW5kDQoJDQoJZm9yIF8sIHZPdXRmaXQgaW4gaXBhaXJzKHZBbGxPdXRmaXRzKSBkbw0KCQlzZWxmOk91dGZpdFNldHRpbmdzQ2hhbmdlZCh2T3V0Zml0KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGVJbnZUeXBlcygpDQoJbG9jYWwgdkludmVudG9yeUNhY2hlID0gc2VsZjpHZXRJbnZlbnRvcnlDYWNoZSgpDQoJbG9jYWwgdlJlc3VsdCA9IHRydWUNCgkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQlpZiBub3Qgdk91dGZpdDpVcGRhdGVJbnZUeXBlcyh2SW52ZW50b3J5Q2FjaGUpIHRoZW4NCgkJCQl2UmVzdWx0ID0gZmFsc2UNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdlJlc3VsdA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGVTdWJUeXBlcygpDQoJbG9jYWwgdkludmVudG9yeUNhY2hlID0gc2VsZjpHZXRJbnZlbnRvcnlDYWNoZSgpDQoJbG9jYWwgdlJlc3VsdCA9IHRydWUNCgkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQlpZiBub3Qgdk91dGZpdDpVcGRhdGVTdWJUeXBlcyh2SW52ZW50b3J5Q2FjaGUpIHRoZW4NCgkJCQl2UmVzdWx0ID0gZmFsc2UNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdlJlc3VsdA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpVcGRhdGVEYXRhYmFzZUl0ZW1Db2RlcygpDQoJbG9jYWwgdkludmVudG9yeUNhY2hlID0gc2VsZjpHZXRJbnZlbnRvcnlDYWNoZSgpDQoJbG9jYWwgdlJlc3VsdCA9IHRydWUNCgkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIHZJbmRleCwgdk91dGZpdCBpbiBpcGFpcnModk91dGZpdHMpIGRvDQoJCQlpZiBub3Qgdk91dGZpdDpVcGRhdGVEYXRhYmFzZUl0ZW1Db2Rlcyh2SW52ZW50b3J5Q2FjaGUpIHRoZW4NCgkJCQl2UmVzdWx0ID0gZmFsc2UNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdlJlc3VsdA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZXRQbGF5ZXJTdGF0KHBTdGF0SW5kZXgpDQoJbG9jYWwgXywgdkVmZmVjdGl2ZVZhbHVlLCB2UG9zVmFsdWUsIHZOZWdWYWx1ZSA9IFVuaXRTdGF0KCJwbGF5ZXIiLCBwU3RhdEluZGV4KQ0KCQ0KCXJldHVybiB2RWZmZWN0aXZlVmFsdWUgLSB2UG9zVmFsdWUgLSB2TmVnVmFsdWUsIHZQb3NWYWx1ZSArIHZOZWdWYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpEZXBvc2l0T3V0Zml0KHBPdXRmaXQsIHBVbmlxdWVJdGVtc09ubHkpDQoJLS0gRGVzZWxlY3QgYW55IG91dGZpdHMgdG8gYXZvaWQgdGhlbSBmcm9tIGJlaW5nIHVwZGF0ZWQgd2hlbg0KCS0tIGl0ZW1zIGdldCBwdXQgYXdheQ0KCQ0KCXNlbGY6Q2xlYXJTZWxlY3Rpb24oKQ0KCQ0KCS0tIEJ1aWxkIGEgbGlzdCBvZiBpdGVtcyBmb3IgdGhlIG91dGZpdA0KCQ0KCWxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IHNlbGY6R2V0SW52ZW50b3J5Q2FjaGUoKQ0KCQ0KCXZJbnZlbnRvcnlDYWNoZTpSZXNldElnbm9yZUl0ZW1GbGFncygpDQoJDQoJLS0gTWFrZSBhIGNvcHkgb2YgdGhlIG91dGZpdA0KCQ0KCWxvY2FsIHZVbmVxdWlwT3V0Zml0ID0gc2VsZjpOZXdFbXB0eU91dGZpdCgpDQoJbG9jYWwgdkl0ZW1zID0gcE91dGZpdDpHZXRJdGVtcygpDQoJDQoJZm9yIHZJbnZlbnRvcnlTbG90LCB2SXRlbSBpbiBwYWlycyh2SXRlbXMpIGRvDQoJCXZVbmVxdWlwT3V0Zml0OlNldEl0ZW0odkludmVudG9yeVNsb3QsIHZJdGVtKQ0KCWVuZA0KCQ0KCS0tIFN1YnRyYWN0IG91dCBpdGVtcyBmcm9tIG90aGVyIG91dGZpdHMgaWYgdW5pcXVlIGlzIHNwZWNpZmllZA0KCQ0KCWlmIHBVbmlxdWVJdGVtc09ubHkgdGhlbg0KCQlmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJCWZvciB2T3V0Zml0SW5kZXgsIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJCWlmIHZPdXRmaXQgfj0gcE91dGZpdCB0aGVuDQoJCQkJCWxvY2FsIHZNaXNzaW5nSXRlbXMsIHZCYW5rZWRJdGVtcyA9IHZJbnZlbnRvcnlDYWNoZTpHZXRNaXNzaW5nSXRlbXModk91dGZpdCkNCgkJCQkJDQoJCQkJCS0tIE9ubHkgc3VidHJhY3Qgb3V0IGl0ZW1zIGZyb20gb3V0Zml0cyB3aGljaCBhcmVuJ3QgdGhlbXNlbHZlcyBwYXJ0aWFseSBiYW5rZWQNCgkJCQkJDQoJCQkJCWlmIHZCYW5rZWRJdGVtcyA9PSBuaWwgdGhlbg0KCQkJCQkJc2VsZjpTdWJ0cmFjdE91dGZpdCh2VW5lcXVpcE91dGZpdCwgdk91dGZpdCwgdHJ1ZSkNCgkJCQkJZW5kDQoJCQkJZW5kIC0tIGlmIHZPdXRmaXQNCgkJCWVuZCAtLSBmb3Igdk91dGZpdEluZGV4DQoJCWVuZCAtLSBmb3IgdkNhdGVnb3J5SUQNCgllbmQgLS0gaWYgcFVuaXF1ZUl0ZW1zT25seQ0KCQ0KCS0tIEJ1aWxkIHRoZSBjaGFuZ2UgbGlzdA0KCQ0KCXZJbnZlbnRvcnlDYWNoZTpSZXNldElnbm9yZUl0ZW1GbGFncygpDQoJDQoJbG9jYWwgdkVxdWlwbWVudENoYW5nZUxpc3QgPSBzZWxmOkJ1aWxkVW5lcXVpcENoYW5nZUxpc3QodlVuZXF1aXBPdXRmaXQsIHZJbnZlbnRvcnlDYWNoZSkNCgkNCglpZiBub3QgdkVxdWlwbWVudENoYW5nZUxpc3QgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCgktLSBFbGltaW5hdGUgaXRlbXMgd2hpY2ggYXJlIGFscmVhZHkgYmFua2VkDQoJDQoJbG9jYWwgdkNoYW5nZUluZGV4ID0gMQ0KCWxvY2FsIHZOdW1DaGFuZ2VzID0gI3ZFcXVpcG1lbnRDaGFuZ2VMaXN0DQoJDQoJd2hpbGUgdkNoYW5nZUluZGV4IDw9IHZOdW1DaGFuZ2VzIGRvDQoJCXZFcXVpcG1lbnRDaGFuZ2UgPSB2RXF1aXBtZW50Q2hhbmdlTGlzdFt2Q2hhbmdlSW5kZXhdDQoJCQ0KCQlpZiBzZWxmOklzQmFua0JhZ0luZGV4KHZFcXVpcG1lbnRDaGFuZ2UuRnJvbUxvY2F0aW9uLkJhZ0luZGV4KSB0aGVuDQoJCQl0YWJsZS5yZW1vdmUodkVxdWlwbWVudENoYW5nZUxpc3QsIHZDaGFuZ2VJbmRleCkNCgkJCXZOdW1DaGFuZ2VzID0gdk51bUNoYW5nZXMgLSAxDQoJCWVsc2UNCgkJCXZDaGFuZ2VJbmRleCA9IHZDaGFuZ2VJbmRleCArIDENCgkJZW5kDQoJZW5kDQoJDQoJLS0gR2V0IHRoZSBsaXN0IG9mIGVtcHR5IGJhbmsgc2xvdHMNCgkNCglsb2NhbCB2RW1wdHlCYW5rU2xvdHMgPSBzZWxmOkdldEVtcHR5QmFua1Nsb3RMaXN0KCkNCgkNCgktLSBFeGVjdXRlIHRoZSBjaGFuZ2VzDQoJDQoJc2VsZjpFeGVjdXRlRXF1aXBtZW50Q2hhbmdlTGlzdDIodkVxdWlwbWVudENoYW5nZUxpc3QsIHZFbXB0eUJhbmtTbG90cywgc2VsZi5jRGVwb3NpdEJhZ3NGdWxsRXJyb3IsIHZFeHBlY3RlZEludmVudG9yeUNhY2hlKQ0KCQ0KCXNlbGY6RGlzcGF0Y2hPdXRmaXRFdmVudCgiRURJVF9PVVRGSVQiLCBwT3V0Zml0OkdldE5hbWUoKSwgcE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6RGVwb3NpdE90aGVyT3V0Zml0cyhwT3V0Zml0KQ0KCS0tIERlc2VsZWN0IGFueSBvdXRmaXRzIHRvIGF2b2lkIHRoZW0gZnJvbSBiZWluZyB1cGRhdGVkIHdoZW4NCgktLSBpdGVtcyBnZXQgcHV0IGF3YXkNCgkNCglzZWxmOkNsZWFyU2VsZWN0aW9uKCkNCgkNCgktLSBHZXQgYSBsaXN0IG9mIGVxdWlwcGFibGUgaXRlbXMNCgkNCglsb2NhbCB2SW52ZW50b3J5Q2FjaGUgPSBzZWxmOkdldEludmVudG9yeUNhY2hlKCkNCgkNCgl2SW52ZW50b3J5Q2FjaGU6UmVzZXRJZ25vcmVJdGVtRmxhZ3MoKQ0KCQ0KCS0tIE1hcmsgYWxsIGl0ZW1zIGluIHRoZSBjdXJyZW50IG91dGZpdCBzbyB0aGV5IHdvbid0IGJlIGRlcG9zaXRlZA0KCQ0KCWxvY2FsIHZJdGVtcyA9IHBPdXRmaXQ6R2V0SXRlbXMoKQ0KCQ0KCWZvciB2SW52ZW50b3J5U2xvdCwgdk91dGZpdEl0ZW0gaW4gcGFpcnModkl0ZW1zKSBkbw0KCQlsb2NhbCB2SXRlbSwgdklnbm9yZWRJdGVtID0gdkludmVudG9yeUNhY2hlOkZpbmRJdGVtT3JBbHQodk91dGZpdEl0ZW0sIHRydWUpDQoJCQ0KCQktLSBOb3RoaW5nIG1vcmUgdG8gZG8sIHRoZSBmaW5kIGNvbW1hbmQgbWFya3MgdGhlIGl0ZW0NCgllbmQgLS0gZm9yDQoJDQoJLS0gQnVpbGQgYSBsaXN0IG9mIGl0ZW1zIGluIGFsbCBvdXRmaXRzDQoJDQoJbG9jYWwgdkVxdWlwbWVudENoYW5nZUxpc3QgPSB7fQ0KCQ0KCWZvciB2Q2F0ZWdvcnlJRCwgdk91dGZpdHMgaW4gcGFpcnMoc2VsZi5TZXR0aW5ncy5PdXRmaXRzKSBkbw0KCQlmb3Igdk91dGZpdEluZGV4LCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCWlmIHZPdXRmaXQgfj0gcE91dGZpdCB0aGVuDQoJCQkJbG9jYWwgdkl0ZW1zID0gdk91dGZpdDpHZXRJdGVtcygpDQoJCQkJDQoJCQkJZm9yIHZJbnZlbnRvcnlTbG90LCB2T3V0Zml0SXRlbSBpbiBwYWlycyh2SXRlbXMpIGRvDQoJCQkJCWxvY2FsIHZJdGVtLCB2SWdub3JlZEl0ZW0gPSB2SW52ZW50b3J5Q2FjaGU6RmluZEl0ZW1PckFsdCh2T3V0Zml0SXRlbSwgdHJ1ZSkNCgkJCQkJDQoJCQkJCWlmIHZJdGVtDQoJCQkJCWFuZCBub3Qgc2VsZjpJc0JhbmtCYWdJbmRleCh2SXRlbS5Mb2NhdGlvbi5CYWdJbmRleCkgdGhlbg0KCQkJCQkJdGFibGUuaW5zZXJ0KHZFcXVpcG1lbnRDaGFuZ2VMaXN0LCB7RnJvbUxvY2F0aW9uID0gdkl0ZW0uTG9jYXRpb24sIEl0ZW0gPSB2SXRlbSwgVG9Mb2NhdGlvbiA9IG5pbH0pDQoJCQkJCWVuZA0KCQkJCWVuZCAtLSBmb3INCgkJCWVuZCAtLSBpZiB2T3V0Zml0DQoJCWVuZCAtLSBmb3Igdk91dGZpdEluZGV4DQoJZW5kIC0tIGZvciB2Q2F0ZWdvcnlJRA0KCQ0KCWlmICN2RXF1aXBtZW50Q2hhbmdlTGlzdCA9PSAwIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJLS0gR2V0IHRoZSBsaXN0IG9mIGVtcHR5IGJhbmsgc2xvdHMNCgkNCglsb2NhbCB2RW1wdHlCYW5rU2xvdHMgPSBzZWxmOkdldEVtcHR5QmFua1Nsb3RMaXN0KCkNCgkNCgktLSBFeGVjdXRlIHRoZSBjaGFuZ2VzDQoJDQoJc2VsZjpFeGVjdXRlRXF1aXBtZW50Q2hhbmdlTGlzdDIodkVxdWlwbWVudENoYW5nZUxpc3QsIHZFbXB0eUJhbmtTbG90cywgc2VsZi5jRGVwb3NpdEJhZ3NGdWxsRXJyb3IsIHZFeHBlY3RlZEludmVudG9yeUNhY2hlKQ0KCQ0KCXNlbGY6RGlzcGF0Y2hPdXRmaXRFdmVudCgiRURJVF9PVVRGSVQiLCBwT3V0Zml0OkdldE5hbWUoKSwgcE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6V2l0aGRyYXdPdXRmaXQocE91dGZpdCkNCglsb2NhbCB2SW52ZW50b3J5Q2FjaGUgPSBzZWxmOkdldEludmVudG9yeUNhY2hlKCkNCgkNCgktLSBCdWlsZCBhIGxpc3Qgb2YgaXRlbXMgZm9yIHRoZSBvdXRmaXQNCgkNCgl2SW52ZW50b3J5Q2FjaGU6UmVzZXRJZ25vcmVJdGVtRmxhZ3MoKQ0KCQ0KCWxvY2FsIHZFcXVpcG1lbnRDaGFuZ2VMaXN0ID0gc2VsZjpCdWlsZFVuZXF1aXBDaGFuZ2VMaXN0KHBPdXRmaXQsIHZJbnZlbnRvcnlDYWNoZSkNCgkNCglpZiBub3QgdkVxdWlwbWVudENoYW5nZUxpc3QgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCgktLSBFbGltaW5hdGUgaXRlbXMgd2hpY2ggYXJlbid0IGluIHRoZSBiYW5rDQoJDQoJbG9jYWwgdkNoYW5nZUluZGV4ID0gMQ0KCWxvY2FsIHZOdW1DaGFuZ2VzID0gI3ZFcXVpcG1lbnRDaGFuZ2VMaXN0DQoJDQoJd2hpbGUgdkNoYW5nZUluZGV4IDw9IHZOdW1DaGFuZ2VzIGRvDQoJCXZFcXVpcG1lbnRDaGFuZ2UgPSB2RXF1aXBtZW50Q2hhbmdlTGlzdFt2Q2hhbmdlSW5kZXhdDQoJCQ0KCQlpZiBub3Qgc2VsZjpJc0JhbmtCYWdJbmRleCh2RXF1aXBtZW50Q2hhbmdlLkZyb21Mb2NhdGlvbi5CYWdJbmRleCkgdGhlbg0KCQkJdGFibGUucmVtb3ZlKHZFcXVpcG1lbnRDaGFuZ2VMaXN0LCB2Q2hhbmdlSW5kZXgpDQoJCQl2TnVtQ2hhbmdlcyA9IHZOdW1DaGFuZ2VzIC0gMQ0KCQllbHNlDQoJCQl2Q2hhbmdlSW5kZXggPSB2Q2hhbmdlSW5kZXggKyAxDQoJCWVuZA0KCWVuZA0KCQ0KCS0tIEdldCB0aGUgbGlzdCBvZiBlbXB0eSBiYWcgc2xvdHMNCg0KCWxvY2FsIHZFbXB0eUJhZ1Nsb3RzID0gc2VsZjpHZXRFbXB0eUJhZ1Nsb3RMaXN0KCkNCgkNCgktLSBFeGVjdXRlIHRoZSBjaGFuZ2VzDQoJDQoJc2VsZjpFeGVjdXRlRXF1aXBtZW50Q2hhbmdlTGlzdDIodkVxdWlwbWVudENoYW5nZUxpc3QsIHZFbXB0eUJhZ1Nsb3RzLCBzZWxmLmNXaXRoZHJhd0JhZ3NGdWxsRXJyb3IsIHZFeHBlY3RlZEludmVudG9yeUNhY2hlKQ0KCQ0KCXNlbGY6RGlzcGF0Y2hPdXRmaXRFdmVudCgiRURJVF9PVVRGSVQiLCBwT3V0Zml0OkdldE5hbWUoKSwgcE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6V2l0aGRyYXdPdGhlck91dGZpdHMocE91dGZpdCkNCglsb2NhbCB2SW52ZW50b3J5Q2FjaGUgPSBzZWxmOkdldEludmVudG9yeUNhY2hlKCkNCgkNCgktLSBCdWlsZCBhIGxpc3Qgb2YgaXRlbXMgaW4gYWxsIG90aGVyIG91dGZpdHMNCgkNCglsb2NhbCB2RXF1aXBtZW50Q2hhbmdlTGlzdCA9IHt9DQoJDQoJZm9yIHZDYXRlZ29yeUlELCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciB2T3V0Zml0SW5kZXgsIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJaWYgdk91dGZpdCB+PSBwT3V0Zml0IHRoZW4NCgkJCQlsb2NhbCB2SXRlbXMgPSB2T3V0Zml0OkdldEl0ZW1zKCkNCgkJCQkNCgkJCQlmb3IgdkludmVudG9yeVNsb3QsIHZPdXRmaXRJdGVtIGluIHBhaXJzKHZJdGVtcykgZG8NCgkJCQkJbG9jYWwgdkl0ZW0sIHZJZ25vcmVkSXRlbSA9IHZJbnZlbnRvcnlDYWNoZTpGaW5kSXRlbU9yQWx0KHZPdXRmaXRJdGVtLCB0cnVlKQ0KCQkJCQkNCgkJCQkJaWYgdkl0ZW0NCgkJCQkJYW5kIHNlbGY6SXNCYW5rQmFnSW5kZXgodkl0ZW0uTG9jYXRpb24uQmFnSW5kZXgpIHRoZW4NCgkJCQkJCXRhYmxlLmluc2VydCh2RXF1aXBtZW50Q2hhbmdlTGlzdCwge0Zyb21Mb2NhdGlvbiA9IHZJdGVtLkxvY2F0aW9uLCBJdGVtID0gdkl0ZW0sIFRvTG9jYXRpb24gPSBuaWx9KQ0KCQkJCQllbmQNCgkJCQllbmQgLS0gZm9yDQoJCQllbmQgLS0gaWYgdk91dGZpdA0KCQllbmQgLS0gZm9yIHZPdXRmaXRJbmRleA0KCWVuZCAtLSBmb3IgdkNhdGVnb3J5SUQNCgkNCglpZiAjdkVxdWlwbWVudENoYW5nZUxpc3QgPT0gMCB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCS0tIEdldCB0aGUgbGlzdCBvZiBlbXB0eSBiYWcgc2xvdHMNCg0KCWxvY2FsIHZFbXB0eUJhZ1Nsb3RzID0gc2VsZjpHZXRFbXB0eUJhZ1Nsb3RMaXN0KCkNCgkNCgktLSBFeGVjdXRlIHRoZSBjaGFuZ2VzDQoJDQoJc2VsZjpFeGVjdXRlRXF1aXBtZW50Q2hhbmdlTGlzdDIodkVxdWlwbWVudENoYW5nZUxpc3QsIHZFbXB0eUJhZ1Nsb3RzLCBzZWxmLmNXaXRoZHJhd0JhZ3NGdWxsRXJyb3IsIHZFeHBlY3RlZEludmVudG9yeUNhY2hlKQ0KCQ0KCXNlbGY6RGlzcGF0Y2hPdXRmaXRFdmVudCgiRURJVF9PVVRGSVQiLCBwT3V0Zml0OkdldE5hbWUoKSwgcE91dGZpdCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6VGVzdEFtbW9TbG90KCkNCglsb2NhbCB2SXRlbUluZm8gPSBzZWxmOkdldEludmVudG9yeUl0ZW1JbmZvKCJBbW1vU2xvdCIpDQoJbG9jYWwgdlNsb3RJRCA9IHNlbGYuY1Nsb3RJRHMuQW1tb1Nsb3QNCglsb2NhbCB2SXRlbUxpbmsgPSBHZXRJbnZlbnRvcnlJdGVtTGluaygicGxheWVyIiwgdlNsb3RJRCkNCgkNCglzZWxmOkRlYnVnVGFibGUodkl0ZW1JbmZvLCAidkl0ZW1JbmZvIikNCgkNCglzZWxmOkRlYnVnTWVzc2FnZSgiU2xvdElEOiAiLi52U2xvdElEKQ0KCXNlbGY6RGVidWdNZXNzYWdlKCJJdGVtTGluazogIi4udkl0ZW1MaW5rKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5HYW1lVG9vbFRpcF9PblNob3coLi4uKQ0KCU91dGZpdHRlci5FdmVudExpYjpEaXNwYXRjaEV2ZW50KCJHQU1FVE9PTFRJUF9TSE9XIikNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuR2FtZVRvb2xUaXBfT25IaWRlKC4uLikNCglPdXRmaXR0ZXIuRXZlbnRMaWI6RGlzcGF0Y2hFdmVudCgiR0FNRVRPT0xUSVBfSElERSIpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldE91dGZpdHNVc2luZ0l0ZW0ocEl0ZW1JbmZvKQ0KCWxvY2FsIHZGb3VuZE91dGZpdHMNCgkNCglmb3IgdkNhdGVnb3J5SUQsIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIF8sIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJaWYgdk91dGZpdDpPdXRmaXRVc2VzSXRlbShwSXRlbUluZm8pIHRoZW4NCgkJCQlpZiBub3QgdkZvdW5kT3V0Zml0cyB0aGVuDQoJCQkJCXZGb3VuZE91dGZpdHMgPSB7fQ0KCQkJCWVuZA0KCQkJCQ0KCQkJCXRhYmxlLmluc2VydCh2Rm91bmRPdXRmaXRzLCB2T3V0Zml0KQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiB2Rm91bmRPdXRmaXRzDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldE91dGZpdHNMaXN0QXNUZXh0KHBPdXRmaXRzKQ0KCWlmIG5vdCBwT3V0Zml0cw0KCW9yICNwT3V0Zml0cyA9PSAwIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgdkludmVudG9yeUNhY2hlID0gc2VsZjpHZXRJbnZlbnRvcnlDYWNoZSgpDQoJbG9jYWwgdk5hbWVzID0gbmlsDQoJDQoJZm9yIF8sIHZPdXRmaXQgaW4gaXBhaXJzKHBPdXRmaXRzKSBkbw0KCQlsb2NhbCB2TWlzc2luZ0l0ZW1zLCB2QmFua2VkSXRlbXMgPSB2SW52ZW50b3J5Q2FjaGU6R2V0TWlzc2luZ0l0ZW1zKHZPdXRmaXQpDQoJCWxvY2FsIHZOYW1lDQoJCQ0KCQlpZiB2T3V0Zml0LkRpc2FibGVkIHRoZW4NCgkJCXZOYW1lID0gR1JBWV9GT05UX0NPTE9SX0NPREUNCgkJZWxzZWlmIHZNaXNzaW5nSXRlbXMgdGhlbg0KCQkJdk5hbWUgPSBSRURfRk9OVF9DT0xPUl9DT0RFDQoJCWVsc2VpZiB2QmFua2VkSXRlbXMgdGhlbg0KCQkJdk5hbWUgPSBzZWxmLkJBTktFRF9GT05UX0NPTE9SX0NPREUNCgkJZWxzZQ0KCQkJdk5hbWUgPSBISUdITElHSFRfRk9OVF9DT0xPUl9DT0RFDQoJCWVuZA0KDQoJCSB2TmFtZSA9IHZOYW1lLi52T3V0Zml0OkdldE5hbWUoKS4uRk9OVF9DT0xPUl9DT0RFX0NMT1NFDQoJCQ0KCQlpZiB2TmFtZXMgdGhlbg0KCQkJdk5hbWVzID0gdk5hbWVzLi4iLCAiLi52TmFtZQ0KCQllbHNlDQoJCQl2TmFtZXMgPSB2TmFtZQ0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdk5hbWVzDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkFkZE91dGZpdHNVc2luZ0l0ZW1Ub1Rvb2x0aXAocFRvb2x0aXAsIHBJdGVtSW5mbykNCglsb2NhbCB2T3V0Zml0TGlzdFN0cmluZw0KCQ0KCWlmIHNlbGYuT3V0Zml0SW5mb0NhY2hlLk91dGZpdHNVc2luZ0l0ZW0NCglhbmQgc2VsZi5PdXRmaXRJbmZvQ2FjaGUuT3V0Zml0c1VzaW5nSXRlbS5MaW5rDQoJYW5kIHNlbGYuT3V0Zml0SW5mb0NhY2hlLk91dGZpdHNVc2luZ0l0ZW0uTGluayA9PSBwSXRlbUluZm8uTGluayB0aGVuDQoJCXZPdXRmaXRMaXN0U3RyaW5nID0gc2VsZi5PdXRmaXRJbmZvQ2FjaGUuT3V0Zml0c1VzaW5nSXRlbS5TdHJpbmcNCgllbHNlDQoJCWxvY2FsIHZPdXRmaXRzID0gc2VsZjpHZXRPdXRmaXRzVXNpbmdJdGVtKHBJdGVtSW5mbykNCgkJDQoJCWlmIHZPdXRmaXRzIHRoZW4NCgkJCXZPdXRmaXRMaXN0U3RyaW5nID0gc2VsZjpHZXRPdXRmaXRzTGlzdEFzVGV4dCh2T3V0Zml0cykNCgkJZW5kDQoJCQ0KCQktLSBVcGRhdGUgdGhlIGNhY2hlDQoJCQ0KCQlpZiBwSXRlbUluZm8uTGluayB0aGVuDQoJCQlpZiBub3Qgc2VsZi5PdXRmaXRJbmZvQ2FjaGUuT3V0Zml0c1VzaW5nSXRlbSB0aGVuDQoJCQkJc2VsZi5PdXRmaXRJbmZvQ2FjaGUuT3V0Zml0c1VzaW5nSXRlbSA9IHt9DQoJCQllbmQNCgkJCQ0KCQkJc2VsZi5PdXRmaXRJbmZvQ2FjaGUuT3V0Zml0c1VzaW5nSXRlbS5MaW5rID0gcEl0ZW1JbmZvLkxpbmsNCgkJCXNlbGYuT3V0Zml0SW5mb0NhY2hlLk91dGZpdHNVc2luZ0l0ZW0uU3RyaW5nID0gdk91dGZpdExpc3RTdHJpbmcNCgkJZW5kDQoJZW5kDQoJDQoJLS0NCgkNCglpZiB2T3V0Zml0TGlzdFN0cmluZyB0aGVuDQoJCWxvY2FsIHZFcXVpcG1lbnRTZXRzUGF0dGVybiA9IE91dGZpdHRlcjpDb252ZXJ0Rm9ybWF0U3RyaW5nVG9TZWFyY2hQYXR0ZXJuKEVRVUlQTUVOVF9TRVRTKQ0KCQkNCgkJbG9jYWwgdlRvb2x0aXBMaXN0U3RyaW5nID0gRVFVSVBNRU5UX1NFVFM6Zm9ybWF0KHZPdXRmaXRMaXN0U3RyaW5nKQ0KCQlsb2NhbCB2TGluZUluZGV4LCB2TGluZUZyYW1lID0gT3V0Zml0dGVyOkZpbmRUb29sdGlwTGluZShwVG9vbHRpcCwgdkVxdWlwbWVudFNldHNQYXR0ZXJuKQ0KCQkNCgkJLS0gRm91bmQgYW4gZXhpc3RpbmcgRVFVSVBNRU5UX1NFVFMgbGluZQ0KCQkNCgkJaWYgdkxpbmVJbmRleCB0aGVuDQoJCQl2TGluZUZyYW1lOlNldFRleHQodlRvb2x0aXBMaXN0U3RyaW5nKQ0KCQkNCgkJLS0gQWRkIGEgbmV3IGxpbmUNCgkJDQoJCWVsc2UNCgkJCXBUb29sdGlwOkFkZExpbmUodlRvb2x0aXBMaXN0U3RyaW5nLCBOT1JNQUxfRk9OVF9DT0xPUi5yLCBOT1JNQUxfRk9OVF9DT0xPUi5nLCBOT1JNQUxfRk9OVF9DT0xPUi5iLCB0cnVlKQ0KCQkJcFRvb2x0aXA6U2hvdygpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5HYW1lVG9vbHRpcF9TZXRCYWdJdGVtKHBUb29sdGlwLCBwQmFnLCBwU2xvdCwgLi4uKQ0KCWxvY2FsIHZSZXN1bHQgPSB7cFRvb2x0aXA6T3V0Zml0dGVyX09yaWdTZXRCYWdJdGVtKHBCYWcsIHBTbG90LCAuLi4pfQ0KCQ0KCWlmIG5vdCBPdXRmaXR0ZXIuU2V0dGluZ3MuT3B0aW9ucy5EaXNhYmxlVG9vbFRpcEluZm8gdGhlbg0KCQlsb2NhbCB2SXRlbUluZm8gPSBPdXRmaXR0ZXI6R2V0QmFnSXRlbUluZm8ocEJhZywgcFNsb3QpDQoJCQ0KCQlpZiB2SXRlbUluZm8gdGhlbg0KCQkJT3V0Zml0dGVyOkFkZE91dGZpdHNVc2luZ0l0ZW1Ub1Rvb2x0aXAocFRvb2x0aXAsIHZJdGVtSW5mbykNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIHVucGFjayh2UmVzdWx0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5HYW1lVG9vbHRpcF9TZXRJbnZlbnRvcnlJdGVtKHBUb29sdGlwLCBwVW5pdCwgcFNsb3RJRCwgcE5hbWVPbmx5LCAuLi4pDQoJbG9jYWwgdlJlc3VsdCA9IHtwVG9vbHRpcDpPdXRmaXR0ZXJfT3JpZ1NldEludmVudG9yeUl0ZW0ocFVuaXQsIHBTbG90SUQsIHBOYW1lT25seSwgLi4uKX0NCgkNCgktLSBBZGQgdGhlIGxpc3Qgb2Ygb3V0Zml0cyB0aGUgaXRlbSBpcyB1c2VkIGJ5DQoJDQoJaWYgbm90IE91dGZpdHRlci5TZXR0aW5ncy5PcHRpb25zLkRpc2FibGVUb29sVGlwSW5mbw0KCWFuZCBVbml0SXNVbml0KHBVbml0LCAicGxheWVyIikgdGhlbg0KCQlsb2NhbCB2SW52ZW50b3J5U2xvdCA9IE91dGZpdHRlci5jU2xvdElEVG9JbnZlbnRvcnlTbG90W3BTbG90SURdDQoJCWxvY2FsIHZJdGVtSW5mbyA9IE91dGZpdHRlcjpHZXRTbG90SURJdGVtSW5mbyhwU2xvdElEKQ0KCQkNCgkJaWYgdkl0ZW1JbmZvIHRoZW4NCgkJCXZJdGVtSW5mby5Mb2NhdGlvbiA9IHtTbG90TmFtZSA9IHZJbnZlbnRvcnlTbG90fQ0KCQkJDQoJCQlPdXRmaXR0ZXI6QWRkT3V0Zml0c1VzaW5nSXRlbVRvVG9vbHRpcChwVG9vbHRpcCwgdkl0ZW1JbmZvKQ0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdW5wYWNrKHZSZXN1bHQpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkdhbWVUb29sdGlwX1NldEh5cGVybGluayhwVG9vbHRpcCwgcExpbmssIC4uLikNCglsb2NhbCB2UmVzdWx0ID0ge3BUb29sdGlwOk91dGZpdHRlcl9PcmlnU2V0SHlwZXJsaW5rKHBMaW5rLCAuLi4pfQ0KCQ0KCS0tIEFkZCB0aGUgbGlzdCBvZiBvdXRmaXRzIHRoZSBpdGVtIGlzIHVzZWQgYnkNCgkNCglpZiBub3QgT3V0Zml0dGVyLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZVRvb2xUaXBJbmZvIHRoZW4NCgkJbG9jYWwgdkl0ZW1JbmZvID0gT3V0Zml0dGVyOkdldEl0ZW1JbmZvRnJvbUxpbmsocExpbmspDQoJCQ0KCQlpZiB2SXRlbUluZm8gdGhlbg0KCQkJT3V0Zml0dGVyOkFkZE91dGZpdHNVc2luZ0l0ZW1Ub1Rvb2x0aXAocFRvb2x0aXAsIHZJdGVtSW5mbykNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIHVucGFjayh2UmVzdWx0KQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpJbml0aWFsaXplRnJhbWVNZXRob2RzKHBGcmFtZSwgcE1ldGhvZHMpDQoJaWYgcE1ldGhvZHMgdGhlbg0KCQlmb3Igdk1ldGhvZEZpZWxkLCB2TWV0aG9kRnVuY3Rpb24gaW4gcGFpcnMocE1ldGhvZHMpIGRvDQoJCQlwRnJhbWVbdk1ldGhvZEZpZWxkXSA9IHZNZXRob2RGdW5jdGlvbg0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6SW5pdGlhbGl6ZUZyYW1lV2lkZ2V0cyhwRnJhbWUsIHBXaWRnZXRzKQ0KCWlmIHBXaWRnZXRzIHRoZW4NCgkJbG9jYWwgdkZyYW1lTmFtZSA9IHBGcmFtZTpHZXROYW1lKCkNCgkJDQoJCWZvciBfLCB2V2lkZ2V0TmFtZSBpbiBwYWlycyhwV2lkZ2V0cykgZG8NCgkJCWlmIHN0cmluZy5zdWIodldpZGdldE5hbWUsIC0xKSA9PSAiKiIgdGhlbg0KCQkJCXZXaWRnZXROYW1lID0gdldpZGdldE5hbWU6c3ViKDEsIC0yKQ0KCQkJCQ0KCQkJCXBGcmFtZVt2V2lkZ2V0TmFtZV0gPSB7UGFyZW50RnJhbWUgPSBfR1t2RnJhbWVOYW1lLi52V2lkZ2V0TmFtZV19DQoJCQkJDQoJCQkJbG9jYWwgdkluZGV4ID0gMQ0KCQkJCQ0KCQkJCXdoaWxlIHRydWUgZG8NCgkJCQkJbG9jYWwgdldpZGdldCA9IF9HW3ZGcmFtZU5hbWUuLnZXaWRnZXROYW1lLi52SW5kZXhdDQoJCQkJCQ0KCQkJCQlpZiBub3QgdldpZGdldCB0aGVuDQoJCQkJCQlicmVhaw0KCQkJCQllbmQNCgkJCQkJDQoJCQkJCXZXaWRnZXQ6U2V0SUQodkluZGV4KQ0KCQkJCQl0YWJsZS5pbnNlcnQocEZyYW1lW3ZXaWRnZXROYW1lXSwgdldpZGdldCkNCgkJCQkJDQoJCQkJCXZJbmRleCA9IHZJbmRleCArIDENCgkJCQllbmQNCgkJCWVsc2UNCgkJCQlwRnJhbWVbdldpZGdldE5hbWVdID0gX0dbdkZyYW1lTmFtZS4udldpZGdldE5hbWVdDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlRvb2x0aXBDb250YWluc0xpbmUocFRvb2x0aXAsIHBUZXh0KQ0KCWxvY2FsIHZUb29sdGlwTmFtZSA9IHBUb29sdGlwOkdldE5hbWUoKQ0KCQ0KCWZvciB2TGluZSA9IDEsIDMwIGRvDQoJCWxvY2FsIHZUZXh0ID0gX0dbdlRvb2x0aXBOYW1lLi4iVGV4dExlZnQiLi52TGluZV0NCgkJDQoJCWlmIG5vdCB2VGV4dCB0aGVuDQoJCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJCQ0KCQlsb2NhbCB2VGV4dFN0cmluZyA9IHZUZXh0OkdldFRleHQoKQ0KCQkNCgkJaWYgbm90IHZUZXh0U3RyaW5nIHRoZW4NCgkJCXJldHVybiBmYWxzZQ0KCQllbmQNCgkJDQoJCWlmIHZUZXh0U3RyaW5nOmZpbmQocFRleHQpIHRoZW4NCgkJCWxvY2FsIHZDb2xvciA9IHt9DQoJCQkNCgkJCXZDb2xvci5yLCB2Q29sb3IuZywgdkNvbG9yLmIgPSB2VGV4dDpHZXRUZXh0Q29sb3IoKQ0KCQkJDQoJCQlsb2NhbCB2SFNWQ29sb3IgPSBPdXRmaXR0ZXI6UkdCVG9IU1YodkNvbG9yKQ0KCQkJDQoJCQlyZXR1cm4gdHJ1ZSwgdkhTVkNvbG9yLnMgPiAwLjIgYW5kIHZIU1ZDb2xvci52ID4gMC4yIGFuZCAodkhTVkNvbG9yLmggPCA1MCBvciB2SFNWQ29sb3IuaCA+IDE1MCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJHQlRvSFNWKHBSR0JDb2xvcikNCglsb2NhbCB2SFNWQ29sb3IgPSB7fQ0KCWxvY2FsIHZCYXNlQW5nbGUNCglsb2NhbCB2SHVlQ29sb3INCgkNCglpZiBub3QgcFJHQkNvbG9yLnINCglvciBub3QgcFJHQkNvbG9yLmcNCglvciBub3QgcFJHQkNvbG9yLmIgdGhlbg0KCQl2SFNWQ29sb3IuaCA9IDANCgkJdkhTVkNvbG9yLnMgPSAwDQoJCXZIU1ZDb2xvci52ID0gMQ0KCQkNCgkJcmV0dXJuIHZIU1ZDb2xvcg0KCWVuZA0KCQ0KCWlmIHBSR0JDb2xvci5yID49IHBSR0JDb2xvci5nDQoJYW5kIHBSR0JDb2xvci5yID49IHBSR0JDb2xvci5iIHRoZW4NCgkJLS0gUmVkIGlzIGRvbWluYW50DQoJCQ0KCQl2SFNWQ29sb3IudiA9IHBSR0JDb2xvci5yDQoJCQ0KCQl2QmFzZUFuZ2xlID0gMA0KCQkNCgkJaWYgcFJHQkNvbG9yLmcgPj0gcFJHQkNvbG9yLmIgdGhlbg0KCQkJdkhTVkNvbG9yLnMgPSAxIC0gcFJHQkNvbG9yLmINCgkJCXZIdWVDb2xvciA9IHBSR0JDb2xvci5nDQoJCWVsc2UNCgkJCXZIU1ZDb2xvci5zID0gMSAtIHBSR0JDb2xvci5nDQoJCQl2SHVlQ29sb3IgPSAtcFJHQkNvbG9yLmINCgkJZW5kDQoJZWxzZWlmIHBSR0JDb2xvci5nID49IHBSR0JDb2xvci5iIHRoZW4NCgkJLS0gR3JlZW4gaXMgZG9taW5hbnQNCg0KCQl2SFNWQ29sb3IudiA9IHBSR0JDb2xvci5nDQoNCgkJdkJhc2VBbmdsZSA9IDEyMA0KCQkNCgkJaWYgcFJHQkNvbG9yLnIgPj0gcFJHQkNvbG9yLmIgdGhlbg0KCQkJdkhTVkNvbG9yLnMgPSAxIC0gcFJHQkNvbG9yLmINCgkJCXZIdWVDb2xvciA9IC1wUkdCQ29sb3Iucg0KCQllbHNlDQoJCQl2SFNWQ29sb3IucyA9IDEgLSBwUkdCQ29sb3Iucg0KCQkJdkh1ZUNvbG9yID0gcFJHQkNvbG9yLmINCgkJZW5kDQoJZWxzZQ0KCQktLSBCbHVlIGlzIGRvbWluYW50DQoJCQ0KCQl2SFNWQ29sb3IudiA9IHBSR0JDb2xvci5iDQoNCgkJdkJhc2VBbmdsZSA9IDI0MA0KCQkNCgkJaWYgcFJHQkNvbG9yLnIgPj0gcFJHQkNvbG9yLmcgdGhlbg0KCQkJdkhTVkNvbG9yLnMgPSAxIC0gcFJHQkNvbG9yLmcNCgkJCXZIdWVDb2xvciA9IHBSR0JDb2xvci5yDQoJCWVsc2UNCgkJCXZIU1ZDb2xvci5zID0gMSAtIHBSR0JDb2xvci5yDQoJCQl2SHVlQ29sb3IgPSAtcFJHQkNvbG9yLmcNCgkJZW5kDQoJZW5kDQoJDQoJdkhTVkNvbG9yLmggPSB2QmFzZUFuZ2xlICsgKHZIdWVDb2xvciAvIHZIU1ZDb2xvci52KSAqIDYwDQoJDQoJaWYgdkhTVkNvbG9yLmggPCAwIHRoZW4NCgkJdkhTVkNvbG9yLmggPSB2SFNWQ29sb3IuaCArIDM2MA0KCWVuZA0KCQ0KCXJldHVybiB2SFNWQ29sb3INCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6RnJhbWVFZGl0Qm94KHBFZGl0Qm94KQ0KCWxvY2FsIHZMZWZ0VGV4dHVyZSA9IHBFZGl0Qm94OkNyZWF0ZVRleHR1cmUobmlsLCAiQVJUV09SSyIpDQoJDQoJdkxlZnRUZXh0dXJlOlNldFdpZHRoKDEyKQ0KCXZMZWZ0VGV4dHVyZTpTZXRQb2ludCgiVE9QTEVGVCIsIHBFZGl0Qm94LCAiVE9QTEVGVCIsIC0xMSwgMCkNCgl2TGVmdFRleHR1cmU6U2V0UG9pbnQoIkJPVFRPTUxFRlQiLCBwRWRpdEJveCwgIkJPVFRPTUxFRlQiLCAtMTEsIC05KQ0KCXZMZWZ0VGV4dHVyZTpTZXRUZXh0dXJlKCJJbnRlcmZhY2VcXENsYXNzVHJhaW5lckZyYW1lXFxVSS1DbGFzc1RyYWluZXItRmlsdGVyQm9yZGVyIikNCgl2TGVmdFRleHR1cmU6U2V0VGV4Q29vcmQoMCwgMC4wOTM3NSwgMCwgMSkNCgkNCglsb2NhbCB2UmlnaHRUZXh0dXJlID0gcEVkaXRCb3g6Q3JlYXRlVGV4dHVyZShuaWwsICJBUlRXT1JLIikNCgkNCgl2UmlnaHRUZXh0dXJlOlNldFdpZHRoKDEyKQ0KCXZSaWdodFRleHR1cmU6U2V0UG9pbnQoIlRPUFJJR0hUIiwgcEVkaXRCb3gsICJUT1BSSUdIVCIsIC0xMiwgMCkNCgl2UmlnaHRUZXh0dXJlOlNldFBvaW50KCJCT1RUT01SSUdIVCIsIHBFZGl0Qm94LCAiQk9UVE9NUklHSFQiLCAtMTIsIC05KQ0KCXZSaWdodFRleHR1cmU6U2V0VGV4dHVyZSgiSW50ZXJmYWNlXFxDbGFzc1RyYWluZXJGcmFtZVxcVUktQ2xhc3NUcmFpbmVyLUZpbHRlckJvcmRlciIpDQoJdlJpZ2h0VGV4dHVyZTpTZXRUZXhDb29yZCgwLjkwNjI1LCAxLCAwLCAxKQ0KCQ0KCWxvY2FsIHZNaWRkbGVUZXh0dXJlID0gcEVkaXRCb3g6Q3JlYXRlVGV4dHVyZShuaWwsICJBUlRXT1JLIikNCgkNCgl2TWlkZGxlVGV4dHVyZTpTZXRQb2ludCgiVE9QTEVGVCIsIHZMZWZ0VGV4dHVyZSwgIlRPUFJJR0hUIikNCgl2TWlkZGxlVGV4dHVyZTpTZXRQb2ludCgiQk9UVE9NTEVGVCIsIHZMZWZ0VGV4dHVyZSwgIkJPVFRPTVJJR0hUIikNCgl2TWlkZGxlVGV4dHVyZTpTZXRQb2ludCgiVE9QUklHSFQiLCB2UmlnaHRUZXh0dXJlLCAiVE9QTEVGVCIpDQoJdk1pZGRsZVRleHR1cmU6U2V0UG9pbnQoIkJPVFRPTVJJR0hUIiwgdlJpZ2h0VGV4dHVyZSwgIkJPVFRPTUxFRlQiKQ0KCXZNaWRkbGVUZXh0dXJlOlNldFRleHR1cmUoIkludGVyZmFjZVxcQ2xhc3NUcmFpbmVyRnJhbWVcXFVJLUNsYXNzVHJhaW5lci1GaWx0ZXJCb3JkZXIiKQ0KCXZNaWRkbGVUZXh0dXJlOlNldFRleENvb3JkKDAuMDkzNzUsIDAuOTA2MjUsIDAsIDEpDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNvbnN0cnVjdEZyYW1lKHBGcmFtZSwgcE1ldGhvZHMsIC4uLikNCglmb3IgdktleSwgdlZhbHVlIGluIHBhaXJzKHBNZXRob2RzKSBkbw0KCQlpZiB2S2V5ID09ICJXaWRnZXRzIiBhbmQgdHlwZSh2VmFsdWUpID09ICJ0YWJsZSIgdGhlbg0KCQkJaWYgbm90IHBGcmFtZS5XaWRnZXRzIHRoZW4NCgkJCQlwRnJhbWUuV2lkZ2V0cyA9IHt9DQoJCQllbmQNCgkJCQ0KCQkJbG9jYWwgdk5hbWVQcmVmaXgNCgkJCQ0KCQkJaWYgcEZyYW1lLkdldE5hbWUgdGhlbg0KCQkJCXZOYW1lUHJlZml4ID0gcEZyYW1lOkdldE5hbWUoKQ0KCQkJZWxzZQ0KCQkJCXZOYW1lUHJlZml4ID0gdlZhbHVlLl9QcmVmaXgNCgkJCWVuZA0KCQkJDQoJCQlpZiB2TmFtZVByZWZpeCB0aGVuDQoJCQkJZm9yIF8sIHZOYW1lIGluIGlwYWlycyh2VmFsdWUpIGRvDQoJCQkJCWxvY2FsIHZXaWRnZXQgPSBfR1t2TmFtZVByZWZpeC4udk5hbWVdDQoJCQkJCQ0KCQkJCQlpZiB2V2lkZ2V0ID09IG5pbCB0aGVuDQoJCQkJCQlzZWxmOkVycm9yTWVzc2FnZSgiQ291bGRuJ3QgZmluZCBnbG9iYWwgIi4udk5hbWVQcmVmaXguLnZOYW1lKQ0KCQkJCQllbHNlDQoJCQkJCQlwRnJhbWUuV2lkZ2V0c1t2TmFtZV0gPSB2V2lkZ2V0DQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZWxzZQ0KCQkJCU91dGZpdHRlcjpFcnJvck1lc3NhZ2UoIkNvbnN0cnVjdEZyYW1lOiBDYW4ndCBpbml0aWFsaXplIHdpZGdldHMgZm9yIGZyYW1lIGJlY2F1c2UgdGhlcmUncyBubyBuYW1lIHByZWZpeCIpDQoJCQkJT3V0Zml0dGVyOkRlYnVnU3RhY2soKQ0KCQkJZW5kDQoJCWVsc2UNCgkJCXBGcmFtZVt2S2V5XSA9IHZWYWx1ZQ0KCQllbmQNCgllbmQNCgkNCglpZiBwTWV0aG9kcy5Db25zdHJ1Y3QgdGhlbg0KCQlwRnJhbWU6Q29uc3RydWN0KC4uLikNCgllbmQNCgkNCglyZXR1cm4gcEZyYW1lDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLkluaXRpYWxpemVGcmFtZShwT2JqZWN0LCAuLi4pDQoJaWYgbm90IHBPYmplY3QgdGhlbg0KCQlPdXRmaXR0ZXI6RGVidWdNZXNzYWdlKCJJbml0aWFsaXplRnJhbWUgY2FsbGVkIHdpdGggbmlsIG9iamVjdCIpDQoJCU91dGZpdHRlcjpEZWJ1Z1N0YWNrKCkNCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgdk51bUNsYXNzZXMgPSBzZWxlY3QoIiMiLCAuLi4pDQoJDQoJZm9yIHZJbmRleCA9IDEsIHZOdW1DbGFzc2VzIGRvDQoJCWxvY2FsIHZGdW5jdGlvblRhYmxlID0gc2VsZWN0KHZJbmRleCwgLi4uKQ0KCQkNCgkJZm9yIHZGdW5jdGlvbk5hbWUsIHZGdW5jdGlvbiBpbiBwYWlycyh2RnVuY3Rpb25UYWJsZSkgZG8NCgkJCWlmIHR5cGUodkZ1bmN0aW9uKSA9PSAidGFibGUiIHRoZW4NCgkJCQlsb2NhbCB2VGFibGUgPSB7fQ0KCQkJCQ0KCQkJCXBPYmplY3RbdkZ1bmN0aW9uTmFtZV0gPSB2VGFibGUNCgkJCQkNCgkJCQlsb2NhbCB2TmFtZVByZWZpeA0KCQkJCQ0KCQkJCWlmIHBPYmplY3QuR2V0TmFtZSB0aGVuDQoJCQkJCXZOYW1lUHJlZml4ID0gcE9iamVjdDpHZXROYW1lKCkNCgkJCQllbHNlDQoJCQkJCXZOYW1lUHJlZml4ID0gcE9iamVjdFt2RnVuY3Rpb25OYW1lLi4iUHJlZml4Il0NCgkJCQllbmQNCgkJCQkNCgkJCQlmb3IgXywgdk5hbWUgaW4gaXBhaXJzKHZGdW5jdGlvbikgZG8NCgkJCQkJbG9jYWwgdlZhbHVlID0gX0dbdk5hbWVQcmVmaXguLnZOYW1lXQ0KCQkJCQkNCgkJCQkJaWYgdlZhbHVlID09IG5pbCB0aGVuDQoJCQkJCQlzZWxmOkVycm9yTWVzc2FnZSgiQ291bGRuJ3QgZmluZCBnbG9iYWwgIi4udk5hbWVQcmVmaXguLnZOYW1lKQ0KCQkJCQllbHNlDQoJCQkJCQl2VGFibGVbdk5hbWVdID0gdlZhbHVlDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZWxzZQ0KCQkJCXBPYmplY3RbdkZ1bmN0aW9uTmFtZV0gPSB2RnVuY3Rpb24NCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6R2V0Q3VycmVudE91dGZpdEluZm8oKQ0KCXJldHVybiBzZWxmLk91dGZpdFN0YWNrOkdldEN1cnJlbnRPdXRmaXRJbmZvKCkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2V0VXBkYXRlRGVsYXkocFRpbWUsIHBEZWxheSkNCglsb2NhbCB2VXBkYXRlVGltZSA9IHBUaW1lICsgKHBEZWxheSAtIHNlbGYuY01pbkVxdWlwbWVudFVwZGF0ZUludGVydmFsKQ0KDQoJaWYgdlVwZGF0ZVRpbWUgPiBzZWxmLkxhc3RFcXVpcG1lbnRVcGRhdGVUaW1lIHRoZW4NCgkJc2VsZi5MYXN0RXF1aXBtZW50VXBkYXRlVGltZSA9IHZVcGRhdGVUaW1lDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNhbGNJdGVtSGFzVXNlRmVhdHVyZShwSXRlbUxpbmspDQoJLS0gU2V0IHRoZSB0b29sdGlwDQoJDQoJT3V0Zml0dGVyVG9vbHRpcDpTZXRPd25lcihPdXRmaXR0ZXJGcmFtZSwgIkFOQ0hPUl9CT1RUT01SSUdIVCIsIDAsIDApDQoJDQoJaWYgbm90IE91dGZpdHRlclRvb2x0aXA6U2V0SHlwZXJsaW5rKHBJdGVtTGluaykgdGhlbg0KCQlPdXRmaXR0ZXJUb29sdGlwOkhpZGUoKQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCgkNCgktLSBTY2FuIGZvciBhICJVc2U6IiBsaW5lDQoJDQoJZm9yIHZMaW5lSW5kZXggPSAxLCAxMDAgZG8NCgkJbG9jYWwgdkxlZnRUZXh0RnJhbWUgPSBfR1siT3V0Zml0dGVyVG9vbHRpcFRleHRMZWZ0Ii4udkxpbmVJbmRleF0NCgkJDQoJCWlmIG5vdCB2TGVmdFRleHRGcmFtZSB0aGVuDQoJCQlicmVhaw0KCQllbmQNCgkJDQoJCWxvY2FsIHZMZWZ0VGV4dCA9IHZMZWZ0VGV4dEZyYW1lOkdldFRleHQoKQ0KCQkNCgkJaWYgdkxlZnRUZXh0IHRoZW4NCgkJCWxvY2FsIHZTdGFydEluZGV4LCB2RW5kSW5kZXggPSB2TGVmdFRleHQ6ZmluZChPdXRmaXR0ZXIuY1VzZVRvb2x0aXBMaW5lRm9ybWF0KQ0KCQkJDQoJCQlpZiB2U3RhcnRJbmRleCB0aGVuDQoJCQkJT3V0Zml0dGVyVG9vbHRpcDpIaWRlKCkNCgkJCQlyZXR1cm4gdHJ1ZQ0KCQkJZW5kDQoJCWVuZA0KCWVuZCAtLSBmb3IgdkxpbmVJbmRleA0KCQ0KCU91dGZpdHRlclRvb2x0aXA6SGlkZSgpDQoJcmV0dXJuIGZhbHNlDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNhbGNJdGVtVXNlRHVyYXRpb24ocEl0ZW1MaW5rKQ0KCS0tIFNldCB0aGUgdG9vbHRpcA0KCQ0KCU91dGZpdHRlclRvb2x0aXA6U2V0T3duZXIoT3V0Zml0dGVyRnJhbWUsICJBTkNIT1JfQk9UVE9NUklHSFQiLCAwLCAwKQ0KCQ0KCWlmIG5vdCBPdXRmaXR0ZXJUb29sdGlwOlNldEh5cGVybGluayhwSXRlbUxpbmspIHRoZW4NCgkJT3V0Zml0dGVyVG9vbHRpcDpIaWRlKCkNCgkJcmV0dXJuIGZhbHNlDQoJZW5kDQoJDQoJLS0gU2NhbiBmb3IgYSAiVXNlOiIgbGluZQ0KCQ0KCWZvciB2TGluZUluZGV4ID0gMSwgMTAwIGRvDQoJCWxvY2FsIHZMZWZ0VGV4dEZyYW1lID0gX0dbIk91dGZpdHRlclRvb2x0aXBUZXh0TGVmdCIuLnZMaW5lSW5kZXhdDQoJCQ0KCQlpZiBub3QgdkxlZnRUZXh0RnJhbWUgdGhlbg0KCQkJYnJlYWsNCgkJZW5kDQoJCQ0KCQlsb2NhbCB2TGVmdFRleHQgPSB2TGVmdFRleHRGcmFtZTpHZXRUZXh0KCkNCgkJDQoJCWlmIHZMZWZ0VGV4dCB0aGVuDQoJCQlsb2NhbCB2U3RhcnRJbmRleCwgdkVuZEluZGV4LCB2U2Vjb25kcyA9IHZMZWZ0VGV4dDpmaW5kKE91dGZpdHRlci5jVXNlRHVyYXRpb25Ub29sdGlwTGluZUZvcm1hdCkNCgkJCQ0KCQkJaWYgbm90IHZTZWNvbmRzIHRoZW4NCgkJCQl2U3RhcnRJbmRleCwgdkVuZEluZGV4LCB2U2Vjb25kcyA9IHZMZWZ0VGV4dDpmaW5kKE91dGZpdHRlci5jVXNlRHVyYXRpb25Ub29sdGlwTGluZUZvcm1hdDIpDQoJCQllbmQNCgkJCQ0KCQkJaWYgdlNlY29uZHMgdGhlbg0KCQkJCU91dGZpdHRlclRvb2x0aXA6SGlkZSgpDQoJCQkJcmV0dXJuIHRvbnVtYmVyKHZTZWNvbmRzKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZCAtLSBmb3IgdkxpbmVJbmRleA0KCQ0KCU91dGZpdHRlclRvb2x0aXA6SGlkZSgpDQoJcmV0dXJuIDANCmVuZA0KDQpPdXRmaXR0ZXIuY0l0ZW1IYXNVc2VGZWF0dXJlID0ge30NCk91dGZpdHRlci5jSXRlbVVzZUR1cmF0aW9uID0ge30NCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkl0ZW1IYXNVc2VGZWF0dXJlKHBJdGVtTGluaykNCglsb2NhbCB2SXRlbUNvZGUgPSBzZWxmOlBhcnNlSXRlbUxpbmsocEl0ZW1MaW5rKQ0KCWxvY2FsIHZIYXNVc2VGZWF0dXJlDQoJDQoJaWYgc2VsZi5jSXRlbUhhc1VzZUZlYXR1cmVbdkl0ZW1Db2RlXSB+PSBuaWwgdGhlbg0KCQl2SGFzVXNlRmVhdHVyZSA9IHNlbGYuY0l0ZW1IYXNVc2VGZWF0dXJlW3ZJdGVtQ29kZV0NCgllbHNlDQoJCXZIYXNVc2VGZWF0dXJlID0gc2VsZjpDYWxjSXRlbUhhc1VzZUZlYXR1cmUocEl0ZW1MaW5rKQ0KCQkNCgkJc2VsZi5jSXRlbUhhc1VzZUZlYXR1cmVbdkl0ZW1Db2RlXSA9IHZIYXNVc2VGZWF0dXJlDQoJZW5kDQoJDQoJcmV0dXJuIHZIYXNVc2VGZWF0dXJlDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldEl0ZW1Vc2VEdXJhdGlvbihwSXRlbUxpbmspDQoJbG9jYWwgdkl0ZW1Db2RlID0gc2VsZjpQYXJzZUl0ZW1MaW5rKHBJdGVtTGluaykNCglsb2NhbCB2VXNlRHVyYXRpb24NCgkNCglpZiBzZWxmLmNJdGVtVXNlRHVyYXRpb25bdkl0ZW1Db2RlXSB0aGVuDQoJCXZVc2VEdXJhdGlvbiAgPSBzZWxmLmNJdGVtVXNlRHVyYXRpb25bdkl0ZW1Db2RlXQ0KCWVsc2UNCgkJdlVzZUR1cmF0aW9uID0gc2VsZjpDYWxjSXRlbVVzZUR1cmF0aW9uKHBJdGVtTGluaykNCgkJDQoJCWlmIG5vdCB2VXNlRHVyYXRpb24gdGhlbg0KCQkJdlVzZUR1cmF0aW9uID0gMA0KCQllbmQNCgkJDQoJCXNlbGYuY0l0ZW1Vc2VEdXJhdGlvblt2SXRlbUNvZGVdID0gdlVzZUR1cmF0aW9uDQoJZW5kDQoJDQoJcmV0dXJuIHZVc2VEdXJhdGlvbg0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpJbnZlbnRvcnlJdGVtSXNBY3RpdmUocEludmVudG9yeVNsb3QpDQoJLS0gU2VlIGlmIHRoZSBpdGVtIGlzIG9uIGNvb2xkb3duIGF0IGFsbA0KCQ0KCWxvY2FsIHZTbG90SUQgPSBzZWxmLmNTbG90SURzW3BJbnZlbnRvcnlTbG90XQ0KCWxvY2FsIHZJdGVtTGluayA9IHNlbGY6R2V0SW52ZW50b3J5U2xvdElETGluayh2U2xvdElEKQ0KCWxvY2FsIHZTdGFydFRpbWUsIHZEdXJhdGlvbiwgdkVuYWJsZSA9IEdldEl0ZW1Db29sZG93bih2SXRlbUxpbmspDQoJDQoJaWYgbm90IHZTdGFydFRpbWUgb3IgdlN0YXJ0VGltZSA9PSAwIHRoZW4NCgkJcmV0dXJuIGZhbHNlDQoJZW5kDQoJDQoJLS0gRGV0ZXJtaW5lIGlmIHRoZXJlJ3MgYW4gYWN0aXZpdHkgcGVyaW9kIGZvciB0aGUgaXRlbQ0KCQ0KCWxvY2FsIHZVc2VEdXJhdGlvbiA9IHNlbGY6R2V0SXRlbVVzZUR1cmF0aW9uKHZJdGVtTGluaykNCgkNCgktLSBJZiB0aGUgdGltZSBzaW5jZSBzdGFydGVkIGlzIGxlc3MgdGhhbiB0aGUgdXNlIGR1cmF0aW9uIHRoZSBpdGVtIGlzIHN0aWxsIGFjdGl2ZQ0KCS0tIGFuZCBzaG91bGRuJ3QgYmUgdW5lcXVpcHBlZA0KCQ0KCXJldHVybiBHZXRUaW1lKCkgPCB2U3RhcnRUaW1lICsgdlVzZUR1cmF0aW9uDQplbmQNCg0KLS0gU29tZSBkaWFnbm9zdGljIGNvZGUgZm9yIGZpbmRpbmcgZnVuY3Rpb25zIHRoYXQgdGFrZSBhIGxvbmcgdGltZSB0bw0KLS0gZXhlY3V0ZS4gIFRoaXMgaXNuJ3QgaW5zdGFsbGVkIGF1dG9tYXRpY2FsbHkgYW5kIG11c3QgYmUgbWFudWFsbHkgY2FsbGVkDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpIb29rKCkNCglzZWxmOkhvb2tUYWJsZShPdXRmaXR0ZXIsICJPdXRmaXR0ZXIiKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpIb29rVGFibGUocFRhYmxlLCBwUHJlZml4KQ0KCWZvciB2S2V5LCB2VmFsdWUgaW4gcGFpcnMocFRhYmxlKSBkbw0KCQlpZiB0eXBlKHZLZXkpID09ICJzdHJpbmciDQoJCWFuZCB0eXBlKHZWYWx1ZSkgPT0gImZ1bmN0aW9uIg0KCQlhbmQgbm90IHZLZXk6ZmluZCgiT3V0Zml0dGVyIikgdGhlbg0KCQkJcFRhYmxlW3ZLZXldID0gZnVuY3Rpb24gKC4uLikNCgkJCQlsb2NhbCB2U3RhcnRUaW1lID0gR2V0VGltZSgpDQoJCQkJbG9jYWwgdlJlc3VsdCA9IHt2VmFsdWUoLi4uKX0NCgkJCQlsb2NhbCB2RW5kVGltZSA9IEdldFRpbWUoKQ0KCQkJCWlmIHZFbmRUaW1lIC0gdlN0YXJ0VGltZSA+IDAuMSB0aGVuDQoJCQkJCXNlbGY6RGVidWdNZXNzYWdlKCJGdW5jdGlvbiAlcy4lcyB0b29rICVmIHNlY29uZHMiLCBwUHJlZml4LCB2S2V5LCB2RW5kVGltZSAtIHZTdGFydFRpbWUpDQoJCQkJZW5kDQoJCQkJDQoJCQkJcmV0dXJuIHVucGFjayh2UmVzdWx0KQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTaG93QWxsTGlua3MoKQ0KCWZvciB2Q2F0ZWdvcnksIHZPdXRmaXRzIGluIHBhaXJzKHNlbGYuU2V0dGluZ3MuT3V0Zml0cykgZG8NCgkJZm9yIF8sIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJbG9jYWwgdkl0ZW1zID0gdk91dGZpdDpHZXRJdGVtcygpDQoJCQkNCgkJCWZvciBfLCB2SXRlbSBpbiBwYWlycyh2SXRlbXMpIGRvDQoJCQkJaWYgdkl0ZW0uQ29kZSB+PSAwIHRoZW4NCgkJCQkJc2VsZjpOb3RlTWVzc2FnZShzZWxmOkdlbmVyYXRlSXRlbUxpbmsodkl0ZW0pKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpHZW5lcmF0ZUl0ZW1MaW5rKHBJdGVtKQ0KCWlmIG5vdCBwSXRlbSBvciBwSXRlbS5Db2RlID09IDAgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCBfLCBfLCB2UXVhbGl0eSA9IEdldEl0ZW1JbmZvKHBJdGVtLkNvZGUpDQoJbG9jYWwgXywgXywgXywgdlF1YWxpdHlDb2xvckNvZGUgPSBHZXRJdGVtUXVhbGl0eUNvbG9yKHZRdWFsaXR5IG9yIDEpDQoJDQoJcmV0dXJuIHN0cmluZy5mb3JtYXQoIiVzfEhpdGVtOiVkOiVkOiVkOiVkOiVkOiVkOiVkOiVkOiVkfGhbJXNdfGh8ciIsIHZRdWFsaXR5Q29sb3JDb2RlLCBwSXRlbS5Db2RlLCBwSXRlbS5FbmNoYW50Q29kZSBvciAwLCBwSXRlbS5KZXdlbENvZGUxIG9yIDAsIHBJdGVtLkpld2VsQ29kZTIgb3IgMCwgcEl0ZW0uSmV3ZWxDb2RlMyBvciAwLCBwSXRlbS5KZXdlbENvZGU0IG9yIDAsIHBJdGVtLlN1YkNvZGUgb3IgMCwgcEl0ZW0uVW5pcXVlSUQgb3IgMCwgMCwgcEl0ZW0uTmFtZSksIHZRdWFsaXR5IG9yIDENCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2hvd01pc3NpbmdJdGVtcygpDQoJaWYgbm90IE91dGZpdHRlci5CYW5rRnJhbWVJc09wZW4gdGhlbg0KCQlPdXRmaXR0ZXI6RXJyb3JNZXNzYWdlKE91dGZpdHRlci5jTXVzdEJlQXRCYW5rRXJyb3IpDQoJCXJldHVybg0KCWVuZA0KCQ0KCWxvY2FsIHZJbnZlbnRvcnlDYWNoZSA9IE91dGZpdHRlcjpHZXRJbnZlbnRvcnlDYWNoZSgpDQoJbG9jYWwgdkZvdW5kSXRlbXMNCgkNCglmb3IgdkNhdGVnb3J5LCB2T3V0Zml0cyBpbiBwYWlycyhzZWxmLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciBfLCB2T3V0Zml0IGluIGlwYWlycyh2T3V0Zml0cykgZG8NCgkJCWxvY2FsIHZNaXNzaW5nSXRlbXMgPSB2SW52ZW50b3J5Q2FjaGU6R2V0TWlzc2luZ0l0ZW1zKHZPdXRmaXQpDQoJCQkNCgkJCWlmIHZNaXNzaW5nSXRlbXMgdGhlbg0KCQkJCWZvciBfLCB2SXRlbSBpbiBwYWlycyh2TWlzc2luZ0l0ZW1zKSBkbw0KCQkJCQlpZiBub3QgdkZvdW5kSXRlbXMgdGhlbg0KCQkJCQkJT3V0Zml0dGVyOk5vdGVNZXNzYWdlKE91dGZpdHRlci5jTWlzc2luZ0l0ZW1SZXBvcnRJbnRybykNCgkJCQkJCXZGb3VuZEl0ZW1zID0gdHJ1ZQ0KCQkJCQllbmQNCgkJCQkJDQoJCQkJCU91dGZpdHRlcjpOb3RlTWVzc2FnZShPdXRmaXR0ZXI6R2VuZXJhdGVJdGVtTGluayh2SXRlbSkpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJaWYgbm90IHZGb3VuZEl0ZW1zIHRoZW4NCgkJT3V0Zml0dGVyOk5vdGVNZXNzYWdlKE91dGZpdHRlci5jTm9NaXNzaW5nSXRlbXMpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkNhbGxDb21wYW5pb25CeU5hbWUocE5hbWUpDQoJbG9jYWwgdk51bUNvbXBhbmlvbnMgPSBHZXROdW1Db21wYW5pb25zKCJDUklUVEVSIikNCglsb2NhbCB2TG93ZXJOYW1lID0gcE5hbWU6bG93ZXIoKQ0KCQ0KCWZvciB2SW5kZXggPSAxLCB2TnVtQ29tcGFuaW9ucyBkbw0KCQlpZiBHZXRDb21wYW5pb25JbmZvKCJDUklUVEVSIiwgdkluZGV4KTpsb3dlcigpID09IHZMb3dlck5hbWUgdGhlbg0KCQkJQ2FsbENvbXBhbmlvbigiQ1JJVFRFUiIsIHZJbmRleCkNCgkJCXJldHVybg0KCQllbmQNCgllbmQNCgkNCglzZWxmOkVycm9yTWVzc2FnZSgiQ2FsbENvbXBhbmlvbkJ5TmFtZTogY291bGRuJ3QgZmluZCBhIHBldCBuYW1lZCAlcyIsIHRvc3RyaW5nKHBOYW1lKSkNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6UGxheWVySXNPblF1ZXN0SUQocFF1ZXN0SUQpDQoJbG9jYWwgdk51bVF1ZXN0cyA9IEdldE51bVF1ZXN0TG9nRW50cmllcygpDQoJDQoJZm9yIHZRdWVzdEluZGV4ID0gMSwgdk51bVF1ZXN0cyBkbw0KCQlsb2NhbCB2UXVlc3RMaW5rID0gR2V0UXVlc3RMaW5rKHZRdWVzdEluZGV4KQ0KCQkNCgkJaWYgdlF1ZXN0TGluayB0aGVuDQoJCQlsb2NhbCBfLCBfLCB2UXVlc3RJRCA9IHZRdWVzdExpbms6ZmluZCgifEhxdWVzdDooJWQrKSIpDQoJCQkNCgkJCWlmIHRvbnVtYmVyKHZRdWVzdElEKSA9PSBwUXVlc3RJRCB0aGVuDQoJCQkJbG9jYWwgXywgXywgdkNvbXBsZXRlID0gR2V0UXVlc3RMb2dMZWFkZXJCb2FyZCgxLCB2UXVlc3RJbmRleCkNCgkJCQkNCgkJCQlyZXR1cm4gdHJ1ZSwgdkNvbXBsZXRlDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIGZhbHNlDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldEN1cnJlbnRUcmFja2luZygpDQoJbG9jYWwgdk51bVR5cGVzID0gR2V0TnVtVHJhY2tpbmdUeXBlcygpDQoJDQoJZm9yIHZJbmRleCA9IDEsIHZOdW1UeXBlcyBkbw0KCQlsb2NhbCB2TmFtZSwgdlRleHR1cmUsIHZBY3RpdmUgPSBHZXRUcmFja2luZ0luZm8odkluZGV4KQ0KCQkNCgkJaWYgdkFjdGl2ZSB0aGVuDQoJCQlyZXR1cm4gdk5hbWUsIHZUZXh0dXJlDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTZXRUcmFja2luZ0J5TmFtZShwVHJhY2tpbmdOYW1lKQ0KCWlmIG5vdCBwVHJhY2tpbmdOYW1lIHRoZW4NCgkJU2V0VHJhY2tpbmcobmlsKQ0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCB2TnVtVHlwZXMgPSBHZXROdW1UcmFja2luZ1R5cGVzKCkNCglsb2NhbCB2TG93ZXJOYW1lID0gcFRyYWNraW5nTmFtZSBhbmQgcFRyYWNraW5nTmFtZTpsb3dlcigpDQoJDQoJZm9yIHZJbmRleCA9IDEsIHZOdW1UeXBlcyBkbw0KCQlsb2NhbCB2TmFtZSwgdlRleHR1cmUsIHZBY3RpdmUgPSBHZXRUcmFja2luZ0luZm8odkluZGV4KQ0KCQkNCgkJaWYgdk5hbWU6bG93ZXIoKSA9PSB2TG93ZXJOYW1lIHRoZW4NCgkJCWlmIG5vdCB2QWN0aXZlIHRoZW4NCgkJCQlTZXRUcmFja2luZyh2SW5kZXgpDQoJCQllbmQNCgkJCXJldHVybg0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXI6U2V0VHJhY2tpbmdCeVRleHR1cmUocFRleHR1cmUpDQoJaWYgbm90IHBUZXh0dXJlIHRoZW4NCgkJU2V0VHJhY2tpbmcobmlsKQ0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCB2TnVtVHlwZXMgPSBHZXROdW1UcmFja2luZ1R5cGVzKCkNCglsb2NhbCB2TG93ZXJUZXh0dXJlID0gcFRleHR1cmUgYW5kIHBUZXh0dXJlOmxvd2VyKCkNCgkNCglmb3IgdkluZGV4ID0gMSwgdk51bVR5cGVzIGRvDQoJCWxvY2FsIHZOYW1lLCB2VGV4dHVyZSwgdkFjdGl2ZSA9IEdldFRyYWNraW5nSW5mbyh2SW5kZXgpDQoJCQ0KCQlpZiB2VGV4dHVyZTpsb3dlcigpID09IHZMb3dlclRleHR1cmUgdGhlbg0KCQkJaWYgbm90IHZBY3RpdmUgdGhlbg0KCQkJCVNldFRyYWNraW5nKHZJbmRleCkNCgkJCWVuZA0KCQkJcmV0dXJuDQoJCWVuZA0KCWVuZA0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCk91dGZpdHRlci5fRXh0ZW5kZWRDb21wYXJlVG9vbHRpcCA9IHt9DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fRXh0ZW5kZWRDb21wYXJlVG9vbHRpcDpDb25zdHJ1Y3QoKQ0KCWhvb2tzZWN1cmVmdW5jKCJHYW1lVG9vbHRpcF9TaG93Q29tcGFyZUl0ZW0iLCBmdW5jdGlvbiAocFNoaWZ0KQ0KCQlpZiBub3QgT3V0Zml0dGVyLlNldHRpbmdzLk9wdGlvbnMuRGlzYWJsZUl0ZW1Db21wYXJpc29ucyB0aGVuDQoJCQlzZWxmOlNob3dDb21wYXJlSXRlbShwU2hpZnQpDQoJCWVuZA0KCWVuZCkNCgkNCglHYW1lVG9vbHRpcDpIb29rU2NyaXB0KCJPbkhpZGUiLCBmdW5jdGlvbiAoKQ0KCQlzZWxmOkhpZGVDb21wYXJlSXRlbXMoKQ0KCWVuZCkNCgkNCglzZWxmLlRvb2x0aXBzID0ge30NCglzZWxmLk51bVRvb2x0aXBzU2hvd24gPSAwDQoJc2VsZi5NYXhUb29sdGlwc1Nob3duID0gNQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fRXh0ZW5kZWRDb21wYXJlVG9vbHRpcDpTaG93Q29tcGFyZUl0ZW0oKQ0KCXNlbGY6SGlkZUNvbXBhcmVJdGVtcygpDQoJDQoJbG9jYWwgXywgdkxpbmsgPSBHYW1lVG9vbHRpcDpHZXRJdGVtKCkNCgkNCglpZiBub3QgdkxpbmsgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCB2VG9vbHRpcEl0ZW1Db2RlLA0KCSAgICAgIHZUb29sdGlwSXRlbUVuY2hhbnRDb2RlLA0KCSAgICAgIHZUb29sdGlwSXRlbUpld2VsQ29kZTEsDQoJICAgICAgdlRvb2x0aXBJdGVtSmV3ZWxDb2RlMiwNCgkgICAgICB2VG9vbHRpcEl0ZW1KZXdlbENvZGUzLA0KCSAgICAgIHZUb29sdGlwSXRlbUpld2VsQ29kZTQsDQoJICAgICAgdlRvb2x0aXBJdGVtU3ViQ29kZSwNCgkgICAgICB2VG9vbHRpcEl0ZW1VbmlxdWVJRCwNCgkgICAgICB2VG9vbHRpcEl0ZW1Vbmtub3duQ29kZTEsDQoJICAgICAgdlRvb2x0aXBJdGVtTmFtZSA9IE91dGZpdHRlcjpQYXJzZUl0ZW1MaW5rKHZMaW5rKQ0KCQ0KCWlmIG5vdCB2VG9vbHRpcEl0ZW1Db2RlIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgdlRvb2x0aXBJdGVtRmFtaWx5TmFtZSwNCgkgICAgICB2VG9vbHRpcEl0ZW1MaW5rLA0KCSAgICAgIHZUb29sdGlwSXRlbVF1YWxpdHksDQoJICAgICAgdlRvb2x0aXBJdGVtTGV2ZWwsDQoJICAgICAgdlRvb2x0aXBJdGVtTWluTGV2ZWwsDQoJICAgICAgdlRvb2x0aXBJdGVtVHlwZSwNCgkgICAgICB2VG9vbHRpcEl0ZW1TdWJUeXBlLA0KCSAgICAgIHZUb29sdGlwSXRlbUNvdW50LA0KCSAgICAgIHZUb29sdGlwSXRlbUludlR5cGUgPSBHZXRJdGVtSW5mbyh2VG9vbHRpcEl0ZW1Db2RlKQ0KDQoJaWYgbm90IHZUb29sdGlwSXRlbUludlR5cGUgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCgktLSBGaWd1cmUgb3V0IHdoaWNoIGRpcmVjdGlvbiB0byBzdGFjayBpbg0KCQ0KCWxvY2FsIHZMZWZ0RGlzdCA9IEdhbWVUb29sdGlwOkdldExlZnQoKSBvciAwDQoJbG9jYWwgdlJpZ2h0RGlzdCA9IEdldFNjcmVlbldpZHRoKCkgLSAoR2FtZVRvb2x0aXA6R2V0UmlnaHQoKSBvciAwKQ0KCQ0KCXNlbGYuTGVmdFRvUmlnaHQgPSB2TGVmdERpc3QgPCB2UmlnaHREaXN0DQoJDQoJLS0gRmlndXJlIG91dCB3aGljaCB0b29sdGlwIHRvIGF0dGFjaCB0byBhbmQNCgktLSBhcHBlbmQgdGhlICd1c2VkIGJ5JyBpbmZvIG9uIHNob3BwaW5nIHRvb2x0aXBzDQoJDQoJc2VsZi5BbmNob3JUb1Rvb2x0aXAgPSBHYW1lVG9vbHRpcA0KCQ0KCWZvciB2SW5kZXggPSAxLCAxMDAgZG8NCgkJbG9jYWwgdlNob3BwaW5nVG9vbHRpcCA9IF9HWyJTaG9wcGluZ1Rvb2x0aXAiLi52SW5kZXhdDQoJCQ0KCQlpZiBub3QgdlNob3BwaW5nVG9vbHRpcCB0aGVuDQoJCQlicmVhaw0KCQllbmQNCgkJDQoJCWlmIG5vdCB2U2hvcHBpbmdUb29sdGlwOklzVmlzaWJsZSgpIHRoZW4NCgkJCWJyZWFrDQoJCWVuZA0KCQkNCgkJbG9jYWwgXywgdlNob3BwaW5nTGluayA9IHZTaG9wcGluZ1Rvb2x0aXA6R2V0SXRlbSgpDQoJCWxvY2FsIHZTaG9wcGluZ0l0ZW1JbmZvID0gT3V0Zml0dGVyOkdldEl0ZW1JbmZvRnJvbUxpbmsodlNob3BwaW5nTGluaykNCgkJDQoJCWlmIHZTaG9wcGluZ0l0ZW1JbmZvIHRoZW4NCgkJCU91dGZpdHRlcjpBZGRPdXRmaXRzVXNpbmdJdGVtVG9Ub29sdGlwKHZTaG9wcGluZ1Rvb2x0aXAsIHZTaG9wcGluZ0l0ZW1JbmZvKQ0KCQkJdlNob3BwaW5nVG9vbHRpcDpTaG93KCkNCgkJZW5kDQoJCQ0KCQlzZWxmLkFuY2hvclRvVG9vbHRpcCA9IHZTaG9wcGluZ1Rvb2x0aXANCgllbmQNCgkNCgktLSBEZXRlcm1pbmUgd2hpY2ggc2xvdHMgbmVlZCB0byBiZSBleGFtaW5lZA0KCQ0KCWxvY2FsIHZJbnZlbnRvcnlTbG90cyA9IHt9DQoJDQoJbG9jYWwgdkludlNsb3RJbmZvID0gT3V0Zml0dGVyLmNJbnZUeXBlVG9TbG90TmFtZVt2VG9vbHRpcEl0ZW1JbnZUeXBlXQ0KCQ0KCWlmIG5vdCB2SW52U2xvdEluZm8gdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCgl0YWJsZS5pbnNlcnQodkludmVudG9yeVNsb3RzLCB2SW52U2xvdEluZm8uU2xvdE5hbWUpDQoJDQoJbG9jYWwgdk1ldGFTbG90TmFtZSA9IHZJbnZTbG90SW5mby5NZXRhU2xvdE5hbWUgb3IgdkludlNsb3RJbmZvLlNsb3ROYW1lDQoJDQoJaWYgdk1ldGFTbG90TmFtZSA9PSAiV2VhcG9uMFNsb3QiIHRoZW4NCgkJdGFibGUuaW5zZXJ0KHZJbnZlbnRvcnlTbG90cywgIlNlY29uZGFyeUhhbmRTbG90IikNCgllbHNlaWYgdk1ldGFTbG90TmFtZSA9PSAiRmluZ2VyMFNsb3QiIHRoZW4NCgkJdGFibGUuaW5zZXJ0KHZJbnZlbnRvcnlTbG90cywgIkZpbmdlcjFTbG90IikNCgllbHNlaWYgdk1ldGFTbG90TmFtZSA9PSAiVHJpbmtldDBTbG90IiB0aGVuDQoJCXRhYmxlLmluc2VydCh2SW52ZW50b3J5U2xvdHMsICJUcmlua2V0MVNsb3QiKQ0KCWVuZA0KCQ0KCS0tIFNlYXJjaCBvdXRmaXRzIGZvciBpdGVtcyB3aGljaCBjYW4gZ28gaW4gdGhlIHNhbWUgc2xvdCBidXQgd2hpY2ggYXJlbid0DQoJLS0gbGlzdGVkIGluIGFueSBvZiB0aGUgY3VycmVudGx5IHNob3duIHRvb2x0aXBzDQoJDQoJbG9jYWwgdlNob3BwaW5nSXRlbXMgPSB7fQ0KCQ0KCWZvciB2Q2F0ZWdvcnlJRCwgdk91dGZpdHMgaW4gcGFpcnMoT3V0Zml0dGVyLlNldHRpbmdzLk91dGZpdHMpIGRvDQoJCWZvciB2T3V0Zml0SW5kZXgsIHZPdXRmaXQgaW4gaXBhaXJzKHZPdXRmaXRzKSBkbw0KCQkJDQoJCQlmb3IgXywgdkludmVudG9yeVNsb3QgaW4gaXBhaXJzKHZJbnZlbnRvcnlTbG90cykgZG8NCgkJCQlsb2NhbCB2SXRlbSA9IHZPdXRmaXQ6R2V0SXRlbSh2SW52ZW50b3J5U2xvdCkNCgkJCQkNCgkJCQlpZiB2SXRlbSB0aGVuDQoJCQkJCWxvY2FsIHZJdGVtTGluaywgdkl0ZW1RdWFsaXR5ID0gT3V0Zml0dGVyOkdlbmVyYXRlSXRlbUxpbmsodkl0ZW0pDQoJCQkJCQ0KCQkJCQlpZiB2SXRlbUxpbmsNCgkJCQkJYW5kIHZJdGVtUXVhbGl0eSA+PSBJVEVNX1FVQUxJVFlfVU5DT01NT04gdGhlbg0KCQkJCQkJdGFibGUuaW5zZXJ0KHZTaG9wcGluZ0l0ZW1zLCB7SXRlbSA9IHZJdGVtLCBPdXRmaXROYW1lID0gdk91dGZpdDpHZXROYW1lKCksIExpbmsgPSB2SXRlbUxpbmt9KQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCgl0YWJsZS5zb3J0KHZTaG9wcGluZ0l0ZW1zLCBmdW5jdGlvbiAocEl0ZW0xLCBwSXRlbTIpDQoJCXJldHVybiAocEl0ZW0xLkl0ZW0uTGV2ZWwgb3IgMCkgPiAocEl0ZW0yLkl0ZW0uTGV2ZWwgb3IgMCkNCgllbmQpDQoJDQoJZm9yIF8sIHZJdGVtIGluIGlwYWlycyh2U2hvcHBpbmdJdGVtcykgZG8NCgkJaWYgc2VsZi5OdW1Ub29sdGlwc1Nob3duID49IHNlbGYuTWF4VG9vbHRpcHNTaG93biB0aGVuDQoJCQlicmVhaw0KCQllbmQNCgkJDQoJCWlmIG5vdCBzZWxmOlNob3BwaW5nSXRlbUlzU2hvd24odkl0ZW0uSXRlbSkgdGhlbg0KCQkJc2VsZjpBZGRTaG9wcGluZ0xpbmsodkl0ZW0uT3V0Zml0TmFtZSwgdkl0ZW0uSXRlbS5OYW1lLCB2SXRlbS5MaW5rKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPdXRmaXR0ZXIuX0V4dGVuZGVkQ29tcGFyZVRvb2x0aXA6SGlkZUNvbXBhcmVJdGVtcygpDQoJZm9yIF8sIHZUb29sdGlwIGluIGlwYWlycyhzZWxmLlRvb2x0aXBzKSBkbw0KCQl2VG9vbHRpcDpDbGVhckFsbFBvaW50cygpDQoJCXZUb29sdGlwOkhpZGUoKQ0KCWVuZA0KCQ0KCXNlbGYuTnVtVG9vbHRpcHNTaG93biA9IDANCglzZWxmLk1heFRvb2x0aXBzU2hvd24gPSA1DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9FeHRlbmRlZENvbXBhcmVUb29sdGlwOkl0ZW1zQXJlRXF1aXZhbGVudChwSXRlbUluZm8xLCBwSXRlbUluZm8yKQ0KCXJldHVybiBwSXRlbUluZm8xLkNvZGUgPT0gcEl0ZW1JbmZvMi5Db2RlDQoJYW5kIHBJdGVtSW5mbzEuU3ViQ29kZSA9PSBwSXRlbUluZm8yLlN1YkNvZGUNCglhbmQgKHBJdGVtSW5mbzEuVW5pcXVlSUQgPT0gcEl0ZW1JbmZvMi5VbmlxdWVJRCBvciBwSXRlbUluZm8xLkludlR5cGUgPT0gIklOVlRZUEVfQU1NTyIgb3IgcEl0ZW1JbmZvMi5JbnZUeXBlID09ICJJTlZUWVBFX0FNTU8iKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fRXh0ZW5kZWRDb21wYXJlVG9vbHRpcDpTaG9wcGluZ0l0ZW1Jc1Nob3duKHBJdGVtSW5mbykNCglsb2NhbCBfLCB2VG9vbHRpcExpbmsgPSBHYW1lVG9vbHRpcDpHZXRJdGVtKCkNCglsb2NhbCB2VG9vbHRpcEl0ZW1JbmZvID0gT3V0Zml0dGVyOkdldEl0ZW1JbmZvRnJvbUxpbmsodlRvb2x0aXBMaW5rKQ0KCQ0KCS0tT3V0Zml0dGVyOkRlYnVnTWVzc2FnZSgiU2hvcHBpbmdMaW5rSXNTaG93bjogQ29tcGFyaW5nIEdhbWVUb29sdGlwICVzIHRvICVzIiwgdG9zdHJpbmcodlRvb2x0aXBMaW5rKTpnc3ViKCJ8IiwgInx8IiksIHRvc3RyaW5nKHZMaW5rKTpnc3ViKCJ8IiwgInx8IikpDQoJDQoJaWYgc2VsZjpJdGVtc0FyZUVxdWl2YWxlbnQocEl0ZW1JbmZvLCB2VG9vbHRpcEl0ZW1JbmZvKSB0aGVuDQoJCXJldHVybiB0cnVlDQoJZW5kDQoJDQoJZm9yIHZJbmRleCA9IDEsIDEwMCBkbw0KCQlsb2NhbCB2VG9vbHRpcCA9IF9HWyJTaG9wcGluZ1Rvb2x0aXAiLi52SW5kZXhdDQoJCQ0KCQlpZiBub3QgdlRvb2x0aXAgdGhlbg0KCQkJYnJlYWsNCgkJZW5kDQoJCQ0KCQlpZiBub3QgdlRvb2x0aXA6SXNWaXNpYmxlKCkgdGhlbg0KCQkJYnJlYWsNCgkJZW5kDQoJCQ0KCQlsb2NhbCBfLCB2VG9vbHRpcExpbmsgPSB2VG9vbHRpcDpHZXRJdGVtKCkNCgkJbG9jYWwgdlRvb2x0aXBJdGVtSW5mbyA9IE91dGZpdHRlcjpHZXRJdGVtSW5mb0Zyb21MaW5rKHZUb29sdGlwTGluaykNCgkJDQoJCS0tT3V0Zml0dGVyOkRlYnVnTWVzc2FnZSgiU2hvcHBpbmdMaW5rSXNTaG93bjogQ29tcGFyaW5nIFNob3BwaW5nVG9vbHRpcCVkICVzIHRvICVzIiwgdkluZGV4LCB0b3N0cmluZyh2VG9vbHRpcExpbmspOmdzdWIoInwiLCAifHwiKSwgdG9zdHJpbmcodkxpbmspOmdzdWIoInwiLCAifHwiKSkNCgkJLS1PdXRmaXR0ZXI6RGVidWdUYWJsZSh2VG9vbHRpcEl0ZW1JbmZvLCAiSXRlbUluZm8iKQ0KCQkNCgkJaWYgc2VsZjpJdGVtc0FyZUVxdWl2YWxlbnQocEl0ZW1JbmZvLCB2VG9vbHRpcEl0ZW1JbmZvKSB0aGVuDQoJCQlyZXR1cm4gdHJ1ZQ0KCQllbmQNCgllbmQNCgkNCglmb3IgdkluZGV4LCB2VG9vbHRpcCBpbiBpcGFpcnMoc2VsZi5Ub29sdGlwcykgZG8NCgkJaWYgdkluZGV4ID4gc2VsZi5OdW1Ub29sdGlwc1Nob3duIHRoZW4NCgkJCWJyZWFrDQoJCWVuZA0KCQkNCgkJbG9jYWwgXywgdlRvb2x0aXBMaW5rID0gdlRvb2x0aXA6R2V0SXRlbSgpDQoJCWxvY2FsIHZUb29sdGlwSXRlbUluZm8gPSBPdXRmaXR0ZXI6R2V0SXRlbUluZm9Gcm9tTGluayh2VG9vbHRpcExpbmspDQoJCQ0KCQktLU91dGZpdHRlcjpEZWJ1Z01lc3NhZ2UoIlNob3BwaW5nTGlua0lzU2hvd246IENvbXBhcmluZyBPdXRmaXR0ZXJTaG9wcGluZ1Rvb2x0aXAlZCAlcyB0byAlcyIsIHZJbmRleCwgdG9zdHJpbmcodlRvb2x0aXBMaW5rKTpnc3ViKCJ8IiwgInx8IiksIHRvc3RyaW5nKHZMaW5rKTpnc3ViKCJ8IiwgInx8IikpDQoJCQ0KCQlpZiBzZWxmOkl0ZW1zQXJlRXF1aXZhbGVudChwSXRlbUluZm8sIHZUb29sdGlwSXRlbUluZm8pIHRoZW4NCgkJCXJldHVybiB0cnVlDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fRXh0ZW5kZWRDb21wYXJlVG9vbHRpcDpBZGRTaG9wcGluZ0xpbmsocFRpdGxlLCBwSXRlbU5hbWUsIHBMaW5rKQ0KCXNlbGYuTnVtVG9vbHRpcHNTaG93biA9IHNlbGYuTnVtVG9vbHRpcHNTaG93biArIDENCgkNCglsb2NhbCB2VG9vbHRpcCA9IHNlbGYuVG9vbHRpcHNbc2VsZi5OdW1Ub29sdGlwc1Nob3duXQ0KCQ0KCWlmIG5vdCB2VG9vbHRpcCB0aGVuDQoJCXZUb29sdGlwID0gQ3JlYXRlRnJhbWUoIkdhbWVUb29sdGlwIiwgIk91dGZpdHRlckNvbXBhcmVUb29sdGlwIi4uc2VsZi5OdW1Ub29sdGlwc1Nob3duLCBVSVBhcmVudCwgIlNob3BwaW5nVG9vbHRpcFRlbXBsYXRlIikNCgkJdlRvb2x0aXA6SGlkZSgpDQoJCQ0KCQlzZWxmLlRvb2x0aXBzW3NlbGYuTnVtVG9vbHRpcHNTaG93bl0gPSB2VG9vbHRpcA0KCWVsc2UNCgkJbG9jYWwgdlRvb2x0aXBOYW1lID0gdlRvb2x0aXA6R2V0TmFtZSgpDQoJCWxvY2FsIHZMaW5lID0gMg0KCQkNCgkJd2hpbGUgdHJ1ZSBkbw0KCQkJbG9jYWwgdlRleHRMZWZ0ID0gX0dbdlRvb2x0aXBOYW1lLi4iVGV4dExlZnQiLi52TGluZV0NCgkJCQ0KCQkJaWYgbm90IHZUZXh0TGVmdCB0aGVuDQoJCQkJYnJlYWsNCgkJCWVuZA0KCQkJDQoJCQlsb2NhbCB2UG9pbnQsIHZSZWxhdGl2ZVRvLCB2UmVsYXRpdmVQb2ludCwgdk9mZnNldFgsIHZPZmZzZXRZID0gdlRleHRMZWZ0OkdldFBvaW50KDEpDQoJCQkNCgkJCXZUZXh0TGVmdDpTZXRQb2ludCh2UG9pbnQsIHZSZWxhdGl2ZVRvLCB2UmVsYXRpdmVQb2ludCwgMCwgdk9mZnNldFkpDQoJCQkNCgkJCXZMaW5lID0gdkxpbmUgKyAxDQoJCWVuZA0KCWVuZA0KCQ0KCWxvY2FsIHZUb29sdGlwTmFtZSA9IHZUb29sdGlwOkdldE5hbWUoKQ0KCQ0KCXZUb29sdGlwOlNldE93bmVyKHNlbGYuQW5jaG9yVG9Ub29sdGlwLCAiQU5DSE9SX05PTkUiKQ0KCQ0KCWlmIHNlbGYuTGVmdFRvUmlnaHQgdGhlbg0KCQl2VG9vbHRpcDpTZXRQb2ludCgiVE9QTEVGVCIsIHNlbGYuQW5jaG9yVG9Ub29sdGlwLCAiVE9QUklHSFQiLCAwLCAwKQ0KCWVsc2UNCgkJdlRvb2x0aXA6U2V0UG9pbnQoIlRPUFJJR0hUIiwgc2VsZi5BbmNob3JUb1Rvb2x0aXAsICJUT1BMRUZUIiwgMCwgMCkNCgllbmQNCgkNCgl2VG9vbHRpcDpTZXRIeXBlcmxpbmsocExpbmspDQoJDQoJLS0gU2hpZnQgYWxsIGxpbmVzIGRvd24gYnkgb25lDQoJDQoJc2VsZjpTaGlmdFRvb2x0aXBEb3duKHZUb29sdGlwKQ0KCQ0KCS0tIFNldCB0aGUgZmlyc3QgbGluZSB0byB0aGUgb3V0Zml0IG5hbWUgYW5kIE91dGZpdHRlciBsYWJlbA0KCQ0KCWxvY2FsIHZUZXh0TGVmdCwgdlRleHRSaWdodCA9IF9HW3ZUb29sdGlwTmFtZS4uIlRleHRMZWZ0MSJdLCBfR1t2VG9vbHRpcE5hbWUuLiJUZXh0UmlnaHQxIl0NCgkNCgl2VGV4dExlZnQ6U2V0VGV4dChwVGl0bGUpDQoJdlRleHRMZWZ0OlNldFRleHRDb2xvcigwLjUsIDAuNSwgMC41KQ0KCQ0KCXZUZXh0UmlnaHQ6U2V0VGV4dChPdXRmaXR0ZXIuY1RpdGxlKQ0KCXZUZXh0UmlnaHQ6U2V0VGV4dENvbG9yKDAuNSwgMC41LCAwLjUpDQoJdlRleHRSaWdodDpTaG93KCkNCgkNCgktLSBDYWxsIExpYlRpcEhvb2tlciBjbGllbnRzIHNvIHRoZXkgY2FuIGFkZCBleHRyYSBpbmZvDQoJDQoJaWYgT3V0Zml0dGVyLkxpYlRpcEhvb2tlci5IYW5kbGVyTGlzdC5pdGVtIHRoZW4NCgkJZm9yIHZIYW5kbGVyIGluIHBhaXJzKE91dGZpdHRlci5MaWJUaXBIb29rZXIuSGFuZGxlckxpc3QuaXRlbSkgZG8NCgkJCXZIYW5kbGVyKHZUb29sdGlwLCBwSXRlbU5hbWUsIHBMaW5rKQ0KCQllbmQNCgllbmQNCgkNCgktLSBBZGQgIlVzZWQgYnk6IiBpbmZvIChzaG91bGQgaW50ZWdyYXRlIHRoaXMgd2l0aCBMaWJUaXBIb29rZXIpDQoJCQ0KCWxvY2FsIHZJdGVtSW5mbyA9IE91dGZpdHRlcjpHZXRJdGVtSW5mb0Zyb21MaW5rKHBMaW5rKQ0KCQ0KCWlmIHZJdGVtSW5mbyB0aGVuDQoJCU91dGZpdHRlcjpBZGRPdXRmaXRzVXNpbmdJdGVtVG9Ub29sdGlwKHZUb29sdGlwLCB2SXRlbUluZm8pDQoJZW5kDQoJDQoJdlRvb2x0aXA6U2hvdygpDQoJDQoJc2VsZi5BbmNob3JUb1Rvb2x0aXAgPSB2VG9vbHRpcA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlci5fRXh0ZW5kZWRDb21wYXJlVG9vbHRpcDpTaGlmdFRvb2x0aXBEb3duKHBUb29sdGlwKQ0KCWxvY2FsIHZUb29sdGlwTmFtZSA9IHBUb29sdGlwOkdldE5hbWUoKQ0KCWxvY2FsIHZOdW1MaW5lcyA9IHBUb29sdGlwOk51bUxpbmVzKCkNCgkNCgktLSBNYWtlIHJvb20gZm9yIHRoZSBsYXN0IGxpbmUNCgkNCglwVG9vbHRpcDpBZGRMaW5lKCIgIiwgTk9STUFMX0ZPTlRfQ09MT1IuciwgTk9STUFMX0ZPTlRfQ09MT1IuZywgTk9STUFMX0ZPTlRfQ09MT1IuYiwgMSkNCgkNCgktLSBTaGlmdCBhbGwgbGluZXMgZG93biwgc3RhcnRpbmcgZnJvbSB0aGUgYm90dG9tIGFuZCBnb2luZyB1cA0KCQ0KCWZvciB2TGluZSA9IHZOdW1MaW5lcywgMSwgLTEgZG8NCgkJbG9jYWwgdlRleHRMZWZ0LCB2VGV4dFJpZ2h0ID0gX0dbdlRvb2x0aXBOYW1lLi4iVGV4dExlZnQiLi52TGluZV0sIF9HW3ZUb29sdGlwTmFtZS4uIlRleHRSaWdodCIuLnZMaW5lXQ0KCQlsb2NhbCB2TmV4dFRleHRMZWZ0LCB2TmV4dFRleHRSaWdodCA9IF9HW3ZUb29sdGlwTmFtZS4uIlRleHRMZWZ0Ii4uKHZMaW5lICsgMSldLCBfR1t2VG9vbHRpcE5hbWUuLiJUZXh0UmlnaHQiLi4odkxpbmUgKyAxKV0NCgkJDQoJCXNlbGY6Q29weUZvbnRTdHJpbmcodlRleHRMZWZ0LCB2TmV4dFRleHRMZWZ0KQ0KCQlzZWxmOkNvcHlGb250U3RyaW5nKHZUZXh0UmlnaHQsIHZOZXh0VGV4dFJpZ2h0KQ0KCQkNCgkJLS0gQ29weSB0aGUgaG9yaXogb2Zmc2V0IGlmIGl0IGlzbid0IGxpbmUgMQ0KCQkNCgkJaWYgdkxpbmUgPiAxIHRoZW4NCgkJCWxvY2FsIHZQb2ludCwgdlJlbGF0aXZlVG8sIHZSZWxhdGl2ZVBvaW50LCB2T2Zmc2V0WCwgdk9mZnNldFkgPSB2VGV4dExlZnQ6R2V0UG9pbnQoMSkNCgkJCWxvY2FsIHZOZXh0UG9pbnQsIHZOZXh0UmVsYXRpdmVUbywgdk5leHRSZWxhdGl2ZVBvaW50LCB2TmV4dE9mZnNldFgsIHZOZXh0T2Zmc2V0WSA9IHZOZXh0VGV4dExlZnQ6R2V0UG9pbnQoMSkNCgkJCXZOZXh0VGV4dExlZnQ6Q2xlYXJBbGxQb2ludHMoKQ0KCQkJdk5leHRUZXh0TGVmdDpTZXRQb2ludCh2TmV4dFBvaW50LCB2TmV4dFJlbGF0aXZlVG8sIHZOZXh0UmVsYXRpdmVQb2ludCwgdk9mZnNldFgsIHZOZXh0T2Zmc2V0WSkNCgkJZW5kDQoJZW5kDQoJDQoJLS0gUmUtcG9zaXRpb24gYW55IHRleHR1cmVzIGJlaW5nIHVzZWQNCgkNCglmb3IgdkluZGV4ID0gMSwgcFRvb2x0aXA6TnVtTGluZXMoKSBkbw0KCQlsb2NhbCB2VGV4dHVyZSA9IF9HW3ZUb29sdGlwTmFtZS4uIlRleHR1cmUiLi52SW5kZXhdDQoJCQ0KCQlpZiBub3QgdlRleHR1cmUgdGhlbg0KCQkJYnJlYWsNCgkJZW5kDQoJCQ0KCQlpZiB2VGV4dHVyZTpJc1Zpc2libGUoKSB0aGVuDQoJCQlsb2NhbCB2UG9pbnQsIHZSZWxhdGl2ZVRvLCB2UmVsYXRpdmVQb2ludCwgdk9mZnNldFgsIHZPZmZzZXRZID0gdlRleHR1cmU6R2V0UG9pbnQoMSkNCgkJCQ0KCQkJdlJlbGF0aXZlVG8gPSB2UmVsYXRpdmVUbzpHZXROYW1lKCk6Z3N1YigiKCVkKykkIiwgZnVuY3Rpb24gKHBJbmRleCkgcmV0dXJuIHRvbnVtYmVyKHBJbmRleCkgKyAxIGVuZCkNCgkJCQ0KCQkJdlRleHR1cmU6Q2xlYXJBbGxQb2ludHMoKQ0KCQkJdlRleHR1cmU6U2V0UG9pbnQodlBvaW50LCB2UmVsYXRpdmVUbywgdlJlbGF0aXZlUG9pbnQsIHZPZmZzZXRYLCB2T2Zmc2V0WSkNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyLl9FeHRlbmRlZENvbXBhcmVUb29sdGlwOkNvcHlGb250U3RyaW5nKHBGcm9tU3RyaW5nLCBwVG9TdHJpbmcpDQoJLS0gcFRvU3RyaW5nOlNldEZvbnQocEZyb21TdHJpbmc6R2V0Rm9udCgpKQ0KCS0tIHBUb1N0cmluZzpTZXRKdXN0aWZ5SChwRnJvbVN0cmluZzpHZXRKdXN0aWZ5SCgpKQ0KCS0tIHBUb1N0cmluZzpTZXRKdXN0aWZ5VihwRnJvbVN0cmluZzpHZXRKdXN0aWZ5VigpKQ0KCS0tIHBUb1N0cmluZzpTZXRTaGFkb3dDb2xvcihwRnJvbVN0cmluZzpHZXRTaGFkb3dDb2xvcigpKQ0KCS0tIHBUb1N0cmluZzpTZXRTaGFkb3dPZmZzZXQocEZyb21TdHJpbmc6R2V0U2hhZG93T2Zmc2V0KCkpDQoJLS0gcFRvU3RyaW5nOlNldFNwYWNpbmcocEZyb21TdHJpbmc6R2V0U3BhY2luZygpKQ0KCXBUb1N0cmluZzpTZXRUZXh0Q29sb3IocEZyb21TdHJpbmc6R2V0VGV4dENvbG9yKCkpDQoJcFRvU3RyaW5nOlNldFRleHQocEZyb21TdHJpbmc6R2V0VGV4dCgpKQ0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpOZXdFbXB0eU91dGZpdChwTmFtZSkNCglsb2NhbCB2T3V0Zml0ID0NCgl7DQoJCU5hbWUgPSBwTmFtZSwNCgkJSXRlbXMgPSB7fSwNCgl9DQoJDQoJc2V0bWV0YXRhYmxlKHZPdXRmaXQsIE91dGZpdHRlci5fT3V0Zml0TWV0YVRhYmxlKQ0KCQ0KCXJldHVybiB2T3V0Zml0DQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOkdldEljb25JbmRleChwVGV4dHVyZSkNCglpZiBub3QgcFRleHR1cmUgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglsb2NhbCBfLCBfLCB2VGV4dHVyZSA9IHBUZXh0dXJlOmZpbmQoIihbXlxcXSopJCIpDQoNCglmb3IgdkluZGV4ID0gSU5WU0xPVF9GSVJTVF9FUVVJUFBFRCwgSU5WU0xPVF9MQVNUX0VRVUlQUEVEIGRvDQoJCWxvY2FsIHZUZXh0dXJlMiA9IEdldEludmVudG9yeUl0ZW1UZXh0dXJlKCJwbGF5ZXIiLCB2SW5kZXgpDQoJCQ0KCQlpZiB2VGV4dHVyZTIgdGhlbg0KCQkJXywgXywgdlRleHR1cmUyID0gdlRleHR1cmUyOmZpbmQoIihbXlxcXSopJCIpDQoJCQkNCgkJCWlmIHZUZXh0dXJlMiA9PSB2VGV4dHVyZSB0aGVuDQoJCQkJcmV0dXJuIC12SW5kZXgNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglsb2NhbCB2TnVtSWNvbnMgPSBHZXROdW1NYWNyb0ljb25zKCkNCgkNCglmb3IgdkluZGV4ID0gMSwgdk51bUljb25zIGRvDQoJCWxvY2FsIHZUZXh0dXJlMiA9IEdldE1hY3JvSWNvbkluZm8odkluZGV4KQ0KCQlfLCBfLCB2VGV4dHVyZTIgPSB2VGV4dHVyZTI6ZmluZCgiKFteXFxdKikkIikNCgkJDQoJCWlmIHZUZXh0dXJlMiA9PSB2VGV4dHVyZSB0aGVuDQoJCQlyZXR1cm4gdkluZGV4DQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE91dGZpdHRlcjpTdW1tb25Db21wYW5pb25CeU5hbWUocE5hbWUsIHBEZWxheSkNCglsb2NhbCB2TnVtQ29tcGFuaW9ucyA9IEdldE51bUNvbXBhbmlvbnMoIkNSSVRURVIiKQ0KCWxvY2FsIHZMb3dlck5hbWUgPSBwTmFtZTpsb3dlcigpDQoNCglmb3IgdkluZGV4ID0gMSwgdk51bUNvbXBhbmlvbnMgZG8NCgkJbG9jYWwgdkNyZWF0dXJlSUQsIHZOYW1lLCB2U3BlbGxJRCwgdkljb24sIHZJc1N1bW1vbmVkID0gR2V0Q29tcGFuaW9uSW5mbygiQ1JJVFRFUiIsIHZJbmRleCkNCgkJDQoJCWlmIHZOYW1lOmxvd2VyKCkgPT0gdkxvd2VyTmFtZSB0aGVuDQoJCQlpZiBub3QgdklzU3VtbW9uZWQgdGhlbg0KCQkJCWlmIHBEZWxheSB0aGVuDQoJCQkJCU91dGZpdHRlci5TY2hlZHVsZXJMaWI6U2NoZWR1bGVUYXNrKDIsIGZ1bmN0aW9uICgpIENhbGxDb21wYW5pb24oIkNSSVRURVIiLCB2SW5kZXgpIGVuZCkNCgkJCQllbHNlDQoJCQkJCUNhbGxDb21wYW5pb24oIkNSSVRURVIiLCB2SW5kZXgpDQoJCQkJZW5kDQoJCQllbmQNCgkJCQ0KCQkJcmV0dXJuIHRydWUNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT3V0Zml0dGVyOlJ1bihwVGV4dCkNCglsb2NhbCB2Q29tbWFuZCA9IHBUZXh0Om1hdGNoKCJeKC9bXiVzXSspIikgb3IgIiINCglsb2NhbCB2TWVzc2FnZQ0KDQoJaWYgdkNvbW1hbmQgfj0gcFRleHQgdGhlbg0KCQl2TWVzc2FnZSA9IHBUZXh0OnN1Yih2Q29tbWFuZDpsZW4oKSArIDIpOw0KCWVsc2UNCgkJdk1lc3NhZ2UgPSAiIg0KCWVuZA0KDQoJdkNvbW1hbmQgPSB2Q29tbWFuZDp1cHBlcigpDQoJDQoJZm9yIHZDb21tYW5kSUQsIHZDb21tYW5kRnVuYyBpbiBwYWlycyhTbGFzaENtZExpc3QpIGRvDQoJCWxvY2FsIHZJbmRleCA9IDENCgkJbG9jYWwgdlN0cmluZyA9IF9HWyJTTEFTSF8iLi52Q29tbWFuZElELi52SW5kZXhdDQoJCQ0KCQl3aGlsZSB2U3RyaW5nIGRvDQoJCQlpZiB2U3RyaW5nOnVwcGVyKCkgPT0gdkNvbW1hbmQgdGhlbg0KCQkJCXZDb21tYW5kRnVuYyhwVGV4dCkNCgkJCQlyZXR1cm4NCgkJCWVuZA0KCQkJdkluZGV4ID0gdkluZGV4ICsgMQ0KCQkJdlN0cmluZyA9IF9HWyJTTEFTSF8iLi52Q29tbWFuZElELi52SW5kZXhdDQoJCWVuZA0KCWVuZA0KCQ0KZW5kDQo=